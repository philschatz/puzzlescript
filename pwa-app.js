!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=364)}([function(e,t,r){"use strict";function n(e,t,r,n,o,l,i){try{var s=e[l](i),a=s.value}catch(e){return void r(e)}s.done?t(a):Promise.resolve(a).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(o,l){var i=e.apply(t,r);function s(e){n(i,o,l,s,a,"next",e)}function a(e){n(i,o,l,s,a,"throw",e)}s(void 0)})}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s,a,u;function c(e){var t=[];return e.forEach(function(e){e.forEach(function(e){t.push(e)})}),t}function f(e){var t;return function(){t&&clearTimeout(t),t=setTimeout(function(){e()},10)}}function h(e){switch(e){case s.UP:return s.DOWN;case s.DOWN:return s.UP;case s.LEFT:return s.RIGHT;case s.RIGHT:return s.LEFT;default:throw new Error('BUG: Invalid direction: "'.concat(e,'"'))}}function d(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;if(!e.has(s))return!1}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return!0}function p(e,t){var r=new Set(e),n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;r.add(a)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}function v(e,t){var r=new Set,n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;e.has(a)&&r.add(a)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}function w(e,t){var r=new Set(e),n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;r.delete(a)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}r.d(t,"d",function(){return s}),r.d(t,"b",function(){return a}),r.d(t,"e",function(){return u}),r.d(t,"g",function(){return c}),r.d(t,"f",function(){return f}),r.d(t,"i",function(){return h}),r.d(t,"n",function(){return d}),r.d(t,"l",function(){return p}),r.d(t,"o",function(){return v}),r.d(t,"m",function(){return w}),r.d(t,"h",function(){return _}),r.d(t,"k",function(){return S}),r.d(t,"q",function(){return k}),r.d(t,"j",function(){return E}),r.d(t,"c",function(){return g}),r.d(t,"p",function(){return C}),r.d(t,"a",function(){return T}),function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e.ACTION="ACTION",e.STATIONARY="STATIONARY",e.RANDOMDIR="RANDOMDIR"}(s||(s={})),function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e.ACTION="ACTION",e.UNDO="UNDO",e.RESTART="RESTART"}(a||(a={})),function(e){e.RELATIVE_LEFT="<",e.RELATIVE_RIGHT=">",e.RELATIVE_UP="^",e.RELATIVE_DOWN="V"}(u||(u={}));var y,g,m=1,b=null;function _(e){if(b){if(b.length<=m-1)throw new Error("BUG: the list of random values for testing was too short.\n            See calls to setRandomValuesForTesting([...]).\n            The list was [".concat(b,"]. Index being requested is ").concat(m-1));var t=b[m-1];return m++,t}var r=1e4*Math.sin(m++);return Math.round((r-Math.floor(r))*(e-1))}function S(){m=1}function k(e){var t=e.getPlayer().getSprites(),r=new Set(t),n=!0,o=!1,l=void 0;try{for(var s,a=r[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value.getCollisionLayer(),c=!0,f=!1,h=void 0;try{for(var d,p=e.objects[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var w=d.value;w.getCollisionLayer()===u&&r.add(w)}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}}catch(e){o=!0,l=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}var y=!0,g=!1,m=void 0;try{for(var b,_=e.winConditions[Symbol.iterator]();!(y=(b=_.next()).done);y=!0){var S=b.value,k=!0,E=!1,C=void 0;try{for(var T,O=S.a11yGetTiles()[Symbol.iterator]();!(k=(T=O.next()).done);k=!0){var M=T.value,x=!0,R=!1,A=void 0;try{for(var I,L=M.getSprites()[Symbol.iterator]();!(x=(I=L.next()).done);x=!0){var P=I.value;r.add(P)}}catch(e){R=!0,A=e}finally{try{x||null==L.return||L.return()}finally{if(R)throw A}}}}catch(e){E=!0,C=e}finally{try{k||null==O.return||O.return()}finally{if(E)throw C}}}}catch(e){g=!0,m=e}finally{try{y||null==_.return||_.return()}finally{if(g)throw m}}var F=!0,N=!1,D=void 0;try{for(var B,G=e.rules[Symbol.iterator]();!(F=(B=G.next()).done);F=!0){var j=B.value,U=!0,W=!1,H=void 0;try{for(var q,z=j.a11yGetConditionSprites()[Symbol.iterator]();!(U=(q=z.next()).done);U=!0){var V=q.value;if(v(V,r).size>0){var K=!0,J=!1,Y=void 0;try{for(var X,$=V[Symbol.iterator]();!(K=(X=$.next()).done);K=!0){var Z=X.value;r.add(Z)}}catch(e){J=!0,Y=e}finally{try{K||null==$.return||$.return()}finally{if(J)throw Y}}}}}catch(e){W=!0,H=e}finally{try{U||null==z.return||z.return()}finally{if(W)throw H}}}}catch(e){N=!0,D=e}finally{try{F||null==G.return||G.return()}finally{if(N)throw D}}var Q=e.getMagicBackgroundSprite();return Q&&r.delete(Q),new Set(i(r).filter(function(e){return!e.isTransparent()}))}function E(e,t){return new Promise(function(r){var n=setInterval(function(){var e=t();e&&(clearInterval(n),r(e))},e)})}!function(e){e.BREAKPOINT="DEBUGGER",e.BREAKPOINT_REMOVE="DEBUGGER_REMOVE"}(y||(y={})),function(e){e.PAUSE="PAUSE",e.RESUME="RESUME",e.TICK="TICK",e.PRESS="PRESS",e.CLOSE="CLOSE",e.ON_GAME_CHANGE="ON_GAME_CHANGE",e.ON_PRESS="ON_PRESS",e.ON_MESSAGE="ON_MESSAGE",e.ON_MESSAGE_DONE="ON_MESSAGE_DONE",e.ON_LEVEL_LOAD="ON_LEVEL_LOAD",e.ON_LEVEL_CHANGE="ON_LEVEL_CHANGE",e.ON_WIN="ON_WIN",e.ON_SOUND="ON_SOUND",e.ON_TICK="ON_TICK",e.ON_PAUSE="ON_PAUSE",e.ON_RESUME="ON_RESUME"}(g||(g={}));var C=function(e,t){var r=Date.now(),n=Math.min(e.realtimeInterval||1e3,e.keyRepeatInterval||1e3,e.againInterval||1e3);return(n>100||Number.isNaN(n))&&(n=.01),r-t>=1e3*n},T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subHandlers=t||[]}var t,r,n;return t=e,(r=[{key:"onGameChange",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.subHandlers[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;i.onGameChange&&i.onGameChange(e)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"onPress",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.subHandlers[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;i.onPress&&i.onPress(e)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"onMessage",value:function(){var e=o(regeneratorRuntime.mark(function e(t){var r,n,o,l,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,n=!1,o=void 0,e.prev=3,l=this.subHandlers[Symbol.iterator]();case 5:if(r=(i=l.next()).done){e.next=14;break}if(s=i.value,e.t0=s.onMessage,!e.t0){e.next=11;break}return e.next=11,s.onMessage(t);case 11:r=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t1=e.catch(3),n=!0,o=e.t1;case 20:e.prev=20,e.prev=21,r||null==l.return||l.return();case 23:if(e.prev=23,!n){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[3,16,20,28],[21,,23,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onLevelLoad",value:function(e,t){var r=!0,n=!1,o=void 0;try{for(var l,i=this.subHandlers[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;s.onLevelLoad&&s.onLevelLoad(e,t)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"onLevelChange",value:function(e,t,r){var n=!0,o=!1,l=void 0;try{for(var i,s=this.subHandlers[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;a.onLevelChange&&a.onLevelChange(e,t,r)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"onWin",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.subHandlers[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var l=n.value;l.onWin&&l.onWin()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"onSound",value:function(){var e=o(regeneratorRuntime.mark(function e(t){var r,n,o,l,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=!0,n=!1,o=void 0,e.prev=3,l=this.subHandlers[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)(s=i.value).onSound&&s.onSound(t);e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),n=!0,o=e.t0;case 11:e.prev=11,e.prev=12,r||null==l.return||l.return();case 14:if(e.prev=14,!n){e.next=17;break}throw o;case 17:return e.finish(14);case 18:return e.finish(11);case 19:case"end":return e.stop()}},e,this,[[3,7,11,19],[12,,14,18]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onTick",value:function(e,t,r,n){var o=!0,l=!1,i=void 0;try{for(var s,a=this.subHandlers[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;u.onTick&&u.onTick(e,t,r,n)}}catch(e){l=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}}},{key:"onPause",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.subHandlers[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var l=n.value;l.onPause&&l.onPause()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"onResume",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.subHandlers[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var l=n.value;l.onResume&&l.onResume()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}}])&&l(t.prototype,r),n&&l(t,n),e}()},function(e,t,r){var n=r(4),o=r(26),l=r(18),i=r(19),s=r(27),a=function e(t,r,a){var u,c,f,h,d=t&e.F,p=t&e.G,v=t&e.P,w=t&e.B,y=p?n:t&e.S?n[r]||(n[r]={}):(n[r]||{}).prototype,g=p?o:o[r]||(o[r]={}),m=g.prototype||(g.prototype={});for(u in p&&(a=r),a)f=((c=!d&&y&&void 0!==y[u])?y:a)[u],h=w&&c?s(f,n):v&&"function"==typeof f?s(Function.call,f):f,y&&i(y,u,f,t&e.U),g[u]!=f&&l(g,u,h),v&&m[u]!=f&&(m[u]=f)};n.core=o,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,r){"use strict";var n,o,l,i,s,a,u,c,f,h,d,p,v,w;r.d(t,"e",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"h",function(){return u}),r.d(t,"i",function(){return c}),r.d(t,"g",function(){return f}),r.d(t,"f",function(){return h}),r.d(t,"a",function(){return d}),r.d(t,"c",function(){return p}),r.d(t,"j",function(){return v}),r.d(t,"d",function(){return w}),function(e){e.RANDOM="RANDOM",e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e.VERTICAL="VERTICAL",e.HORIZONTAL="HORIZONTAL",e.ORTHOGONAL="ORTHOGONAL",e.PERPENDICULAR="PERPENDICULAR",e.PARALLEL="PARALLEL",e.MOVING="MOVING",e.LATE="LATE",e.RIGID="RIGID"}(n||(n={})),function(e){e.NO="NO",e.LEFT="LEFT",e.RIGHT="RIGHT",e.UP="UP",e.DOWN="DOWN",e.RANDOMDIR="RANDOMDIR",e.RANDOM="RANDOM",e.STATIONARY="STATIONARY",e.MOVING="MOVING",e.ACTION="ACTION",e.VERTICAL="VERTICAL",e.HORIZONTAL="HORIZONTAL",e.PERPENDICULAR="PERPENDICULAR",e.PARALLEL="PARALLEL",e.ORTHOGONAL="ORTHOGONAL",e.ARROW_ANY="ARROW_ANY"}(o||(o={})),function(e){e.RESTART="RESTART",e.UNDO="UNDO",e.TITLESCREEN="TITLESCREEN",e.STARTGAME="STARTGAME",e.STARTLEVEL="STARTLEVEL",e.ENDLEVEL="ENDLEVEL",e.ENDGAME="ENDGAME",e.SHOWMESSAGE="SHOWMESSAGE",e.CLOSEMESSAGE="CLOSEMESSAGE"}(l||(l={})),function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e.HORIZONTAL="HORIZONTAL",e.VERTICAL="VERTICAL"}(i||(i={})),function(e){e.CREATE="CREATE",e.DESTROY="DESTROY",e.CANTMOVE="CANTMOVE"}(s||(s={})),function(e){e.HEX8="HEX8",e.HEX6="HEX6",e.NAME="NAME"}(a||(a={})),function(e){e.NO_PIXELS="NO_PIXELS",e.WITH_PIXELS="WITH_PIXELS"}(u||(u={})),function(e){e.SIMPLE="LEGEND_ITEM_SIMPLE",e.OR="LEGEND_ITEM_OR",e.AND="LEGEND_ITEM_AND"}(c||(c={})),function(e){e.WHEN="SOUND_WHEN",e.SFX="SOUND_SFX",e.SPRITE_DIRECTION="SOUND_SPRITE_DIRECTION",e.SPRITE_MOVE="SOUND_SPRITE_MOVE",e.SPRITE_EVENT="SOUND_SPRITE_EVENT"}(f||(f={})),function(e){e.GROUP="RULE_GROUP",e.LOOP="RULE_LOOP",e.SIMPLE="RULE_SIMPLE"}(h||(h={})),function(e){e.SIMPLE="BRACKET_SIMPLE",e.ELLIPSIS="BRACKET_ELLIPSIS"}(d||(d={})),function(e){e.MESSAGE="COMMAND_MESSAGE",e.AGAIN="COMMAND_AGAIN",e.CANCEL="COMMAND_CANCEL",e.CHECKPOINT="COMMAND_CHECKPOINT",e.RESTART="COMMAND_RESTART",e.WIN="COMMAND_WIN",e.SFX="COMMAND_SFX"}(p||(p={})),function(e){e.SIMPLE="WINCONDITION_SIMPLE",e.ON="WINCONDITION_ON"}(v||(v={})),function(e){e.MESSAGE="LEVEL_MESSAGE",e.MAP="LEVEL_MAP"}(w||(w={}))},function(e,t,r){var n=r(6);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===r(e)?null!==e:"function"==typeof e}},function(e,t,r){"use strict";(function(e){r.d(t,"f",function(){return T}),r.d(t,"g",function(){return O}),r.d(t,"e",function(){return M}),r.d(t,"h",function(){return x}),r.d(t,"b",function(){return I}),r.d(t,"c",function(){return F}),r.d(t,"a",function(){return L}),r.d(t,"d",function(){return B});var n=r(21),o=r(147),l=r(2),i=r(40),s=r(0),a=r(13);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m=r(106),b=50,_=(s.d.RIGHT,s.d.DOWN,s.d.LEFT,s.d.UP,function e(t,r){g(this,e),this.condition=t,this.action=r}),S=function(e){function t(e,r,n){var o;return g(this,t),(o=p(this,v(t).call(this,e,r))).extra=n,o}return w(t,_),t}(),k=function(){function e(t,r){g(this,e),this.cell=t,this.messages=r}return h(e,[{key:"hasCell",value:function(){return!0}},{key:"getCell",value:function(){return this.cell}},{key:"getCommand",value:function(){throw new Error("BUG: check hasCommand first")}}]),e}(),E=function(){function e(t){g(this,e),this.command=t,this.messages=[]}return h(e,[{key:"getCommand",value:function(){return this.command}},{key:"hasCell",value:function(){return!1}},{key:"getCell",value:function(){throw new Error("BUG: check hasCell first")}}]),e}();var C,T=function(e){function t(e,r,n){var o;return g(this,t),(o=p(this,v(t).call(this,e))).rules=n,o.isRandom=r,o}return w(t,a["a"]),h(t,[{key:"hasMatches",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.rules[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){if(o.value.hasMatches(e))return!0}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return!1}},{key:"evaluate",value:function(e,t){var r;n.b.isLevel(n.a.DEBUG)&&(r=Date.now());var o,l=[];for(o=0;o<350;o++){if(349===o)throw new Error("BUG: Iterated too many times in startloop or + (rule group)\n".concat(this.toString()));if(this.isRandom){var i=this.rules.filter(function(t){return t.hasMatches(e)});return 0===i.length?[]:1===i.length?i[0].evaluate(e,!0):i[Object(s.h)(i.length)].evaluate(e,!0)}var a=!1,u=!0,c=!1,f=void 0;try{for(var h,d=this.rules[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var p=h.value.evaluate(e,t);if(p.length>0){if(p.filter(function(e){return e.hasCell()}).length>0&&(a=!0),t)return p;l.push(p)}}}catch(e){c=!0,f=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}if(!a)break}return n.b.isLevel(n.a.DEBUG)&&l.length>0&&(r&&Date.now()-r>30?n.b.debug("Rule ".concat(this.__getSourceLineAndColumn().lineNum," applied. ").concat(1===o?"":"(x".concat(o,")")," [[").concat(Date.now()-r,"ms]]")):n.b.debug("Rule ".concat(this.__getSourceLineAndColumn().lineNum," applied. ").concat(1===o?"":"(x".concat(o,")")))),Object(s.g)(l)}},{key:"clearCaches",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.rules[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.clearCaches()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"getChildRules",value:function(){return this.rules}},{key:"isLate",value:function(){return this.rules[0].isLate()}},{key:"hasRigid",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.rules[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){if(n.value.hasRigid())return!0}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return!1}},{key:"addCellsToEmptyRules",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.rules[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.addCellsToEmptyRules(e)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"toKey",value:function(){return this.rules.map(function(e){return e.toKey()}).join("\n")}},{key:"a11yGetConditionSprites",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,l=this.rules[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;e=[].concat(c(e),c(i.a11yGetConditionSprites()))}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e}}]),t}(),O=function(e){function t(){return g(this,t),p(this,v(t).apply(this,arguments))}return w(t,T),t}(),M=function(e){function t(e,r,n,o,l,i,s){var a;if(g(this,t),(a=p(this,v(t).call(this,e))).conditionBrackets=r,a.actionBrackets=n,a.commands=o,a._isLate=l,a.isRigid=i,a.debugFlag=s,a.isSubscribedToCellChanges=!1,n.length>0)for(var u=0;u<r.length;u++)r[u].prepareAction(n[u]);return a}return w(t,a["a"]),h(t,[{key:"toKey",value:function(){var e=this.conditionBrackets.map(function(e){return e.toKey()}),t=this.actionBrackets.map(function(e){return e.toKey()}),r=this.commands.map(function(e){return function(e){switch(e.type){case l.c.AGAIN:case l.c.CANCEL:case l.c.CHECKPOINT:case l.c.RESTART:case l.c.WIN:return e.type;case l.c.MESSAGE:return"".concat(e.type,":").concat(e.message);case l.c.SFX:return"".concat(e.type,":").concat(e.sound.type,":").concat(e.sound.soundCode)}}(e)});return"{Late?".concat(this._isLate,"} {Rigid?").concat(this.isRigid,"} ").concat(e," -> ").concat(t," ").concat(r.join(" ")," {debugger?").concat(this.debugFlag,"}")}},{key:"getChildRules",value:function(){return[]}},{key:"subscribeToCellChanges",value:function(){if(!this.isSubscribedToCellChanges){var e=!0,t=!1,r=void 0;try{for(var n,o=this.conditionBrackets[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.subscribeToNeighborChanges()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}this.isSubscribedToCellChanges=!0}}},{key:"clearCaches",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.conditionBrackets[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.clearCaches()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"getMatches",value:function(e){for(var t=[],r=0;r<this.conditionBrackets.length;r++){var n=this.conditionBrackets[r],o=this.actionBrackets[r],l=n.getMatches(e,o);if(0===l.length)return[];t.push(l)}return t}},{key:"evaluate",value:function(e,t){var r=[];var n=this.getMatches(e);if(0===n.length)return[];if(this.actionBrackets.length>0){var o=function(e){var t=[[]],r=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,a=[],u=!0,c=!1,f=void 0;try{for(var h,d=s[Symbol.iterator]();!(u=(h=d.next()).done);u=!0)for(var p=h.value,v=0;v<t.length;v++){var w=t[v].concat([p]);a.push(w)}}catch(e){c=!0,f=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}t=a}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}(n),l=[],i=!0,a=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var h=c.value,d=!0,p=new Map,v=!0,w=!1,y=void 0;try{for(var g,m=h[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;if(!b.doesStillMatch()){d=!1;break}b.populateMagicOrTiles(p)}}catch(e){w=!0,y=e}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}if(d){var _=!0,S=!1,k=void 0;try{for(var C,T=h[Symbol.iterator]();!(_=(C=T.next()).done);_=!0){var O=C.value;O.doesStillMatch()&&l.push(O.evaluate(p))}}catch(e){S=!0,k=e}finally{try{_||null==T.return||T.return()}finally{if(S)throw k}}if(t)break}}}catch(e){a=!0,u=e}finally{try{i||null==f.return||f.return()}finally{if(a)throw u}}r=Object(s.g)(l)}var M=!0,x=!1,R=void 0;try{for(var A,I=this.commands[Symbol.iterator]();!(M=(A=I.next()).done);M=!0){var L=A.value;r.push(new E(L))}}catch(e){x=!0,R=e}finally{try{M||null==I.return||I.return()}finally{if(x)throw R}}return r}},{key:"hasMatches",value:function(e){for(var t=0;t<this.conditionBrackets.length;t++){var r=this.conditionBrackets[t],n=this.actionBrackets[t];if(!r.hasMatches(e,n))return!1}return!0}},{key:"isLate",value:function(){return this._isLate}},{key:"hasRigid",value:function(){return this.isRigid}},{key:"canCollapseBecauseBracketsMatch",value:function(e){for(var t=0;t<this.conditionBrackets.length;t++){if(this.conditionBrackets[t]!==e.conditionBrackets[t])return!1;if(this.conditionBrackets[t]._getAllNeighbors().length>1)return!1}for(var r=0;r<this.actionBrackets.length;r++)if(this.actionBrackets[r]!==e.actionBrackets[r])return!1;return!0}},{key:"addCellsToEmptyRules",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.conditionBrackets[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.addCellsToEmptyRules(e)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"a11yGetConditionSprites",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,l=this.conditionBrackets[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;e=[].concat(c(e),c(i.a11yGetSprites()))}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e}}]),t}(),x=function(e){function t(e,r,n,o,l,i){var s;return g(this,t),(s=p(this,v(t).call(this,e)))._isNegated=r,s._isRandom=n,s._direction=o,s._tile=l,s.neighbors=new Set,s._debugFlag=i,s.trickleCells=new Set,s}return w(t,a["a"]),h(t,[{key:"toKey",value:function(e){var t=this._tile.getSprites().map(function(e){return e.getName()}).sort();return e?"{-?".concat(this._isNegated,"} {#?").concat(this._isRandom,'} dir="').concat(this._direction,'" [').concat(t.join(" "),"]"):"{-?".concat(this._isNegated,"} {#?").concat(this._isRandom,'} dir="').concat(this._direction,'" [').concat(t.join(" "),"]{debugging?").concat(!!this._debugFlag,"}")}},{key:"equals",value:function(e){return this._isNegated===e._isNegated&&this._tile.equals(e._tile)&&this._direction===e._direction&&this._isRandom===e._isRandom}},{key:"clearCaches",value:function(){}},{key:"isNo",value:function(){return this._isNegated}},{key:"isRandom",value:function(){return this._isRandom}},{key:"getCollisionLayers",value:function(){var e=new Set,t=!0,r=!1,n=void 0;try{for(var o,l=this._tile.getSprites()[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;e.add(i.getCollisionLayer())}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e}},{key:"subscribeToCellChanges",value:function(e){this.neighbors.add(e),this._tile.subscribeToCellChanges(this)}},{key:"addCells",value:function(e,t,r,n){if(this._direction&&n!==this._direction?this._tile.isOr()&&this.matchesFirstCell(r,n)?!this.isNo():this.isNo():!this.isNo()){var o=!0,l=!1,i=void 0;try{for(var s,a=r[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;this.trickleCells.add(u)}}catch(e){l=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}var c=!0,f=!1,h=void 0;try{for(var d,p=this.neighbors[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){d.value.addCells(this,t,r,n)}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}else{var v=!0,w=!1,y=void 0;try{for(var g,m=r[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;this.trickleCells.delete(b)}}catch(e){w=!0,y=e}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}var _=!0,S=!1,k=void 0;try{for(var E,C=this.neighbors[Symbol.iterator]();!(_=(E=C.next()).done);_=!0){E.value.removeCells(this,t,r)}}catch(e){S=!0,k=e}finally{try{_||null==C.return||C.return()}finally{if(S)throw k}}}}},{key:"updateCells",value:function(e,t,r){if(this.matchesFirstCell(t,r)){var n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;this.trickleCells.add(a)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}if(r){var u=!0,c=!1,f=void 0;try{for(var h,d=this.neighbors[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){h.value.updateCells(this,e,t,r)}}catch(e){c=!0,f=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}}}else{var p=!0,v=!1,w=void 0;try{for(var y,g=t[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var m=y.value;this.trickleCells.delete(m)}}catch(e){v=!0,w=e}finally{try{p||null==g.return||g.return()}finally{if(v)throw w}}var b=!0,_=!1,S=void 0;try{for(var k,E=this.neighbors[Symbol.iterator]();!(b=(k=E.next()).done);b=!0){k.value.removeCells(this,e,t)}}catch(e){_=!0,S=e}finally{try{b||null==E.return||E.return()}finally{if(_)throw S}}}}},{key:"removeCells",value:function(e,t,r){if(this._tile.isOr()?this.matchesFirstCell(r,null):this.isNo()){var n=!0,o=!1,l=void 0;try{for(var i,a=r[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;this.trickleCells.add(u)}}catch(e){o=!0,l=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}var c=!0,f=!1,h=void 0;try{for(var d,p=this.neighbors[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){d.value.addCells(this,t,r,s.d.STATIONARY)}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}else{var v=!0,w=!1,y=void 0;try{for(var g,m=r[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;this.trickleCells.delete(b)}}catch(e){w=!0,y=e}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}var _=!0,S=!1,k=void 0;try{for(var E,C=this.neighbors[Symbol.iterator]();!(_=(E=C.next()).done);_=!0){E.value.removeCells(this,t,r)}}catch(e){S=!0,k=e}finally{try{_||null==C.return||C.return()}finally{if(S)throw k}}}}},{key:"hasCell",value:function(e){return this.trickleCells.has(e)}},{key:"matchesCellWantsToMove",value:function(e,t){var r=this._tile.hasCell(e);if(this._isNegated!==(r&&(this._direction===t||!this._direction)))return!0;if(this._direction){var n=!0,o=!1,l=void 0;try{for(var i,s=this._tile.getSpritesThatMatch(e)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(this._direction===e.getWantsToMove(a))return!0}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return!1}return!1}},{key:"matchesFirstCell",value:function(e,t){return this.matchesCellWantsToMove(e[0],t)}}]),t}(),R=function(e){function t(e,r,n,o){var l;return g(this,t),(l=p(this,v(t).call(this,e))).direction=r,l.debugFlag=o,l.allNeighbors=n,l.firstCells=new Set,l}return w(t,a["a"]),h(t,[{key:"_getAllNeighbors",value:function(){return this.allNeighbors}},{key:"hasMatches",value:function(e,t){return this.getMatches(e,t).length>0}}]),t}(),A=function(){function e(t){g(this,e),this.cellsAndNeighbors=t,this.cellKeys=new Map;var r=!0,n=!1,o=void 0;try{for(var l,i=this.cellsAndNeighbors[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value.cell;this.cellKeys.set(s,s.toKey())}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}return h(e,[{key:"firstCell",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.cellsAndNeighbors[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){return n.value.cell}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}throw new Error("BUG: ? No cells were included in the match")}},{key:"lastCell",value:function(){var e,t=!0,r=!1,n=void 0;try{for(var o,l=this.cellsAndNeighbors[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){e=o.value.cell}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}if(e)return e;throw new Error("BUG: ? No cells were included in the match")}},{key:"doesStillMatch",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.cellsAndNeighbors[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var l=n.value,i=l.cell,s=l.condition;if(i.toKey()!==this.cellKeys.get(i)){if(!s.matchesCellSimple(i))return!1;this.cellKeys.set(i,i.toKey())}}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return!0}},{key:"populateMagicOrTiles",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.cellsAndNeighbors[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value,s=i.cell;i.condition.populateMagicOrTiles(s,e)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"evaluate",value:function(e){var t=[],r=!0,n=!1,o=void 0;try{for(var l,i=this.cellsAndNeighbors[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,a=s.cell,u=s.condition,c=s.action;if(!c)throw new Error("BUG: Should not have tried to evaluate something when there is no action");var f=u.evaluate(c,a,e);f&&t.push(f)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}}]),e}(),I=function(t){function r(e,t,n,o){var l;g(this,r),(l=p(this,v(r).call(this,e,t,n,o))).actionDebugFlag=null,l.neighbors=n,l.ellipsisBracketListeners=new Map,l.spritesPresentInRowOrColumn=l.neighbors[0].spritesPresent.union(l.neighbors.map(function(e){return e.spritesPresent}));var s=[],a=!0,u=!1,c=void 0;try{for(var f,h=l.neighbors[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value,w=!0,y=!1,m=void 0;try{for(var b,_=d.anySpritesPresent[Symbol.iterator]();!(w=(b=_.next()).done);w=!0){var S=b.value;s.push(S)}}catch(e){y=!0,m=e}finally{try{w||null==_.return||_.return()}finally{if(y)throw m}}}}catch(e){u=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}return l.anySpritesPresentInRowOrColumn=(new i.a).union(s),l}return w(r,R),h(r,[{key:"toKey",value:function(){var e=this.dependsOnDirection()?this.direction:"";return"{".concat(e,"[").concat(this.neighbors.map(function(e){return e.toKey()}).join("|"),"]{debugging?").concat(!!this.debugFlag,"}}")}},{key:"dependsOnDirection",value:function(){return this.neighbors.length>1||!!this.neighbors.find(function(e){return e.dependsOnDirection()})}},{key:"subscribeToNeighborChanges",value:function(){var e=this;this.shouldUseOnDemandMethod()||this.neighbors.forEach(function(t,r){t.subscribeToTileChanges(e,r)})}},{key:"addEllipsisBracket",value:function(e,t){this.ellipsisBracketListeners.set(e,t)}},{key:"clearCaches",value:function(){this.firstCells.clear();var e=!0,t=!1,r=void 0;try{for(var n,o=this.neighbors[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.clearCaches()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"getNeighbors",value:function(){return this.neighbors}},{key:"prepareAction",value:function(e){var t=e;this.actionDebugFlag=t.debugFlag;for(var r=0;r<this.neighbors.length;r++){var n=this.neighbors[r],o=t.neighbors[r];n.prepareAction(o)}}},{key:"addCellsToEmptyRules",value:function(e){if(1===this.neighbors.length&&0===this.neighbors[0]._tilesWithModifier.size){var t=!0,r=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;this._addFirstCell(i)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}}},{key:"_addFirstCell",value:function(e){this.firstCells.add(e);var t=!0,r=!1,n=void 0;try{for(var o,l=this.ellipsisBracketListeners[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=u(o.value,2),s=i[0],a=i[1];s.addFirstCell(this,e,a)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"addCell",value:function(e,t,r,n,o,l){if(this.matchesDownstream(o,e)){var i=this.matchesUpstream(o,e);if(i)this._addFirstCell(i);else{var s=this.getUpstream(o,e);s&&this._removeFirstCell(s)}}else{this.getUpstream(o,e)&&this._removeFirstCell(o)}}},{key:"removeCell",value:function(e,t,r,n,o){var l=this.getFirstCellToRemove(o,e);l&&this.firstCells.has(l)&&this._removeFirstCell(l)}},{key:"shouldUseOnDemandMethod",value:function(){return"ondemand"===e.env.PUZZLESCRIPT_METHOD}},{key:"getMatchesByTrickling",value:function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=this.firstCells[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;this.addToCellMatches(r,a,t)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}},{key:"getMatchesByLooping",value:function(e,t){var r=[],n=e.getCells(),o=n.length,l=n[0].length;switch(this.direction){case s.d.UP:case s.d.DOWN:for(var i=0;i<l;i++)if(e.colContainsSprites(i,this.spritesPresentInRowOrColumn,this.anySpritesPresentInRowOrColumn))for(var a=0;a<o;a++)this.addIfCellMatches(r,e.getCell(a,i),t);break;case s.d.LEFT:case s.d.RIGHT:for(var u=0;u<o;u++)if(e.rowContainsSprites(u,this.spritesPresentInRowOrColumn,this.anySpritesPresentInRowOrColumn))for(var c=0;c<l;c++)this.addIfCellMatches(r,e.getCell(u,c),t);break;default:throw new Error('BUG: Unsupported Direction "'.concat(this.direction,'"'))}return r}},{key:"getMatches",value:function(t,r){var n;if(this.shouldUseOnDemandMethod())n=this.getMatchesByLooping(t,r);else if(n=this.getMatchesByTrickling(t,r),e.env.VERIFY_MATCHES){var o=this.getMatchesByLooping(t,r);if(n.length!==o.length)throw this.getMatchesByTrickling(t,r),this.getMatchesByLooping(t,r),new Error("Match lengths differ. Expected ".concat(o.length," but found ").concat(n.length,". \n").concat(this.toString()))}return n}},{key:"a11yGetSprites",value:function(){var e=new Set,t=!0,r=!1,n=void 0;try{for(var o,l=this.neighbors[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value,s=!0,a=!1,u=void 0;try{for(var c,f=i._tilesWithModifier[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,d=!0,p=!1,v=void 0;try{for(var w,y=h._tile.getSprites()[Symbol.iterator]();!(d=(w=y.next()).done);d=!0){var g=w.value;e.add(g)}}catch(e){p=!0,v=e}finally{try{d||null==y.return||y.return()}finally{if(p)throw v}}}}catch(e){a=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(a)throw u}}}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return[e]}},{key:"_removeFirstCell",value:function(e){if(this.firstCells.has(e)){0,this.firstCells.delete(e);var t=!0,r=!1,n=void 0;try{for(var o,l=this.ellipsisBracketListeners[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=u(o.value,2),s=i[0],a=i[1];s.removeFirstCell(this,e,a)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}}},{key:"matchesDownstream",value:function(e,t){for(var r=!0,n=e,o=t+1;o<this.neighbors.length;o++)if(!(n=n.getNeighbor(this.direction))||0!==this.neighbors[o]._tilesWithModifier.size&&!this.neighbors[o].matchesCellSimple(n)){r=!1;break}return r}},{key:"getUpstream",value:function(e,t){for(var r=e,n=t-1;n>=0;n--)if(!(r=r.getNeighbor(Object(s.i)(this.direction))))return null;return r}},{key:"matchesUpstream",value:function(e,t){for(var r=!0,n=e,o=t-1;o>=0;o--)if(!(n=n.getNeighbor(Object(s.i)(this.direction)))||0!==this.neighbors[o]._tilesWithModifier.size&&!this.neighbors[o].matchesCellSimple(n)){r=!1;break}return r?n:null}},{key:"getFirstCellToRemove",value:function(e,t){for(var r=!0,n=e,o=t-1;o>=0;o--)if(!(n=n.getNeighbor(Object(s.i)(this.direction)))){r=!1;break}return r?n:null}},{key:"addToCellMatches",value:function(e,t,r){for(var n=[],o=t,l=!0,i=0;i<this.neighbors.length;i++){if(!o){l=!1;break}var s=this.neighbors[i],a=null;r&&(a=r.neighbors[i]||null);var u={cell:o,condition:s,action:a};n.push(u),o=o.getNeighbor(this.direction)}l&&e.push(new A(n))}},{key:"addIfCellMatches",value:function(e,t,r){this.neighbors[0].matchesCellSimple(t)&&this.matchesDownstream(t,0)&&this.addToCellMatches(e,t,r)}}]),r}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(C||(C={}));var L,P=function(){function e(){g(this,e),this.map=new Map}return h(e,[{key:"clear",value:function(){this.map.clear()}},{key:"getB",value:function(e){return this.map.get(e)}},{key:"add",value:function(e,t){var r=this.map.get(e);return r||(r=new Set,this.map.set(e,r)),!r.has(t)&&(r.add(t),!0)}},{key:"deleteAllA",value:function(e){this.map.delete(e)}},{key:"deleteAllB",value:function(e){var t=new Set,r=!0,n=!1,o=void 0;try{for(var l,i=this.map[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=u(l.value,2),a=s[0],c=s[1];c.has(e)&&(c.delete(e),0===c.size&&(this.map.delete(a),t.add(a)))}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"sizeA",value:function(){return this.map.size}}]),e}(),F=function(e){function t(e,r,n,o,l){var i;return g(this,t),(i=p(this,v(t).call(this,e,r,[].concat(c(n),c(o)),l))).beforeEllipsisBracket=new I(e,r,n,l),i.afterEllipsisBracket=new I(e,r,o,l),i.linkages=new P,i}return w(t,R),h(t,[{key:"subscribeToNeighborChanges",value:function(){this.beforeEllipsisBracket.subscribeToNeighborChanges(),this.afterEllipsisBracket.subscribeToNeighborChanges(),this.beforeEllipsisBracket.addEllipsisBracket(this,C.BEFORE),this.afterEllipsisBracket.addEllipsisBracket(this,C.AFTER)}},{key:"toKey",value:function(){return"[".concat(this.direction," ").concat(this.beforeEllipsisBracket.toKey()," ... ").concat(this.afterEllipsisBracket.toKey(),"]}")}},{key:"clearCaches",value:function(){this.firstCells.clear(),this.linkages.clear(),this.beforeEllipsisBracket.clearCaches(),this.afterEllipsisBracket.clearCaches()}},{key:"prepareAction",value:function(e){var t=e;this.beforeEllipsisBracket.prepareAction(t.beforeEllipsisBracket),this.afterEllipsisBracket.prepareAction(t.afterEllipsisBracket)}},{key:"addCellsToEmptyRules",value:function(e){this.beforeEllipsisBracket.addCellsToEmptyRules(e),this.afterEllipsisBracket.addCellsToEmptyRules(e)}},{key:"addCell",value:function(e,t,r,n,o,l){throw new Error("BUG: We should not be subscribed to these events")}},{key:"removeCell",value:function(e,t,r,n,o){throw new Error("BUG: We should not be subscribed to these events")}},{key:"addFirstCell",value:function(e,t,r){}},{key:"removeFirstCell",value:function(e,t,r){if(this.checkInvariants(),e===this.beforeEllipsisBracket){if(this.linkages.deleteAllA(t),this.firstCells.has(t))throw new Error("BUG: Unreachable code")}else{if(e!==this.afterEllipsisBracket)throw new Error("BUG: Bracket should only ever be the before-ellipsis or after-ellipsis one");if(this.linkages.deleteAllB(t).size>0)throw new Error("BUG: Unreachable code")}this.checkInvariants()}},{key:"getMatches",value:function(e,t){var r,n,o=[];t?(r=this.beforeEllipsisBracket.getMatches(e,t.beforeEllipsisBracket),n=this.afterEllipsisBracket.getMatches(e,t.afterEllipsisBracket)):(r=this.beforeEllipsisBracket.getMatches(e,null),n=this.afterEllipsisBracket.getMatches(e,null));var l=new P;if(0===r.length||0===n.length)return[];switch(this.direction){case s.d.UP:case s.d.DOWN:var i=!0,a=!1,u=void 0;try{for(var f,h=r[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){var d=f.value;l.add(d.lastCell().colIndex,d)}}catch(e){a=!0,u=e}finally{try{i||null==h.return||h.return()}finally{if(a)throw u}}var p=!0,v=!1,w=void 0;try{for(var y,g=n[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var m=y.value,b=m.firstCell(),_=b.colIndex,S=b.rowIndex,k=!0,E=!1,C=void 0;try{for(var T,O=(l.getB(_)||[])[Symbol.iterator]();!(k=(T=O.next()).done);k=!0){var M=T.value,x=M.lastCell().rowIndex;(this.direction===s.d.DOWN?x<S:S<x)&&o.push(new A(c(M.cellsAndNeighbors).concat(c(m.cellsAndNeighbors))))}}catch(e){E=!0,C=e}finally{try{k||null==O.return||O.return()}finally{if(E)throw C}}}}catch(e){v=!0,w=e}finally{try{p||null==g.return||g.return()}finally{if(v)throw w}}break;case s.d.LEFT:case s.d.RIGHT:var R=!0,I=!1,L=void 0;try{for(var F,N=r[Symbol.iterator]();!(R=(F=N.next()).done);R=!0){var D=F.value;l.add(D.lastCell().rowIndex,D)}}catch(e){I=!0,L=e}finally{try{R||null==N.return||N.return()}finally{if(I)throw L}}var B=!0,G=!1,j=void 0;try{for(var U,W=n[Symbol.iterator]();!(B=(U=W.next()).done);B=!0){var H=U.value,q=H.firstCell(),z=(S=q.rowIndex,_=q.colIndex,!0),V=!1,K=void 0;try{for(var J,Y=(l.getB(S)||[])[Symbol.iterator]();!(z=(J=Y.next()).done);z=!0){var X=J.value,$=X.lastCell().colIndex;(this.direction===s.d.RIGHT?$<_:_<$)&&o.push(new A(c(X.cellsAndNeighbors).concat(c(H.cellsAndNeighbors))))}}catch(e){V=!0,K=e}finally{try{z||null==Y.return||Y.return()}finally{if(V)throw K}}}}catch(e){G=!0,j=e}finally{try{B||null==W.return||W.return()}finally{if(G)throw j}}break;default:throw new Error("BUG: Invalid direction ".concat(this.direction))}return o}},{key:"a11yGetSprites",value:function(){return[].concat(c(this.beforeEllipsisBracket.a11yGetSprites()),c(this.afterEllipsisBracket.a11yGetSprites()))}},{key:"checkInvariants",value:function(){if(this.firstCells.size!==this.linkages.sizeA())throw new Error("BUG: Invariant violation")}}]),t}();!function(e){e.ADD="ADD",e.REPLACE="REPLACE",e.REMOVE="REMOVE",e.MOVE="MOVE"}(L||(L={}));var N=function(){function e(t,r,n,o,l){if(g(this,e),!t)throw new Error("BUG: collisionLayer is not set");this.collisionLayer=t,this.actionTileWithModifier=r,this.mightNotFindConditionButThatIsOk=n,this.conditionSpritesToRemove=o,this.newDirection=l}return h(e,[{key:"replace",value:function(e,t,r){var n=!1,o=[];if(this.actionTileWithModifier){var l;if(this.actionTileWithModifier.isRandom()){var i=this.actionTileWithModifier._tile.getSprites();l=[i[Object(s.h)(i.length)]]}else if(this.actionTileWithModifier._tile.isOr()){var a=t.get(this.actionTileWithModifier._tile);if(!a)throw new Error("BUG: Magic OR tile not found\n".concat(this.actionTileWithModifier.toString()));l=a}else l=this.actionTileWithModifier._tile.getSprites();var u=[],c=[],f=!0,h=!1,d=void 0;try{for(var p,v=l[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=p.value,y=w.getCollisionLayer(),g=this.newDirection||e.getCollisionLayerWantsToMove(y),m=void 0;if(e.hasSprite(w)){if(!g)throw new Error("BUG: Invariant violation. if the sprite exists then wantsToMove must also exist (at least it would be STATIONARY)");m=e.updateSprite(w,g)}else{var b=e.getSpriteByCollisionLayer(y);b?c.push({oldSprite:b,newSprite:w}):u.push(w),m=e.addSprite(w,g)}n=n||m}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}o.push({type:L.ADD,cell:e,sprites:u}),o.push({type:L.REPLACE,cell:e,replacements:c})}else{var _=new Set,S=e.getSpriteByCollisionLayer(this.collisionLayer);if(!S&&this.mightNotFindConditionButThatIsOk)return{didActuallyChange:!1,messages:[]};if(!S)throw new Error("BUG: No tile found");if(!this.conditionSpritesToRemove)throw new Error("BUG: Not implemented (just commented out)");if(this.conditionSpritesToRemove._tile.isOr()){if(!r.has(this.conditionSpritesToRemove._tile)){var k=S.getSprites(),E=!0,C=!1,T=void 0;try{for(var O,M=this.conditionSpritesToRemove._tile.getSprites()[Symbol.iterator]();!(E=(O=M.next()).done);E=!0){var x=O.value;if(k.indexOf(x)>=0){var R=e.removeSprite(x);_.add(x),n=n||R,R&&r.add(this.conditionSpritesToRemove._tile);break}}}catch(e){C=!0,T=e}finally{try{E||null==M.return||M.return()}finally{if(C)throw T}}}}else{var A=new Set(this.conditionSpritesToRemove._tile.getSprites()),I=!0,P=!1,F=void 0;try{for(var N,D=S.getSprites()[Symbol.iterator]();!(I=(N=D.next()).done);I=!0){var B=N.value;if(A.has(B)){var G=e.removeSprite(B);_.add(B),n=n||G}}}catch(e){P=!0,F=e}finally{try{I||null==D.return||D.return()}finally{if(P)throw F}}}o.push({type:L.REMOVE,cell:e,sprites:_})}return{didActuallyChange:n,messages:o}}}]),e}(),D=function(){function e(t,r,n){if(g(this,e),!t)throw new Error("BUG: collisionLayer is not set");this.collisionLayer=t,this.direction=r,this.mightNotFindConditionButThatIsOk=n}return h(e,[{key:"replace",value:function(e){var t=this.direction;if(this.mightNotFindConditionButThatIsOk&&!e.getSpriteByCollisionLayer(this.collisionLayer))return{didActuallyChange:!1};if(this.direction===s.d.RANDOMDIR){if(e.getCollisionLayerWantsToMove(this.collisionLayer)!==s.d.STATIONARY)return{didActuallyChange:!1};switch(Object(s.h)(4)){case 0:t=s.d.UP;break;case 1:t=s.d.DOWN;break;case 2:t=s.d.LEFT;break;case 3:t=s.d.RIGHT;break;default:throw new Error("BUG: invalid random number chosen")}}return{didActuallyChange:e.setWantsToMoveCollisionLayer(this.collisionLayer,t)}}}]),e}(),B=function(e){function t(e,r,n){var l;g(this,t),(l=p(this,v(t).call(this,e)))._tilesWithModifier=r,l.brackets=new Map,l.debugFlag=n,l.staticCache=new Map,l.spritesPresent=new i.a,l.spritesMissing=new i.a,l.anySpritesPresent=new Set,l.spriteMovementsPresent=new Map,l.orTileMovementsPresent=new Map,l.trickleCells=new Set,l.lruCache=new o.a(b),l.cacheYesBitSets=new Map,l.cacheNoBitSets=new Map,l.cacheDirections=new Map,l.cacheMultiCollisionLayerTiles=new Set;var s=c(r),a=s.filter(function(e){return e.isNo()}),u=s.filter(function(e){return!e.isNo()}),f=!0,h=!1,d=void 0;try{for(var w,y=u[Symbol.iterator]();!(f=(w=y.next()).done);f=!0){var _=w.value;if(_._tile.hasSingleCollisionLayer()){var S=!0,k=!1,E=void 0;try{for(var C,T=_._tile.getSprites()[Symbol.iterator]();!(S=(C=T.next()).done);S=!0){var O=C.value,M=O.getCollisionLayer();_._direction&&l.cacheDirections.set(M,_._direction);var x=l.cacheYesBitSets.get(M);x||(x=new m,l.cacheYesBitSets.set(M,x)),x.set(M.getBitSetIndexOf(O))}}catch(e){k=!0,E=e}finally{try{S||null==T.return||T.return()}finally{if(k)throw E}}}else l.cacheMultiCollisionLayerTiles.add(_);if(_._tile.isOr())l.anySpritesPresent.add(new i.a(_._tile.getSprites())),_._direction&&l.orTileMovementsPresent.set(_._tile,_._direction);else{l.spritesPresent.addAll(_._tile.getSprites());var R=!0,A=!1,I=void 0;try{for(var L,P=_._tile.getSprites()[Symbol.iterator]();!(R=(L=P.next()).done);R=!0){var F=L.value;if(_._direction){var N=l.spriteMovementsPresent.get(F.getCollisionLayer());if(N&&N!==_._direction)throw new Error("BUG??? prev=".concat(N," ").concat(_._direction));l.spriteMovementsPresent.set(F.getCollisionLayer(),_._direction)}}}catch(e){A=!0,I=e}finally{try{R||null==P.return||P.return()}finally{if(A)throw I}}}}}catch(e){h=!0,d=e}finally{try{f||null==y.return||y.return()}finally{if(h)throw d}}var D=!0,B=!1,G=void 0;try{for(var j,U=a[Symbol.iterator]();!(D=(j=U.next()).done);D=!0){var W=j.value;if(W._tile.hasSingleCollisionLayer()){var H=!0,q=!1,z=void 0;try{for(var V,K=W._tile.getSprites()[Symbol.iterator]();!(H=(V=K.next()).done);H=!0){var J=V.value,Y=J.getCollisionLayer();if(W._direction)throw new Error("BUG: Unreachable code");var X=l.cacheNoBitSets.get(Y);X||(X=new m,l.cacheNoBitSets.set(Y,X)),X.set(Y.getBitSetIndexOf(J))}}catch(e){q=!0,z=e}finally{try{H||null==K.return||K.return()}finally{if(q)throw z}}}else l.cacheMultiCollisionLayerTiles.add(W);W._tile.isOr(),l.spritesMissing.addAll(W._tile.getSprites())}}catch(e){B=!0,G=e}finally{try{D||null==U.return||U.return()}finally{if(B)throw G}}return l}return w(t,a["a"]),h(t,[{key:"toKey",value:function(){return"{".concat(c(this._tilesWithModifier).map(function(e){return e.toKey()}).sort().join(" ")," debugging?").concat(!!this.debugFlag,"}")}},{key:"dependsOnDirection",value:function(){return!!c(this._tilesWithModifier).find(function(e){return!!e._direction})}},{key:"prepareAction",value:function(e){if(!this.staticCache.has(e)){var t=new Map,r=new Map,n=!0,o=!1,l=void 0;try{for(var i,a=this._tilesWithModifier[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(c._tile.isOr()&&!c._tile.hasSingleCollisionLayer())c.isNo()||r.set(c._tile,c);else if(c._tile.hasSingleCollisionLayer()){var f=c._tile.getCollisionLayer();if(!f)throw new Error("BUG: Tile is not assigned to a collision layer\n".concat(c._tile.toString()));t.has(f)||t.set(f,new S(c,null,!1))}else{var h=!0,d=!1,p=void 0;try{for(var v,w=c._tile.getSprites()[Symbol.iterator]();!(h=(v=w.next()).done);h=!0){var y=v.value.getCollisionLayer();t.has(y)||t.set(y,new S(c,null,!1))}}catch(e){d=!0,p=e}finally{try{h||null==w.return||w.return()}finally{if(d)throw p}}}}}catch(e){o=!0,l=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}var g=new Map(r.entries()),m=!0,b=!1,_=void 0;try{for(var k,E=e._tilesWithModifier[Symbol.iterator]();!(m=(k=E.next()).done);m=!0){var C=k.value;if(C._tile.isOr()&&!C._tile.hasSingleCollisionLayer()){var T=r.get(C._tile);if(T){g.delete(C._tile);var O=T;if(O._direction!==C._direction){var M=!0,R=!1,A=void 0;try{for(var I,L=C._tile.getSprites()[Symbol.iterator]();!(M=(I=L.next()).done);M=!0){var P=I.value,F=P.getCollisionLayer();t.has(F)||t.set(F,new S(new x(O.__source,O._isNegated,O._isRandom,O._direction,P,O._debugFlag),new x(C.__source,C._isNegated,C._isRandom,C._direction,P,C._debugFlag),!0))}}catch(e){R=!0,A=e}finally{try{M||null==L.return||L.return()}finally{if(R)throw A}}}}else if(C.isNo()){var B=!0,G=!1,j=void 0;try{for(var U,W=C._tile.getSprites()[Symbol.iterator]();!(B=(U=W.next()).done);B=!0){var H=U.value.getCollisionLayer();if(!t.has(H)){var q=new x(C.__source,!1,C._isRandom,C._direction,C._tile,C._debugFlag);t.set(H,new S(q,null,!0))}}}catch(e){G=!0,j=e}finally{try{B||null==W.return||W.return()}finally{if(G)throw j}}}else{var z=!0,V=!1,K=void 0;try{for(var J,Y=C._tile.getSprites()[Symbol.iterator]();!(z=(J=Y.next()).done);z=!0){var X=J.value.getCollisionLayer();if(!t.has(X)){var $=new x(C.__source,!1,C._isRandom,C._direction,C._tile,C._debugFlag);t.set(X,new S(null,$,!0))}}}catch(e){V=!0,K=e}finally{try{z||null==Y.return||Y.return()}finally{if(V)throw K}}}}else{var Z=!0,Q=!1,ee=void 0;try{for(var te,re=C.getCollisionLayers()[Symbol.iterator]();!(Z=(te=re.next()).done);Z=!0){var ne=te.value;if(!ne)throw new Error("BUG: Tile is not assigned to a collision layer.\n".concat(C._tile.toString()));var oe=t.get(ne),le=oe&&oe.condition||null;if(le&&le.equals(C))t.delete(ne);else if(C.isNo())if(oe){if(oe.condition===C)throw new Error("BUG: Unreachable code")}else{var ie=new x(C.__source,!1,!1,C._direction,C._tile,C._debugFlag);t.set(ne,new S(ie,null,!0))}else oe?oe.action=C:t.set(ne,new S(null,C,!1))}}catch(e){Q=!0,ee=e}finally{try{Z||null==re.return||re.return()}finally{if(Q)throw ee}}}}}catch(e){b=!0,_=e}finally{try{m||null==E.return||E.return()}finally{if(b)throw _}}if(g.size>0){var se=!0,ae=!1,ue=void 0;try{for(var ce,fe=g.values()[Symbol.iterator]();!(se=(ce=fe.next()).done);se=!0){var he=ce.value,de=!0,pe=!1,ve=void 0;try{for(var we,ye=he._tile.getSprites()[Symbol.iterator]();!(de=(we=ye.next()).done);de=!0){var ge=we.value.getCollisionLayer();if(!t.has(ge)){var me=new x(he.__source,!1,!1,he._direction,he._tile,he._debugFlag);t.set(ge,new S(me,null,!0))}}}catch(e){pe=!0,ve=e}finally{try{de||null==ye.return||ye.return()}finally{if(pe)throw ve}}}}catch(e){ae=!0,ue=e}finally{try{se||null==fe.return||fe.return()}finally{if(ae)throw ue}}}var be=new Set,_e=new Set,Se=!0,ke=!1,Ee=void 0;try{for(var Ce,Te=t.entries()[Symbol.iterator]();!(Se=(Ce=Te.next()).done);Se=!0){var Oe=u(Ce.value,2),Me=Oe[0],xe=Oe[1],Re=xe.condition,Ae=xe.action,Ie=xe.extra;if(Re&&Ae){if(Re!==Ae){var Le=null;(Re._direction!==Ae._direction||Re.isNo())&&(Le=Ae._direction||s.d.STATIONARY),!Re._tile.equals(Ae._tile)||Re.isNo()?be.add(new N(Me,Ae,Ie,null,Le)):Le&&_e.add(new D(Me,Le,Ie))}}else Re?Re.isNo()||be.add(new N(Me,null,Ie,Re,null)):Ae&&(Ae.isNo()||be.add(new N(Me,Ae,Ie,null,Ae._direction||s.d.STATIONARY)))}}catch(e){ke=!0,Ee=e}finally{try{Se||null==Te.return||Te.return()}finally{if(ke)throw Ee}}this.staticCache.set(e,{replaceTiles:be,replaceDirections:_e})}}},{key:"evaluate",value:function(e,t,r){var n=this.staticCache.get(e);if(!n)throw new Error("BUG: Missing actionNeighbor. Should have been prepared before");var o=n.replaceTiles,l=n.replaceDirections,i=!1,s=!1,a=new Set,u=[],f=!0,h=!1,d=void 0;try{for(var p,v=o[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=p.value.replace(t,r,a),y=w.didActuallyChange,g=w.messages;y&&(u=[].concat(c(u),c(g))),i=i||y||!1}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}var m=!0,b=!1,_=void 0;try{for(var S,E=l[Symbol.iterator]();!(m=(S=E.next()).done);m=!0){y=S.value.replace(t).didActuallyChange;s=s||y}}catch(e){b=!0,_=e}finally{try{m||null==E.return||E.return()}finally{if(b)throw _}}return i||s?new k(t,u):null}},{key:"clearCaches",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this._tilesWithModifier[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.clearCaches()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"populateMagicOrTiles",value:function(e,t){var r=!0,n=!1,o=void 0;try{for(var l,i=this._tilesWithModifier[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var a=l.value;if(!a.isNo()&&a._tile.isOr()){var u=Object(s.o)(new Set(a._tile.getSprites()),e.getSpritesAsSet());t.set(a._tile,u)}}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"subscribeToTileChanges",value:function(e,t){var r=this,n=this.brackets.get(e);n||(n=new Set,this.brackets.set(e,n)),n.add(t),this._tilesWithModifier.forEach(function(e){e.subscribeToCellChanges(r)})}},{key:"matchesCellSimple",value:function(e){return this.matchesCell(e,null,null)}},{key:"addCells",value:function(e,t,r,n){var o=!0,l=!1,i=void 0;try{for(var s,a=r[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var c=s.value;if(this.matchesTiles(c)){this.trickleCells.add(c);var f=!0,h=!1,d=void 0;try{for(var p,v=this.brackets.entries()[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=u(p.value,2),y=w[0],g=w[1],m=!0,b=!1,_=void 0;try{for(var S,k=g[Symbol.iterator]();!(m=(S=k.next()).done);m=!0){var E=S.value;y.addCell(E,this,e,t,c,n)}}catch(e){b=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(b)throw _}}}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}else if(this.trickleCells.has(c))throw new Error("BUG: Should be unreachable")}}catch(e){l=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}}},{key:"updateCells",value:function(e,t,r,n){this.addCells(e,t,r,n)}},{key:"removeCells",value:function(e,t,r){var n=!0,o=!1,l=void 0;try{for(var i,s=r[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(!this.matchesTiles(a)){this.trickleCells.delete(a);var c=!0,f=!1,h=void 0;try{for(var d,p=this.brackets.entries()[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=u(d.value,2),w=v[0],y=v[1],g=!0,m=!1,b=void 0;try{for(var _,S=y[Symbol.iterator]();!(g=(_=S.next()).done);g=!0){var k=_.value;w.removeCell(k,this,e,t,a)}}catch(e){m=!0,b=e}finally{try{g||null==S.return||S.return()}finally{if(m)throw b}}}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"matchesCell",value:function(e,t,r){var n=this;return this.lruCache.get("[".concat(e.toKey(),"]"),function(){var t=e.spriteBitSet.containsAll(n.spritesPresent)&&e.spriteBitSet.containsNone(n.spritesMissing);if(t){var r=!0,o=!1,l=void 0;try{for(var i,s=n.anySpritesPresent[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var a=i.value;t=t&&e.spriteBitSet.containsAny(a)}}catch(e){o=!0,l=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw l}}}if(t){var c=!0,f=!1,h=void 0;try{for(var d,p=n.spriteMovementsPresent[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=u(d.value,2),w=v[0];v[1]!==e.getCollisionLayerWantsToMove(w)&&(t=!1)}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}if(t){var y=!0,g=!1,m=void 0;try{for(var b,_=n.orTileMovementsPresent[Symbol.iterator]();!(y=(b=_.next()).done);y=!0){var S=u(b.value,2),k=S[0],E=S[1];if(k.hasSingleCollisionLayer())E!==e.getCollisionLayerWantsToMove(k.getCollisionLayer())&&(t=!1);else{var C=!1,T=!1,O=!0,M=!1,x=void 0;try{for(var R,A=k.getSprites()[Symbol.iterator]();!(O=(R=A.next()).done);O=!0){var I=R.value;e.spriteBitSet.has(I)&&(C=!0,E===e.getCollisionLayerWantsToMove(I.getCollisionLayer())&&(T=!0))}}catch(e){M=!0,x=e}finally{try{O||null==A.return||A.return()}finally{if(M)throw x}}if(t=t&&T,!C)throw new Error("BUG: Could not find sprite. One should have already been matched before")}}}catch(e){g=!0,m=e}finally{try{y||null==_.return||_.return()}finally{if(g)throw m}}}return t})}},{key:"matchesTiles",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this._tilesWithModifier[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){if(!o.value.hasCell(e))return!1}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return!0}}]),t}()}).call(this,r(107))},function(e,t,r){var n=r(63)("wks"),o=r(42),l=r(4).Symbol,i="function"==typeof l;(e.exports=function(e){return n[e]||(n[e]=i&&l[e]||(i?l:o)("Symbol."+e))}).store=n},function(e,t,r){var n=r(29),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){e.exports=!r(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(3),o=r(110),l=r(31),i=Object.defineProperty;t.f=r(10)?Object.defineProperty:function(e,t,r){if(n(e),t=l(t,!0),n(r),o)try{return i(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(32);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){for(var r=1,n=1,o=0,l=0,i=null,s=null,a=-1;o<t;){var u=e.charAt(o++);"\n"===u?(r++,n=1,a=l,l=o):"\r"!==u&&n++}var c=e.indexOf("\n",l);if(-1===c)c=e.length;else{var f=e.indexOf("\n",c+1);i=(i=-1===f?e.slice(c):e.slice(c,f)).replace(/^\r?\n/,"").replace(/\r$/,"")}return a>=0&&(s=e.slice(a,l).replace(/\r?\n$/,"")),{lineNum:r,colNum:n,line:e.slice(l,c).replace(/\r$/,""),prevLine:s,nextLine:i}}r.d(t,"a",function(){return l});var l=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("BUG: failed to provide the source when constructing this object");this.__source=t,this.__coverageCount=null}var t,r,l;return t=e,(r=[{key:"__getSourceLineAndColumn",value:function(){var e=this.__source;return o(e.code,e.sourceOffset)}},{key:"toString",value:function(){var e=this.__source,t=o(e.code,e.sourceOffset),r=t.lineNum,n=t.colNum,l=t.line;return"".concat(l,"\nSource: ").concat(r,":").concat(n)}},{key:"toSourceString",value:function(){var e=this.__source,t=o(e.code,e.sourceOffset).lineNum;return e.code.split("\n")[t-1]}},{key:"__getLineAndColumnRange",value:function(){var e=this.__source,t=o(e.code,e.sourceOffset),r=t.lineNum,n=t.colNum;return{start:{line:r,col:n},end:{line:r,col:n+1}}}},{key:"__incrementCoverage",value:function(){0}}])&&n(t.prototype,r),l&&n(t,l),e}()},function(e,t,r){"use strict";r.d(t,"d",function(){return v}),r.d(t,"f",function(){return w}),r.d(t,"e",function(){return y}),r.d(t,"c",function(){return m}),r.d(t,"a",function(){return b}),r.d(t,"b",function(){return _});var n=r(0),o=r(13);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=r(106),v=function(e){function t(e,r,n){var o;return s(this,t),(o=c(this,f(t).call(this,e))).name=r,o._optionalLegendChar=n,o.trickleCells=new Set,o.trickleTiles=new Set,o.trickleTilesWithModifier=new Set,o.allSpritesBitSetIndex=-1,o.collisionLayer=null,o.bitSet=null,o}return h(t,o["a"]),u(t,[{key:"isOr",value:function(){return!1}},{key:"equals",value:function(e){return this===e}},{key:"getName",value:function(){return this.name}},{key:"isBackground",value:function(){return"background"===this.name.toLowerCase()}},{key:"_getDescendantTiles",value:function(){return[]}},{key:"getSprites",value:function(){return[this]}},{key:"hasCollisionLayer",value:function(){return!!this.collisionLayer}},{key:"hasSingleCollisionLayer",value:function(){return this.hasCollisionLayer()}},{key:"setCollisionLayer",value:function(e){this.collisionLayer=e}},{key:"setCollisionLayerAndIndex",value:function(e,t){this.collisionLayer=e,this.bitSet=new p,this.bitSet.set(t)}},{key:"getCollisionLayer",value:function(){if(!this.collisionLayer)throw new Error("ERROR: This sprite was not in a Collision Layer\n".concat(this.toString()));return this.collisionLayer}},{key:"clearCaches",value:function(){this.trickleCells.clear()}},{key:"hasCell",value:function(e){return this.trickleCells.has(e)}},{key:"matchesCell",value:function(e){return e.getSpritesAsSet().has(this)}},{key:"getSpritesThatMatch",value:function(e){return e.getSpritesAsSet().has(this)?new Set([this]):new Set}},{key:"subscribeToCellChanges",value:function(e){this.trickleTilesWithModifier.add(e)}},{key:"subscribeToCellChangesTile",value:function(e){this.trickleTiles.add(e)}},{key:"addCell",value:function(e,t){this.addCells(this,[e],t)}},{key:"removeCell",value:function(e){this.removeCells(this,[e])}},{key:"updateCell",value:function(e,t){var r=!0,n=!1,o=void 0;try{for(var l,i=this.trickleTiles[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){l.value.updateCells(this,[e],t)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}var s=!0,a=!1,u=void 0;try{for(var c,f=this.trickleTilesWithModifier[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){c.value.updateCells(this,[e],t)}}catch(e){a=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(a)throw u}}}},{key:"addCells",value:function(e,t,r){var n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(this.trickleCells.has(a))throw new Error("BUG: should not be trying to add a cell that has already been matched (right?)");this.trickleCells.add(a)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}var u=!0,c=!1,f=void 0;try{for(var h,d=this.trickleTiles[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){h.value.addCells(this,t,r)}}catch(e){c=!0,f=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}var p=!0,v=!1,w=void 0;try{for(var y,g=this.trickleTilesWithModifier[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){y.value.addCells(this,this,t,r)}}catch(e){v=!0,w=e}finally{try{p||null==g.return||g.return()}finally{if(v)throw w}}}},{key:"updateCells",value:function(e,t,r){throw new Error("BUG: Unreachable code")}},{key:"removeCells",value:function(e,t){var r=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;this.trickleCells.delete(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}var a=!0,u=!1,c=void 0;try{for(var f,h=this.trickleTiles[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){f.value.removeCells(this,t)}}catch(e){u=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}var d=!0,p=!1,v=void 0;try{for(var w,y=this.trickleTilesWithModifier[Symbol.iterator]();!(d=(w=y.next()).done);d=!0){w.value.removeCells(this,this,t)}}catch(e){p=!0,v=e}finally{try{d||null==y.return||y.return()}finally{if(p)throw v}}}},{key:"has",value:function(e){return this.trickleCells.has(e)}},{key:"hasNegationTileWithModifier",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.trickleTilesWithModifier[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){if(n.value.isNo())return!0}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}var l=!0,i=!1,s=void 0;try{for(var a,u=this.trickleTiles[Symbol.iterator]();!(l=(a=u.next()).done);l=!0){if(a.value.hasNegationTileWithModifier())return!0}}catch(e){i=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(i)throw s}}return!1}},{key:"getCellsThatMatch",value:function(e){var t=this;return this.trickleCells.size>0?this.trickleCells:e?new Set(i(e).filter(function(e){return t.matchesCell(e)})):new Set}}]),t}(),w=function(e){function t(e,r,n,o){var l;return s(this,t),(l=c(this,f(t).call(this,e,r,n))).color=o[0],l}return h(t,v),u(t,[{key:"isTransparent",value:function(){return this.color.isTransparent()}},{key:"hasAlpha",value:function(){return this.color.hasAlpha()}},{key:"hasPixels",value:function(){return!1}},{key:"getPixels",value:function(e,t){for(var r=[],n=0;n<e;n++){r.push([]);for(var o=0;o<t;o++)r[n].push(this.color)}return r}}]),t}(),y=function(e){function t(e,r,n,o){var l;s(this,t),(l=c(this,f(t).call(this,e,r,n))).pixels=o,l._isTransparent=!0,l._hasAlpha=!1;var i=!0,a=!1,u=void 0;try{for(var h,d=o[Symbol.iterator]();!(i=(h=d.next()).done);i=!0){var p=h.value,v=!0,w=!1,y=void 0;try{for(var g,m=p[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;b.isTransparent()||(l._isTransparent=!1),b.hasAlpha()&&(l._hasAlpha=!0)}}catch(e){w=!0,y=e}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}}}catch(e){a=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw u}}return l}return h(t,v),u(t,[{key:"isTransparent",value:function(){return this._isTransparent}},{key:"hasAlpha",value:function(){return this._hasAlpha}},{key:"getSprites",value:function(){return[this]}},{key:"hasPixels",value:function(){return!0}},{key:"getPixels",value:function(e,t){return this.pixels.map(function(e){return e.map(function(e){return e})})}}]),t}(),g=function(e){function t(e,r,n){var o;return s(this,t),(o=c(this,f(t).call(this,e))).spriteNameOrLevelChar=r,o.tiles=n,o.trickleCells=new Set,o.trickleTilesWithModifier=new Set,o.collisionLayer=null,o.spritesCache=null,o}return h(t,o["a"]),u(t,[{key:"equals",value:function(e){return this.isOr()===e.isOr()&&0===Object(n.m)(new Set(this.getSprites()),e.getSprites()).size}},{key:"isOr",value:function(){return!1}},{key:"getName",value:function(){return this.spriteNameOrLevelChar}},{key:"_getDescendantTiles",value:function(){return this.tiles.concat(Object(n.g)(this.tiles.map(function(e){return e._getDescendantTiles()})))}},{key:"getSprites",value:function(){return this.spritesCache||(this.spritesCache=Object(n.g)(this.tiles.map(function(e){return e.getSprites()})).sort(function(e,t){return e.getCollisionLayer().id-t.getCollisionLayer().id}).reverse()),this.spritesCache}},{key:"setCollisionLayer",value:function(e){this.collisionLayer=e}},{key:"getCollisionLayer",value:function(){if(this.collisionLayer)return this.collisionLayer;var e=this.getSprites()[0].getCollisionLayer(),t=!0,r=!1,n=void 0;try{for(var o,l=this.getSprites()[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){if(o.value.getCollisionLayer()!==e)throw new Error("ooh, sprites in a tile have different collision layers... that's a problem\n".concat(this.toString()))}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e}},{key:"getCollisionLayers",value:function(){var e=new Set,t=!0,r=!1,n=void 0;try{for(var o,l=this.getSprites()[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var s=o.value;e.add(s.getCollisionLayer())}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return i(e)}},{key:"getCellsThatMatch",value:function(e){var t=new Set,r=!0,n=!1,o=void 0;try{for(var l,i=this.getSprites()[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,a=!0,u=!1,c=void 0;try{for(var f,h=s.getCellsThatMatch(e)[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value;t.add(d)}}catch(e){u=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"subscribeToCellChanges",value:function(e){this.trickleTilesWithModifier.add(e);var t=!0,r=!1,n=void 0;try{for(var o,l=this.getSprites()[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.subscribeToCellChangesTile(this)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"hasNegationTileWithModifier",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.trickleTilesWithModifier[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){if(n.value.isNo())return!0}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return!1}},{key:"addCells",value:function(e,t,r){var n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(!this.trickleCells.has(a)&&this.matchesCell(a)){this.trickleCells.add(a);var u=!0,c=!1,f=void 0;try{for(var h,d=this.trickleTilesWithModifier[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){h.value.addCells(this,e,[a],r)}}catch(e){c=!0,f=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}}}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"updateCells",value:function(e,t,r){var n=!0,o=!1,l=void 0;try{for(var i,s=this.trickleTilesWithModifier[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){i.value.updateCells(e,t,r)}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"removeCells",value:function(e,t){var r=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;if(this.matchesCell(s))this.trickleCells.has(s)?this.updateCells(e,[s],null):this.addCells(e,[s],null);else{this.trickleCells.delete(s);var a=!0,u=!1,c=void 0;try{for(var f,h=this.trickleTilesWithModifier[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){f.value.removeCells(this,e,[s])}}catch(e){u=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}}}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"hasCell",value:function(e){return this.trickleCells.has(e)}}]),t}(),m=function(e){function t(e,r,n){return s(this,t),c(this,f(t).call(this,e,r,[n]))}return h(t,g),u(t,[{key:"matchesCell",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.tiles[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){if(!o.value.matchesCell(e))return!1}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return!0}},{key:"getSpritesThatMatch",value:function(e){return Object(n.o)(new Set(this.getSprites()),e.getSpritesAsSet())}},{key:"hasSingleCollisionLayer",value:function(){return!!this.collisionLayer}}]),t}(),b=function(e){function t(){return s(this,t),c(this,f(t).apply(this,arguments))}return h(t,g),u(t,[{key:"matchesCell",value:function(e){throw new Error("BUG: Unreachable code")}},{key:"getSpritesThatMatch",value:function(e){throw new Error("BUG: This method should only be called for OR tiles")}},{key:"hasSingleCollisionLayer",value:function(){return!!this.collisionLayer}}]),t}(),_=function(e){function t(){return s(this,t),c(this,f(t).apply(this,arguments))}return h(t,g),u(t,[{key:"isOr",value:function(){return!0}},{key:"matchesCell",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=this.tiles[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){if(o.value.matchesCell(e))return!0}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return!1}},{key:"getSpritesThatMatch",value:function(e){return Object(n.o)(new Set(this.getSprites()),e.getSpritesAsSet())}},{key:"hasSingleCollisionLayer",value:function(){var e=this.getSprites(),t=!0,r=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){if(o.value.getCollisionLayer()!==e[0].getCollisionLayer())return!1}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return!0}}]),t}()},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"b",function(){return p}),r.d(t,"c",function(){return v});var n=r(13);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var h=function(){function e(t,r,n,o){u(this,e),this.r=t,this.g=r,this.b=n,this.a=o}return f(e,[{key:"isDark",value:function(){return this.r+this.g+this.b<384}}]),e}(),d=function(e){function t(e,r){var n;return u(this,t),(n=l(this,i(t).call(this,e))).hex=r,n}return s(t,n["a"]),f(t,[{key:"isTransparent",value:function(){return!1}},{key:"hasAlpha",value:function(){return this.hex.length>7}},{key:"toRgb",value:function(){return v(this.hex)}},{key:"toHex",value:function(){return this.hex}}]),t}(),p=function(e){function t(e){return u(this,t),l(this,i(t).call(this,e))}return s(t,n["a"]),f(t,[{key:"isTransparent",value:function(){return!0}},{key:"hasAlpha",value:function(){return!1}},{key:"toRgb",value:function(){throw new Error("BUG: Transparent colors do not have RGB data")}},{key:"toHex",value:function(){throw new Error("BUG: Transparent colors do not have a hex color value")}}]),t}();function v(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,r,n){return t+t+r+r+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);if(t)return new h(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),t[4]?parseInt(t[4],16)/255:null);throw new Error("BUG: Invalid hex color: '".concat(e,"'"))}},function(e,t,r){"use strict";var n,o,l,i,s,a={id:"Wireless Controller (STANDARD GAMEPAD)",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,HOME:16,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:2,CLUSTER_RIGHT:1,CLUSTER_BOTTOM:0,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},u=[a,{id:"54c-9cc-Wireless Controller",buttons:{ARROW_UP:14,ARROW_DOWN:15,ARROW_LEFT:16,ARROW_RIGHT:17,HOME:12,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:0,CLUSTER_RIGHT:2,CLUSTER_BOTTOM:1,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11,TOUCHSCREEN:13},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:5}},analogs:{BUMPER_LEFT:3,BUMPER_RIGHT:4}},{id:"[temp xbox id]",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,HOME:16,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:2,CLUSTER_RIGHT:1,CLUSTER_BOTTOM:0,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},{id:"54c-268-PLAYSTATION(R)3 Controller",buttons:{ARROW_UP:4,ARROW_DOWN:6,ARROW_LEFT:7,ARROW_RIGHT:5,HOME:16,START:3,SELECT:0,CLUSTER_TOP:12,CLUSTER_LEFT:15,CLUSTER_RIGHT:13,CLUSTER_BOTTOM:14,BUMPER_TOP_LEFT:10,BUMPER_BOTTOM_LEFT:8,BUMPER_TOP_RIGHT:11,BUMPER_BOTTOM_RIGHT:9,STICK_PRESS_LEFT:1,STICK_PRESS_RIGHT:2},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},{id:"45e-28e-Xbox 360 Wired Controller",buttons:{ARROW_UP:0,ARROW_DOWN:1,ARROW_LEFT:2,ARROW_RIGHT:3,HOME:10,START:4,SELECT:5,CLUSTER_TOP:14,CLUSTER_LEFT:13,CLUSTER_RIGHT:12,CLUSTER_BOTTOM:11,BUMPER_TOP_LEFT:8,BUMPER_TOP_RIGHT:9,STICK_PRESS_LEFT:6,STICK_PRESS_RIGHT:7},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:3,yAxis:4}},analogs:{BUMPER_LEFT:2,BUMPER_RIGHT:5}},{id:"79-6-Generic   USB  Joystick  ",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,START:9,CLUSTER_TOP:3,CLUSTER_LEFT:8,CLUSTER_RIGHT:2,CLUSTER_BOTTOM:6,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:7,BUMPER_TOP_RIGHT:5,STICK_PRESS_LEFT:0,STICK_PRESS_RIGHT:1},sticks:{LEFT:{xAxis:1,yAxis:2}},analogs:{}}];function c(e){return"standard"===e.mapping?a:u.find(function(t){return e.id===t.id})||null}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}r.d(t,"a",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return y}),function(e){e.ARROW_UP="ARROW_UP",e.ARROW_DOWN="ARROW_DOWN",e.ARROW_LEFT="ARROW_LEFT",e.ARROW_RIGHT="ARROW_RIGHT",e.HOME="HOME",e.START="START",e.SELECT="SELECT",e.CLUSTER_TOP="CLUSTER_TOP",e.CLUSTER_LEFT="CLUSTER_LEFT",e.CLUSTER_RIGHT="CLUSTER_RIGHT",e.CLUSTER_BOTTOM="CLUSTER_BOTTOM",e.BUMPER_TOP_LEFT="BUMPER_TOP_LEFT",e.BUMPER_BOTTOM_LEFT="BUMPER_BOTTOM_LEFT",e.BUMPER_TOP_RIGHT="BUMPER_TOP_RIGHT",e.BUMPER_BOTTOM_RIGHT="BUMPER_BOTTOM_RIGHT",e.STICK_PRESS_LEFT="STICK_PRESS_LEFT",e.STICK_PRESS_RIGHT="STICK_PRESS_RIGHT",e.TOUCHSCREEN="TOUCHSCREEN"}(n||(n={})),function(e){e.LEFT="LEFT",e.RIGHT="RIGHT"}(o||(o={})),function(e){e.BUMPER_LEFT="BUMPER_LEFT",e.BUMPER_RIGHT="BUMPER_RIGHT"}(l||(l={})),function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT"}(i||(i={})),function(e){e.ALT="ALT",e.CTRL="CTRL",e.META="META",e.SHIFT="SHIFT"}(s||(s={}));var v=function(){function e(t){if(h(this,e),!(t>=0))throw new Error("Must provide an index. Or, use the AnyGamepad class");this.index=t}return p(e,[{key:"isSomethingConnected",value:function(){return!!this.raw()}},{key:"isRecognized",value:function(){var e=this.raw();return!!e&&null!==c(e)}},{key:"isButtonPressed",value:function(e){var t=this.raw();if(t){var r=this.buttonIndex(e);return null!==r&&t.buttons[r].pressed}return!1}},{key:"hasButton",value:function(e){return null!==this.buttonIndex(e)}},{key:"button",value:function(e){var t=this;return{has:function(){return t.hasButton(e)},query:function(){return t.isButtonPressed(e)}}}},{key:"getStickValue",value:function(e){var t=this.raw();if(t){var r=this.stickIndex(e);if(r){var n=r.xAxis,o=r.yAxis;return{x:t.axes[n],y:t.axes[o]}}}return{x:0,y:0}}},{key:"getStickDirection",value:function(e){var t=this.getStickValue(e),r=t.x,n=t.y,o=Math.abs(r),l=Math.abs(n);return o<.5&&l<.5?null:o>l?r>0?i.LEFT:i.RIGHT:n>0?i.DOWN:i.UP}},{key:"hasStick",value:function(e){return null!==this.stickIndex(e)}},{key:"stick",value:function(e){var t=this;return{has:function(){return t.hasStick(e)},query:function(){return t.getStickValue(e)},direction:function(){return t.getStickDirection(e)}}}},{key:"raw",value:function(){return f(navigator.getGamepads())[this.index]||null}},{key:"buttonIndex",value:function(e){var t=this.raw();return t&&function(e,t){var r=c(e);if(r){var n=r.buttons[t];if(void 0!==n)return n}return null}(t,e)}},{key:"stickIndex",value:function(e){var t=this.raw();return t&&function(e,t){var r=c(e);return r&&r.sticks[t]||null}(t,e)}}]),e}(),w=function(){function e(){h(this,e)}return p(e,[{key:"isSomethingConnected",value:function(){return!!y.getGamepads().find(function(e){return!!e&&e.isSomethingConnected()})}},{key:"isRecognized",value:function(){return!!y.getGamepads().find(function(e){return!!e&&e.isRecognized()})}},{key:"hasButton",value:function(e){return!!y.getGamepads().find(function(t){return!!t&&t.hasButton(e)})}},{key:"isButtonPressed",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=y.getGamepads()[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;if(i&&i.isButtonPressed(e))return!0}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return!1}},{key:"button",value:function(e){var t=this;return{has:function(){return t.hasButton(e)},query:function(){return t.isButtonPressed(e)}}}},{key:"hasStick",value:function(e){return!!y.getGamepads().find(function(t){return!!t&&t.hasStick(e)})}},{key:"getStickValue",value:function(e){var t=0,r=0,n=!0,o=!1,l=void 0;try{for(var i,s=y.getGamepads()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(a){var u=a.getStickValue(e),c=u.x,f=u.y;t+=c,r+=f}}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return{x:t,y:r}}},{key:"getStickDirection",value:function(e){var t=y.getGamepads().find(function(t){return!!t&&null!==t.getStickDirection(e)})||null;return t&&t.getStickDirection(e)}},{key:"stick",value:function(e){var t=this;return{has:function(){return t.hasStick(e)},query:function(){return t.getStickValue(e)},direction:function(){return t.getStickDirection(e)}}}}]),e}(),y=new(function(){function e(){h(this,e),this.cache=[],this.any=null}return p(e,[{key:"getGamepads",value:function(){var e=this;return f(navigator.getGamepads()).map(function(t,r){return t&&e.getGamepad(r)})}},{key:"getGamepad",value:function(e){return this.cache[e]=this.cache[e]||new v(e),this.cache[e]}},{key:"getAnyGamepad",value:function(){if(this.any)return this.any;var e=new w;return this.any=e,e}},{key:"key",value:function(e,t,r){var n=new Set(r||[]),o=!1,l=function(e,t){return e.has(s.ALT)===t.altKey&&e.has(s.CTRL)===t.ctrlKey&&e.has(s.META)===t.metaKey&&e.has(s.SHIFT)===t.shiftKey},i=function e(t,r){return t===r||!(null===r||!r.parentElement)&&e(t,r.parentElement)},a=function(r){r.key===e&&l(n,r)&&(t&&!i(t,window.document.activeElement)||(o=!0,r.preventDefault()))},u=function(r){r.key===e&&l(n,r)&&(t&&!i(t,window.document.activeElement)||(o=!1,r.preventDefault()))};return window.addEventListener("keydown",a),window.addEventListener("keyup",u),{has:function(){return!0},query:function(){return o},dispose:function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",u)}}}},{key:"or",value:function(e){return{has:function(){return!!e.find(function(e){return e.has()})},query:function(){return!!e.find(function(e){return e.query()})}}}},{key:"asStick",value:function(e,t,r,n){function o(){return{x:0+(e.query()?-1:0)+(t.query()?1:0),y:0+(r.query()?-1:0)+(n.query()?1:0)}}return{query:o,has:function(){return e.has()&&t.has()&&r.has()&&n.has()},direction:function(){var e=o(),t=e.x,r=e.y;return t<0&&0===r?i.UP:t>0&&0===r?i.DOWN:r<0&&0===t?i.LEFT:r>0&&0===t?i.RIGHT:null}}}},{key:"orSticks",value:function(e){function t(){var t=0,r=0,n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value.query(),u=a.x,c=a.y;t+=u,r+=c}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return{x:t,y:r}}return{query:t,has:function(){return!!e.find(function(e){return e.has()})},direction:function(){var e=t(),r=e.x,n=e.y;return r<0&&0===n?i.UP:r>0&&0===n?i.DOWN:n<0&&0===r?i.LEFT:n>0&&0===r?i.RIGHT:null}}}}]),e}())},function(e,t,r){var n=r(11),o=r(41);e.exports=r(10)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(4),o=r(18),l=r(22),i=r(42)("src"),s=Function.toString,a=(""+s).split("toString");r(26).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var u="function"==typeof r;u&&(l(r,"name")||o(r,"name",t)),e[t]!==r&&(u&&(l(r,i)||o(r,i,e[t]?""+e[t]:a.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||s.call(this)})},function(e,t,r){var n=r(1),o=r(5),l=r(32),i=/"/g,s=function(e,t,r,n){var o=String(l(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(n).replace(i,"&quot;")+'"'),s+">"+o+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},function(e,t,r){"use strict";(function(e){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o;r.d(t,"a",function(){return o}),r.d(t,"b",function(){return s}),function(e){e.SEVERE="SEVERE",e.WARN="WARN",e.INFO="INFO",e.DEBUG="DEBUG",e.TRACE="TRACE"}(o||(o={}));var l=[o.SEVERE,o.WARN,o.INFO,o.DEBUG,o.TRACE];function i(e){return l.indexOf(e)}var s=new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentLevelNum=i(function(e){if(!e)return o.SEVERE;switch(e.toUpperCase()){case o.SEVERE:return o.SEVERE;case o.DEBUG:return o.DEBUG;case o.TRACE:return o.TRACE;default:throw new Error("ERROR: Invalid log level. valid levels are ".concat(JSON.stringify(l)))}}(e.env.LOG_LEVEL))}var r,s,a;return r=t,(s=[{key:"isLevel",value:function(e){return i(e)<=this.currentLevelNum}},{key:"warn",value:function(e){this.log(o.WARN,e)}},{key:"info",value:function(e){this.log(o.INFO,e)}},{key:"debug",value:function(e){this.log(o.DEBUG,e)}},{key:"trace",value:function(e){this.log(o.TRACE,e)}},{key:"logFn",value:function(e,t){this.isLevel(e)&&console.warn(t())}},{key:"log",value:function(e,t){"string"==typeof t?this.logFn(e,function(){return t}):this.logFn(e,t)}}])&&n(r.prototype,s),a&&n(r,a),t}())}).call(this,r(107))},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(59),o=r(32);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(60),o=r(41),l=r(23),i=r(31),s=r(22),a=r(110),u=Object.getOwnPropertyDescriptor;t.f=r(10)?u:function(e,t){if(e=l(e),t=i(t,!0),a)try{return u(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(22),o=r(12),l=r(81)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,l)?e[l]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t){var r=e.exports={version:"2.6.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(15);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){"use strict";var n=r(5);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){var n=r(6);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(1),o=r(26),l=r(5);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*l(function(){r(1)}),"Object",i)}},function(e,t,r){var n=r(27),o=r(59),l=r(12),i=r(9),s=r(97);e.exports=function(e,t){var r=1==e,a=2==e,u=3==e,c=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var v,w,y=l(t),g=o(y),m=n(s,p,3),b=i(g.length),_=0,S=r?d(t,b):a?d(t,0):void 0;b>_;_++)if((h||_ in g)&&(w=m(v=g[_],_,y),e))if(r)S[_]=w;else if(w)switch(e){case 3:return!0;case 5:return v;case 6:return _;case 2:S.push(v)}else if(c)return!1;return f?-1:u||c?c:S}}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if(r(10)){var o=r(38),l=r(4),i=r(5),s=r(1),a=r(74),u=r(105),c=r(27),f=r(48),h=r(41),d=r(18),p=r(50),v=r(29),w=r(9),y=r(138),g=r(44),m=r(31),b=r(22),_=r(53),S=r(6),k=r(12),E=r(94),C=r(45),T=r(25),O=r(46).f,M=r(96),x=r(42),R=r(8),A=r(34),I=r(64),L=r(62),P=r(99),F=r(55),N=r(69),D=r(47),B=r(98),G=r(127),j=r(11),U=r(24),W=j.f,H=U.f,q=l.RangeError,z=l.TypeError,V=l.Uint8Array,K=Array.prototype,J=u.ArrayBuffer,Y=u.DataView,X=A(0),$=A(2),Z=A(3),Q=A(4),ee=A(5),te=A(6),re=I(!0),ne=I(!1),oe=P.values,le=P.keys,ie=P.entries,se=K.lastIndexOf,ae=K.reduce,ue=K.reduceRight,ce=K.join,fe=K.sort,he=K.slice,de=K.toString,pe=K.toLocaleString,ve=R("iterator"),we=R("toStringTag"),ye=x("typed_constructor"),ge=x("def_constructor"),me=a.CONSTR,be=a.TYPED,_e=a.VIEW,Se=A(1,function(e,t){return Oe(L(e,e[ge]),t)}),ke=i(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Ee=!!V&&!!V.prototype.set&&i(function(){new V(1).set({})}),Ce=function(e,t){var r=v(e);if(r<0||r%t)throw q("Wrong offset!");return r},Te=function(e){if(S(e)&&be in e)return e;throw z(e+" is not a typed array!")},Oe=function(e,t){if(!(S(e)&&ye in e))throw z("It is not a typed array constructor!");return new e(t)},Me=function(e,t){return xe(L(e,e[ge]),t)},xe=function(e,t){for(var r=0,n=t.length,o=Oe(e,n);n>r;)o[r]=t[r++];return o},Re=function(e,t,r){W(e,t,{get:function(){return this._d[r]}})},Ae=function(e){var t,r,n,o,l,i,s=k(e),a=arguments.length,u=a>1?arguments[1]:void 0,f=void 0!==u,h=M(s);if(null!=h&&!E(h)){for(i=h.call(s),n=[],t=0;!(l=i.next()).done;t++)n.push(l.value);s=n}for(f&&a>2&&(u=c(u,arguments[2],2)),t=0,r=w(s.length),o=Oe(this,r);r>t;t++)o[t]=f?u(s[t],t):s[t];return o},Ie=function(){for(var e=0,t=arguments.length,r=Oe(this,t);t>e;)r[e]=arguments[e++];return r},Le=!!V&&i(function(){pe.call(new V(1))}),Pe=function(){return pe.apply(Le?he.call(Te(this)):Te(this),arguments)},Fe={copyWithin:function(e,t){return G.call(Te(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Te(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(Te(this),arguments)},filter:function(e){return Me(this,$(Te(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(Te(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return te(Te(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(Te(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Te(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return re(Te(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Te(this),arguments)},lastIndexOf:function(e){return se.apply(Te(this),arguments)},map:function(e){return Se(Te(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ae.apply(Te(this),arguments)},reduceRight:function(e){return ue.apply(Te(this),arguments)},reverse:function(){for(var e,t=Te(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return Z(Te(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return fe.call(Te(this),e)},subarray:function(e,t){var r=Te(this),n=r.length,o=g(e,n);return new(L(r,r[ge]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,w((void 0===t?n:g(t,n))-o))}},Ne=function(e,t){return Me(this,he.call(Te(this),e,t))},De=function(e){Te(this);var t=Ce(arguments[1],1),r=this.length,n=k(e),o=w(n.length),l=0;if(o+t>r)throw q("Wrong length!");for(;l<o;)this[t+l]=n[l++]},Be={entries:function(){return ie.call(Te(this))},keys:function(){return le.call(Te(this))},values:function(){return oe.call(Te(this))}},Ge=function(e,t){return S(e)&&e[be]&&"symbol"!=n(t)&&t in e&&String(+t)==String(t)},je=function(e,t){return Ge(e,t=m(t,!0))?h(2,e[t]):H(e,t)},Ue=function(e,t,r){return!(Ge(e,t=m(t,!0))&&S(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?W(e,t,r):(e[t]=r.value,e)};me||(U.f=je,j.f=Ue),s(s.S+s.F*!me,"Object",{getOwnPropertyDescriptor:je,defineProperty:Ue}),i(function(){de.call({})})&&(de=pe=function(){return ce.call(this)});var We=p({},Fe);p(We,Be),d(We,ve,Be.values),p(We,{slice:Ne,set:De,constructor:function(){},toString:de,toLocaleString:Pe}),Re(We,"buffer","b"),Re(We,"byteOffset","o"),Re(We,"byteLength","l"),Re(We,"length","e"),W(We,we,{get:function(){return this[be]}}),e.exports=function(e,t,r,n){var u=e+((n=!!n)?"Clamped":"")+"Array",c="get"+e,h="set"+e,p=l[u],v=p||{},g=p&&T(p),m=!p||!a.ABV,b={},k=p&&p.prototype,E=function(e,r){W(e,r,{get:function(){return function(e,r){var n=e._d;return n.v[c](r*t+n.o,ke)}(this,r)},set:function(e){return function(e,r,o){var l=e._d;n&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),l.v[h](r*t+l.o,o,ke)}(this,r,e)},enumerable:!0})};m?(p=r(function(e,r,n,o){f(e,p,u,"_d");var l,i,s,a,c=0,h=0;if(S(r)){if(!(r instanceof J||"ArrayBuffer"==(a=_(r))||"SharedArrayBuffer"==a))return be in r?xe(p,r):Ae.call(p,r);l=r,h=Ce(n,t);var v=r.byteLength;if(void 0===o){if(v%t)throw q("Wrong length!");if((i=v-h)<0)throw q("Wrong length!")}else if((i=w(o)*t)+h>v)throw q("Wrong length!");s=i/t}else s=y(r),l=new J(i=s*t);for(d(e,"_d",{b:l,o:h,l:i,e:s,v:new Y(l)});c<s;)E(e,c++)}),k=p.prototype=C(We),d(k,"constructor",p)):i(function(){p(1)})&&i(function(){new p(-1)})&&N(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=r(function(e,r,n,o){var l;return f(e,p,u),S(r)?r instanceof J||"ArrayBuffer"==(l=_(r))||"SharedArrayBuffer"==l?void 0!==o?new v(r,Ce(n,t),o):void 0!==n?new v(r,Ce(n,t)):new v(r):be in r?xe(p,r):Ae.call(p,r):new v(y(r))}),X(g!==Function.prototype?O(v).concat(O(g)):O(v),function(e){e in p||d(p,e,v[e])}),p.prototype=k,o||(k.constructor=p));var M=k[ve],x=!!M&&("values"==M.name||null==M.name),R=Be.values;d(p,ye,!0),d(k,be,u),d(k,_e,!0),d(k,ge,p),(n?new p(1)[we]==u:we in k)||W(k,we,{get:function(){return u}}),b[u]=p,s(s.G+s.W+s.F*(p!=v),b),s(s.S,u,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*i(function(){v.of.call(p,1)}),u,{from:Ae,of:Ie}),"BYTES_PER_ELEMENT"in k||d(k,"BYTES_PER_ELEMENT",t),s(s.P,u,Fe),D(u),s(s.P+s.F*Ee,u,{set:De}),s(s.P+s.F*!x,u,Be),o||k.toString==de||(k.toString=de),s(s.P+s.F*i(function(){new p(1).slice()}),u,{slice:Ne}),s(s.P+s.F*(i(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!i(function(){k.toLocaleString.call([1,2])})),u,{toLocaleString:Pe}),F[u]=x?M:R,o||x||d(k,ve,R)}}else e.exports=function(){}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(133),l=r(1),i=r(63)("metadata"),s=i.store||(i.store=new(r(136))),a=function(e,t,r){var n=s.get(e);if(!n){if(!r)return;s.set(e,n=new o)}var l=n.get(t);if(!l){if(!r)return;n.set(t,l=new o)}return l};e.exports={store:s,map:a,has:function(e,t,r){var n=a(t,r,!1);return void 0!==n&&n.has(e)},get:function(e,t,r){var n=a(t,r,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,r,n){a(r,n,!0).set(e,t)},keys:function(e,t){var r=a(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==n(e)?e:String(e)},exp:function(e){l(l.S,"Reflect",e)}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(42)("meta"),l=r(6),i=r(22),s=r(11).f,a=0,u=Object.isExtensible||function(){return!0},c=!r(5)(function(){return u(Object.preventExtensions({}))}),f=function(e){s(e,o,{value:{i:"O"+ ++a,w:{}}})},h=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!l(e))return"symbol"==n(e)?e:("string"==typeof e?"S":"P")+e;if(!i(e,o)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[o].i},getWeak:function(e,t){if(!i(e,o)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[o].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!i(e,o)&&f(e),e}}},function(e,t){e.exports=!1},function(e,t,r){var n=r(8)("unscopables"),o=Array.prototype;null==o[n]&&r(18)(o,n,{}),e.exports=function(e){o[n][e]=!0}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}r.d(t,"a",function(){return h});var c=r(106),f=function(){function e(t,r){s(this,e),this.bitSet=r||new c,t&&this.addAll(t)}return u(e,[{key:"isEmpty",value:function(){return this.bitSet.isEmpty()}},{key:"addAll",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;this.add(i)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"add",value:function(e){this.bitSet.set(this._indexOf(e))}},{key:"remove",value:function(e){this.bitSet.clear(this._indexOf(e))}},{key:"has",value:function(e){return!!this.bitSet.get(this._indexOf(e))}},{key:"containsAll",value:function(e){return e.bitSet.cardinality()===this.bitSet.and(e.bitSet).cardinality()}},{key:"containsAny",value:function(e){return!this.bitSet.and(e.bitSet).isEmpty()}},{key:"containsNone",value:function(e){return e.bitSet.and(this.bitSet).isEmpty()}},{key:"_indexOf",value:function(e){var t=this.indexOf(e);if(t<0)throw new Error("BUG: Expected the item index to be >= 0 but it was ".concat(t));return t}}]),e}(),h=function(e){function t(){return s(this,t),o(this,l(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,f),u(t,[{key:"indexOf",value:function(e){return e.allSpritesBitSetIndex}},{key:"union",value:function(e){var t=this,r=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;t=t.or(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"toString",value:function(e){var t=[],r=!0,n=!1,o=void 0;try{for(var l,i=this.getSprites(e)[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;t.push(s.getName())}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t.join(" ")}},{key:"getSprites",value:function(e){var t=new Set,r=!0,n=!1,o=void 0;try{for(var l,i=e.objects[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;this.has(s)&&t.add(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"or",value:function(e){return new t(void 0,this.bitSet.or(e.bitSet))}}]),t}()},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(112),o=r(82);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t,r){var n=r(29),o=Math.max,l=Math.min;e.exports=function(e,t){return(e=n(e))<0?o(e+t,0):l(e,t)}},function(e,t,r){var n=r(3),o=r(113),l=r(82),i=r(81)("IE_PROTO"),s=function(){},a=function(){var e,t=r(79)("iframe"),n=l.length;for(t.style.display="none",r(83).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),a=e.F;n--;)delete a.prototype[l[n]];return a()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[i]=e):r=a(),void 0===t?r:o(r,t)}},function(e,t,r){var n=r(112),o=r(82).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){"use strict";var n=r(4),o=r(11),l=r(10),i=r(8)("species");e.exports=function(e){var t=n[e];l&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(27),o=r(125),l=r(94),i=r(3),s=r(9),a=r(96),u={},c={};(t=e.exports=function(e,t,r,f,h){var d,p,v,w,y=h?function(){return e}:a(e),g=n(r,f,t?2:1),m=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(l(y)){for(d=s(e.length);d>m;m++)if((w=t?g(i(p=e[m])[0],p[1]):g(e[m]))===u||w===c)return w}else for(v=y.call(e);!(p=v.next()).done;)if((w=o(v,g,p.value,t))===u||w===c)return w}).BREAK=u,t.RETURN=c},function(e,t,r){var n=r(19);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return l}),r.d(t,"b",function(){return i});var l=function e(t,r){o(this,e),this.width=t,this.height=r},i=function(){function e(){o(this,e),this.noAction=!1,this.noUndo=!1,this.noRepeatAction=!1,this.throttleMovement=!1,this.noRestart=!1,this.requirePlayerMovement=!1,this.verboseLogging=!1,this.author=null,this.homepage=null,this.youtube=null,this.zoomscreen=null,this.flickscreen=null,this.colorPalette=null,this.backgroundColor=null,this.textColor=null,this.realtimeInterval=null,this.keyRepeatInterval=null,this.againInterval=null,this.runRulesOnLevelStart=null}var t,r,l;return t=e,(r=[{key:"_setValue",value:function(e,t){switch(e.toLowerCase()){case"author":this.author=t;break;case"homepage":this.homepage=t;break;case"youtube":this.youtube=t;break;case"zoomscreen":this.zoomscreen=t;break;case"flickscreen":this.flickscreen=t;break;case"colorpalette":case"color_palette":this.colorPalette=t;break;case"backgroundcolor":case"background_color":this.backgroundColor=t;break;case"textcolor":case"text_color":this.textColor=t;break;case"realtimeinterval":case"realtime_interval":this.realtimeInterval=t;break;case"keyrepeatinterval":case"key_repeat_interval":this.keyRepeatInterval=t;break;case"againinterval":case"again_interval":this.againInterval=t;break;case"noaction":this.noAction=t;break;case"noundo":this.noUndo=t;break;case"runrulesonlevelstart":case"run_rules_on_level_start":this.runRulesOnLevelStart=t;break;case"norepeataction":case"norepeat_action":this.noRepeatAction=t;break;case"throttlemovement":case"throttle_movement":this.throttleMovement=t;break;case"norestart":this.noRestart=t;break;case"requireplayermovement":case"require_player_movement":this.requirePlayerMovement=t;break;case"verboselogging":case"verbose_logging":this.verboseLogging=t;break;default:throw new Error('BUG: Unsupported config field "'.concat(e,'" with value "').concat(t,'"'))}}}])&&n(t.prototype,r),l&&n(t,l),e}()},function(e,t,r){var n=r(11).f,o=r(22),l=r(8)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,l)&&n(e,l,{configurable:!0,value:t})}},function(e,t,r){var n=r(28),o=r(8)("toStringTag"),l="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:l?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,r){var n=r(1),o=r(32),l=r(5),i=r(85),s="["+i+"]",a=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),c=function(e,t,r){var o={},s=l(function(){return!!i[e]()||""!=""[e]()}),a=o[e]=s?t(f):i[e];r&&(o[r]=a),n(n.P+n.F*s,"String",o)},f=c.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(a,"")),2&t&&(e=e.replace(u,"")),e};e.exports=c},function(e,t){e.exports={}},function(e,t,r){var n=r(6);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){"use strict";r.d(t,"b",function(){return p}),r.d(t,"a",function(){return v});var n,o=r(13);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.NO="NO",e.ALL="ALL",e.ANY="ANY",e.SOME="SOME"}(n||(n={}));var p=function(e){function t(e,r,n){var o;if(s(this,t),(o=c(this,f(t).call(this,e))).qualifier=r,o.tile=n,!n)throw new Error("BUG: Could not find win condition tile");return o}return h(t,o["a"]),u(t,[{key:"cellsThatMatchTile",value:function(e,t){return i(e).filter(function(e){return t.matchesCell(e)})}},{key:"isSatisfied",value:function(e){var t=this._isSatisfied(e);return t}},{key:"a11yGetTiles",value:function(){return[this.tile]}},{key:"_isSatisfied",value:function(e){var t=this.cellsThatMatchTile(e,this.tile);switch(this.qualifier){case n.NO:return 0===t.length;case n.ANY:case n.SOME:return t.length>0;default:throw new Error('BUG: Invalid qualifier: "'.concat(this.qualifier,'"'))}}}]),t}(),v=function(e){function t(e,r,n,o){var l;return s(this,t),(l=c(this,f(t).call(this,e,r,n))).onTile=o,l}return h(t,p),u(t,[{key:"a11yGetTiles",value:function(){return[this.tile,this.onTile]}},{key:"_isSatisfied",value:function(e){var t=this.cellsThatMatchTile(e,this.tile),r=this.cellsThatMatchTile(t,this.onTile);switch(this.qualifier){case n.NO:return 0===r.length;case n.ANY:case n.SOME:return r.length>0;case n.ALL:return r.length===t.length;default:throw new Error('BUG: Invalid qualifier: "'.concat(this.qualifier,'"'))}}}]),t}()},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(0),o=r(13);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=0,h=function(e){function t(e,r){var o,s,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,u=a(t).call(this,e),(o=!u||"object"!==l(u)&&"function"!=typeof u?c(s):u).id=f++,r.forEach(function(e){e.setCollisionLayer(c(c(o))),e._getDescendantTiles().forEach(function(e){e.setCollisionLayer(c(c(o)))})}),o.sprites=i(new Set(Object(n.g)(r.map(function(e){return e.getSprites()})))),o.sprites.forEach(function(e,t){return e.setCollisionLayerAndIndex(c(c(o)),t)}),o}var r,h,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o["a"]),r=t,(h=[{key:"getBitSetIndexOf",value:function(e){var t=this.sprites.indexOf(e);if(t<0)throw new Error("BUG: Sprite is not in this CollisionLayer");return t}}])&&s(r.prototype,h),d&&s(r,d),t}()},function(e,t,r){var n=r(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){"use strict";var n=r(3);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){var n=r(3),o=r(15),l=r(8)("species");e.exports=function(e,t){var r,i=n(e).constructor;return void 0===i||null==(r=n(i)[l])?t:o(r)}},function(e,t,r){var n=r(26),o=r(4),l=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return l[e]||(l[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(38)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var n=r(23),o=r(9),l=r(44);e.exports=function(e){return function(t,r,i){var s,a=n(t),u=o(a.length),c=l(i,u);if(e&&r!=r){for(;u>c;)if((s=a[c++])!=s)return!0}else for(;u>c;c++)if((e||c in a)&&a[c]===r)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(28);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(29),o=r(32);e.exports=function(e){return function(t,r){var l,i,s=String(o(t)),a=n(r),u=s.length;return a<0||a>=u?e?"":void 0:(l=s.charCodeAt(a))<55296||l>56319||a+1===u||(i=s.charCodeAt(a+1))<56320||i>57343?e?s.charAt(a):l:e?s.slice(a,a+2):i-56320+(l-55296<<10)+65536}}},function(e,t,r){var n=r(6),o=r(28),l=r(8)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==o(e))}},function(e,t,r){var n=r(8)("iterator"),o=!1;try{var l=[7][n]();l.return=function(){o=!0},Array.from(l,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var l=[7],i=l[n]();i.next=function(){return{done:r=!0}},l[n]=function(){return i},e(l)}catch(e){}return r}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(53),l=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!==n(i))throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==o(e))throw new TypeError("RegExp#exec called on incompatible receiver");return l.call(e,t)}},function(e,t,r){"use strict";r(129);var n=r(19),o=r(18),l=r(5),i=r(32),s=r(8),a=r(100),u=s("species"),c=!l(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var h=s(e),d=!l(function(){var t={};return t[h]=function(){return 7},7!=""[e](t)}),p=d?!l(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[h](""),!t}):void 0;if(!d||!p||"replace"===e&&!c||"split"===e&&!f){var v=/./[h],w=r(i,h,""[e],function(e,t,r,n,o){return t.exec===a?d&&!o?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),y=w[0],g=w[1];n(String.prototype,e,y),o(RegExp.prototype,h,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},function(e,t,r){var n=r(4).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){"use strict";var n=r(4),o=r(1),l=r(19),i=r(50),s=r(37),a=r(49),u=r(48),c=r(6),f=r(5),h=r(69),d=r(52),p=r(86);e.exports=function(e,t,r,v,w,y){var g=n[e],m=g,b=w?"set":"add",_=m&&m.prototype,S={},k=function(e){var t=_[e];l(_,e,"delete"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof m&&(y||_.forEach&&!f(function(){(new m).entries().next()}))){var E=new m,C=E[b](y?{}:-0,1)!=E,T=f(function(){E.has(1)}),O=h(function(e){new m(e)}),M=!y&&f(function(){for(var e=new m,t=5;t--;)e[b](t,t);return!e.has(-0)});O||((m=t(function(t,r){u(t,m,e);var n=p(new g,t,m);return null!=r&&a(r,w,n[b],n),n})).prototype=_,_.constructor=m),(T||M)&&(k("delete"),k("has"),w&&k("get")),(M||C)&&k(b),y&&_.clear&&delete _.clear}else m=v.getConstructor(t,e,w,b),i(m.prototype,r),s.NEED=!0;return d(m,e),S[e]=m,o(o.G+o.W+o.F*(m!=g),S),y||v.setStrong(m,e,w),m}},function(e,t,r){for(var n,o=r(4),l=r(18),i=r(42),s=i("typed_array"),a=i("view"),u=!(!o.ArrayBuffer||!o.DataView),c=u,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(n=o[h[f++]])?(l(n.prototype,s,!0),l(n.prototype,a,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:a}},function(e,t,r){"use strict";e.exports=r(38)||!r(5)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete r(4)[e]})},function(e,t,r){"use strict";var n=r(1);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){"use strict";var n=r(1),o=r(15),l=r(27),i=r(49);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,a=arguments[1];return o(this),(t=void 0!==a)&&o(a),null==e?new this:(r=[],t?(n=0,s=l(a,arguments[2],2),i(e,!1,function(e){r.push(s(e,n++))})):i(e,!1,r.push,r),new this(r))}})}},function(e,t,r){"use strict";var n=r(16),o=r(14);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=new Map;function s(e,t,r){var l=new n.a(e,"#ffffff"),i=new n.a(e,"#000000"),s=r.map(function(e){return e.map(function(e){return 0===e?i:l})});return new o.e(e,'letterchar="'.concat(t,'"'),"",s)}function a(e,t){i.set(e,t)}a("a",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,0]]),a("b",[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,0,0],[1,0,0,1,0],[0,1,1,0,0]]),a("c",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[0,1,1,1,0]]),a("d",[[0,0,0,1,0],[0,0,0,1,0],[0,1,1,1,0],[1,0,0,1,0],[0,1,1,0,0]]),a("e",[[0,1,1,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,0,0],[0,1,1,0,0]]),a("f",[[0,0,0,0,0],[0,0,1,1,0],[0,1,0,0,0],[1,1,1,0,0],[0,1,0,0,0]]),a("g",[[0,1,1,0,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0],[0,1,1,0,0]]),a("h",[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0]]),a("i",[[0,0,1,0,0],[0,0,0,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,1,1,1,0]]),a("j",[[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[1,0,1,0,0],[0,1,0,0,0]]),a("k",[[1,0,0,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0]]),a("l",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,1,0],[0,1,1,0,0]]),a("m",[[0,0,0,0,0],[0,1,0,1,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]]),a("n",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0]]),a("o",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,0,0]]),a("p",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,0,0]]),a("q",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0]]),a("r",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0]]),a("s",[[0,1,1,1,0],[1,0,0,0,0],[0,1,1,0,0],[0,0,0,1,0],[1,1,1,0,0]]),a("t",[[0,1,0,0,0],[1,1,1,0,0],[0,1,0,0,0],[0,1,0,0,1],[0,0,1,1,0]]),a("u",[[0,0,0,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0],[1,1,1,0,0]]),a("v",[[0,0,0,0,0],[1,0,0,1,0],[1,0,1,0,0],[1,1,0,0,0],[1,0,0,0,0]]),a("w",[[0,0,0,0,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,0,1,0]]),a("x",[[0,0,0,0,0],[1,0,0,1,0],[0,1,1,0,0],[0,1,1,0,0],[1,0,0,1,0]]),a("y",[[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0],[1,1,1,0,0]]),a("z",[[0,0,0,0,0],[1,1,1,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,0]]),a("A",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]]),a("B",[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0]]),a("C",[[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]]),a("D",[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0]]),a("E",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]]),a("F",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]]),a("G",[[0,1,1,1,1],[1,0,0,0,0],[1,0,0,1,1],[1,0,0,0,1],[0,1,1,1,1]]),a("H",[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]]),a("I",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]]),a("J",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,0,0]]),a("K",[[1,0,0,0,1],[1,0,1,1,0],[1,1,0,0,0],[1,0,1,1,0],[1,0,0,0,1]]),a("L",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]]),a("M",[[1,1,1,1,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]]),a("N",[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1]]),a("O",[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]]),a("P",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]]),a("Q",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,0,0,1],[0,0,0,0,1]]),a("R",[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1]]),a("S",[[0,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),a("T",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]]),a("U",[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]]),a("V",[[1,0,0,0,1],[0,1,0,1,0],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0]]),a("W",[[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,0,1,0]]),a("X",[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]]),a("Y",[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]]),a("Z",[[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]),a("0",[[1,1,1,1,1],[1,0,0,1,1],[1,0,1,0,1],[1,1,0,0,1],[1,1,1,1,1]]),a("1",[[1,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]]),a("2",[[1,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]]),a("3",[[1,1,1,1,0],[0,0,0,0,1],[0,0,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),a("4",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,1,0],[1,1,1,1,1],[0,0,0,1,0]]),a("5",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),a("6",[[0,1,1,1,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0]]),a("7",[[1,1,1,1,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]]),a("8",[[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0]]),a("9",[[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,1,1,1,0]]),a(".",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0]]),a(",",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,1,0,0]]),a(";",[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,1,0,0]]),a(":",[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0]]),a("?",[[0,1,1,1,0],[1,0,0,0,1],[0,0,1,1,0],[0,0,1,0,0],[0,0,1,0,0]]),a("!",[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0]]),a("@",[[0,1,1,1,0],[1,0,0,0,1],[1,0,1,1,1],[1,0,0,0,0],[0,1,1,1,0]]),a("",[[0,1,1,1,0],[0,1,0,0,1],[1,1,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]),a("$",[[0,1,1,1,1],[1,0,1,0,0],[0,1,1,1,0],[0,0,1,0,1],[1,1,1,1,0]]),a("%",[[1,1,0,0,1],[1,1,0,1,0],[0,0,1,0,0],[0,1,0,1,1],[1,0,0,1,1]]),a("^",[[0,0,1,0,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("&",[[0,1,1,0,0],[1,0,0,0,0],[0,1,0,1,1],[1,0,0,1,0],[0,1,1,0,0]]),a("*",[[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0]]),a("(",[[0,0,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,1,0]]),a(")",[[0,1,0,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,0,0,0]]),a("+",[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]]),a("-",[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]]),a("_",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1]]),a("=",[[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0]]),a(" ",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("{",[[0,0,1,1,0],[0,0,1,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,1,1,0]]),a("}",[[0,1,1,0,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,1,0,0],[0,1,1,0,0]]),a("[",[[0,0,1,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,1,0]]),a("]",[[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,0,0]]),a("'",[[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a('"',[[0,1,0,1,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("/",[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]]),a("\\",[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]]),a("|",[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]]),a("<",[[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0]]),a(">",[[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]]),a("~",[[0,0,0,0,0],[0,1,0,0,0],[1,0,1,0,1],[0,0,0,1,0],[0,0,0,0,0]]),a("`",[[0,1,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("#",[[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0]]);var u=r(58);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",function(){return h});var h=function(){function e(t,r,n,o,a,f,h,d,p,v){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=r,this.metadata=n,this.objects=o,this.legends=a,this.sounds=f,this.collisionLayers=h,this.winConditions=p,this.levels=v,this.rules=d,this.cachedBackgroundSprite=null;var w=this.objects.filter(function(e){return e.hasPixels()})[0];if(w){var y=w.getPixels(1,1);this.cacheSpriteSize={spriteHeight:y.length,spriteWidth:y[0].length}}else this.cacheSpriteSize={spriteHeight:1,spriteWidth:1};var g=this.objects.length;this.letterSprites=function(e){var t=new Map,r=!0,n=!1,o=void 0;try{for(var a,u=i.entries()[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=l(a.value,2),f=c[0],h=s(e,f,c[1]);t.set(f,h)}}catch(e){n=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw o}}return t}(t);var m=!0,b=!1,_=void 0;try{for(var S,k=this.letterSprites.values()[Symbol.iterator]();!(m=(S=k.next()).done);m=!0){S.value.allSpritesBitSetIndex=g++}}catch(e){b=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(b)throw _}}var E=new u.a(t,c(this.letterSprites.values()));this.collisionLayers.push(E)}var t,r,n;return t=e,(r=[{key:"_getSpriteByName",value:function(e){return this.objects.find(function(t){return t.getName().toLowerCase()===e.toLowerCase()})||null}},{key:"_getTileByName",value:function(e){return this.legends.find(function(t){return t.getName().toLowerCase()===e.toLowerCase()})}},{key:"getSpriteByName",value:function(e){var t=this._getSpriteByName(e);if(!t)throw new Error('BUG: Could not find sprite "'.concat(e,'" but expected one to exist.'));return t}},{key:"getTileByName",value:function(e){var t=this._getTileByName(e);if(!t)throw new Error('BUG: Could not find tile "'.concat(e,'" but expected one to exist.'));return t}},{key:"getMagicBackgroundSprite",value:function(){if(this.cachedBackgroundSprite)return this.cachedBackgroundSprite;var e=this._getSpriteByName("background");if(!e){var t=this.legends.find(function(e){return"background"===e.getName().toLowerCase()});if(t)return t.isOr()?null:t.getSprites()[0]}if(!e)throw new Error("ERROR: Game does not have a Background Sprite or Tile");return this.cachedBackgroundSprite=e,e}},{key:"getPlayer",value:function(){var e=this._getSpriteByName("player")||this.legends.find(function(e){return"player"===e.getName().toLowerCase()});if(!e)throw new Error("BUG: Could not find the Player sprite or tile in the game");return e}},{key:"clearCaches",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.rules[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.clearCaches()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}var l=!0,i=!1,s=void 0;try{for(var a,u=this.objects[Symbol.iterator]();!(l=(a=u.next()).done);l=!0){a.value.clearCaches()}}catch(e){i=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(i)throw s}}}},{key:"getSpriteSize",value:function(){return this.cacheSpriteSize}},{key:"getLetterSprite",value:function(e){var t=this.letterSprites.get(e);if(!t)throw new Error('BUG: Cannot find sprite for letter "'.concat(e,'"'));return t}}])&&f(t.prototype,r),n&&f(t,n),e}()},function(e,t,r){var n=r(6),o=r(4).document,l=n(o)&&n(o.createElement);e.exports=function(e){return l?o.createElement(e):{}}},function(e,t,r){var n=r(4),o=r(26),l=r(38),i=r(111),s=r(11).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=l?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},function(e,t,r){var n=r(63)("keys"),o=r(42);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(4).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(6),o=r(3),l=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(27)(Function.call,r(24).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return l(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:l}},function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(e,t,r){var n=r(6),o=r(84).set;e.exports=function(e,t,r){var l,i=t.constructor;return i!==r&&"function"==typeof i&&(l=i.prototype)!==r.prototype&&n(l)&&o&&o(e,l),e}},function(e,t,r){"use strict";var n=r(29),o=r(32);e.exports=function(e){var t=String(o(this)),r="",l=n(e);if(l<0||l==1/0)throw RangeError("Count can't be negative");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(r+=t);return r}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){"use strict";var n=r(38),o=r(1),l=r(19),i=r(18),s=r(55),a=r(91),u=r(52),c=r(25),f=r(8)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,p,v,w,y){a(r,t,p);var g,m,b,_=function(e){if(!h&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},S=t+" Iterator",k="values"==v,E=!1,C=e.prototype,T=C[f]||C["@@iterator"]||v&&C[v],O=T||_(v),M=v?k?_("entries"):O:void 0,x="Array"==t&&C.entries||T;if(x&&(b=c(x.call(new e)))!==Object.prototype&&b.next&&(u(b,S,!0),n||"function"==typeof b[f]||i(b,f,d)),k&&T&&"values"!==T.name&&(E=!0,O=function(){return T.call(this)}),n&&!y||!h&&!E&&C[f]||i(C,f,O),s[t]=O,s[S]=d,v)if(g={values:k?O:_("values"),keys:w?O:_("keys"),entries:M},y)for(m in g)m in C||l(C,m,g[m]);else o(o.P+o.F*(h||E),t,g);return g}},function(e,t,r){"use strict";var n=r(45),o=r(41),l=r(52),i={};r(18)(i,r(8)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(i,{next:o(1,r)}),l(e,t+" Iterator")}},function(e,t,r){var n=r(68),o=r(32);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(e))}},function(e,t,r){var n=r(8)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(55),o=r(8)("iterator"),l=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||l[o]===e)}},function(e,t,r){"use strict";var n=r(11),o=r(41);e.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},function(e,t,r){var n=r(53),o=r(8)("iterator"),l=r(55);e.exports=r(26).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||l[n(e)]}},function(e,t,r){var n=r(245);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(12),o=r(44),l=r(9);e.exports=function(e){for(var t=n(this),r=l(t.length),i=arguments.length,s=o(i>1?arguments[1]:void 0,r),a=i>2?arguments[2]:void 0,u=void 0===a?r:o(a,r);u>s;)t[s++]=e;return t}},function(e,t,r){"use strict";var n=r(39),o=r(128),l=r(55),i=r(23);e.exports=r(90)(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),l.Arguments=l.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";var n,o,l=r(61),i=RegExp.prototype.exec,s=String.prototype.replace,a=i,u=(n=/a/,o=/b*/g,i.call(n,"a"),i.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(a=function(e){var t,r,n,o,a=this;return c&&(r=new RegExp("^"+a.source+"$(?!\\s)",l.call(a))),u&&(t=a.lastIndex),n=i.call(a,e),u&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),c&&n&&n.length>1&&s.call(n[0],r,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n}),e.exports=a},function(e,t,r){"use strict";var n=r(67)(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},function(e,t,r){var n,o,l,i=r(27),s=r(118),a=r(83),u=r(79),c=r(4),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,w=0,y={},g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},m=function(e){g.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++w]=function(){s("function"==typeof e?e:Function(e),t)},n(w),w},d=function(e){delete y[e]},"process"==r(28)(f)?n=function(e){f.nextTick(i(g,e,1))}:v&&v.now?n=function(e){v.now(i(g,e,1))}:p?(l=(o=new p).port2,o.port1.onmessage=m,n=i(l.postMessage,l,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",m,!1)):n="onreadystatechange"in u("script")?function(e){a.appendChild(u("script")).onreadystatechange=function(){a.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),e.exports={set:h,clear:d}},function(e,t,r){var n=r(4),o=r(102).set,l=n.MutationObserver||n.WebKitMutationObserver,i=n.process,s=n.Promise,a="process"==r(28)(i);e.exports=function(){var e,t,r,u=function(){var n,o;for(a&&(n=i.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(a)r=function(){i.nextTick(u)};else if(!l||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(u)}}else r=function(){o.call(n,u)};else{var f=!0,h=document.createTextNode("");new l(u).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){"use strict";var n=r(15);function o(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new o(e)}},function(e,t,r){"use strict";var n=r(4),o=r(10),l=r(38),i=r(74),s=r(18),a=r(50),u=r(5),c=r(48),f=r(29),h=r(9),d=r(138),p=r(46).f,v=r(11).f,w=r(98),y=r(52),g="prototype",m="Wrong index!",b=n.ArrayBuffer,_=n.DataView,S=n.Math,k=n.RangeError,E=n.Infinity,C=b,T=S.abs,O=S.pow,M=S.floor,x=S.log,R=S.LN2,A=o?"_b":"buffer",I=o?"_l":"byteLength",L=o?"_o":"byteOffset";function P(e,t,r){var n,o,l,i=new Array(r),s=8*r-t-1,a=(1<<s)-1,u=a>>1,c=23===t?O(2,-24)-O(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for((e=T(e))!=e||e===E?(o=e!=e?1:0,n=a):(n=M(x(e)/R),e*(l=O(2,-n))<1&&(n--,l*=2),(e+=n+u>=1?c/l:c*O(2,1-u))*l>=2&&(n++,l/=2),n+u>=a?(o=0,n=a):n+u>=1?(o=(e*l-1)*O(2,t),n+=u):(o=e*O(2,u-1)*O(2,t),n=0));t>=8;i[f++]=255&o,o/=256,t-=8);for(n=n<<t|o,s+=t;s>0;i[f++]=255&n,n/=256,s-=8);return i[--f]|=128*h,i}function F(e,t,r){var n,o=8*r-t-1,l=(1<<o)-1,i=l>>1,s=o-7,a=r-1,u=e[a--],c=127&u;for(u>>=7;s>0;c=256*c+e[a],a--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=t;s>0;n=256*n+e[a],a--,s-=8);if(0===c)c=1-i;else{if(c===l)return n?NaN:u?-E:E;n+=O(2,t),c-=i}return(u?-1:1)*n*O(2,c-t)}function N(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function D(e){return[255&e]}function B(e){return[255&e,e>>8&255]}function G(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function j(e){return P(e,52,8)}function U(e){return P(e,23,4)}function W(e,t,r){v(e[g],t,{get:function(){return this[r]}})}function H(e,t,r,n){var o=d(+r);if(o+t>e[I])throw k(m);var l=e[A]._b,i=o+e[L],s=l.slice(i,i+t);return n?s:s.reverse()}function q(e,t,r,n,o,l){var i=d(+r);if(i+t>e[I])throw k(m);for(var s=e[A]._b,a=i+e[L],u=n(+o),c=0;c<t;c++)s[a+c]=u[l?c:t-c-1]}if(i.ABV){if(!u(function(){b(1)})||!u(function(){new b(-1)})||u(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var z,V=(b=function(e){return c(this,b),new C(d(e))})[g]=C[g],K=p(C),J=0;K.length>J;)(z=K[J++])in b||s(b,z,C[z]);l||(V.constructor=b)}var Y=new _(new b(2)),X=_[g].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||a(_[g],{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},!0)}else b=function(e){c(this,b,"ArrayBuffer");var t=d(e);this._b=w.call(new Array(t),0),this[I]=t},_=function(e,t,r){c(this,_,"DataView"),c(e,b,"DataView");var n=e[I],o=f(t);if(o<0||o>n)throw k("Wrong offset!");if(o+(r=void 0===r?n-o:h(r))>n)throw k("Wrong length!");this[A]=e,this[L]=o,this[I]=r},o&&(W(b,"byteLength","_l"),W(_,"buffer","_b"),W(_,"byteLength","_l"),W(_,"byteOffset","_o")),a(_[g],{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){var t=H(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=H(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return N(H(this,4,e,arguments[1]))},getUint32:function(e){return N(H(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return F(H(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return F(H(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){q(this,1,e,D,t)},setUint8:function(e,t){q(this,1,e,D,t)},setInt16:function(e,t){q(this,2,e,B,t,arguments[2])},setUint16:function(e,t){q(this,2,e,B,t,arguments[2])},setInt32:function(e,t){q(this,4,e,G,t,arguments[2])},setUint32:function(e,t){q(this,4,e,G,t,arguments[2])},setFloat32:function(e,t){q(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){q(this,8,e,j,t,arguments[2])}});y(b,"ArrayBuffer"),y(_,"DataView"),s(_[g],i.VIEW,!0),t.ArrayBuffer=b,t.DataView=_},function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
 * @license BitSet.js v5.0.4 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license BitSet.js v5.0.4 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
!function(r){"use strict";var l=32,i=5;function s(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}function a(e,t){for(var r=0,n=0;n<e.length;n++){r*=2;var o=(e[n]+r)/t|0;r=(e[n]+r)%t,e[n]=o}return r}function u(e,t){if(null==t)return e.data=[0,0,0,0,0,0,0,0,0,0],void(e._=0);if(t instanceof c)return e.data=t.data,void(e._=t._);switch(o(t)){case"number":e.data=[0|t],e._=0;break;case"string":var r=2,n=l;0===t.indexOf("0b")?t=t.substr(2):0===t.indexOf("0x")&&(t=t.substr(2),r=16,n=8),e.data=[],e._=0;for(var s=t.length-n,a=t.length;;){var u=parseInt(t.slice(s>0?s:0,a),r);if(isNaN(u))throw SyntaxError("Invalid param");if(e.data.push(0|u),s<=0)break;s-=n,a-=n}break;default:e.data=[0];var h=e.data;if(t instanceof Array){for(var d=t.length-1;d>=0;d--){var p=t[d];p===1/0?e._=-1:(f(e,p),h[p>>>i]|=1<<p)}break}if(Uint8Array&&t instanceof Uint8Array){f(e,8*t.length);for(d=0;d<t.length;d++)for(var v=t[d],w=0;w<8;w++){var y=8*d+w;h[y>>>i]|=(v>>w&1)<<y}break}throw SyntaxError("Invalid param")}}function c(e){if(!(this instanceof c))return new c(e);u(this,e),this.data=this.data.slice()}function f(e,t){for(var r=t>>>i,n=e.data,o=e._,l=n.length;r>=l;r--)n.push(o)}var h={data:[],_:0};c.prototype={data:[],_:0,set:function(e,t){return f(this,e|=0),void 0===t||t?this.data[e>>>i]|=1<<e:this.data[e>>>i]&=~(1<<e),this},get:function(e){e|=0;var t=this.data,r=e>>>i;return r>t.length?1&this._:t[r]>>>e&1},not:function(){for(var e=this.clone(),t=e.data,r=0;r<t.length;r++)t[r]=~t[r];return e._=~e._,e},and:function(e){u(h,e);var t=this.clone(),r=t.data,n=h.data,o=n.length,i=h._;0!==t._&&f(t,o*l-1);for(var s=r.length,a=Math.min(o,s),c=0;c<a;c++)r[c]&=n[c];for(;c<s;c++)r[c]&=i;return t._&=i,t},or:function(e){u(h,e);for(var t=this.clone(),r=t.data,n=h.data,o=n.length-1,l=r.length-1,i=Math.min(l,o),s=o;s>i;s--)r[s]=n[s];for(;s>=0;s--)r[s]|=n[s];return t._|=h._,t},xor:function(e){u(h,e);var t=this.clone(),r=t.data,n=h.data,o=t._,l=h._,i=0,s=r.length-1,a=n.length-1;for(i=s;i>a;i--)r[i]^=l;for(i=a;i>s;i--)r[i]=o^n[i];for(;i>=0;i--)r[i]^=n[i];return t._^=l,t},andNot:function(e){return this.and(new c(e).flip())},flip:function(e,t){if(void 0===e){for(var r=this.data,n=0;n<r.length;n++)r[n]=~r[n];this._=~this._}else if(void 0===t)f(this,e),this.data[e>>>i]^=1<<e;else if(0<=e&&e<=t){f(this,t);for(n=e;n<=t;n++)this.data[n>>>i]^=1<<n}return this},clear:function(e,t){var r=this.data;if(void 0===e){for(var n=r.length-1;n>=0;n--)r[n]=0;this._=0}else if(void 0===t)f(this,e|=0),r[e>>>i]&=~(1<<e);else if(e<=t){f(this,t);for(n=e;n<=t;n++)r[n>>>i]&=~(1<<n)}return this},slice:function(e,t){if(void 0===e)return this.clone();if(void 0===t){t=this.data.length*l,(n=Object.create(c.prototype))._=this._,n.data=[0];for(var r=e;r<=t;r++)n.set(r-e,this.get(r));return n}if(e<=t&&0<=e){var n;(n=Object.create(c.prototype)).data=[0];for(r=e;r<=t;r++)n.set(r-e,this.get(r));return n}return null},setRange:function(e,t,r){for(var n=e;n<=t;n++)this.set(n,r);return this},clone:function(){var e=Object.create(c.prototype);return e.data=this.data.slice(),e._=this._,e},toArray:Math.clz32?function(){for(var e=[],t=this.data,r=t.length-1;r>=0;r--)for(var n=t[r];0!==n;){var o=31-Math.clz32(n);n^=1<<o,e.unshift(r*l+o)}return 0!==this._&&e.push(1/0),e}:function(){for(var e=[],t=this.data,r=0;r<t.length;r++)for(var n=t[r];0!==n;){var o=n&-n;n^=o,e.push(r*l+s(o-1))}return 0!==this._&&e.push(1/0),e},toString:function(e){var t=this.data;if(e||(e=2),0==(e&e-1)&&e<36){for(var r="",n=2+Math.log(4294967295)/Math.log(e)|0,o=t.length-1;o>=0;o--){var i=t[o];i<0&&(i+=4294967296);var s=i.toString(e);""!==r&&(r+="0".repeat(n-s.length-1)),r+=s}return 0===this._?(""===(r=r.replace(/^0+/,""))&&(r="0"),r):(r="1111"+r).replace(/^1+/,"...1111")}if(2>e||e>36)throw SyntaxError("Invalid base");r=[];var u=[];for(o=t.length;o--;)for(var c=l;c--;)u.push(t[o]>>>c&1);do{r.unshift(a(u,e).toString(e))}while(!u.every(function(e){return 0===e}));return r.join("")},isEmpty:function(){if(0!==this._)return!1;for(var e=this.data,t=e.length-1;t>=0;t--)if(0!==e[t])return!1;return!0},cardinality:function(){if(0!==this._)return 1/0;for(var e=0,t=this.data,r=0;r<t.length;r++){var n=t[r];0!==n&&(e+=s(n))}return e},msb:Math.clz32?function(){if(0!==this._)return 1/0;for(var e=this.data,t=e.length;t-- >0;){var r=Math.clz32(e[t]);if(r!==l)return t*l+l-1-r}return 1/0}:function(){if(0!==this._)return 1/0;for(var e=this.data,t=e.length;t-- >0;){var r=e[t],n=0;if(r){for(;(r>>>=1)>0;n++);return t*l+n}}return 1/0},ntz:function(){for(var e=this.data,t=0;t<e.length;t++){var r=e[t];if(0!==r)return t*l+s(r=(r^r-1)>>>1)}return 1/0},lsb:function(){for(var e=this.data,t=0;t<e.length;t++){var r=e[t],n=0;if(r){for(var o=r&-r;o>>>=1;n++);return l*t+n}}return 1&this._},equals:function(e){u(h,e);var t=this.data,r=h.data,n=this._,o=h._,l=t.length-1,i=r.length-1;if(o!==n)return!1;for(var s=l<i?l:i,a=0;a<=s;a++)if(t[a]!==r[a])return!1;for(a=l;a>i;a--)if(t[a]!==o)return!1;for(a=i;a>l;a--)if(r[a]!==n)return!1;return!0}},c.fromBinaryString=function(e){return new c("0b"+e)},c.fromHexString=function(e){return new c("0x"+e)},c.Random=function(e){(void 0===e||e<0)&&(e=l);for(var t=e%l,r=[],n=Math.ceil(e/l),o=Object.create(c.prototype),i=0;i<n;i++)r.push(4294967296*Math.random()|0);return t>0&&(r[n-1]&=(1<<t)-1),o.data=r,o._=0,o},void 0===(n=function(){return c}.apply(t,[]))||(e.exports=n)}()},function(e,t){var r,n,o=e.exports={};function l(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch(e){r=l}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a,u=[],c=!1,f=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):f=-1,u.length&&d())}function d(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(a=u,u=[];++f<t;)a&&a[f].run();f=-1,t=u.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";r.d(t,"a",function(){return S});var n,o=r(58),l=r(16),i=r(78),s=r(51),a=r(7),u=r(14),c=r(57),f=r(2);function h(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function m(e){return e}!function(e){e.OR="OR",e.AND="AND",e.SIMPLE="SIMPLE",e.SPRITE="SPRITE"}(n||(n={}));var b=function(){function e(t){w(this,e),this.counter=0,this.prefix=t,this.idMap=new Map,this.jsonMap=new Map}return g(e,[{key:"set",value:function(e,t,r){return this.idMap.has(e)||this.idMap.set(e,r||this.freshId()),this.jsonMap.set(e,t),this.getId(e)}},{key:"get",value:function(e){var t=this.jsonMap.get(e);if(!t)throw new Error("BUG: Element has not been added to the set");return t}},{key:"getId",value:function(e){var t=this.idMap.get(e);if(!t)throw new Error("BUG: Element has not been added to the set");return t}},{key:"toJson",value:function(){var e={},t=!0,r=!1,n=void 0;try{for(var o,l=this.idMap[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=v(o.value,2),s=i[0],a=i[1],u=this.jsonMap.get(s);if(!u)throw new Error('BUG: Could not find matching json representation for "'.concat(a,'"'));e[a]=u}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e}},{key:"freshId",value:function(){return"".concat(this.prefix,"-").concat(this.counter++)}}]),e}(),_=function(){function e(){w(this,e),this.map=new Map}return g(e,[{key:"get",value:function(e){var t=this.map.get(e);if(!t)throw new Error('ERROR: JSON is missing key "'.concat(e,'". Should have already been added'));return t}},{key:"set",value:function(e,t){this.map.set(e,t)}},{key:"values",value:function(){return this.map.values()}}]),e}(),S=function(){function e(t){var r=this;if(w(this,e),this.game=t,this.colorsMap=new Map,this.spritesMap=new b("sprite"),this.soundMap=new b("sound"),this.collisionLayerMap=new b("collision"),this.conditionsMap=new b("bracket"),this.neighborsMap=new b("neighbor"),this.tileWithModifierMap=new b("twm"),this.tileMap=new b("tile"),this.ruleMap=new b("rule"),this.commandMap=new b("command"),this.game.metadata.backgroundColor){var n=this.game.metadata.backgroundColor.toHex();this.colorsMap.set(n,n)}if(this.game.metadata.textColor){var o=this.game.metadata.textColor.toHex();this.colorsMap.set(o,o)}this.game.collisionLayers.forEach(function(e){return r.buildCollisionLayer(e)}),this.game.sounds.forEach(function(e){r.buildSound(e)}),this.game.objects.forEach(function(e){r.buildSprite(e)}),this.orderedRules=this.game.rules.map(function(e){return r.recBuildRule(e)}),this.game.legends.forEach(function(e){r.buildTile(e)}),this.levels=this.game.levels.map(function(e){return r.buildLevel(e)}),this.winConditions=this.game.winConditions.map(function(e){return e instanceof c.a?{_sourceOffset:e.__source.sourceOffset,type:f.j.ON,qualifier:e.qualifier,tile:r.buildTile(e.tile),onTile:r.buildTile(e.onTile)}:{_sourceOffset:e.__source.sourceOffset,type:f.j.SIMPLE,qualifier:e.qualifier,tile:r.buildTile(e.tile)}})}return g(e,null,[{key:"fromJson",value:function(e,t){for(var r=new _,n=new _,p=new _,w=new _,y=new _,g=new _,m=new _,b=new _,S=new _,k=new _,E=Object.entries(e.colors),C=0;C<E.length;C++){var T=v(E[C],2),O=T[0],M=T[1];r.set(O,new l.a({code:t,sourceOffset:0},M))}for(var x=new _,R=Object.entries(e.collisionLayers),A=0;A<R.length;A++){var I=v(R[A],1)[0];x.set(I,[])}for(var L=new l.b({code:t,sourceOffset:0}),P=0,F=Object.entries(e.sprites),N=0;N<F.length;N++){var D=v(F[N],2),B=D[0],G=(M=D[1])._sourceOffset,j=M.name,U=M.pixels,W=new u.e({code:t,sourceOffset:G},j,null,U.map(function(e){return e.map(function(e){return e&&r.get(e)||L})}));W.allSpritesBitSetIndex=P,P++,n.set(B,W),x.get(M.collisionLayer).push(W)}for(var H=Object.entries(e.tiles),q=0;q<H.length;q++){var z=v(H[q],2),V=z[0],K=(G=(M=z[1])._sourceOffset,void 0);switch(M.type){case"OR":K=new u.b({code:t,sourceOffset:G},M.name,M.sprites.map(function(e){return n.get(e)}));break;case"AND":K=new u.a({code:t,sourceOffset:G},M.name,M.sprites.map(function(e){return n.get(e)}));break;case"SIMPLE":case"SPRITE":K=new u.c({code:t,sourceOffset:G},M.name,n.get(M.sprite));break;default:throw new Error("ERROR: Unsupported tile type")}b.set(V,K)}for(var J=Object.entries(e.sounds),Y=0;Y<J.length;Y++){var X=v(J[Y],2),$=X[0];switch((M=X[1]).type){case f.g.SFX:case f.g.WHEN:p.set($,d({},M));break;case f.g.SPRITE_DIRECTION:case f.g.SPRITE_EVENT:case f.g.SPRITE_MOVE:p.set($,d({},M,{sprite:b.get(M.sprite)}))}}for(var Z=Object.entries(e.commands),Q=0;Q<Z.length;Q++){var ee=v(Z[Q],2),te=ee[0];switch((M=ee[1]).type){case f.c.MESSAGE:k.set(te,M);break;case f.c.SFX:k.set(te,d({},M,{sound:p.get(M.sound)}));break;case f.c.RESTART:case f.c.AGAIN:case f.c.CANCEL:case f.c.CHECKPOINT:case f.c.WIN:k.set(te,M);break;default:throw new Error("ERROR: Unsupported command type")}}for(var re=Object.entries(e.collisionLayers),ne=0;ne<re.length;ne++){var oe=v(re[ne],2),le=oe[0];G=(M=oe[1])._sourceOffset;w.set(le,new o.a({code:t,sourceOffset:G},x.get(le)))}for(var ie=Object.entries(e.tilesWithModifiers),se=0;se<ie.length;se++){var ae=v(ie[se],2),ue=ae[0];G=(M=ae[1])._sourceOffset;m.set(ue,new a.h({code:t,sourceOffset:G},M.isNegated,M.isRandom,M.direction,b.get(M.tile),M.debugFlag))}for(var ce=Object.entries(e.neighbors),fe=0;fe<ce.length;fe++){var he=v(ce[fe],2),de=he[0];G=(M=he[1])._sourceOffset;g.set(de,new a.d({code:t,sourceOffset:G},new Set(M.tileWithModifiers.map(function(e){return m.get(e)})),M.debugFlag))}for(var pe=Object.entries(e.brackets),ve=0;ve<pe.length;ve++){var we=v(pe[ve],2),ye=we[0];G=(M=we[1])._sourceOffset;switch(M.type){case f.a.SIMPLE:y.set(ye,new a.b({code:t,sourceOffset:G},M.direction,M.neighbors.map(function(e){return g.get(e)}),M.debugFlag));break;case f.a.ELLIPSIS:y.set(ye,new a.c({code:t,sourceOffset:G},M.direction,M.beforeNeighbors.map(function(e){return g.get(e)}),M.afterNeighbors.map(function(e){return g.get(e)}),M.debugFlag));break;default:throw new Error("ERROR: Unsupported bracket type")}}for(var ge=Object.entries(e.ruleDefinitions),me=0;me<ge.length;me++){var be=v(ge[me],2),_e=be[0];G=(M=be[1])._sourceOffset;switch(M.type){case f.f.SIMPLE:S.set(_e,new a.e({code:t,sourceOffset:G},M.conditions.map(function(e){return y.get(e)}),M.actions.map(function(e){return y.get(e)}),M.commands.map(function(e){return k.get(e)}),M.isLate,M.isRigid,M.debugFlag));break;case f.f.GROUP:S.set(_e,new a.f({code:t,sourceOffset:G},M.isRandom,M.rules.map(function(e){return S.get(e)})));break;case f.f.LOOP:S.set(_e,new a.g({code:t,sourceOffset:G},!1,M.rules.map(function(e){return S.get(e)})));break;default:throw new Error("ERROR: Unsupported rule type")}}for(var Se=e.levels.map(function(e){switch(e.type){case f.d.MAP:return d({},e,{cells:e.cells.map(function(e){return e.map(function(e){return b.get(e)})})});case f.d.MESSAGE:return e;default:throw new Error("ERROR: Invalid level type")}}),ke=e.winConditions.map(function(e){var r=e._sourceOffset;switch(e.type){case f.j.SIMPLE:return new c.b({code:t,sourceOffset:r},e.qualifier,b.get(e.tile));case f.j.ON:return new c.a({code:t,sourceOffset:r},e.qualifier,b.get(e.tile),b.get(e.onTile));default:throw new Error("ERROR: Unsupported Win Condition type")}}),Ee=new s.b,Ce=Object.entries(e.metadata),Te=0;Te<Ce.length;Te++){var Oe=v(Ce[Te],2),Me=Oe[0];if(M=Oe[1])switch(Me){case"backgroundColor":case"textColor":Ee._setValue(Me,r.get(M));break;case"zoomScreen":case"flickScreen":var xe=M.width,Re=M.height;Ee._setValue(Me,new s.a(xe,Re));break;default:Ee._setValue(Me,M)}}return new i.a({code:t,sourceOffset:0},e.title,Ee,h(n.values()),h(b.values()),h(p.values()),h(w.values()),e.rules.map(function(e){return S.get(e)}),ke,Se)}}]),g(e,[{key:"buildCollisionLayer",value:function(e){return this.collisionLayerMap.set(e,{_sourceOffset:e.__source.sourceOffset})}},{key:"metadataToJson",value:function(){return{author:this.game.metadata.author,homepage:this.game.metadata.homepage,youtube:this.game.metadata.youtube,zoomscreen:this.game.metadata.zoomscreen,flickscreen:this.game.metadata.flickscreen,colorPalette:this.game.metadata.colorPalette,backgroundColor:this.game.metadata.backgroundColor?this.buildColor(this.game.metadata.backgroundColor):null,textColor:this.game.metadata.textColor?this.buildColor(this.game.metadata.textColor):null,realtimeInterval:this.game.metadata.realtimeInterval,keyRepeatInterval:this.game.metadata.keyRepeatInterval,againInterval:this.game.metadata.againInterval,noAction:this.game.metadata.noAction,noUndo:this.game.metadata.noUndo,runRulesOnLevelStart:this.game.metadata.runRulesOnLevelStart,noRepeatAction:this.game.metadata.noRepeatAction,throttleMovement:this.game.metadata.throttleMovement,noRestart:this.game.metadata.noRestart,requirePlayerMovement:this.game.metadata.requirePlayerMovement,verboseLogging:this.game.metadata.verboseLogging}}},{key:"toJson",value:function(){var e={},t=!0,r=!1,n=void 0;try{for(var o,l=this.colorsMap[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=v(o.value,2),s=i[0],a=i[1];e[s]=a}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return{version:1,title:this.game.title,metadata:this.metadataToJson(),colors:e,sounds:this.soundMap.toJson(),collisionLayers:this.collisionLayerMap.toJson(),commands:this.commandMap.toJson(),sprites:this.spritesMap.toJson(),tiles:this.tileMap.toJson(),tilesWithModifiers:this.tileWithModifierMap.toJson(),neighbors:this.neighborsMap.toJson(),brackets:this.conditionsMap.toJson(),ruleDefinitions:this.ruleMap.toJson(),winConditions:this.winConditions,rules:this.orderedRules,levels:this.levels}}},{key:"buildLevel",value:function(e){var t=this;switch(e.type){case f.d.MAP:return d({},e,{cells:e.cells.map(function(e){return e.map(function(e){return t.buildTile(e)})})});case f.d.MESSAGE:return e;default:throw new Error("BUG: Unsupported level subtype")}}},{key:"recBuildRule",value:function(e){var t=this;if(e instanceof a.e)return this.ruleMap.set(e,{type:f.f.SIMPLE,directions:[],conditions:e.conditionBrackets.map(function(e){return t.buildConditionBracket(e)}),actions:e.actionBrackets.map(function(e){return t.buildConditionBracket(e)}),commands:e.commands.map(function(e){return t.buildCommand(e)}),isRandom:null,isLate:e.isLate(),isRigid:e.hasRigid(),_sourceOffset:e.__source.sourceOffset,debugFlag:e.debugFlag});if(e instanceof a.f)return this.ruleMap.set(e,{type:f.f.GROUP,isRandom:e.isRandom,rules:e.getChildRules().map(function(e){return t.recBuildRule(e)}),_sourceOffset:e.__source.sourceOffset,debugFlag:null});if(e instanceof a.g){var r={type:f.f.LOOP,rules:e.getChildRules().map(function(e){return t.recBuildRule(e)}),_sourceOffset:e.__source.sourceOffset,debugFlag:null};return this.ruleMap.set(e,r)}throw new Error("BUG: Unsupported rule type")}},{key:"buildCommand",value:function(e){switch(e.type){case f.c.SFX:return this.commandMap.set(e,d({},e,{sound:this.soundMap.getId(e.sound)}));case f.c.AGAIN:case f.c.CANCEL:case f.c.CHECKPOINT:case f.c.MESSAGE:case f.c.RESTART:case f.c.WIN:return this.commandMap.set(e,e);default:throw new Error("BUG: Unsupoprted command type")}}},{key:"buildConditionBracket",value:function(e){var t=this;if(e instanceof a.c){var r=e,n=r.beforeEllipsisBracket.getNeighbors().map(function(e){return t.buildNeighbor(e)}),o=r.afterEllipsisBracket.getNeighbors().map(function(e){return t.buildNeighbor(e)});return this.conditionsMap.set(e,{type:f.a.ELLIPSIS,direction:m(r.direction),beforeNeighbors:n,afterNeighbors:o,_sourceOffset:e.__source.sourceOffset,debugFlag:r.debugFlag})}if(e instanceof a.b)return this.conditionsMap.set(e,{type:f.a.SIMPLE,direction:m(e.direction),neighbors:e.getNeighbors().map(function(e){return t.buildNeighbor(e)}),_sourceOffset:e.__source.sourceOffset,debugFlag:e.debugFlag});throw new Error("BUG: Unsupported bracket type")}},{key:"buildNeighbor",value:function(e){var t=this;return this.neighborsMap.set(e,{tileWithModifiers:h(e._tilesWithModifier).map(function(e){return t.buildTileWithModifier(e)}),_sourceOffset:e.__source.sourceOffset,debugFlag:null})}},{key:"buildTileWithModifier",value:function(e){return this.tileWithModifierMap.set(e,{direction:e._direction?m(e._direction):null,isNegated:e._isNegated,isRandom:e._isRandom,tile:this.buildTile(e._tile),_sourceOffset:e.__source.sourceOffset,debugFlag:e._debugFlag})}},{key:"buildTile",value:function(e){var t=this;if(e instanceof u.b)return this.tileMap.set(e,{type:n.OR,name:e.getName(),sprites:e.getSprites().map(function(e){return t.buildSprite(e)}),collisionLayers:e.getCollisionLayers().map(function(e){return t.buildCollisionLayer(e)}),_sourceOffset:e.__source.sourceOffset});if(e instanceof u.a)return this.tileMap.set(e,{type:n.AND,name:e.getName(),sprites:e.getSprites().map(function(e){return t.buildSprite(e)}),collisionLayers:e.getCollisionLayers().map(function(e){return t.buildCollisionLayer(e)}),_sourceOffset:e.__source.sourceOffset});if(e instanceof u.c)return this.tileMap.set(e,{type:n.SIMPLE,name:e.getName(),sprite:this.buildSprite(e.getSprites()[0]),collisionLayers:e.getCollisionLayers().map(function(e){return t.buildCollisionLayer(e)}),_sourceOffset:e.__source.sourceOffset});if(e instanceof u.d)return this.tileMap.set(e,{type:n.SPRITE,name:e.getName(),sprite:this.buildSprite(e),collisionLayer:this.buildCollisionLayer(e.getCollisionLayer()),_sourceOffset:e.__source.sourceOffset});throw new Error("BUG: Invalid tile type")}},{key:"buildSprite",value:function(e){var t=this,r=this.game.getSpriteSize(),n=r.spriteHeight,o=r.spriteWidth;return this.spritesMap.set(e,{name:e.getName(),collisionLayer:this.collisionLayerMap.getId(e.getCollisionLayer()),pixels:e.getPixels(n,o).map(function(e){return e.map(function(e){return e.isTransparent()?null:t.buildColor(e)})}),_sourceOffset:e.__source.sourceOffset})}},{key:"buildColor",value:function(e){var t=e.toHex();return this.colorsMap.set(t,t),t}},{key:"buildSound",value:function(e){switch(e.type){case f.g.SFX:case f.g.WHEN:return this.soundMap.set(e,d({},e));case f.g.SPRITE_DIRECTION:case f.g.SPRITE_EVENT:case f.g.SPRITE_MOVE:return this.soundMap.set(e,d({},e,{sprite:this.buildTile(e.sprite)}))}}}]),e}()},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t,r){e.exports=!r(10)&&!r(5)(function(){return 7!=Object.defineProperty(r(79)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){t.f=r(8)},function(e,t,r){var n=r(22),o=r(23),l=r(64)(!1),i=r(81)("IE_PROTO");e.exports=function(e,t){var r,s=o(e),a=0,u=[];for(r in s)r!=i&&n(s,r)&&u.push(r);for(;t.length>a;)n(s,r=t[a++])&&(~l(u,r)||u.push(r));return u}},function(e,t,r){var n=r(11),o=r(3),l=r(43);e.exports=r(10)?Object.defineProperties:function(e,t){o(e);for(var r,i=l(t),s=i.length,a=0;s>a;)n.f(e,r=i[a++],t[r]);return e}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(23),l=r(46).f,i={}.toString,s="object"==("undefined"==typeof window?"undefined":n(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?function(e){try{return l(e)}catch(e){return s.slice()}}(e):l(o(e))}},function(e,t,r){"use strict";var n=r(43),o=r(65),l=r(60),i=r(12),s=r(59),a=Object.assign;e.exports=!a||r(5)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=a({},e)[r]||Object.keys(a({},t)).join("")!=n})?function(e,t){for(var r=i(e),a=arguments.length,u=1,c=o.f,f=l.f;a>u;)for(var h,d=s(arguments[u++]),p=c?n(d).concat(c(d)):n(d),v=p.length,w=0;v>w;)f.call(d,h=p[w++])&&(r[h]=d[h]);return r}:a},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){"use strict";var n=r(15),o=r(6),l=r(118),i=[].slice,s={};e.exports=Function.bind||function(e){var t=n(this),r=i.call(arguments,1),a=function n(){var o=r.concat(i.call(arguments));return this instanceof n?function(e,t,r){if(!(t in s)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)}(t,o.length,o):l(t,o,e)};return o(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(4).parseInt,o=r(54).trim,l=r(85),i=/^[-+]?0[xX]/;e.exports=8!==n(l+"08")||22!==n(l+"0x16")?function(e,t){var r=o(String(e),3);return n(r,t>>>0||(i.test(r)?16:10))}:n},function(e,t,r){var n=r(4).parseFloat,o=r(54).trim;e.exports=1/n(r(85)+"-0")!=-1/0?function(e){var t=o(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){var n=r(28);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){var n=r(6),o=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&o(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){var n=r(88),o=Math.pow,l=o(2,-52),i=o(2,-23),s=o(2,127)*(2-i),a=o(2,-126);e.exports=Math.fround||function(e){var t,r,o=Math.abs(e),u=n(e);return o<a?u*(o/a/i+1/l-1/l)*a*i:(r=(t=(1+i/l)*o)-(t-o))>s||r!=r?u*(1/0):u*r}},function(e,t,r){var n=r(3);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var l=e.return;throw void 0!==l&&n(l.call(e)),t}}},function(e,t,r){var n=r(15),o=r(12),l=r(59),i=r(9);e.exports=function(e,t,r,s,a){n(t);var u=o(e),c=l(u),f=i(u.length),h=a?f-1:0,d=a?-1:1;if(r<2)for(;;){if(h in c){s=c[h],h+=d;break}if(h+=d,a?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;a?h>=0:f>h;h+=d)h in c&&(s=t(s,c[h],h,u));return s}},function(e,t,r){"use strict";var n=r(12),o=r(44),l=r(9);e.exports=[].copyWithin||function(e,t){var r=n(this),i=l(r.length),s=o(e,i),a=o(t,i),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?i:o(u,i))-a,i-s),f=1;for(a<s&&s<a+c&&(f=-1,a+=c-1,s+=c-1);c-- >0;)a in r?r[s]=r[a]:delete r[s],s+=f,a+=f;return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(100);r(1)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(e,t,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(61)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(3),o=r(6),l=r(104);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=l.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(134),o=r(56);e.exports=r(73)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(11).f,o=r(45),l=r(50),i=r(27),s=r(48),a=r(49),u=r(90),c=r(128),f=r(47),h=r(10),d=r(37).fastKey,p=r(56),v=h?"_s":"size",w=function(e,t){var r,n=d(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,null!=n&&a(n,r,e[u],e)});return l(c.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=p(this,t),n=w(r,e);if(n){var o=n.n,l=n.p;delete r._i[n.i],n.r=!0,l&&(l.n=o),o&&(o.p=l),r._f==n&&(r._f=o),r._l==n&&(r._l=l),r[v]--}return!!n},forEach:function(e){p(this,t);for(var r,n=i(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!w(p(this,t),e)}}),h&&n(c.prototype,"size",{get:function(){return p(this,t)[v]}}),c},def:function(e,t,r){var n,o,l=w(e,t);return l?l.v=r:(e._l=l={i:o=d(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=l),n&&(n.n=l),e[v]++,"F"!==o&&(e._i[o]=l)),e},getEntry:w,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){"use strict";var n=r(134),o=r(56);e.exports=r(73)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,o=r(34)(0),l=r(19),i=r(37),s=r(115),a=r(137),u=r(6),c=r(5),f=r(56),h=i.getWeak,d=Object.isExtensible,p=a.ufstore,v={},w=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(u(e)){var t=h(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return a.def(f(this,"WeakMap"),e,t)}},g=e.exports=r(73)("WeakMap",w,y,a,!0,!0);c(function(){return 7!=(new g).set((Object.freeze||Object)(v),7).get(v)})&&(s((n=a.getConstructor(w,"WeakMap")).prototype,y),i.NEED=!0,o(["delete","has","get","set"],function(e){var t=g.prototype,r=t[e];l(t,e,function(t,o){if(u(t)&&!d(t)){this._f||(this._f=new n);var l=this._f[e](t,o);return"set"==e?this:l}return r.call(this,t,o)})}))},function(e,t,r){"use strict";var n=r(50),o=r(37).getWeak,l=r(3),i=r(6),s=r(48),a=r(49),u=r(34),c=r(22),f=r(56),h=u(5),d=u(6),p=0,v=function(e){return e._l||(e._l=new w)},w=function(){this.a=[]},y=function(e,t){return h(e.a,function(e){return e[0]===t})};w.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,l){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=p++,e._l=void 0,null!=n&&a(n,r,e[l],e)});return n(u.prototype,{delete:function(e){if(!i(e))return!1;var r=o(e);return!0===r?v(f(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!i(e))return!1;var r=o(e);return!0===r?v(f(this,t)).has(e):r&&c(r,this._i)}}),u},def:function(e,t,r){var n=o(l(t),!0);return!0===n?v(e).set(t,r):n[e._i]=r,e},ufstore:v}},function(e,t,r){var n=r(29),o=r(9);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(46),o=r(65),l=r(3),i=r(4).Reflect;e.exports=i&&i.ownKeys||function(e){var t=n.f(l(e)),r=o.f;return r?t.concat(r(e)):t}},function(e,t,r){"use strict";var n=r(66),o=r(6),l=r(9),i=r(27),s=r(8)("isConcatSpreadable");e.exports=function e(t,r,a,u,c,f,h,d){for(var p,v,w=c,y=0,g=!!h&&i(h,d,3);y<u;){if(y in a){if(p=g?g(a[y],y,r):a[y],v=!1,o(p)&&(v=void 0!==(v=p[s])?!!v:n(p)),v&&f>0)w=e(t,r,p,l(p.length),w,f-1)-1;else{if(w>=9007199254740991)throw TypeError();t[w]=p}w++}y++}return w}},function(e,t,r){var n=r(9),o=r(87),l=r(32);e.exports=function(e,t,r,i){var s=String(l(e)),a=s.length,u=void 0===r?" ":String(r),c=n(t);if(c<=a||""==u)return s;var f=c-a,h=o.call(u,Math.ceil(f/u.length));return h.length>f&&(h=h.slice(0,f)),i?h+s:s+h}},function(e,t,r){var n=r(43),o=r(23),l=r(60).f;e.exports=function(e){return function(t){for(var r,i=o(t),s=n(i),a=s.length,u=0,c=[];a>u;)l.call(i,r=s[u++])&&c.push(e?[r,i[r]]:i[r]);return c}}},function(e,t,r){var n=r(53),o=r(144);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,r){var n=r(49);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t){e.exports=Math.scale||function(e,t,r,n,o){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||o!=o?NaN:e===1/0||e===-1/0?e:(e-t)*(o-n)/(r-t)+n}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(148),o=r.n(n);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lru=new o.a({maxSize:t})}var t,r,n;return t=e,(r=[{key:"get",value:function(e,t){var r=this.lru.get(e);if(void 0!==r)return r;var n=t();return this.lru.set(e,n),n}}])&&l(t.prototype,r),n&&l(t,n),e}()},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}var t,r,l;return t=e,(r=[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:regeneratorRuntime.mark(function e(){var t,r,o,l,i,s,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=!1,o=void 0,e.prev=3,l=this[Symbol.iterator]();case 5:if(t=(i=l.next()).done){e.next=12;break}return s=n(i.value,1),a=s[0],e.next=9,a;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,o=e.t0;case 18:e.prev=18,e.prev=19,t||null==l.return||l.return();case 21:if(e.prev=21,!r){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})},{key:"values",value:regeneratorRuntime.mark(function e(){var t,r,o,l,i,s,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=!1,o=void 0,e.prev=3,l=this[Symbol.iterator]();case 5:if(t=(i=l.next()).done){e.next=12;break}return s=n(i.value,2),a=s[1],e.next=9,a;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,o=e.t0;case 18:e.prev=18,e.prev=19,t||null==l.return||l.return();case 21:if(e.prev=21,!r){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})},{key:Symbol.iterator,value:regeneratorRuntime.mark(function e(){var t,r,o,l,i,s,a,u,c,f,h,d,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=!1,o=void 0,e.prev=3,l=this.cache[Symbol.iterator]();case 5:if(t=(i=l.next()).done){e.next=12;break}return s=i.value,e.next=9,s;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,o=e.t0;case 18:e.prev=18,e.prev=19,t||null==l.return||l.return();case 21:if(e.prev=21,!r){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:a=!0,u=!1,c=void 0,e.prev=29,f=this.oldCache[Symbol.iterator]();case 31:if(a=(h=f.next()).done){e.next=40;break}if(d=h.value,p=n(d,1),v=p[0],this.cache.has(v)){e.next=37;break}return e.next=37,d;case 37:a=!0,e.next=31;break;case 40:e.next=46;break;case 42:e.prev=42,e.t1=e.catch(29),u=!0,c=e.t1;case 46:e.prev=46,e.prev=47,a||null==f.return||f.return();case 49:if(e.prev=49,!u){e.next=52;break}throw c;case 52:return e.finish(49);case 53:return e.finish(46);case 54:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25],[29,42,46,54],[47,,49,53]])})},{key:"size",get:function(){var e=0,t=!0,r=!1,n=void 0;try{for(var o,l=this.oldCache.keys()[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;this.cache.has(i)||e++}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return this._size+e}}])&&o(t.prototype,r),l&&o(t,l),e}();e.exports=l},function(e,t,r){var n,o=r(360).RNG,l=r(361).MakeRiff,i=.25,s=5512,a=8,u=0,c=["square","sawtooth","sine","noise","triangle","breaker"];function f(){try{null==n&&("undefined"!=typeof AudioContext?n=new AudioContext:"undefined"!=typeof webkitAudioContext&&(n=new webkitAudioContext))}catch(e){window.console.log(e)}}f();var h;function d(){var e={};return e.wave_type=u,e.p_env_attack=0,e.p_env_sustain=.3,e.p_env_punch=0,e.p_env_decay=.4,e.p_base_freq=.3,e.p_freq_limit=0,e.p_freq_ramp=0,e.p_freq_dramp=0,e.p_vib_strength=0,e.p_vib_speed=0,e.p_arp_mod=0,e.p_arp_speed=0,e.p_duty=0,e.p_duty_ramp=0,e.p_repeat_speed=0,e.p_pha_offset=0,e.p_pha_ramp=0,e.p_lpf_freq=1,e.p_lpf_ramp=0,e.p_lpf_resonance=0,e.p_hpf_freq=0,e.p_hpf_ramp=0,e.sound_vol=.5,e.sample_rate=44100,e.bit_depth=8,e}var p=!1;function v(e){return p?h.uniform()*e:Math.random()*e}function w(e){return p?Math.floor(h.uniform()*(e+1)):Math.floor(Math.random()*(e+1))}pickupCoin=function(){var e=d();if(e.wave_type=Math.floor(v(c.length)),3===e.wave_type&&(e.wave_type=0),e.p_base_freq=.4+v(.5),e.p_env_attack=0,e.p_env_sustain=v(.1),e.p_env_decay=.1+v(.4),e.p_env_punch=.3+v(.3),w(1)){e.p_arp_speed=.5+v(.2);var t=1+(1|v(7)),r=t+(1|v(7))+2;e.p_arp_mod=+t/+r}return e},laserShoot=function(){var e=d();return e.wave_type=w(2),2===e.wave_type&&w(1)&&(e.wave_type=w(1)),e.wave_type=Math.floor(v(c.length)),3===e.wave_type&&(e.wave_type=u),e.p_base_freq=.5+v(.5),e.p_freq_limit=e.p_base_freq-.2-v(.6),e.p_freq_limit<.2&&(e.p_freq_limit=.2),e.p_freq_ramp=-.15-v(.2),0===w(2)&&(e.p_base_freq=.3+v(.6),e.p_freq_limit=v(.1),e.p_freq_ramp=-.35-v(.3)),w(1)?(e.p_duty=v(.5),e.p_duty_ramp=v(.2)):(e.p_duty=.4+v(.5),e.p_duty_ramp=-v(.7)),e.p_env_attack=0,e.p_env_sustain=.1+v(.2),e.p_env_decay=v(.4),w(1)&&(e.p_env_punch=v(.3)),0===w(2)&&(e.p_pha_offset=v(.2),e.p_pha_ramp=-v(.2)),w(1)&&(e.p_hpf_freq=v(.3)),e},explosion=function(){var e=d();return w(1)?(e.p_base_freq=.1+v(.4),e.p_freq_ramp=-.1+v(.4)):(e.p_base_freq=.2+v(.7),e.p_freq_ramp=-.2-v(.2)),e.p_base_freq*=e.p_base_freq,0===w(4)&&(e.p_freq_ramp=0),0===w(2)&&(e.p_repeat_speed=.3+v(.5)),e.p_env_attack=0,e.p_env_sustain=.1+v(.3),e.p_env_decay=v(.5),0===w(1)&&(e.p_pha_offset=-.3+v(.9),e.p_pha_ramp=-v(.3)),e.p_env_punch=.2+v(.6),w(1)&&(e.p_vib_strength=v(.7),e.p_vib_speed=v(.6)),0===w(2)&&(e.p_arp_speed=.6+v(.3),e.p_arp_mod=.8-v(1.6)),e},birdSound=function(){var e=d();return v(10)<1?(e.wave_type=Math.floor(v(c.length)),3===e.wave_type&&(e.wave_type=u),e.p_env_attack=.4304400932967592+v(.2)-.1,e.p_env_sustain=.15739346034252394+v(.2)-.1,e.p_env_punch=.004488201744871758+v(.2)-.1,e.p_env_decay=.07478075528212291+v(.2)-.1,e.p_base_freq=.9865265720147687+v(.2)-.1,e.p_freq_limit=0+v(.2)-.1,e.p_freq_ramp=-.2995018224359539+v(.2)-.1,v(1)<.5&&(e.p_freq_ramp=.1+v(.15)),e.p_freq_dramp=.004598608156964473+v(.1)-.05,e.p_vib_strength=-.2202799497929496+v(.2)-.1,e.p_vib_speed=.8084998703158364+v(.2)-.1,e.p_arp_mod=0,e.p_arp_speed=0,e.p_duty=-.9031808754347107+v(.2)-.1,e.p_duty_ramp=-.8128699999808343+v(.2)-.1,e.p_repeat_speed=.601486018931999+v(.2)-.1,e.p_pha_offset=-.9424902314367765+v(.2)-.1,e.p_pha_ramp=-.1055482222272056+v(.2)-.1,e.p_lpf_freq=.9989765717851521+v(.2)-.1,e.p_lpf_ramp=-.25051720626043017+v(.2)-.1,e.p_lpf_resonance=.32777871505494693+v(.2)-.1,e.p_hpf_freq=.0023548750981756753+v(.2)-.1,e.p_hpf_ramp=-.002375673204842568+v(.2)-.1,e):v(10)<1?(e.wave_type=Math.floor(v(c.length)),3===e.wave_type&&(e.wave_type=u),e.p_env_attack=.5277795946672003+v(.2)-.1,e.p_env_sustain=.18243733568468432+v(.2)-.1,e.p_env_punch=-.020159754546840117+v(.2)-.1,e.p_env_decay=.1561353422051903+v(.2)-.1,e.p_base_freq=.9028855606533718+v(.2)-.1,e.p_freq_limit=-.008842787837148716,e.p_freq_ramp=-.1,e.p_freq_dramp=-.012891241489551925,e.p_vib_strength=-.17923136138403065+v(.2)-.1,e.p_vib_speed=.908263385610142+v(.2)-.1,e.p_arp_mod=.41690153355414894+v(.2)-.1,e.p_arp_speed=.0010766233195860704+v(.2)-.1,e.p_duty=-.8735363011184684+v(.2)-.1,e.p_duty_ramp=-.7397985366747507+v(.2)-.1,e.p_repeat_speed=.0591789344172107+v(.2)-.1,e.p_pha_offset=-.9961184222777699+v(.2)-.1,e.p_pha_ramp=-.08234769395850523+v(.2)-.1,e.p_lpf_freq=.9412475115697335+v(.2)-.1,e.p_lpf_ramp=-.18261358925834958+v(.2)-.1,e.p_lpf_resonance=.24541438107389477+v(.2)-.1,e.p_hpf_freq=-.01831940280978611+v(.2)-.1,e.p_hpf_ramp=-.03857383633171346+v(.2)-.1,e):v(10)<1?(e.wave_type=Math.floor(v(c.length)),3===e.wave_type&&(e.wave_type=u),e.p_env_attack=.4304400932967592+v(.2)-.1,e.p_env_sustain=.15739346034252394+v(.2)-.1,e.p_env_punch=.004488201744871758+v(.2)-.1,e.p_env_decay=.07478075528212291+v(.2)-.1,e.p_base_freq=.9865265720147687+v(.2)-.1,e.p_freq_limit=0+v(.2)-.1,e.p_freq_ramp=-.2995018224359539+v(.2)-.1,e.p_freq_dramp=.004598608156964473+v(.2)-.1,e.p_vib_strength=-.2202799497929496+v(.2)-.1,e.p_vib_speed=.8084998703158364+v(.2)-.1,e.p_arp_mod=-.46410459213693644+v(.2)-.1,e.p_arp_speed=-.10955361249587248+v(.2)-.1,e.p_duty=-.9031808754347107+v(.2)-.1,e.p_duty_ramp=-.8128699999808343+v(.2)-.1,e.p_repeat_speed=.7014860189319991+v(.2)-.1,e.p_pha_offset=-.9424902314367765+v(.2)-.1,e.p_pha_ramp=-.1055482222272056+v(.2)-.1,e.p_lpf_freq=.9989765717851521+v(.2)-.1,e.p_lpf_ramp=-.25051720626043017+v(.2)-.1,e.p_lpf_resonance=.32777871505494693+v(.2)-.1,e.p_hpf_freq=.0023548750981756753+v(.2)-.1,e.p_hpf_ramp=-.002375673204842568+v(.2)-.1,e):v(5)>1?(e.wave_type=Math.floor(v(c.length)),3===e.wave_type&&(e.wave_type=u),w(1)?(e.p_arp_mod=.2697849293151393+v(.2)-.1,e.p_arp_speed=-.3131172257760948+v(.2)-.1,e.p_base_freq=.8090588299313949+v(.2)-.1,e.p_duty=-.6210022920964955+v(.2)-.1,e.p_duty_ramp=-.00043441813553182567+v(.2)-.1,e.p_env_attack=.004321877246874195+v(.2)-.1,e.p_env_decay=.1+v(.2)-.1,e.p_env_punch=.061737781504416146+v(.2)-.1,e.p_env_sustain=.4987252564798832+v(.2)-.1,e.p_freq_dramp=.31700340314222614+v(.2)-.1,e.p_freq_limit=0+v(.2)-.1,e.p_freq_ramp=-.163380391341416+v(.2)-.1,e.p_hpf_freq=.4709005021145149+v(.2)-.1,e.p_hpf_ramp=.6924667290539194+v(.2)-.1,e.p_lpf_freq=.8351398631384511+v(.2)-.1,e.p_lpf_ramp=.36616557192873134+v(.2)-.1,e.p_lpf_resonance=-.08685777111664439+v(.2)-.1,e.p_pha_offset=-.036084571580025544+v(.2)-.1,e.p_pha_ramp=-.014806445085568108+v(.2)-.1,e.p_repeat_speed=-.8094368475518489+v(.2)-.1,e.p_vib_speed=.4496665457171294+v(.2)-.1,e.p_vib_strength=.23413762515532424+v(.2)-.1):(e.p_arp_mod=-.35697118026766184+v(.2)-.1,e.p_arp_speed=.3581140690559588+v(.2)-.1,e.p_base_freq=1.3260897696157528+v(.2)-.1,e.p_duty=-.30984900436710694+v(.2)-.1,e.p_duty_ramp=-.0014374759133411626+v(.2)-.1,e.p_env_attack=.3160357835682254+v(.2)-.1,e.p_env_decay=.1+v(.2)-.1,e.p_env_punch=.24323114016870148+v(.2)-.1,e.p_env_sustain=.4+v(.2)-.1,e.p_freq_dramp=.2866475886237244+v(.2)-.1,e.p_freq_limit=0+v(.2)-.1,e.p_freq_ramp=-.10956352368742976+v(.2)-.1,e.p_hpf_freq=.20772718017889846+v(.2)-.1,e.p_hpf_ramp=.1564090637378835+v(.2)-.1,e.p_lpf_freq=.6021372770637031+v(.2)-.1,e.p_lpf_ramp=.24016227139979027+v(.2)-.1,e.p_lpf_resonance=-.08787383821160144+v(.2)-.1,e.p_pha_offset=-.381597686151701+v(.2)-.1,e.p_pha_ramp=-.0002481687661373495+v(.2)-.1,e.p_repeat_speed=.07812112809425686+v(.2)-.1,e.p_vib_speed=-.13648848579133943+v(.2)-.1,e.p_vib_strength=.0018874158972302657+v(.2)-.1),e):(e.wave_type=Math.floor(v(c.length)),1!==e.wave_type&&3!==e.wave_type||(e.wave_type=2),e.p_base_freq=.85+v(.15),e.p_freq_ramp=.3+v(.15),e.p_env_attack=0+v(.09),e.p_env_sustain=.2+v(.3),e.p_env_decay=0+v(.1),e.p_duty=v(2)-1,e.p_duty_ramp=Math.pow(v(2)-1,3),e.p_repeat_speed=.5+v(.1),e.p_pha_offset=-.3+v(.9),e.p_pha_ramp=-v(.3),e.p_arp_speed=.4+v(.6),e.p_arp_mod=.8+v(.1),e.p_lpf_resonance=v(2)-1,e.p_lpf_freq=1-Math.pow(v(1),3),e.p_lpf_ramp=Math.pow(v(2)-1,3),e.p_lpf_freq<.1&&e.p_lpf_ramp<-.05&&(e.p_lpf_ramp=-e.p_lpf_ramp),e.p_hpf_freq=Math.pow(v(1),5),e.p_hpf_ramp=Math.pow(v(2)-1,5),e)},pushSound=function(){var e=d();return e.wave_type=Math.floor(v(c.length)),2===e.wave_type&&e.wave_type++,0===e.wave_type&&(e.wave_type=3),e.p_base_freq=.1+v(.4),e.p_freq_ramp=.05+v(.2),e.p_env_attack=.01+v(.09),e.p_env_sustain=.01+v(.09),e.p_env_decay=.01+v(.09),e.p_repeat_speed=.3+v(.5),e.p_pha_offset=-.3+v(.9),e.p_pha_ramp=-v(.3),e.p_arp_speed=.6+v(.3),e.p_arp_mod=.8-v(1.6),e},powerUp=function(){var e=d();return w(1)?e.wave_type=1:e.p_duty=v(.6),e.wave_type=Math.floor(v(c.length)),3===e.wave_type&&(e.wave_type=u),w(1)?(e.p_base_freq=.2+v(.3),e.p_freq_ramp=.1+v(.4),e.p_repeat_speed=.4+v(.4)):(e.p_base_freq=.2+v(.3),e.p_freq_ramp=.05+v(.2),w(1)&&(e.p_vib_strength=v(.7),e.p_vib_speed=v(.6))),e.p_env_attack=0,e.p_env_sustain=v(.4),e.p_env_decay=.1+v(.4),e},hitHurt=function(){return result=d(),result.wave_type=w(2),2===result.wave_type&&(result.wave_type=3),result.wave_type===u&&(result.p_duty=v(.6)),result.wave_type=Math.floor(v(c.length)),result.p_base_freq=.2+v(.6),result.p_freq_ramp=-.3-v(.4),result.p_env_attack=0,result.p_env_sustain=v(.1),result.p_env_decay=.1+v(.2),w(1)&&(result.p_hpf_freq=v(.3)),result},jump=function(){return result=d(),result.wave_type=u,result.wave_type=Math.floor(v(c.length)),3===result.wave_type&&(result.wave_type=u),result.p_duty=v(.6),result.p_base_freq=.3+v(.3),result.p_freq_ramp=.1+v(.2),result.p_env_attack=0,result.p_env_sustain=.1+v(.3),result.p_env_decay=.1+v(.2),w(1)&&(result.p_hpf_freq=v(.3)),w(1)&&(result.p_lpf_freq=1-v(.6)),result},blipSelect=function(){return result=d(),result.wave_type=w(1),result.wave_type=Math.floor(v(c.length)),3===result.wave_type&&(result.wave_type=w(1)),result.wave_type===u&&(result.p_duty=v(.6)),result.p_base_freq=.2+v(.4),result.p_env_attack=0,result.p_env_sustain=.1+v(.1),result.p_env_decay=v(.2),result.p_hpf_freq=.1,result},random=function(){return result=d(),result.wave_type=Math.floor(v(c.length)),result.p_base_freq=Math.pow(v(2)-1,2),w(1)&&(result.p_base_freq=Math.pow(v(2)-1,3)+.5),result.p_freq_limit=0,result.p_freq_ramp=Math.pow(v(2)-1,5),result.p_base_freq>.7&&result.p_freq_ramp>.2&&(result.p_freq_ramp=-result.p_freq_ramp),result.p_base_freq<.2&&result.p_freq_ramp<-.05&&(result.p_freq_ramp=-result.p_freq_ramp),result.p_freq_dramp=Math.pow(v(2)-1,3),result.p_duty=v(2)-1,result.p_duty_ramp=Math.pow(v(2)-1,3),result.p_vib_strength=Math.pow(v(2)-1,3),result.p_vib_speed=v(2)-1,result.p_env_attack=Math.pow(v(2)-1,3),result.p_env_sustain=Math.pow(v(2)-1,2),result.p_env_decay=v(2)-1,result.p_env_punch=Math.pow(v(.8),2),result.p_env_attack+result.p_env_sustain+result.p_env_decay<.2&&(result.p_env_sustain+=.2+v(.3),result.p_env_decay+=.2+v(.3)),result.p_lpf_resonance=v(2)-1,result.p_lpf_freq=1-Math.pow(v(1),3),result.p_lpf_ramp=Math.pow(v(2)-1,3),result.p_lpf_freq<.1&&result.p_lpf_ramp<-.05&&(result.p_lpf_ramp=-result.p_lpf_ramp),result.p_hpf_freq=Math.pow(v(1),5),result.p_hpf_ramp=Math.pow(v(2)-1,5),result.p_pha_offset=Math.pow(v(2)-1,3),result.p_pha_ramp=Math.pow(v(2)-1,3),result.p_repeat_speed=v(2)-1,result.p_arp_speed=v(2)-1,result.p_arp_mod=v(2)-1,result};var y=[pickupCoin,laserShoot,explosion,powerUp,hitHurt,jump,blipSelect,pushSound,random,birdSound];function g(e,t){this._buffer=n.createBuffer(1,e,t)}generateFromSeed=function(e){h=new o(e/100|0),p=!0;var t=(0,y[e%100%y.length])();return t.seed=e,p=!1,t},g.prototype.getBuffer=function(){return this._buffer.getChannelData(0)},g.prototype.play=function(){var e=n.createBufferSource(),t=n.createBiquadFilter(),r=n.createBiquadFilter(),o=n.createBiquadFilter();e.buffer=this._buffer,e.connect(t),t.frequency.value=1600,r.frequency.value=1600,o.frequency.value=1600,t.connect(r),r.connect(o),o.connect(n.destination);var l=n.currentTime;return void 0!==e.start?e.start(l):e.noteOn(l)},g.MIN_SAMPLE_RATE=22050,void 0===n&&((g=function(e,t){this._sample_rate=t,this._buffer=new Array(e),this._audioElement=null}).prototype.getBuffer=function(){return this._audioElement=null,this._buffer},g.prototype.play=function(){if(!this._audioElement){for(var e=0;e<this._buffer.length;e++)this._buffer[e]=255&Math.floor(128*Math.max(0,Math.min(this._buffer[e]+1,2)));var t=l(this._sample_rate,a,this._buffer);return this._audioElement=new Audio,this._audioElement.src=t.dataURI,this._audioElement.play()}this._audioElement.cloneNode(!1).play()},g.MIN_SAMPLE_RATE=1),g.generate=function(e){function t(){r=0,n=100/(e.p_base_freq*e.p_base_freq+.001),o=Math.floor(n),l=100/(e.p_freq_limit*e.p_freq_limit+.001),i=1-.01*Math.pow(e.p_freq_ramp,3),s=1e-6*-Math.pow(e.p_freq_dramp,3),a=.5-.5*e.p_duty,c=5e-5*-e.p_duty_ramp,f=e.p_arp_mod>=0?1-.9*Math.pow(e.p_arp_mod,2):1+10*Math.pow(e.p_arp_mod,2),0,h=Math.floor(2e4*Math.pow(1-e.p_arp_speed,2)+32),1==e.p_arp_speed&&(h=0)}var r,n,o,l,i,s,a,c,f,h;t();var d=0,p=0,v=.1*Math.pow(e.p_lpf_freq,3),w=1+1e-4*e.p_lpf_ramp,y=5/(1+20*Math.pow(e.p_lpf_resonance,2))*(.01+v);y>.8&&(y=.8);var m=0,b=.1*Math.pow(e.p_hpf_freq,2),_=1+3e-4*e.p_hpf_ramp,S=0,k=.01*Math.pow(e.p_vib_speed,2),E=.5*e.p_vib_strength,C=0,T=0,O=0,M=[Math.floor(e.p_env_attack*e.p_env_attack*1e5),Math.floor(e.p_env_sustain*e.p_env_sustain*1e5),Math.floor(e.p_env_decay*e.p_env_decay*1e5)],x=M[0]+M[1]+M[2],R=0,A=1020*Math.pow(e.p_pha_offset,2);e.p_pha_offset<0&&(A=-A);var I=1*Math.pow(e.p_pha_ramp,2);e.p_pha_ramp<0&&(I=-I);for(var L=Math.abs(Math.floor(A)),P=0,F=[],N=0;N<1024;++N)F[N]=0;var D=[];for(N=0;N<32;++N)D[N]=2*Math.random()-1;var B=Math.floor(2e4*Math.pow(1-e.p_repeat_speed,2)+32);0==e.p_repeat_speed&&(B=0);for(var G,j=e.sound_vol,U=(j=Math.exp(e.sound_vol)-1,0),W=0,H=Math.floor(44100/e.sample_rate),q=0,z=Math.ceil(x/H),V=(G=e.sample_rate<g.MIN_SAMPLE_RATE?new g(4*z,g.MIN_SAMPLE_RATE):new g(z,e.sample_rate)).getBuffer(),K=0;;++K){0!=B&&++r>=B&&t(),0!=h&&K>=h&&(h=0,n*=f),(n*=i+=s)>l&&(n=l,e.p_freq_limit>0&&!0);var J=n;if(E>0&&(S+=k,J=n*(1+Math.sin(S)*E)),(o=Math.floor(J))<8&&(o=8),(a+=c)<0&&(a=0),a>.5&&(a=.5),++O>M[T]){for(O=1,T++;T<3&&0===M[T];)T++;if(3===T)break}C=0===T?O/M[0]:1===T?1+2*Math.pow(1-O/M[1],1)*e.p_env_punch:1-O/M[2],A+=I,(L=Math.abs(Math.floor(A)))>1023&&(L=1023),0!=_&&((b*=_)<1e-5&&(b=1e-5),b>.1&&(b=.1));for(var Y=0,X=0;X<8;++X){var $=0;if(++R>=o&&(R%=o,3===e.wave_type))for(N=0;N<32;++N)D[N]=2*Math.random()-1;var Z=R/o;if(e.wave_type===u)$=Z<a?.5:-.5;else if(1===e.wave_type)$=1-2*Z;else if(2===e.wave_type)$=Math.sin(2*Z*Math.PI);else if(3===e.wave_type)$=D[Math.floor(32*R/o)];else if(4===e.wave_type)$=Math.abs(1-2*Z)-1;else{if(5!==e.wave_type)throw new Exception("bad wave type! "+e.wave_type);$=Math.abs(1-Z*Z*2)-1}var Q=d;(v*=w)<0&&(v=0),v>.1&&(v=.1),1!=e.p_lpf_freq?(p+=($-d)*v,p-=p*y):(d=$,p=0),m+=(d+=p)-Q,$=m-=m*b,F[1023&P]=$,$+=F[P-L+1024&1023],P=P+1&1023,Y+=$*C}U+=Y,++W>=H&&(W=0,Y=U/H,U=0,Y=Y/8*1,Y*=j,V[q++]=Y,e.sample_rate<g.MIN_SAMPLE_RATE&&(V[q++]=Y,V[q++]=Y,V[q++]=Y))}return H>0&&(Y=(Y=U/H)/8*1,Y*=j,V[q++]=Y,e.sample_rate<g.MIN_SAMPLE_RATE&&(V[q++]=Y,V[q++]=Y,V[q++]=Y)),G};var m={},b=[],_=50;e.exports={playSound:function(e){return f(),function(e){if(e in m)return m[e];var t=generateFromSeed(e);t.sound_vol=i,t.sample_rate=s,t.bit_depth=a;var r=g.generate(t);for(m[e]=r,b.push(e);b.length>_;){var n=b[0];b=b.slice(1),delete m[n]}return r}(e).play()}}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),o=r(17);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gamepad=o.b.getAnyGamepad(),this.table=t,this.polledInput=null,this.repeatIntervalInSeconds=null,this.boundKeys=[],this.touchStart=null,this.touchStartedAt=0,this.touchHoldInterval=null;var l=function(e){var n=o.b.key(e,t);return r.boundKeys.push(n),n};this.controls={up:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_UP),l("w"),l("ArrowUp")])},down:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_DOWN),l("s"),l("ArrowDown")])},left:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_LEFT),l("a"),l("ArrowLeft")])},right:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_RIGHT),l("d"),l("ArrowRight")])},action:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.CLUSTER_BOTTOM),l("x"),l(" "),l("Enter")])},undo:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.CLUSTER_LEFT),this.gamepad.button(o.a.BUMPER_TOP_LEFT),l("z"),l("u")])},restart:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.CLUSTER_TOP),l("r")])}},this.stickControls={left:{lastPressed:null,stick:this.gamepad.stick(o.c.LEFT)},right:{lastPressed:null,stick:this.gamepad.stick(o.c.RIGHT)}};var i=function(e,t){return function(){var n=Date.now(),o=1e3*(r.repeatIntervalInSeconds||.25),l=r.controls[e],i=l.button,s=l.lastPressed;i.query()?(!s||s+o<n)&&(t(),r.controls[e].lastPressed=n):r.controls[e].lastPressed=null}},s=function(e){return function(){var t=Date.now(),o=1e3*(r.repeatIntervalInSeconds||.25),l=r.stickControls[e],i=l.stick,s=l.lastPressed,a=i.query(),u=a.x,c=a.y,f=Math.abs(c),h=Math.abs(u);if(f>h){if(f>.5)return void((!s||s+o<t)&&(l.lastPressed=t,r.polledInput=c<0?n.b.UP:n.b.DOWN))}else if(h>.5)return void((!s||s+o<t)&&(l.lastPressed=t,r.polledInput=u<0?n.b.LEFT:n.b.RIGHT));l.lastPressed=null}};this.controlCheckers=[s("left"),s("right"),i("up",function(){return r.polledInput=n.b.UP}),i("down",function(){return r.polledInput=n.b.DOWN}),i("left",function(){return r.polledInput=n.b.LEFT}),i("right",function(){return r.polledInput=n.b.RIGHT}),i("action",function(){return r.polledInput=n.b.ACTION}),i("undo",function(){return r.polledInput=n.b.UNDO}),i("restart",function(){return r.polledInput=n.b.RESTART})],this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.table.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.table.addEventListener("touchmove",this.onTouchMove),this.table.addEventListener("touchend",this.onTouchEnd)}var t,r,i;return t=e,(r=[{key:"pollControls",value:function(){if(window.document.activeElement!==this.table)return null;this.controlCheckers.forEach(function(e){return e()});var e=this.polledInput;return this.polledInput=null,e}},{key:"isSomethingPressed",value:function(){for(var e=Object.values(this.controls),t=0;t<e.length;t++){if(e[t].button.query())return!0}return!1}},{key:"setKeyRepeatInterval",value:function(e){this.repeatIntervalInSeconds=e}},{key:"dispose",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.boundKeys[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.dispose()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}this.table.removeEventListener("touchstart",this.onTouchStart),this.table.removeEventListener("touchmove",this.onTouchMove),this.table.removeEventListener("touchend",this.onTouchEnd)}},{key:"startTouchHoldInterval",value:function(){var e=this;this.touchHoldInterval||(this.touchHoldInterval=setInterval(function(){return e.polledInput=n.b.UNDO},500))}},{key:"endTouchHoldInterval",value:function(){this.touchHoldInterval&&clearInterval(this.touchHoldInterval),this.touchHoldInterval=null}},{key:"onTouchStart",value:function(e){1===e.changedTouches.length&&(this.table.focus(),this.touchStart=e.changedTouches[0],this.touchStartedAt=Date.now(),this.startTouchHoldInterval())}},{key:"onTouchMove",value:function(e){this.touchStart&&1===e.touches.length&&e.preventDefault()}},{key:"onTouchEnd",value:function(e){var t=this,r=function(){var e=Date.now()-t.touchStartedAt;if(e>=2e3){var r=confirm("You were holding for a while. Do you want to restart the level?");t.polledInput=r?n.b.RESTART:null}else e<200&&(t.polledInput=n.b.ACTION)};if(this.endTouchHoldInterval(),this.touchStart&&1===e.changedTouches.length){var o=e.changedTouches[0],l=o.pageX-this.touchStart.pageX,i=o.pageY-this.touchStart.pageY,s=Math.abs(l),a=Math.abs(i);s>a?s>this.table.clientWidth/15?this.polledInput=l>0?n.b.RIGHT:n.b.LEFT:r():a>this.table.clientWidth/15?this.polledInput=i>0?n.b.DOWN:n.b.UP:r(),this.touchStart=null,e.preventDefault()}}}])&&l(t.prototype,r),i&&l(t,i),e}()},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(0);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.table=t,this.handler=r,this.columns=1,this.rows=1,this.boundResizeHandler=Object(n.f)(this.trigger.bind(this)),window.addEventListener("resize",this.boundResizeHandler)}var t,r,l;return t=e,(r=[{key:"setLevel",value:function(e,t){this.rows=e,this.columns=t}},{key:"trigger",value:function(){var e=this.columns/this.rows,t=this.leftWithoutAutoMargins(),r=Math.min(window.outerWidth,window.innerWidth)-t,n=Math.min(window.outerHeight,window.innerHeight)-this.table.offsetTop,o=0,l=r/2-(o=r/e<n?Math.floor(r/this.columns/5)*this.columns*5:Math.floor(n*e/this.rows/5)*this.rows*5)/2-t;this.handler(Math.floor(o),Math.floor(l))}},{key:"dispose",value:function(){window.removeEventListener("resize",this.boundResizeHandler)}},{key:"leftWithoutAutoMargins",value:function(){var e=this.table.offsetLeft,t=window.getComputedStyle(this.table).width,r=t?Number.parseFloat(t.replace(/px$/,"")):0;this.table.style.width="".concat(2*e+r,"px");var n=this.table.offsetLeft;return this.table.style.width=t,n}}])&&o(t.prototype,r),l&&o(t,l),e}()},function(e,t,r){"use strict";var n=r(16),o=r(7),l=r(149),i=r(0);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var f=function(){function e(){a(this,e),this.cache=new Map}return c(e,[{key:"get",value:function(e,t,r,o){var l=e.map(function(e){return e.getName()}).join(" "),i=this.cache.get(l);return i||(i=function(e,t,r,o){if(0===e.length){for(var l=[],i=0;i<r;i++){l[i]=l[i]||[];for(var s=0;s<o;s++)t&&(l[i][s]=t)}return l}0;if(1===e.length)return e[0].getPixels(r,o);if(e.find(function(e){return e.hasAlpha()})){var a=(e=e.reverse())[0].getPixels(r,o);return e.slice(1).forEach(function(e,t){for(var l=e.getPixels(r,o),i=0;i<r;i++){a[i]=a[i]||[];for(var s=0;s<o;s++){var u=l[i][s];if(u.hasAlpha()&&!a[i][s].isTransparent()){var c=a[i][s].toRgb(),f=c.r,h=c.g,d=c.b,p=u.toRgb(),v=p.r,w=p.g,y=p.b,g=p.a;if(null===g)throw new Error("BUG: No alpha channel");var m=Math.round(g*v+(1-g)*f),b=Math.round(g*w+(1-g)*h),_=Math.round(g*y+(1-g)*d),S="".concat(m<16?"0":"").concat(m.toString(16)),k="".concat(b<16?"0":"").concat(b.toString(16)),E="".concat(_<16?"0":"").concat(_.toString(16));a[i][s]=new n.a(u.__source,"#".concat(S).concat(k).concat(E))}else u&&!u.isTransparent()&&(a[i][s]=u)}}}),a}var u=e[0].getPixels(r,o);return e.slice(1).forEach(function(e,t){for(var n=e.getPixels(r,o),l=0;l<r;l++){u[l]=u[l]||[];for(var i=0;i<o;i++){var s=n[l][i];u[l][i]&&!u[l][i].isTransparent()||!s||s.isTransparent()||(u[l][i]=s)}}}),u}(e,t,r,o),this.cache.set(l,i)),i}},{key:"clear",value:function(){this.cache.clear()}}]),e}();var h=function(){function e(){a(this,e),this.cellColorCache=new f,this.renderedPixels=[],this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.isDumpingScreen=!1,this.PIXEL_HEIGHT=1,this.PIXEL_WIDTH=2,this.SPRITE_HEIGHT=5,this.SPRITE_WIDTH=5,this.hasVisualUi=!0,this.gameData=null,this.currentLevelMessage=null,this.currentLevelCells=null,this.windowOffsetWidth=null,this.windowOffsetHeight=null}return c(e,[{key:"destroy",value:function(){this.gameData=null,this.currentLevelMessage=null,this.currentLevelCells=null,this.renderedPixels=[],this.cellColorCache.clear()}},{key:"onGameChange",value:function(e){if(this.gameData=e,this.renderedPixels=[],this.cellColorCache.clear(),this.clearScreen(),this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.windowOffsetWidth=null,this.windowOffsetHeight=null,this.gameData.metadata.flickscreen){var t=this.gameData.metadata.flickscreen,r=t.width,n=t.height;this.windowOffsetWidth=r,this.windowOffsetHeight=n}else if(this.gameData.metadata.zoomscreen){var o=this.gameData.metadata.zoomscreen,l=o.width,i=o.height;this.windowOffsetWidth=l,this.windowOffsetHeight=i}var s=this.gameData.getSpriteSize(),a=s.spriteHeight,u=s.spriteWidth;this.SPRITE_HEIGHT=a,this.SPRITE_WIDTH=u}},{key:"getGameData",value:function(){if(!this.gameData)throw new Error("BUG: Game has not been specified yet");return this.gameData}},{key:"onLevelChange",value:function(e,t,r){if(!t&&!r||t&&r)throw new Error("BUG: Must provide either cells or a message (but not both)");this.currentLevelCells=t,this.currentLevelMessage=r}},{key:"getCurrentLevelCells",value:function(){if(!this.currentLevelCells)throw new Error("BUG: There are no cells to render. Maybe it is a message level? Or no level has been set yet");return this.currentLevelCells}},{key:"debugRenderScreen",value:function(){this.renderScreen(!0)}},{key:"renderMessageScreen",value:function(e){var t=this.windowOffsetColStart,r=this.windowOffsetRowStart,n=this.windowOffsetHeight,o=this.windowOffsetWidth;this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.windowOffsetHeight=13,this.windowOffsetWidth=34,this.clearScreen(),this.windowOffsetColStart=t,this.windowOffsetRowStart=r,this.windowOffsetHeight=n,this.windowOffsetWidth=o}},{key:"renderScreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.gameData)throw new Error("BUG: gameData was not set yet");this.currentLevelMessage?this.renderMessageScreen(this.currentLevelMessage):this.currentLevelCells&&(e&&(this.cellColorCache.clear(),this.renderedPixels=[]),this.renderLevelScreen(this.currentLevelCells,t))}},{key:"drawCells",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.gameData)throw new Error("BUG: gameData was not set yet");var n=Object(i.g)(this.getCurrentLevelCells()),o=this.gameData.getPlayer().getCellsThatMatch(n);if(1===o.size&&r<=1){var l=s(o)[0],a=this.cellPosToXY(l).isOnScreen;this.recenterPlayerIfNeeded(l,a)&&(e=Object(i.g)(this.getCurrentLevelCells()))}this.hasVisualUi&&this.drawCellsAfterRecentering(e,r)}},{key:"getPixelsForCell",value:function(e){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var t=e.getSprites().filter(function(e){return!e.isTransparent()}),r=this.gameData.getMagicBackgroundSprite();return r&&t.push(r),this.cellColorCache.get(t,this.gameData.metadata.backgroundColor,this.SPRITE_HEIGHT,this.SPRITE_WIDTH)}},{key:"createMessageTextScreen",value:function(e){var t=["                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","          X to continue           ","                                  ","                                  "];var r=t[9],n=t[10];t[10]=r;var o=t[0].length,l=function(e,t){if(!e)return e;var r=".{1,"+(t=t||75)+"}(\\s|$)|.{"+t+"}|.+$",n=e.match(RegExp(r,"g"));if(n)return n;throw new Error("BUG: Match did not work")}(e,t[0].length),i=5-(l.length/2|0);i<0&&(i=0);for(var s=Math.min(l.length,12),a=0;a<s;a++){var u=l[a],c=i+a,f=(o-u.length)/2|0,h=t[c];t[c]=h.slice(0,f)+u+h.slice(f+u.length)}var d=10;return s>=10&&(d=s<12?s+1:12),t[d]=n,t}},{key:"createMessageSprites",value:function(e){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var t=this.createMessageTextScreen(e),r=[],n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value,u=[];r.push(u);var c=!0,f=!1,h=void 0;try{for(var d,p=a[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value,w=this.gameData.getLetterSprite(v);u.push(new Set([w]))}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}},{key:"cellPosToXY",value:function(e){var t,r,n=e.colIndex,o=e.rowIndex,l=!0;return this.windowOffsetHeight&&this.windowOffsetWidth&&(this.windowOffsetColStart>n||this.windowOffsetRowStart>o||this.windowOffsetColStart+this.windowOffsetWidth<=n||this.windowOffsetRowStart+this.windowOffsetHeight<=o)&&(l=!1),t=(n-this.windowOffsetColStart)*this.SPRITE_WIDTH,r=(o-this.windowOffsetRowStart)*this.SPRITE_HEIGHT,l&&(l=this.checkIfCellCanBeDrawnOnScreen(t,r)),(t<0||r<0)&&(l=!1),{isOnScreen:l,cellStartX:t,cellStartY:r}}},{key:"clearScreen",value:function(){this.renderedPixels=[]}},{key:"recenterPlayerIfNeeded",value:function(e,t){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var r,n,o,l,i,s,a=this.windowOffsetColStart,u=this.windowOffsetRowStart,c=this.gameData.metadata.flickscreen,f=this.gameData.metadata.zoomscreen,h=this.getMaxSize(),d=h.columns,p=h.rows,v=Math.floor(d/this.SPRITE_WIDTH/this.PIXEL_WIDTH),w=Math.floor(p/this.SPRITE_HEIGHT/this.PIXEL_HEIGHT);if(c?(n=e.rowIndex-e.rowIndex%c.height,r=e.colIndex-e.colIndex%c.width,l=c.height,o=c.width):(r=0,n=0,l=this.getCurrentLevelCells().length,o=this.getCurrentLevelCells()[0].length),f?(s=Math.min(f.height,w),i=Math.min(f.width,v)):(s=w,i=v),!(l<=s&&o<=i)){var y=!1;if(o>i&&(a+Math.round(i/4)>e.colIndex||a+Math.round(3*i/4)<=e.colIndex)){var g=e.colIndex-Math.floor(i/2);(g=Math.max(g,r))+i>r+o&&(g=r+o-i),g!==this.windowOffsetColStart&&(this.windowOffsetColStart=g,y=!0)}if(l>s&&(u+Math.round(s/4)>e.rowIndex||u+Math.round(3*s/4)<=e.rowIndex)){var m=e.rowIndex-Math.floor(s/2);(m=Math.max(m,n))+s>n+l&&(m=n+l-s),m!==this.windowOffsetRowStart&&(this.windowOffsetRowStart=m,y=!0)}return y||t?y:(this.windowOffsetColStart=r,this.windowOffsetRowStart=n,!0)}return!t&&(this.windowOffsetColStart=r,this.windowOffsetRowStart=n,!0)}}]),e}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t,r,n,o,l,i){try{var s=e[l](i),a=s.value}catch(e){return void r(e)}s.done?t(a):Promise.resolve(a).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var l=e.apply(t,r);function i(e){w(l,n,o,i,s,"next",e)}function s(e){w(l,n,o,i,s,"throw",e)}i(void 0)})}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function t(e,r){var n,o,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(l=b(t).call(this))||"object"!==d(l)&&"function"!=typeof l?S(o):l).table=e,n.tableCells=[],n.inputsProcessed=0,n.interactsWithPlayer=new Set,n.usedInMessages=new Set,e.classList.add("ps-table"),n.markAcceptingInput(!1),n.onPress=n.onPress.bind(S(S(n))),n.onLevelChange=n.onLevelChange.bind(S(S(n))),n.handler=new i.a(r?[r]:[]);var s=e.querySelector("[aria-live]")||document.querySelector("[aria-live]");if(!s)throw new Error("Error: For screenreaders to work, an element inside the table (for now) with an aria-live attribute needs to exist in the initial page. See https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions");return n.liveLog=s,n.didPressCauseTick=!1,n.silencedOutput=!1,n.messagesSincePress=0,n.isCollecting=!1,n.collectedSprites=new Map,n.collectingTickCount=0,n}var r,s,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,h),r=t,(s=[{key:"onPause",value:function(){this.table.setAttribute("data-ps-state","paused"),this.handler.onPause()}},{key:"onResume",value:function(){this.table.setAttribute("data-ps-state","running"),this.handler.onResume()}},{key:"onGameChange",value:function(e){m(b(t.prototype),"onGameChange",this).call(this,e),this.silencedOutput=!1,this.didPressCauseTick=!1,this.interactsWithPlayer=Object(i.q)(this.getGameData()),this.usedInMessages=new Set(this.interactsWithPlayer),this.collectedSprites.clear(),this.handler.onGameChange(e)}},{key:"onPress",value:function(e){switch(this.didPressCauseTick=!0,this.liveLog.innerHTML="",this.markAcceptingInput(!1),e){case i.b.UNDO:case i.b.RESTART:this.renderScreen(!1)}this.handler.onPress(e)}},{key:"onLevelLoad",value:function(e,t){this.handler.onLevelLoad(e,t)}},{key:"onLevelChange",value:function(e,r,n){if(this.clearScreen(),this.table.setAttribute("data-ps-current-level","".concat(e)),r){m(b(t.prototype),"onLevelChange",this).call(this,e,r,n),this.tableCells=[];var o=this.getGameData(),l=o.metadata.flickscreen||o.metadata.zoomscreen||{width:r[0].length,height:r.length},i=l.width,s=l.height;this.table.setAttribute("tabindex","0");for(var a=document.createElement("tbody"),u=0;u<s;u++){for(var c=document.createElement("tr"),f=[],h=0;h<i;h++){var d=document.createElement("td"),p=[];d.classList.add("ps-cell");var v=document.createElement("span");v.classList.add("ps-cell-label"),d.appendChild(v);var w=document.createElement("div");w.classList.add("ps-sprite-whole"),w.setAttribute("aria-hidden","true");for(var y=0;y<this.SPRITE_HEIGHT;y++){var g=document.createElement("div");g.classList.add("ps-sprite-row");for(var _=[],S=0;S<this.SPRITE_WIDTH;S++){var k=document.createElement("span");k.classList.add("ps-sprite-pixel"),g.appendChild(k),_.push(k)}w.appendChild(g),p.push(_)}d.appendChild(w),c.appendChild(d),f.push({td:d,label:v,pixels:p})}a.appendChild(c),this.tableCells.push(f)}this.table.prepend(a);var E=!0,C=!1,T=void 0;try{for(var O,M=r[Symbol.iterator]();!(E=(O=M.next()).done);E=!0){var x=O.value;this.drawCells(x,!1)}}catch(e){C=!0,T=e}finally{try{E||null==M.return||M.return()}finally{if(C)throw T}}}this.markAcceptingInput(!0),this.handler.onLevelChange(e,r,n)}},{key:"onMessage",value:function(){var e=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handler.onMessage(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onWin",value:function(){this.handler.onWin()}},{key:"onSound",value:function(){var e=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(l.playSound)(t.soundCode),e.next=3,this.handler.onSound(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onTick",value:function(e,t,r,n){this.collectingTickCount++,this.printMessageLog(n,r),this.drawCells(e,!1),this.markAcceptingInput(!r),this.didPressCauseTick=!1,this.handler.onTick(e,t,r,n)}},{key:"willAllLevelsFitOnScreen",value:function(e){return!0}},{key:"_drawPixel",value:function(e,t,r,n,o){var l=Math.floor(t/this.SPRITE_HEIGHT),i=Math.floor(e/this.SPRITE_WIDTH),s=t%this.SPRITE_HEIGHT,a=e%this.SPRITE_WIDTH,u=this.tableCells[l][i].pixels[s][a];if(!u)throw new Error("BUG: Could not set pixel because table is too small");var c="color: ".concat(r,";");n&&(c+=" background-color: ".concat(n,";")),u.setAttribute("style",c)}},{key:"clearScreen",value:function(){m(b(t.prototype),"clearScreen",this).call(this);var e=this.table.querySelector("tbody");e&&e.remove(),this.liveLog.innerHTML="",this.tableCells=[]}},{key:"renderLevelScreen",value:function(e,t){this.drawCells(Object(i.g)(e),!1,t)}},{key:"setPixel",value:function(e,t,r,o,l){var i=Math.floor(t/this.SPRITE_HEIGHT),s=Math.floor(e/this.SPRITE_WIDTH),a=t%this.SPRITE_HEIGHT,u=e%this.SPRITE_WIDTH,c=this.tableCells[i][s].pixels[a][u];if(!c)throw new Error("BUG: Could not set pixel because table is too small");l&&0!==l.trim().length||(l=""),this.renderedPixels[t]||(this.renderedPixels[t]=[]);var f=this.renderedPixels[t][e];if(!f||f.hex!==r||f.chars!==l){this.renderedPixels[t][e]={hex:r,chars:l};var h=Object(n.c)(r),d=h.r,p=h.g,v=h.b,w=h.a;null!==w?c.setAttribute("style","background-color: rgba(".concat(d,",").concat(p,",").concat(v,",").concat(w,")")):c.setAttribute("style","background-color: ".concat(r))}}},{key:"drawCellsAfterRecentering",value:function(e,t){var r=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;this._drawCell(s,t)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"checkIfCellCanBeDrawnOnScreen",value:function(e,t){return!0}},{key:"getMaxSize",value:function(){return{columns:1e3,rows:1e3}}},{key:"printMessageLog",value:function(e,t){var r=this;if(!this.silencedOutput||this.didPressCauseTick){var n=[],l=function(e,t){if(n.push(e),r.isCollecting){var o=!0,l=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;c=r.collectedSprites,f=u,h=void 0,h=c.get(f),c.set(f,h?h+1:1)}}catch(e){l=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}}var c,f,h};t&&l("game tick",[]);var s=!0,a=!1,u=void 0;try{for(var c,f=e[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value;switch(h.type){case o.a.ADD:var d=!0,w=!1,y=void 0;try{for(var g,m=Object(i.o)(this.usedInMessages,h.sprites)[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var b=g.value;l("Added ".concat(b.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[b])}}catch(e){w=!0,y=e}finally{try{d||null==m.return||m.return()}finally{if(w)throw y}}break;case o.a.REPLACE:var _=!0,S=!1,k=void 0;try{for(var E,C=h.replacements[Symbol.iterator]();!(_=(E=C.next()).done);_=!0){var T=E.value,O=T.oldSprite,M=T.newSprite;this.usedInMessages.has(O)?this.usedInMessages.has(M)?l("Replaced ".concat(O.getName()," with ").concat(M.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[O,M]):l("Removed* ".concat(O.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[O]):this.usedInMessages.has(M)&&l("Added* ".concat(M.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[M])}}catch(e){S=!0,k=e}finally{try{_||null==C.return||C.return()}finally{if(S)throw k}}break;case o.a.REMOVE:var x=!0,R=!1,A=void 0;try{for(var I,L=Object(i.o)(this.usedInMessages,h.sprites)[Symbol.iterator]();!(x=(I=L.next()).done);x=!0){var P=I.value;l("Removed ".concat(P.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[P])}}catch(e){R=!0,A=e}finally{try{x||null==L.return||L.return()}finally{if(R)throw A}}break;case o.a.MOVE:l("Moved ".concat(h.sprite.getName()," ").concat(h.direction," to ").concat(h.newCell.rowIndex,",").concat(h.newCell.colIndex),[h.sprite]);break;default:throw new Error("BUG: unsupported a11y message type ".concat(h))}}}catch(e){a=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(a)throw u}}if(this.didPressCauseTick)n.length>10&&(n=[].concat(v(n.slice(0,4)),["(truncated messages)"],v(n.slice(n.length-4,n.length))));else if(this.silencedOutput)n=[];else if(!this.isCollecting&&(this.messagesSincePress>10||n.length>10))this.collectedSprites.size>0?(this.silencedOutput=!0,n=["Things keep changing so switching to a quieter mode"]):(this.isCollecting=!0,this.collectingTickCount=0,n=["Many things changed (probably animations). Collecting data for a few ticks to see what to ignore"]);else if(this.isCollecting&&this.collectingTickCount<20)n=[];else if(this.isCollecting){this.isCollecting=!1,n=["Done collecting. Found ".concat(this.collectedSprites.size," sprites to ignore: ").concat(v(this.collectedSprites.keys()).map(function(e){return e.getName()}).join(", "))],this.messagesSincePress=0;var F=!0,N=!1,D=void 0;try{for(var B,G=this.collectedSprites[Symbol.iterator]();!(F=(B=G.next()).done);F=!0){var j=p(B.value,2);b=j[0];j[1]>4&&this.usedInMessages.delete(b)}}catch(e){N=!0,D=e}finally{try{F||null==G.return||G.return()}finally{if(N)throw D}}}!function(){for(var e=0;e<n.length;e++){var t=n[e],o=document.createElement("p");o.textContent=t,r.liveLog.append(o),r.didPressCauseTick||r.messagesSincePress++}}(),this.didPressCauseTick&&(this.messagesSincePress=0)}}},{key:"markAcceptingInput",value:function(e){e?this.table.setAttribute("data-ps-accepting-input","true"):(this.inputsProcessed++,this.table.setAttribute("data-ps-accepting-input","false")),this.table.setAttribute("data-ps-last-input-processed","".concat(this.inputsProcessed))}},{key:"_drawCell",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.gameData)throw new Error("BUG: gameData was not set yet");if(!this.hasVisualUi)throw new Error("BUG: Should not get to this point");var r=e.getSprites().filter(function(e){return t.interactsWithPlayer.has(e)}),n=this.cellPosToXY(e),o=n.isOnScreen,l=n.cellStartX,i=n.cellStartY;if(o){var s=this.tableCells[e.rowIndex-this.windowOffsetRowStart];if(!s)throw new Error("BUG: Should not be trying to draw when there are no table cells");var a=s[e.colIndex-this.windowOffsetColStart];if(!a)throw new Error("BUG: Should not be trying to draw when there is not a matching table cell");var u=a.label;if(!u)throw new Error("BUG: Could not find cell in the table: [".concat(e.rowIndex," - ").concat(this.windowOffsetRowStart,"][").concat(e.colIndex," - ").concat(this.windowOffsetColStart,"]"));if(r.length>0)u.classList.remove("ps-cell-empty"),this.gameData.getPlayer().getSpritesThatMatch(e).size>0?u.classList.add("ps-player"):u.classList.remove("ps-player"),u.textContent=r.map(function(e){return e.getName()}).join(", ");else u.classList.remove("ps-player"),u.classList.add("ps-cell-empty"),u.textContent="(empty)";this.getPixelsForCell(e).forEach(function(e,r){e.forEach(function(e,n){if(!t.gameData)throw new Error("BUG: gameData was not set yet");var o=l+n,s=i+r,a=null;if(e&&(a=e.isTransparent()?t.gameData.metadata.backgroundColor?t.gameData.metadata.backgroundColor:null:e),a){var u=a.toRgb(),c=(u.r,u.g,u.b,a.toHex());t.setPixel(o,s,c,null," ")}})})}}}])&&g(r.prototype,s),a&&g(r,a),t}();t.a=k},,function(e,t,r){"use strict";(function(e){if(r(155),r(351),r(352),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var t="defineProperty";function n(e,r,n){e[r]||Object[t](e,r,{writable:!0,configurable:!0,value:n})}n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&n(Array,e,Function.call.bind([][e]))})}).call(this,r(109))},function(e,t,r){r(156),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(231),r(232),r(233),r(235),r(236),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(99),r(259),r(129),r(260),r(130),r(261),r(262),r(263),r(264),r(265),r(133),r(135),r(136),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(344),r(345),r(346),r(347),r(348),r(349),r(350),e.exports=r(26)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(4),l=r(22),i=r(10),s=r(1),a=r(19),u=r(37).KEY,c=r(5),f=r(63),h=r(52),d=r(42),p=r(8),v=r(111),w=r(80),y=r(157),g=r(66),m=r(3),b=r(6),_=r(23),S=r(31),k=r(41),E=r(45),C=r(114),T=r(24),O=r(11),M=r(43),x=T.f,R=O.f,A=C.f,I=o.Symbol,L=o.JSON,P=L&&L.stringify,F=p("_hidden"),N=p("toPrimitive"),D={}.propertyIsEnumerable,B=f("symbol-registry"),G=f("symbols"),j=f("op-symbols"),U=Object.prototype,W="function"==typeof I,H=o.QObject,q=!H||!H.prototype||!H.prototype.findChild,z=i&&c(function(){return 7!=E(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=x(U,t);n&&delete U[t],R(e,t,r),n&&e!==U&&R(U,t,n)}:R,V=function(e){var t=G[e]=E(I.prototype);return t._k=e,t},K=W&&"symbol"==n(I.iterator)?function(e){return"symbol"==n(e)}:function(e){return e instanceof I},J=function(e,t,r){return e===U&&J(j,t,r),m(e),t=S(t,!0),m(r),l(G,t)?(r.enumerable?(l(e,F)&&e[F][t]&&(e[F][t]=!1),r=E(r,{enumerable:k(0,!1)})):(l(e,F)||R(e,F,k(1,{})),e[F][t]=!0),z(e,t,r)):R(e,t,r)},Y=function(e,t){m(e);for(var r,n=y(t=_(t)),o=0,l=n.length;l>o;)J(e,r=n[o++],t[r]);return e},X=function(e){var t=D.call(this,e=S(e,!0));return!(this===U&&l(G,e)&&!l(j,e))&&(!(t||!l(this,e)||!l(G,e)||l(this,F)&&this[F][e])||t)},$=function(e,t){if(e=_(e),t=S(t,!0),e!==U||!l(G,t)||l(j,t)){var r=x(e,t);return!r||!l(G,t)||l(e,F)&&e[F][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=A(_(e)),n=[],o=0;r.length>o;)l(G,t=r[o++])||t==F||t==u||n.push(t);return n},Q=function(e){for(var t,r=e===U,n=A(r?j:_(e)),o=[],i=0;n.length>i;)!l(G,t=n[i++])||r&&!l(U,t)||o.push(G[t]);return o};W||(a((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0);return i&&q&&z(U,e,{configurable:!0,set:function t(r){this===U&&t.call(j,r),l(this,F)&&l(this[F],e)&&(this[F][e]=!1),z(this,e,k(1,r))}}),V(e)}).prototype,"toString",function(){return this._k}),T.f=$,O.f=J,r(46).f=C.f=Z,r(60).f=X,r(65).f=Q,i&&!r(38)&&a(U,"propertyIsEnumerable",X,!0),v.f=function(e){return V(p(e))}),s(s.G+s.W+s.F*!W,{Symbol:I});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var re=M(p.store),ne=0;re.length>ne;)w(re[ne++]);s(s.S+s.F*!W,"Symbol",{for:function(e){return l(B,e+="")?B[e]:B[e]=I(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),s(s.S+s.F*!W,"Object",{create:function(e,t){return void 0===t?E(e):Y(E(e),t)},defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:Q}),L&&s(s.S+s.F*(!W||c(function(){var e=I();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(b(t)||void 0!==e)&&!K(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!K(t))return t}),n[1]=t,P.apply(L,n)}}),I.prototype[N]||r(18)(I.prototype,N,I.prototype.valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(o.JSON,"JSON",!0)},function(e,t,r){var n=r(43),o=r(65),l=r(60);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var i,s=r(e),a=l.f,u=0;s.length>u;)a.call(e,i=s[u++])&&t.push(i);return t}},function(e,t,r){var n=r(1);n(n.S,"Object",{create:r(45)})},function(e,t,r){var n=r(1);n(n.S+n.F*!r(10),"Object",{defineProperty:r(11).f})},function(e,t,r){var n=r(1);n(n.S+n.F*!r(10),"Object",{defineProperties:r(113)})},function(e,t,r){var n=r(23),o=r(24).f;r(33)("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},function(e,t,r){var n=r(12),o=r(25);r(33)("getPrototypeOf",function(){return function(e){return o(n(e))}})},function(e,t,r){var n=r(12),o=r(43);r(33)("keys",function(){return function(e){return o(n(e))}})},function(e,t,r){r(33)("getOwnPropertyNames",function(){return r(114).f})},function(e,t,r){var n=r(6),o=r(37).onFreeze;r(33)("freeze",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},function(e,t,r){var n=r(6),o=r(37).onFreeze;r(33)("seal",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},function(e,t,r){var n=r(6),o=r(37).onFreeze;r(33)("preventExtensions",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},function(e,t,r){var n=r(6);r(33)("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(6);r(33)("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(6);r(33)("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},function(e,t,r){var n=r(1);n(n.S+n.F,"Object",{assign:r(115)})},function(e,t,r){var n=r(1);n(n.S,"Object",{is:r(116)})},function(e,t,r){var n=r(1);n(n.S,"Object",{setPrototypeOf:r(84).set})},function(e,t,r){"use strict";var n=r(53),o={};o[r(8)("toStringTag")]="z",o+""!="[object z]"&&r(19)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,r){var n=r(1);n(n.P,"Function",{bind:r(117)})},function(e,t,r){var n=r(11).f,o=Function.prototype,l=/^\s*function ([^ (]*)/;"name"in o||r(10)&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(6),o=r(25),l=r(8)("hasInstance"),i=Function.prototype;l in i||r(11).f(i,l,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(1),o=r(119);n(n.G+n.F*(parseInt!=o),{parseInt:o})},function(e,t,r){var n=r(1),o=r(120);n(n.G+n.F*(parseFloat!=o),{parseFloat:o})},function(e,t,r){"use strict";var n=r(4),o=r(22),l=r(28),i=r(86),s=r(31),a=r(5),u=r(46).f,c=r(24).f,f=r(11).f,h=r(54).trim,d=n.Number,p=d,v=d.prototype,w="Number"==l(r(45)(v)),y="trim"in String.prototype,g=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var r,n,o,l=(t=y?t.trim():h(t,3)).charCodeAt(0);if(43===l||45===l){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var i,a=t.slice(2),u=0,c=a.length;u<c;u++)if((i=a.charCodeAt(u))<48||i>o)return NaN;return parseInt(a,n)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof d&&(w?a(function(){v.valueOf.call(r)}):"Number"!=l(r))?i(new p(g(t)),r,d):g(t)};for(var m,b=r(10)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;b.length>_;_++)o(p,m=b[_])&&!o(d,m)&&f(d,m,c(p,m));d.prototype=v,v.constructor=d,r(19)(n,"Number",d)}},function(e,t,r){"use strict";var n=r(1),o=r(29),l=r(121),i=r(87),s=1..toFixed,a=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*u[r],u[r]=n%1e7,n=a(n/1e7)},h=function(e){for(var t=6,r=0;--t>=0;)r+=u[t],u[t]=a(r/e),r=r%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var r=String(u[e]);t=""===t?r:t+i.call("0",7-r.length)+r}return t},p=function e(t,r,n){return 0===r?n:r%2==1?e(t,r-1,n*t):e(t*t,r/2,n)};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(5)(function(){s.call({})})),"Number",{toFixed:function(e){var t,r,n,s,a=l(this,c),u=o(e),v="",w="0";if(u<0||u>20)throw RangeError(c);if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(v="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*p(2,69,1))-69)<0?a*p(2,-t,1):a/p(2,t,1),r*=4503599627370496,(t=52-t)>0){for(f(0,r),n=u;n>=7;)f(1e7,0),n-=7;for(f(p(10,n,1),0),n=t-1;n>=23;)h(1<<23),n-=23;h(1<<n),f(1,1),h(2),w=d()}else f(0,r),f(1<<-t,0),w=d()+i.call("0",u);return w=u>0?v+((s=w.length)<=u?"0."+i.call("0",u-s)+w:w.slice(0,s-u)+"."+w.slice(s-u)):v+w}})},function(e,t,r){"use strict";var n=r(1),o=r(5),l=r(121),i=1..toPrecision;n(n.P+n.F*(o(function(){return"1"!==i.call(1,void 0)})||!o(function(){i.call({})})),"Number",{toPrecision:function(e){var t=l(this,"Number#toPrecision: incorrect invocation!");return void 0===e?i.call(t):i.call(t,e)}})},function(e,t,r){var n=r(1);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(1),o=r(4).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,r){var n=r(1);n(n.S,"Number",{isInteger:r(122)})},function(e,t,r){var n=r(1);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(1),o=r(122),l=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return o(e)&&l(e)<=9007199254740991}})},function(e,t,r){var n=r(1);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(1);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(1),o=r(120);n(n.S+n.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,r){var n=r(1),o=r(119);n(n.S+n.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,r){var n=r(1),o=r(123),l=Math.sqrt,i=Math.acosh;n(n.S+n.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+l(e-1)*l(e+1))}})},function(e,t,r){var n=r(1),o=Math.asinh;n(n.S+n.F*!(o&&1/o(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,r){var n=r(1),o=Math.atanh;n(n.S+n.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(1),o=r(88);n(n.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(1),o=Math.exp;n(n.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,r){var n=r(1),o=r(89);n(n.S+n.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t,r){var n=r(1);n(n.S,"Math",{fround:r(124)})},function(e,t,r){var n=r(1),o=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,l=0,i=0,s=arguments.length,a=0;i<s;)a<(r=o(arguments[i++]))?(l=l*(n=a/r)*n+1,a=r):l+=r>0?(n=r/a)*n:r;return a===1/0?1/0:a*Math.sqrt(l)}})},function(e,t,r){var n=r(1),o=Math.imul;n(n.S+n.F*r(5)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(e,t){var r=+e,n=+t,o=65535&r,l=65535&n;return 0|o*l+((65535&r>>>16)*l+o*(65535&n>>>16)<<16>>>0)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(1);n(n.S,"Math",{log1p:r(123)})},function(e,t,r){var n=r(1);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(1);n(n.S,"Math",{sign:r(88)})},function(e,t,r){var n=r(1),o=r(89),l=Math.exp;n(n.S+n.F*r(5)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(l(e-1)-l(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(1),o=r(89),l=Math.exp;n(n.S,"Math",{tanh:function(e){var t=o(e=+e),r=o(-e);return t==1/0?1:r==1/0?-1:(t-r)/(l(e)+l(-e))}})},function(e,t,r){var n=r(1);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(1),o=r(44),l=String.fromCharCode,i=String.fromCodePoint;n(n.S+n.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?l(t):l(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(1),o=r(23),l=r(9);n(n.S,"String",{raw:function(e){for(var t=o(e.raw),r=l(t.length),n=arguments.length,i=[],s=0;r>s;)i.push(String(t[s++])),s<n&&i.push(String(arguments[s]));return i.join("")}})},function(e,t,r){"use strict";r(54)("trim",function(e){return function(){return e(this,3)}})},function(e,t,r){"use strict";var n=r(67)(!0);r(90)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(1),o=r(67)(!1);n(n.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,r){"use strict";var n=r(1),o=r(9),l=r(92),i="".endsWith;n(n.P+n.F*r(93)("endsWith"),"String",{endsWith:function(e){var t=l(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=o(t.length),s=void 0===r?n:Math.min(o(r),n),a=String(e);return i?i.call(t,a,s):t.slice(s-a.length,s)===a}})},function(e,t,r){"use strict";var n=r(1),o=r(92);n(n.P+n.F*r(93)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(1);n(n.P,"String",{repeat:r(87)})},function(e,t,r){"use strict";var n=r(1),o=r(9),l=r(92),i="".startsWith;n(n.P+n.F*r(93)("startsWith"),"String",{startsWith:function(e){var t=l(this,e,"startsWith"),r=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return i?i.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(20)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,r){"use strict";r(20)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,r){"use strict";r(20)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,r){"use strict";r(20)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,r){"use strict";r(20)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,r){"use strict";r(20)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,r){"use strict";r(20)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,r){"use strict";r(20)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,r){"use strict";r(20)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,r){"use strict";r(20)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,r){"use strict";r(20)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,r){"use strict";r(20)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,r){"use strict";r(20)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,r){var n=r(1);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(1),o=r(12),l=r(31);n(n.P+n.F*r(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=o(this),r=l(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(1),o=r(234);n(n.P+n.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(e,t,r){"use strict";var n=r(5),o=Date.prototype.getTime,l=Date.prototype.toISOString,i=function(e){return e>9?e:"0"+e};e.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-5e13-1))})||!n(function(){l.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+(r>99?r:"0"+i(r))+"Z"}:l},function(e,t,r){var n=Date.prototype,o=n.toString,l=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(19)(n,"toString",function(){var e=l.call(this);return e==e?o.call(this):"Invalid Date"})},function(e,t,r){var n=r(8)("toPrimitive"),o=Date.prototype;n in o||r(18)(o,n,r(237))},function(e,t,r){"use strict";var n=r(3),o=r(31);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(n(this),"number"!=e)}},function(e,t,r){var n=r(1);n(n.S,"Array",{isArray:r(66)})},function(e,t,r){"use strict";var n=r(27),o=r(1),l=r(12),i=r(125),s=r(94),a=r(9),u=r(95),c=r(96);o(o.S+o.F*!r(69)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,f,h=l(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,w=void 0!==v,y=0,g=c(h);if(w&&(v=n(v,p>2?arguments[2]:void 0,2)),null==g||d==Array&&s(g))for(r=new d(t=a(h.length));t>y;y++)u(r,y,w?v(h[y],y):h[y]);else for(f=g.call(h),r=new d;!(o=f.next()).done;y++)u(r,y,w?i(f,v,[o.value,y],!0):o.value);return r.length=y,r}})},function(e,t,r){"use strict";var n=r(1),o=r(95);n(n.S+n.F*r(5)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)o(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(1),o=r(23),l=[].join;n(n.P+n.F*(r(59)!=Object||!r(30)(l)),"Array",{join:function(e){return l.call(o(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(1),o=r(83),l=r(28),i=r(44),s=r(9),a=[].slice;n(n.P+n.F*r(5)(function(){o&&a.call(o)}),"Array",{slice:function(e,t){var r=s(this.length),n=l(this);if(t=void 0===t?r:t,"Array"==n)return a.call(this,e,t);for(var o=i(e,r),u=i(t,r),c=s(u-o),f=new Array(c),h=0;h<c;h++)f[h]="String"==n?this.charAt(o+h):this[o+h];return f}})},function(e,t,r){"use strict";var n=r(1),o=r(15),l=r(12),i=r(5),s=[].sort,a=[1,2,3];n(n.P+n.F*(i(function(){a.sort(void 0)})||!i(function(){a.sort(null)})||!r(30)(s)),"Array",{sort:function(e){return void 0===e?s.call(l(this)):s.call(l(this),o(e))}})},function(e,t,r){"use strict";var n=r(1),o=r(34)(0),l=r(30)([].forEach,!0);n(n.P+n.F*!l,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,r){var n=r(6),o=r(66),l=r(8)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[l])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(1),o=r(34)(1);n(n.P+n.F*!r(30)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(1),o=r(34)(2);n(n.P+n.F*!r(30)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(1),o=r(34)(3);n(n.P+n.F*!r(30)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(1),o=r(34)(4);n(n.P+n.F*!r(30)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(1),o=r(126);n(n.P+n.F*!r(30)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){"use strict";var n=r(1),o=r(126);n(n.P+n.F*!r(30)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(1),o=r(64)(!1),l=[].indexOf,i=!!l&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(i||!r(30)(l)),"Array",{indexOf:function(e){return i?l.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(1),o=r(23),l=r(29),i=r(9),s=[].lastIndexOf,a=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(a||!r(30)(s)),"Array",{lastIndexOf:function(e){if(a)return s.apply(this,arguments)||0;var t=o(this),r=i(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,l(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(1);n(n.P,"Array",{copyWithin:r(127)}),r(39)("copyWithin")},function(e,t,r){var n=r(1);n(n.P,"Array",{fill:r(98)}),r(39)("fill")},function(e,t,r){"use strict";var n=r(1),o=r(34)(5),l=!0;"find"in[]&&Array(1).find(function(){l=!1}),n(n.P+n.F*l,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r(39)("find")},function(e,t,r){"use strict";var n=r(1),o=r(34)(6),l="findIndex",i=!0;l in[]&&Array(1)[l](function(){i=!1}),n(n.P+n.F*i,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r(39)(l)},function(e,t,r){r(47)("Array")},function(e,t,r){var n=r(4),o=r(86),l=r(11).f,i=r(46).f,s=r(68),a=r(61),u=n.RegExp,c=u,f=u.prototype,h=/a/g,d=/a/g,p=new u(h)!==h;if(r(10)&&(!p||r(5)(function(){return d[r(8)("match")]=!1,u(h)!=h||u(d)==d||"/a/i"!=u(h,"i")}))){u=function(e,t){var r=this instanceof u,n=s(e),l=void 0===t;return!r&&n&&e.constructor===u&&l?e:o(p?new c(n&&!l?e.source:e,t):c((n=e instanceof u)?e.source:e,n&&l?a.call(e):t),r?this:f,u)};for(var v=function(e){e in u||l(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},w=i(c),y=0;w.length>y;)v(w[y++]);f.constructor=u,u.prototype=f,r(19)(n,"RegExp",u)}r(47)("RegExp")},function(e,t,r){"use strict";r(130);var n=r(3),o=r(61),l=r(10),i=/./.toString,s=function(e){r(19)(RegExp.prototype,"toString",e,!0)};r(5)(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?s(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!l&&e instanceof RegExp?o.call(e):void 0)}):"toString"!=i.name&&s(function(){return i.call(this)})},function(e,t,r){"use strict";var n=r(3),o=r(9),l=r(101),i=r(70);r(71)("match",1,function(e,t,r,s){return[function(r){var n=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=s(r,e,this);if(t.done)return t.value;var a=n(e),u=String(this);if(!a.global)return i(a,u);var c=a.unicode;a.lastIndex=0;for(var f,h=[],d=0;null!==(f=i(a,u));){var p=String(f[0]);h[d]=p,""===p&&(a.lastIndex=l(u,o(a.lastIndex),c)),d++}return 0===d?null:h}]})},function(e,t,r){"use strict";var n=r(3),o=r(12),l=r(9),i=r(29),s=r(101),a=r(70),u=Math.max,c=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;r(71)("replace",2,function(e,t,r,p){return[function(n,o){var l=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,l,o):r.call(String(l),n,o)},function(e,t){var o=p(r,e,this,t);if(o.done)return o.value;var f=n(e),h=String(this),d="function"==typeof t;d||(t=String(t));var w=f.global;if(w){var y=f.unicode;f.lastIndex=0}for(var g=[];;){var m=a(f,h);if(null===m)break;if(g.push(m),!w)break;""===String(m[0])&&(f.lastIndex=s(h,l(f.lastIndex),y))}for(var b,_="",S=0,k=0;k<g.length;k++){m=g[k];for(var E=String(m[0]),C=u(c(i(m.index),h.length),0),T=[],O=1;O<m.length;O++)T.push(void 0===(b=m[O])?b:String(b));var M=m.groups;if(d){var x=[E].concat(T,C,h);void 0!==M&&x.push(M);var R=String(t.apply(void 0,x))}else R=v(E,h,C,T,M,t);C>=S&&(_+=h.slice(S,C)+R,S=C+E.length)}return _+h.slice(S)}];function v(e,t,n,l,i,s){var a=n+e.length,u=l.length,c=d;return void 0!==i&&(i=o(i),c=h),r.call(s,c,function(r,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(a);case"<":s=i[o.slice(1,-1)];break;default:var c=+o;if(0===c)return o;if(c>u){var h=f(c/10);return 0===h?o:h<=u?void 0===l[h-1]?o.charAt(1):l[h-1]+o.charAt(1):o}s=l[c-1]}return void 0===s?"":s})}})},function(e,t,r){"use strict";var n=r(3),o=r(116),l=r(70);r(71)("search",1,function(e,t,r,i){return[function(r){var n=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=i(r,e,this);if(t.done)return t.value;var s=n(e),a=String(this),u=s.lastIndex;o(u,0)||(s.lastIndex=0);var c=l(s,a);return o(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},function(e,t,r){"use strict";var n=r(68),o=r(3),l=r(62),i=r(101),s=r(9),a=r(70),u=r(100),c=Math.min,f=[].push,h=!!function(){try{return new RegExp("x","y")}catch(e){}}();r(71)("split",2,function(e,t,r,d){var p=r;return"c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?p=function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(o,e,t);for(var l,i,s,a=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,d=void 0===t?4294967295:t>>>0,p=new RegExp(e.source,c+"g");(l=u.call(p,o))&&!((i=p.lastIndex)>h&&(a.push(o.slice(h,l.index)),l.length>1&&l.index<o.length&&f.apply(a,l.slice(1)),s=l[0].length,h=i,a.length>=d));)p.lastIndex===l.index&&p.lastIndex++;return h===o.length?!s&&p.test("")||a.push(""):a.push(o.slice(h)),a.length>d?a.slice(0,d):a}:"0".split(void 0,0).length&&(p=function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}),[function(r,n){var o=e(this),l=null==r?void 0:r[t];return void 0!==l?l.call(r,o,n):p.call(String(o),r,n)},function(e,t){var n=d(p,e,this,t,p!==r);if(n.done)return n.value;var u=o(e),f=String(this),v=l(u,RegExp),w=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),g=new v(h?u:"^(?:"+u.source+")",y),m=void 0===t?4294967295:t>>>0;if(0===m)return[];if(0===f.length)return null===a(g,f)?[f]:[];for(var b=0,_=0,S=[];_<f.length;){g.lastIndex=h?_:0;var k,E=a(g,h?f:f.slice(_));if(null===E||(k=c(s(g.lastIndex+(h?0:_)),f.length))===b)_=i(f,_,w);else{if(S.push(f.slice(b,_)),S.length===m)return S;for(var C=1;C<=E.length-1;C++)if(S.push(E[C]),S.length===m)return S;_=b=k}}return S.push(f.slice(b)),S}]})},function(e,t,r){"use strict";var n,o,l,i,s=r(38),a=r(4),u=r(27),c=r(53),f=r(1),h=r(6),d=r(15),p=r(48),v=r(49),w=r(62),y=r(102).set,g=r(103)(),m=r(104),b=r(131),_=r(72),S=r(132),k=a.TypeError,E=a.process,C=E&&E.versions,T=C&&C.v8||"",O=a.Promise,M="process"==c(E),x=function(){},R=o=m.f,A=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[r(8)("species")]=function(e){e(x,x)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t&&0!==T.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;g(function(){for(var n=e._v,o=1==e._s,l=0,i=function(t){var r,l,i,s=o?t.ok:t.fail,a=t.resolve,u=t.reject,c=t.domain;try{s?(o||(2==e._h&&N(e),e._h=1),!0===s?r=n:(c&&c.enter(),r=s(n),c&&(c.exit(),i=!0)),r===t.promise?u(k("Promise-chain cycle")):(l=I(r))?l.call(r,a,u):a(r)):u(n)}catch(e){c&&!i&&c.exit(),u(e)}};r.length>l;)i(r[l++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){y.call(a,function(){var t,r,n,o=e._v,l=F(e);if(l&&(t=b(function(){M?E.emit("unhandledRejection",o,e):(r=a.onunhandledrejection)?r({promise:e,reason:o}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=M||F(e)?2:1),e._a=void 0,l&&t.e)throw t.v})},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){y.call(a,function(){var t;M?E.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},B=function e(t){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw k("Promise can't be resolved itself");(r=I(t))?g(function(){var o={_w:n,_d:!1};try{r.call(t,u(e,o,1),u(D,o,1))}catch(e){D.call(o,e)}}):(n._v=t,n._s=1,L(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};A||(O=function(e){p(this,O,"Promise","_h"),d(e),n.call(this);try{e(u(B,this,1),u(D,this,1))}catch(e){D.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(50)(O.prototype,{then:function(e,t){var r=R(w(this,O));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=M?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),l=function(){var e=new n;this.promise=e,this.resolve=u(B,e,1),this.reject=u(D,e,1)},m.f=R=function(e){return e===O||e===i?new l(e):o(e)}),f(f.G+f.W+f.F*!A,{Promise:O}),r(52)(O,"Promise"),r(47)("Promise"),i=r(26).Promise,f(f.S+f.F*!A,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(e){return S(s&&this===i?O:this,e)}}),f(f.S+f.F*!(A&&r(69)(function(e){O.all(e).catch(x)})),"Promise",{all:function(e){var t=this,r=R(t),n=r.resolve,o=r.reject,l=b(function(){var r=[],l=0,i=1;v(e,!1,function(e){var s=l++,a=!1;r.push(void 0),i++,t.resolve(e).then(function(e){a||(a=!0,r[s]=e,--i||n(r))},o)}),--i||n(r)});return l.e&&o(l.v),r.promise},race:function(e){var t=this,r=R(t),n=r.reject,o=b(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t,r){"use strict";var n=r(137),o=r(56);r(73)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(1),o=r(74),l=r(105),i=r(3),s=r(44),a=r(9),u=r(6),c=r(4).ArrayBuffer,f=r(62),h=l.ArrayBuffer,d=l.DataView,p=o.ABV&&c.isView,v=h.prototype.slice,w=o.VIEW;n(n.G+n.W+n.F*(c!==h),{ArrayBuffer:h}),n(n.S+n.F*!o.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||u(e)&&w in e}}),n(n.P+n.U+n.F*r(5)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(i(this),e);for(var r=i(this).byteLength,n=s(e,r),o=s(void 0===t?r:t,r),l=new(f(this,h))(a(o-n)),u=new d(this),c=new d(l),p=0;n<o;)c.setUint8(p++,u.getUint8(n++));return l}}),r(47)("ArrayBuffer")},function(e,t,r){var n=r(1);n(n.G+n.W+n.F*!r(74).ABV,{DataView:r(105).DataView})},function(e,t,r){r(35)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(35)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(35)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){r(35)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(35)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(35)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(35)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(35)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(35)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){var n=r(1),o=r(15),l=r(3),i=(r(4).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(5)(function(){i(function(){})}),"Reflect",{apply:function(e,t,r){var n=o(e),a=l(r);return i?i(n,t,a):s.call(n,t,a)}})},function(e,t,r){var n=r(1),o=r(45),l=r(15),i=r(3),s=r(6),a=r(5),u=r(117),c=(r(4).Reflect||{}).construct,f=a(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!a(function(){c(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(e,t){l(e),i(t);var r=arguments.length<3?e:l(arguments[2]);if(h&&!f)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var a=r.prototype,d=o(s(a)?a:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},function(e,t,r){var n=r(11),o=r(1),l=r(3),i=r(31);o(o.S+o.F*r(5)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){l(e),t=i(t,!0),l(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(1),o=r(24).f,l=r(3);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=o(l(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(1),o=r(3),l=function(e){this._t=o(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(91)(l,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new l(e)}})},function(e,t,r){var n=r(24),o=r(25),l=r(22),i=r(1),s=r(6),a=r(3);i(i.S,"Reflect",{get:function e(t,r){var i,u,c=arguments.length<3?t:arguments[2];return a(t)===c?t[r]:(i=n.f(t,r))?l(i,"value")?i.value:void 0!==i.get?i.get.call(c):void 0:s(u=o(t))?e(u,r,c):void 0}})},function(e,t,r){var n=r(24),o=r(1),l=r(3);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(l(e),t)}})},function(e,t,r){var n=r(1),o=r(25),l=r(3);n(n.S,"Reflect",{getPrototypeOf:function(e){return o(l(e))}})},function(e,t,r){var n=r(1);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(1),o=r(3),l=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return o(e),!l||l(e)}})},function(e,t,r){var n=r(1);n(n.S,"Reflect",{ownKeys:r(139)})},function(e,t,r){var n=r(1),o=r(3),l=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){o(e);try{return l&&l(e),!0}catch(e){return!1}}})},function(e,t,r){var n=r(11),o=r(24),l=r(25),i=r(22),s=r(1),a=r(41),u=r(3),c=r(6);s(s.S,"Reflect",{set:function e(t,r,s){var f,h,d=arguments.length<4?t:arguments[3],p=o.f(u(t),r);if(!p){if(c(h=l(t)))return e(h,r,s,d);p=a(0)}if(i(p,"value")){if(!1===p.writable||!c(d))return!1;if(f=o.f(d,r)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,n.f(d,r,f)}else n.f(d,r,a(0,s));return!0}return void 0!==p.set&&(p.set.call(d,s),!0)}})},function(e,t,r){var n=r(1),o=r(84);o&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){"use strict";var n=r(1),o=r(64)(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r(39)("includes")},function(e,t,r){"use strict";var n=r(1),o=r(140),l=r(12),i=r(9),s=r(15),a=r(97);n(n.P,"Array",{flatMap:function(e){var t,r,n=l(this);return s(e),t=i(n.length),r=a(n,0),o(r,n,n,t,0,1,e,arguments[1]),r}}),r(39)("flatMap")},function(e,t,r){"use strict";var n=r(1),o=r(140),l=r(12),i=r(9),s=r(29),a=r(97);n(n.P,"Array",{flatten:function(){var e=arguments[0],t=l(this),r=i(t.length),n=a(t,0);return o(n,t,t,r,0,void 0===e?1:s(e)),n}}),r(39)("flatten")},function(e,t,r){"use strict";var n=r(1),o=r(67)(!0);n(n.P,"String",{at:function(e){return o(this,e)}})},function(e,t,r){"use strict";var n=r(1),o=r(141),l=r(72);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(l),"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){"use strict";var n=r(1),o=r(141),l=r(72);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(l),"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";r(54)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,r){"use strict";r(54)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,r){"use strict";var n=r(1),o=r(32),l=r(9),i=r(68),s=r(61),a=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};r(91)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(o(this),!i(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in a?String(e.flags):s.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=l(e.lastIndex),new u(n,t)}})},function(e,t,r){r(80)("asyncIterator")},function(e,t,r){r(80)("observable")},function(e,t,r){var n=r(1),o=r(139),l=r(23),i=r(24),s=r(95);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=l(e),a=i.f,u=o(n),c={},f=0;u.length>f;)void 0!==(r=a(n,t=u[f++]))&&s(c,t,r);return c}})},function(e,t,r){var n=r(1),o=r(142)(!1);n(n.S,"Object",{values:function(e){return o(e)}})},function(e,t,r){var n=r(1),o=r(142)(!0);n(n.S,"Object",{entries:function(e){return o(e)}})},function(e,t,r){"use strict";var n=r(1),o=r(12),l=r(15),i=r(11);r(10)&&n(n.P+r(75),"Object",{__defineGetter__:function(e,t){i.f(o(this),e,{get:l(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(1),o=r(12),l=r(15),i=r(11);r(10)&&n(n.P+r(75),"Object",{__defineSetter__:function(e,t){i.f(o(this),e,{set:l(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(1),o=r(12),l=r(31),i=r(25),s=r(24).f;r(10)&&n(n.P+r(75),"Object",{__lookupGetter__:function(e){var t,r=o(this),n=l(e,!0);do{if(t=s(r,n))return t.get}while(r=i(r))}})},function(e,t,r){"use strict";var n=r(1),o=r(12),l=r(31),i=r(25),s=r(24).f;r(10)&&n(n.P+r(75),"Object",{__lookupSetter__:function(e){var t,r=o(this),n=l(e,!0);do{if(t=s(r,n))return t.set}while(r=i(r))}})},function(e,t,r){var n=r(1);n(n.P+n.R,"Map",{toJSON:r(143)("Map")})},function(e,t,r){var n=r(1);n(n.P+n.R,"Set",{toJSON:r(143)("Set")})},function(e,t,r){r(76)("Map")},function(e,t,r){r(76)("Set")},function(e,t,r){r(76)("WeakMap")},function(e,t,r){r(76)("WeakSet")},function(e,t,r){r(77)("Map")},function(e,t,r){r(77)("Set")},function(e,t,r){r(77)("WeakMap")},function(e,t,r){r(77)("WeakSet")},function(e,t,r){var n=r(1);n(n.G,{global:r(4)})},function(e,t,r){var n=r(1);n(n.S,"System",{global:r(4)})},function(e,t,r){var n=r(1),o=r(28);n(n.S,"Error",{isError:function(e){return"Error"===o(e)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}})},function(e,t,r){var n=r(1);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,r){var n=r(1),o=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*o}})},function(e,t,r){var n=r(1),o=r(145),l=r(124);n(n.S,"Math",{fscale:function(e,t,r,n,i){return l(o(e,t,r,n,i))}})},function(e,t,r){var n=r(1);n(n.S,"Math",{iaddh:function(e,t,r,n){var o=e>>>0,l=r>>>0;return(t>>>0)+(n>>>0)+((o&l|(o|l)&~(o+l>>>0))>>>31)|0}})},function(e,t,r){var n=r(1);n(n.S,"Math",{isubh:function(e,t,r,n){var o=e>>>0,l=r>>>0;return(t>>>0)-(n>>>0)-((~o&l|~(o^l)&o-l>>>0)>>>31)|0}})},function(e,t,r){var n=r(1);n(n.S,"Math",{imulh:function(e,t){var r=+e,n=+t,o=65535&r,l=65535&n,i=r>>16,s=n>>16,a=(i*l>>>0)+(o*l>>>16);return i*s+(a>>16)+((o*s>>>0)+(65535&a)>>16)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,r){var n=r(1),o=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*o}})},function(e,t,r){var n=r(1);n(n.S,"Math",{scale:r(145)})},function(e,t,r){var n=r(1);n(n.S,"Math",{umulh:function(e,t){var r=+e,n=+t,o=65535&r,l=65535&n,i=r>>>16,s=n>>>16,a=(i*l>>>0)+(o*l>>>16);return i*s+(a>>>16)+((o*s>>>0)+(65535&a)>>>16)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,r){"use strict";var n=r(1),o=r(26),l=r(4),i=r(62),s=r(132);n(n.P+n.R,"Promise",{finally:function(e){var t=i(this,o.Promise||l.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(1),o=r(104),l=r(131);n(n.S,"Promise",{try:function(e){var t=o.f(this),r=l(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){var n=r(36),o=r(3),l=n.key,i=n.set;n.exp({defineMetadata:function(e,t,r,n){i(e,t,o(r),l(n))}})},function(e,t,r){var n=r(36),o=r(3),l=n.key,i=n.map,s=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:l(arguments[2]),n=i(o(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var a=s.get(t);return a.delete(r),!!a.size||s.delete(t)}})},function(e,t,r){var n=r(36),o=r(3),l=r(25),i=n.has,s=n.get,a=n.key;n.exp({getMetadata:function(e,t){return function e(t,r,n){if(i(t,r,n))return s(t,r,n);var o=l(r);return null!==o?e(t,o,n):void 0}(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,r){var n=r(135),o=r(144),l=r(36),i=r(3),s=r(25),a=l.keys,u=l.key;l.exp({getMetadataKeys:function(e){return function e(t,r){var l=a(t,r),i=s(t);if(null===i)return l;var u=e(i,r);return u.length?l.length?o(new n(l.concat(u))):u:l}(i(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,r){var n=r(36),o=r(3),l=n.get,i=n.key;n.exp({getOwnMetadata:function(e,t){return l(e,o(t),arguments.length<3?void 0:i(arguments[2]))}})},function(e,t,r){var n=r(36),o=r(3),l=n.keys,i=n.key;n.exp({getOwnMetadataKeys:function(e){return l(o(e),arguments.length<2?void 0:i(arguments[1]))}})},function(e,t,r){var n=r(36),o=r(3),l=r(25),i=n.has,s=n.key;n.exp({hasMetadata:function(e,t){return function e(t,r,n){if(i(t,r,n))return!0;var o=l(r);return null!==o&&e(t,o,n)}(e,o(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,r){var n=r(36),o=r(3),l=n.has,i=n.key;n.exp({hasOwnMetadata:function(e,t){return l(e,o(t),arguments.length<3?void 0:i(arguments[2]))}})},function(e,t,r){var n=r(36),o=r(3),l=r(15),i=n.key,s=n.set;n.exp({metadata:function(e,t){return function(r,n){s(e,t,(void 0!==n?o:l)(r),i(n))}}})},function(e,t,r){var n=r(1),o=r(103)(),l=r(4).process,i="process"==r(28)(l);n(n.G,{asap:function(e){var t=i&&l.domain;o(t?t.bind(e):e)}})},function(e,t,r){"use strict";var n=r(1),o=r(4),l=r(26),i=r(103)(),s=r(8)("observable"),a=r(15),u=r(3),c=r(48),f=r(50),h=r(18),d=r(49),p=d.RETURN,v=function(e){return null==e?void 0:a(e)},w=function(e){var t=e._c;t&&(e._c=void 0,t())},y=function(e){return void 0===e._o},g=function(e){y(e)||(e._o=void 0,w(e))},m=function(e,t){u(e),this._c=void 0,this._o=e,e=new b(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:a(r),this._c=r)}catch(t){return void e.error(t)}y(this)&&w(this)};m.prototype=f({},{unsubscribe:function(){g(this)}});var b=function(e){this._s=e};b.prototype=f({},{next:function(e){var t=this._s;if(!y(t)){var r=t._o;try{var n=v(r.next);if(n)return n.call(r,e)}catch(e){try{g(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var r=t._o;t._o=void 0;try{var n=v(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{w(t)}finally{throw e}}return w(t),e},complete:function(e){var t=this._s;if(!y(t)){var r=t._o;t._o=void 0;try{var n=v(r.complete);e=n?n.call(r,e):void 0}catch(e){try{w(t)}finally{throw e}}return w(t),e}}});var _=function(e){c(this,_,"Observable","_f")._f=a(e)};f(_.prototype,{subscribe:function(e){return new m(e,this._f)},forEach:function(e){var t=this;return new(l.Promise||o.Promise)(function(r,n){a(e);var o=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),o.unsubscribe()}},error:n,complete:r})})}}),f(_,{from:function(e){var t="function"==typeof this?this:_,r=v(u(e)[s]);if(r){var n=u(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return i(function(){if(!r){try{if(d(e,!1,function(e){if(t.next(e),r)return p})===p)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:_)(function(e){var t=!1;return i(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),h(_.prototype,s,function(){return this}),n(n.G,{Observable:_}),r(47)("Observable")},function(e,t,r){var n=r(4),o=r(1),l=r(72),i=[].slice,s=/MSIE .\./.test(l),a=function(e){return function(t,r){var n=arguments.length>2,o=!!n&&i.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,r)}};o(o.G+o.B+o.F*s,{setTimeout:a(n.setTimeout),setInterval:a(n.setInterval)})},function(e,t,r){var n=r(1),o=r(102);n(n.G+n.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,r){for(var n=r(99),o=r(43),l=r(19),i=r(4),s=r(18),a=r(55),u=r(8),c=u("iterator"),f=u("toStringTag"),h=a.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(d),v=0;v<p.length;v++){var w,y=p[v],g=d[y],m=i[y],b=m&&m.prototype;if(b&&(b[c]||s(b,c,h),b[f]||s(b,f,y),a[y]=h,g))for(w in n)b[w]||l(b,w,n[w],!0)}},function(e,t,r){(function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"use strict";var n,o=Object.prototype,l=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"===r(t),f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=_;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",w={},y={};y[s]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(I([])));m&&m!==o&&l.call(m,s)&&(y=m);var b=C.prototype=k.prototype=Object.create(y);E.prototype=b.constructor=C,C.constructor=E,C[u]=E.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},f.awrap=function(e){return{__await:e}},T(O.prototype),O.prototype[a]=function(){return this},f.AsyncIterator=O,f.async=function(e,t,r,n){var o=new O(_(e,t,r,n));return f.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(b),b[u]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),u=l.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),w}}}function _(e,t,r,n){var o=t&&t.prototype instanceof k?t:k,l=Object.create(o.prototype),i=new A(n||[]);return l._invoke=function(e,t,r){var n=h;return function(o,l){if(n===p)throw new Error("Generator is already running");if(n===v){if("throw"===o)throw l;return L()}for(r.method=o,r.arg=l;;){var i=r.delegate;if(i){var s=M(i,r);if(s){if(s===w)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var a=S(e,t,r);if("normal"===a.type){if(n=r.done?v:d,a.arg===w)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(n=v,r.method="throw",r.arg=a.arg)}}}(e,r,i),l}function S(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function k(){}function E(){}function C(){}function T(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(t){function n(e,o,i,s){var a=S(t[e],t,o);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"===r(c)&&l.call(c,"__await")?Promise.resolve(c.__await).then(function(e){n("next",e,i,s)},function(e){n("throw",e,i,s)}):Promise.resolve(c).then(function(e){u.value=e,i(u)},s)}s(a.arg)}var o;"object"===r(e.process)&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(e,t){function r(){return new Promise(function(r,o){n(e,t,r,o)})}return o=o?o.then(r,r):r()}}function M(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,M(e,t),"throw"===t.method))return w;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var o=S(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,w;var l=o.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:n,done:!0}}}("object"===(void 0===e?"undefined":r(e))?e:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:this)}).call(this,r(109),r(146)(e))},function(e,t,r){r(353),e.exports=r(26).RegExp.escape},function(e,t,r){var n=r(1),o=r(354)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return o(e)}})},function(e,t){e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},function(e,t,r){"use strict";r.d(t,"a",function(){return _});var n=r(51),o=r(7),l=r(2),i=r(108),s=r(152),a=r(0),u=r(150),c=r(151);function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t,r,n,o,l,i){try{var s=e[l](i),a=s.value}catch(e){return void r(e)}s.done?t(a):Promise.resolve(a).then(n,o)}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),e}var g=function(){function e(t,r,n){v(this,e),this.rowIndex=t,this.colIndex=r,this.sprites=n}return y(e,[{key:"getSprites",value:function(){return this.sprites}},{key:"getSpritesAsSet",value:function(){return new Set(this.sprites)}},{key:"getWantsToMove",value:function(){return a.d.STATIONARY}}]),e}(),m=new TextDecoder,b=new TextEncoder,_=function(){function e(t,r,n){var o=this;v(this,e),this.worker=t,this.table=r;n&&n.onMessage||(n=d({},n,{onMessage:function(e){return Object(a.j)(10,function(){return!o.inputWatcher.isSomethingPressed()&&(alert(e),!0)})}})),this.cellCache=[],this.levelNum=-123456,this.gameData=null,this.ui=new s.a(r,n),this.resizeWatcher=new c.a(r,this.handleResize.bind(this)),this.inputWatcher=new u.a(r),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.messageListener=this.messageListener.bind(this),this.pollInputWatcher=this.pollInputWatcher.bind(this),r.addEventListener("blur",this.pause),r.addEventListener("focus",this.resume),t.addEventListener("message",this.messageListener),this.inputInterval=window.setInterval(this.pollInputWatcher,10)}return y(e,[{key:"setGame",value:function(e,t,r){var n=b.encode(e).buffer;this.worker.postMessage({type:a.c.ON_GAME_CHANGE,code:n,level:t,checkpoint:r},[n])}},{key:"dispose",value:function(){this.inputWatcher.dispose(),this.resizeWatcher.dispose(),clearInterval(this.inputInterval)}},{key:"press",value:function(e){this.worker.postMessage({type:a.c.PRESS,button:e})}},{key:"pause",value:function(){this.worker.postMessage({type:a.c.PAUSE}),this.inputInterval&&clearInterval(this.inputInterval),this.inputInterval=0}},{key:"resume",value:function(){this.worker.postMessage({type:a.c.RESUME}),this.inputInterval||(this.inputInterval=window.setInterval(this.pollInputWatcher,10))}},{key:"resize",value:function(){this.resizeWatcher.trigger()}},{key:"pollInputWatcher",value:function(){var e=this.inputWatcher.pollControls();e&&this.press(e)}},{key:"getScreenDimensions",value:function(e){var t=this.getGameData().metadata;return t.flickscreen||t.zoomscreen||new n.a(e[0].length,e.length)}},{key:"messageListener",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r,n,o,l,s,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,e.t0=r.type,e.next=e.t0===a.c.ON_GAME_CHANGE?4:e.t0===a.c.ON_LEVEL_LOAD?8:e.t0===a.c.ON_LEVEL_CHANGE?10:e.t0===a.c.ON_MESSAGE?16:e.t0===a.c.ON_PRESS?21:e.t0===a.c.ON_TICK?23:e.t0===a.c.ON_SOUND?25:e.t0===a.c.ON_PAUSE?28:e.t0===a.c.ON_RESUME?30:e.t0===a.c.TICK?32:e.t0===a.c.PRESS?32:e.t0===a.c.PAUSE?32:e.t0===a.c.RESUME?32:33;break;case 4:return n=i.a.fromJson(JSON.parse(m.decode(r.payload)),"**source not included because of laziness**"),this.gameData=n,this.ui.onGameChange(n),e.abrupt("break",34);case 8:return this.ui.onLevelLoad(r.level,r.levelSize),e.abrupt("break",34);case 10:return this.cellCache=[],this.levelNum=r.level,r.cells?(this.ui.onLevelChange(r.level,r.cells.map(function(e){return e.map(function(e){return u.convertToCellish(e)})}),null),o=this.getScreenDimensions(r.cells),l=o.width,s=o.height,this.resizeWatcher.setLevel(s,l)):this.ui.onLevelChange(r.level,null,r.message),this.resizeWatcher.trigger(),this.table.focus(),e.abrupt("break",34);case 16:return e.next=18,this.ui.onMessage(r.message);case 18:return this.worker.postMessage({type:a.c.ON_MESSAGE_DONE}),this.table.focus(),e.abrupt("break",34);case 21:return this.ui.onPress(r.direction),e.abrupt("break",34);case 23:return this.ui.onTick(new Set(r.changedCells.map(function(e){return u.convertToCellish(e)})),r.checkpoint,r.hasAgain,this.convertToA11yMessages(r.a11yMessages)),e.abrupt("break",34);case 25:return e.next=27,this.ui.onSound({soundCode:r.soundCode});case 27:return e.abrupt("break",34);case 28:return this.ui.onPause(),e.abrupt("break",34);case 30:return this.ui.onResume(),e.abrupt("break",34);case 32:return e.abrupt("break",34);case 33:console.log('BUG: Unhandled Event occurred. Ignoring "'.concat(r.type,'"'),r);case 34:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var l=e.apply(t,r);function i(e){h(l,n,o,i,s,"next",e)}function s(e){h(l,n,o,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"convertToA11yMessages",value:function(e){var t=this;return e.map(function(e){switch(e.type){case o.a.ADD:return d({},e,{cell:t.convertToCellish(e.cell),sprites:f(e.sprites).map(function(e){return t.lookupSprite(e)})});case o.a.MOVE:return d({},e,{oldCell:t.convertToCellish(e.oldCell),newCell:t.convertToCellish(e.newCell),sprite:t.lookupSprite(e.sprite)});case o.a.REMOVE:return d({},e,{cell:t.convertToCellish(e.cell),sprites:f(e.sprites).map(function(e){return t.lookupSprite(e)})});case o.a.REPLACE:return d({},e,{cell:t.convertToCellish(e.cell),replacements:f(e.replacements).map(function(e){var r=e.oldSprite,n=e.newSprite;return{oldSprite:t.lookupSprite(r),newSprite:t.lookupSprite(n)}})})}})}},{key:"lookupSprite",value:function(e){var t=this.getGameData()._getSpriteByName(e);if(!t)throw new Error('Could not find sprite "'.concat(e,'"'));return t}},{key:"convertToCellish",value:function(e){var t=this,r=e.rowIndex,n=e.colIndex,o=e.spriteNames;this.cellCache[r]||(this.cellCache[r]=[]),this.cellCache[r][n]||(this.cellCache[r][n]=new g(r,n,[]));var l=this.cellCache[r][n];return l.sprites=o.map(function(e){return t.lookupSprite(e)}),l}},{key:"getGameData",value:function(){if(!this.gameData)throw new Error("BUG: Game Data has not been retreived from the worker yet");return this.gameData}},{key:"isCurrentLevelAMessage",value:function(){return this.getGameData().levels[this.levelNum].type===l.d.MESSAGE}},{key:"handleResize",value:function(e,t){this.isCurrentLevelAMessage()||(this.table.setAttribute("style","width: ".concat(e,"px")),this.table.parentElement&&this.table.parentElement.setAttribute("style","left: ".concat(t,"px; /*chrome display quirk with fractional pixels*/")))}}]),e}()},,,,function(e,t,r){(function(e){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var l=window.CustomEvent;function i(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function s(e){e&&e.blur&&e!==document.body&&e.blur()}function a(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1}function u(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function c(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,r=!1,n=function(){r?this.downgradeModal():this.maybeHideModal(),r=!1}.bind(this),o=function(o){if(o.target===e){var l="DOMNodeRemoved";r|=o.type.substr(0,l.length)===l,window.clearTimeout(t),t=window.setTimeout(n,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,o)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}l&&"object"!==o(l)||((l=function(e,t){t=t||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),r}).prototype=window.Event.prototype),c.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),f.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var r=document.createEvent("MouseEvents");r.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(r),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}s(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!f.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),r=function(e,r){return!(void 0===t[e]||t[e]===r)};if(t.opacity<1||r("zIndex","auto")||r("transform","none")||r("mixBlendMode","normal")||r("filter","none")||r("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,f.needsCentering(this.dialog_)?(f.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new l("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var f={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,r=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,r)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var r=document.styleSheets[t],n=null;try{n=r.cssRules}catch(e){}if(n)for(var o=0;o<n.length;++o){var l=n[o],i=null;try{i=document.querySelectorAll(l.selectorText)}catch(e){}if(i&&a(i,e)){var s=l.style.getPropertyValue("top"),u=l.style.getPropertyValue("bottom");if(s&&"auto"!==s||u&&"auto"!==u)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!f.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new c(e)},registerDialog:function(e){e.showModal||f.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var r=[];t.forEach(function(e){for(var t,n=0;t=e.removedNodes[n];++n)t instanceof Element&&("dialog"===t.localName&&r.push(t),r=r.concat(t.querySelectorAll("dialog")))}),r.length&&e(r)}))}};if(f.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},f.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},f.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,r=0;e=this.pendingDialogStack[r];++r)e.updateZIndex(--t,--t),0===r&&(this.overlay.style.zIndex=--t);var n=this.pendingDialogStack[0];n?(n.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},f.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=i(e);){for(var t,r=0;t=this.pendingDialogStack[r];++r)if(t.dialog===e)return 0===r;e=e.parentElement}return!1},f.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),s(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},f.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new l("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(t)&&r.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},f.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},f.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},f.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},f.dm=new f.DialogManager,f.formSubmitter=null,f.useValue=null,void 0===window.HTMLDialogElement){var h=document.createElement("form");if(h.setAttribute("method","dialog"),"dialog"!==h.method){var d=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(d){var p=d.get;d.get=function(){return u(this)?"dialog":p.call(this)};var v=d.set;d.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):v.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",d)}}document.addEventListener("click",function(e){if(f.formSubmitter=null,f.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&u(t.form)){if(!("submit"===t.type&&["button","input"].indexOf(t.localName)>-1)){if("input"!==t.localName||"image"!==t.type)return;f.useValue=e.offsetX+","+e.offsetY}i(t)&&(f.formSubmitter=t)}}},!1);var w=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!u(this))return w.call(this);var e=i(this);e&&e.close()},document.addEventListener("submit",function(e){var t=e.target;if(u(t)){e.preventDefault();var r=i(t);if(r){var n=f.formSubmitter;n&&n.form===t?r.close(f.useValue||n.value):r.close(),f.formSubmitter=null}}},!0)}f.forceRegisterDialog=f.forceRegisterDialog,f.registerDialog=f.registerDialog,"amd"in r(362)?void 0===(n=function(){return f}.call(t,r,t,e))||(e.exports=n):"object"===o(e)&&"object"===o(e.exports)?e.exports=f:window.dialogPolyfill=f}()}).call(this,r(146)(e))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}
/**
 * Seedable random number generator functions.
 * @version 1.0.0
 * @license Public Domain
 *
 * @example
 * var rng = new RNG('Example');
 * rng.random(40, 50);  // =>  42
 * rng.uniform();       // =>  0.7972798995050903
 * rng.normal();        // => -0.6698504543216376
 * rng.exponential();   // =>  1.0547367609131555
 * rng.poisson(4);      // =>  2
 * rng.gamma(4);        // =>  2.781724687386858
 */r.r(t),r.d(t,"RNG",function(){return s});var i=function(){function e(t){n(this,e),this.s=new Array(256),this.i=0,this.j=0;for(var r=0;r<256;r++)this.s[r]=r;t&&this.mix(t)}return l(e,[{key:"_swap",value:function(e,t){var r=this.s[e];this.s[e]=this.s[t],this.s[t]=r}},{key:"mix",value:function(e){for(var t=function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r),o=[];do{o.push(255&n),n>>=8}while(n>0);t=t.concat(o.reverse())}return t}(e),r=0,n=0;n<this.s.length;n++)r+=this.s[n]+t[n%t.length],r%=256,this._swap(n,r)}},{key:"next",value:function(){return this.i=(this.i+1)%256,this.j=(this.j+this.s[this.i])%256,this._swap(this.i,this.j),this.s[(this.s[this.i]+this.s[this.j])%256]}}]),e}(),s=function(){function e(t){n(this,e),this._normal=null,this._state=new i(JSON.stringify(t))}return l(e,[{key:"nextByte",value:function(){return this._state.next()}},{key:"uniform",value:function(){for(var e=0,t=0;t<7;t++)e*=256,e+=this.nextByte();return e/(Math.pow(2,56)-1)}},{key:"random",value:function(e,t){return null===e?this.uniform():(null===t&&(t=e,e=0),e+Math.floor(this.uniform()*(t-e)))}},{key:"normal",value:function(){if(null!==this._normal){var e=this._normal;return this._normal=null,e}var t=this.uniform()||Math.pow(2,-53),r=this.uniform();return this._normal=Math.sqrt(-2*Math.log(t))*Math.sin(2*Math.PI*r),Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*r)}},{key:"exponential",value:function(){return-Math.log(this.uniform()||Math.pow(2,-53))}},{key:"poisson",value:function(e){var t=Math.exp(-(e||1)),r=0,n=1;do{r++,n*=this.uniform()}while(n>t);return r-1}}]),e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"MakeRiff",function(){return a}),r.d(t,"FastBase64_Encode",function(){return l});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[];function l(e){for(var t,r=e.length,l="",i=0;r>2;)t=e[i]<<16|e[i+1]<<8|e[i+2],l+=o[t>>12]+o[4095&t],r-=3,i+=3;if(r>0){var s=(252&e[i])>>2,a=(3&e[i])<<4;if(r>1&&(a|=(240&e[++i])>>4),l+=n[s],l+=n[a],2===r){var u=(15&e[i++])<<2;u|=(192&e[i])>>6,l+=n[u]}1===r&&(l+="="),l+="="}return l}function i(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function s(e){return[255&e,e>>8&255]}function a(e,t,r){var n,o={audioFormat:1,bitsPerSample:t,blockAlign:0,byteRate:0,chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],numChannels:1,sampleRate:e,subChunk1Id:[102,109,116,32],subChunk1Size:16,subChunk2Id:[100,97,116,97],subChunk2Size:0};return o.byteRate=o.sampleRate*o.numChannels*o.bitsPerSample>>3,o.blockAlign=o.numChannels*o.bitsPerSample>>3,o.subChunk2Size=r.length,o.chunkSize=36+o.subChunk2Size,{dat:[],dataURI:"data:audio/wav;base64,"+l(n=o.chunkId.concat(i(o.chunkSize),o.format,o.subChunk1Id,i(o.subChunk1Size),s(o.audioFormat),s(o.numChannels),i(o.sampleRate),i(o.byteRate),s(o.blockAlign),s(o.bitsPerSample),o.subChunk2Id,i(o.subChunk2Size),r)),header:o,wav:n}}!function(){for(var e=0;e<4096;e++)o[e]=n[e>>6]+n[63&e]}()},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},,function(e,t,r){"use strict";r.r(t);r(154);var n=r(17),o=new Map;o.set("1-2-3-ban",{id:"1-2-3-ban",title:"1-2-3-Ban",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:"#697175",popularColors:["#1d57f7","#FFFFFF","#9d9d9d"],levels:[{rows:6,cols:7},{rows:8,cols:9},{rows:7,cols:7},{rows:9,cols:9},{rows:9,cols:9},{rows:9,cols:9},{rows:11,cols:11},null]}),o.set("2d-whale-world",{id:"2d-whale-world",title:"2D Whale World",author:"increpare",homepage:"www.increpare.com",backgroundColor:"#eb8931",popularColors:["#FF5500","#FFFF55","#000000"],levels:[null,{rows:15,cols:16},null,{rows:9,cols:11},null,{rows:14,cols:16},null,{rows:13,cols:16},null,{rows:13,cols:17},null,{rows:16,cols:17},null,{rows:13,cols:16},null,{rows:11,cols:11},null]}),o.set("a-sneeze-a-day",{id:"a-sneeze-a-day",title:"A Sneeze A Day Keeps The Crates Away",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#eb8931","#c4c692","#acad80"],levels:[null,null,{rows:7,cols:10},{rows:7,cols:9},{rows:7,cols:10},{rows:7,cols:7},{rows:7,cols:7},{rows:7,cols:9},{rows:7,cols:7},null]}),o.set("aaaah-i-m-being-attacked",{id:"aaaah-i-m-being-attacked",title:"Aaaah! I'm Being Attacked by a Giant Tentacle!",author:"Ricky Liu",homepage:"www.puzzlescript.net",backgroundColor:null,popularColors:["#a46422","#555555","#444444"],levels:[null,{rows:12,cols:12},null,{rows:11,cols:12},null,{rows:15,cols:19},null,{rows:11,cols:14},null,{rows:11,cols:17},null,{rows:15,cols:18},null,{rows:21,cols:19},null,{rows:25,cols:20},null,{rows:17,cols:18},null,{rows:21,cols:19},null]}),o.set("airport-aggression",{id:"airport-aggression",title:"Airport Aggression",author:null,homepage:null,backgroundColor:null,popularColors:["#F3E6E0","#CCCCFF","#CCFFCC"],levels:[null,{rows:80,cols:31}]}),o.set("alien-disco",{id:"alien-disco",title:"Alien Disco",author:"Toph Wells",homepage:null,backgroundColor:null,popularColors:["#a00080","#501060","#103060"],levels:[{rows:7,cols:7},{rows:9,cols:9},{rows:7,cols:9},{rows:10,cols:11},{rows:10,cols:10},{rows:8,cols:8},{rows:9,cols:4},{rows:10,cols:10},{rows:9,cols:9},{rows:9,cols:4},{rows:8,cols:9},{rows:8,cols:8}]}),o.set("atlas-shrank",{id:"atlas-shrank",title:"Atlas Shrank",author:"James Noeckel",homepage:null,backgroundColor:null,popularColors:["#8b4c42","#a7aae3","#697490"],levels:[null,{rows:7,cols:15},null,null,{rows:7,cols:15},{rows:11,cols:18},{rows:10,cols:15},null,{rows:22,cols:18},null,{rows:11,cols:18},{rows:11,cols:18},{rows:11,cols:18},null,{rows:19,cols:18},{rows:20,cols:54},{rows:11,cols:72},{rows:12,cols:36},null,null,null]}),o.set("barrier-trail",{id:"barrier-trail",title:"Barrier Trail",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#3B3942","#231F26","#D9FFDC"],levels:[null,null,null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:11,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("beam-islands",{id:"beam-islands",title:"Beam Islands",author:"mjau",homepage:"http://twitter.com/kamjau",backgroundColor:null,popularColors:["#6719ac","#a13cb7","#a27d5b"],levels:[null,{rows:8,cols:11},null,{rows:14,cols:14},null,{rows:10,cols:13},null,{rows:9,cols:11},{rows:11,cols:15},{rows:11,cols:18},{rows:10,cols:13},{rows:11,cols:12},null]}),o.set("block-touching",{id:"block-touching",title:"Block touching",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#E0AAF2","#3B3942","#FFD9E0"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("blocker-snake",{id:"blocker-snake",title:"Blocker snake",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#423D39","#E5C17E","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("bomb-n-ice",{id:"bomb-n-ice",title:"bomb n ice",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#7EA1E5","#423D39","#E5C17E"],levels:[null,null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},{rows:11,cols:14}]}),o.set("botsket-ball",{id:"botsket-ball",title:"Botsket Ball",author:null,homepage:null,backgroundColor:null,popularColors:["#697175","#cccccc","#000000"],levels:[null,null,null,{rows:11,cols:11},null,null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11}]}),o.set("boxes-and-balloons",{id:"boxes-and-balloons",title:"Boxes & Balloons",author:"Ben Reilly",homepage:"ben-reilly.com",backgroundColor:null,popularColors:["#333333","#FFEEDD","#FF6644"],levels:[null,null,{rows:9,cols:10},null,{rows:9,cols:9},null,{rows:10,cols:10},null,{rows:13,cols:14},null,{rows:7,cols:10},null,{rows:9,cols:15},null,{rows:9,cols:15},null,{rows:16,cols:20},null,{rows:8,cols:11},null,{rows:7,cols:13},null,{rows:14,cols:12},null,{rows:7,cols:12},null,{rows:16,cols:15},null,{rows:11,cols:13},null,{rows:14,cols:11},null,{rows:9,cols:15},null,{rows:15,cols:16},null,{rows:16,cols:17},null,{rows:13,cols:12},null,{rows:11,cols:12},null,{rows:12,cols:10},null,{rows:17,cols:21}]}),o.set("boxes-love-bloxing-gloves",{id:"boxes-love-bloxing-gloves",title:"Boxes Love Bloxing Gloves",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#d67823","#9d9d9d","#000000"],levels:[{rows:6,cols:10},{rows:8,cols:8},{rows:7,cols:12},{rows:8,cols:11},{rows:8,cols:19},{rows:7,cols:15},{rows:7,cols:11},{rows:11,cols:11},{rows:7,cols:13},{rows:7,cols:16},{rows:9,cols:14},{rows:8,cols:18},{rows:9,cols:15},{rows:8,cols:11},{rows:8,cols:14},{rows:10,cols:15},{rows:9,cols:12},{rows:6,cols:10},{rows:12,cols:17},{rows:9,cols:20},{rows:11,cols:13},null]}),o.set("bubble-butler",{id:"bubble-butler",title:"Bubble Butler: CMD REORGANIZE",author:"John M. Williams",homepage:"john.m.dubs@gmail.com",backgroundColor:null,popularColors:["#000000","#2f484e","#44891a"],levels:[null,null,null,{rows:7,cols:7},null,{rows:5,cols:7},null,{rows:6,cols:7},null,{rows:9,cols:9},null,{rows:7,cols:8},null,null,{rows:6,cols:8},null,{rows:7,cols:8},null,{rows:8,cols:9},null,null,{rows:9,cols:10},null,{rows:7,cols:8},null,{rows:8,cols:8},null,{rows:7,cols:8},null,{rows:9,cols:9},null,{rows:7,cols:7},null,{rows:7,cols:9},null,{rows:9,cols:9},null,{rows:11,cols:12},null,{rows:8,cols:11},null,{rows:9,cols:10},null,{rows:8,cols:11},null,{rows:10,cols:7},null,{rows:12,cols:12},null,{rows:7,cols:7},null,{rows:7,cols:10},null,{rows:7,cols:10},null,{rows:7,cols:10},null,{rows:10,cols:9},null,{rows:12,cols:8},null,{rows:11,cols:9},null,{rows:7,cols:11},null,{rows:10,cols:9},null,null,null]}),o.set("castlemouse",{id:"castlemouse",title:"Memories Of Castlemouse",author:"Wayne Myers",homepage:"www.conniptions.org",backgroundColor:null,popularColors:["#cccccc","#000000","#493c2b"],levels:[null,{rows:13,cols:21},null,{rows:16,cols:26},null,{rows:13,cols:21},null,{rows:16,cols:26},null,{rows:13,cols:19},null,{rows:16,cols:26},null,{rows:13,cols:19},null,{rows:16,cols:26},null,{rows:14,cols:19},null,{rows:16,cols:26},null,null,null,null]}),o.set("climbing-cubes",{id:"climbing-cubes",title:"climbing cubes",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#7EA1E5",popularColors:["#000000","#7EA1E5","#E5C17E"],levels:[null,null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},{rows:11,cols:14}]}),o.set("closure-demake",{id:"closure-demake",title:"Closure Demake",author:"Tyler Glaiel",homepage:"www.closuregame.com",backgroundColor:null,popularColors:["#000000","#111111","#697175"],levels:[{rows:12,cols:14},{rows:15,cols:22},{rows:14,cols:23},{rows:14,cols:23},{rows:14,cols:23},{rows:14,cols:23},null,null]}),o.set("coin-counter",{id:"coin-counter",title:"Coin Counter",author:null,homepage:null,backgroundColor:null,popularColors:["#493c2b","#B2DCEF","#1d57f7"],levels:[{rows:10,cols:11},{rows:7,cols:15},{rows:12,cols:8},{rows:8,cols:9},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:10},{rows:7,cols:10},{rows:9,cols:11},{rows:11,cols:11},{rows:34,cols:34}]}),o.set("collapsable-sokoban",{id:"collapsable-sokoban",title:"Collapsable Sokoban",author:"Franklin P. Dyer",homepage:null,backgroundColor:null,popularColors:["#44891a","#a3ce27","#eb8931"],levels:[null,{rows:10,cols:10},null,{rows:10,cols:10},null,{rows:10,cols:10},null]}),o.set("collapse",{id:"collapse",title:"Collapse",author:"Terry Cavanagh",homepage:"www.distractionware.com",backgroundColor:"#000000",popularColors:["#FF0000","#ffa9cf","#992222"],levels:[null,null,{rows:10,cols:48},{rows:20,cols:65},null,null,null]}),o.set("covering-holes",{id:"covering-holes",title:"Covering holes",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#E5C17E","#3B3942","#AAE0F2"],levels:[null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("cubes-barrier",{id:"cubes-barrier",title:"Cubes barrier",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#222533",popularColors:["#FFEB33","#222533","#FAFFFC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:12,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("cubes-medusa",{id:"cubes-medusa",title:"cubes medusa",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2526",popularColors:["#FFD9E0","#1F2526","#C1A2A5"],levels:[null,null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("cyber-lasso",{id:"cyber-lasso",title:"Cyber-Lasso",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#be2633","#000000","#697175"],levels:[{rows:22,cols:33},{rows:33,cols:55},{rows:33,cols:22},null,null]}),o.set("dang-i-m-huge",{id:"dang-i-m-huge",title:"Dang I'm Huge",author:"Guilherme Tows",homepage:"zarat.us",backgroundColor:null,popularColors:["#A03C50","#000000","#1C3C88"],levels:[null,{rows:10,cols:12},null,{rows:11,cols:8},null,{rows:6,cols:12},null,{rows:10,cols:12},null,{rows:10,cols:12},null,{rows:11,cols:9},null,{rows:11,cols:11},null,{rows:15,cols:14},null]}),o.set("dangerous-dungeon",{id:"dangerous-dungeon",title:"Dangerous Dungeon",author:null,homepage:null,backgroundColor:null,popularColors:["#697175","#222222","#eeb62f"],levels:[null,null,{rows:7,cols:7},null,null,null,null,{rows:7,cols:4},{rows:7,cols:5},null,null,null,{rows:5,cols:8},{rows:8,cols:8},null,{rows:4,cols:7},{rows:5,cols:13},{rows:10,cols:7},{rows:7,cols:8},null,null,null,null,null,null,null,{rows:3,cols:13}]}),o.set("directional",{id:"directional",title:"Directional",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2526",popularColors:["#FFD9FC","#1F2526","#D9FFDC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("duality",{id:"duality",title:"duality",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#7EA1E5","#3B3942","#A17C8B"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("dungeon-janitor",{id:"dungeon-janitor",title:"Dungeon Janitor",author:"Farbs",homepage:"www.farbs.org",backgroundColor:null,popularColors:["#1B2632","#9d9d9d","#a46422"],levels:[null,null,{rows:7,cols:5},null,{rows:7,cols:8},null,{rows:10,cols:20},null,null,{rows:15,cols:20},null,null]}),o.set("dup-block",{id:"dup-block",title:"dup-block",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#FFD9E0","#423D39","#A2C1BE"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("easy-enigma",{id:"easy-enigma",title:"Easy Enigma",author:null,homepage:null,backgroundColor:"#000000",popularColors:["#FFFFFF","#000000"],levels:[{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:25,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:84}]}),o.set("electric-wire",{id:"electric-wire",title:"Electric wire",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#E5C17E","#231F26","#FFD9FC"],levels:[null,null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("element-walkers",{id:"element-walkers",title:"Element Walkers",author:"Ove Ahlman",homepage:"http://oveahlman.itch.io",backgroundColor:"#732930",popularColors:["#44891a","#9d9d9d","#cccccc"],levels:[null,null,{rows:7,cols:9},null,{rows:5,cols:9},null,{rows:4,cols:15},null,{rows:4,cols:11},null,{rows:6,cols:11},null,{rows:8,cols:13},null,{rows:4,cols:17},null,{rows:4,cols:17},null,{rows:5,cols:12},null,{rows:6,cols:11},null,{rows:5,cols:14},null,{rows:6,cols:11},null,{rows:6,cols:11},null,{rows:5,cols:14},null]}),o.set("enqueue",{id:"enqueue",title:"Enqueue",author:"Allen Webster",homepage:"www.pushthegame.com",backgroundColor:null,popularColors:["#697175","#000000","#990000"],levels:[{rows:7,cols:8},{rows:7,cols:8},null,{rows:11,cols:8},{rows:11,cols:8},{rows:11,cols:10},{rows:11,cols:10},null,{rows:11,cols:10},{rows:11,cols:10},null,{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},null]}),o.set("entanglement-one",{id:"entanglement-one",title:"Entanglement - Chapter One",author:"Richard Locke",homepage:"www.richardlocke.co.uk",backgroundColor:"#9fd1ff",popularColors:["#9fd1ff","#6cb8ff","#c0e1ff"],levels:[null,null,null,{rows:56,cols:96},null,null,null]}),o.set("entanglement-two",{id:"entanglement-two",title:"Entanglement - Chapter Two",author:"Rich Locke",homepage:"www.richardlocke.co.uk",backgroundColor:"#4a6277",popularColors:["#bbdcf9","#4a6277","#8484ff"],levels:[null,null,null,{rows:14,cols:24},{rows:84,cols:77},{rows:28,cols:48},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},null,null]}),o.set("esl-puzzle-game",{id:"esl-puzzle-game",title:"ESL Puzzle Game -- ",author:"A.R.Nakama",homepage:"www.puzzlescript.net",backgroundColor:null,popularColors:["#a46422","#493c2b","#44891a"],levels:[null,{rows:7,cols:9},null,{rows:7,cols:7},null,{rows:7,cols:9},null,{rows:10,cols:11},null,{rows:10,cols:11},null,{rows:8,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:13},null,{rows:7,cols:8},null,{rows:8,cols:10},null,{rows:10,cols:8},null,{rows:13,cols:11},null,{rows:7,cols:7},null,{rows:7,cols:13},null,{rows:8,cols:9},null]}),o.set("explod",{id:"explod",title:"Explod",author:"CHz",homepage:"quiteajolt.com",backgroundColor:null,popularColors:["#44891a","#a46422","#493c2b"],levels:[null,{rows:7,cols:7},{rows:4,cols:6},null,{rows:5,cols:10},{rows:10,cols:5},{rows:5,cols:5},{rows:5,cols:13},null,{rows:4,cols:7},{rows:5,cols:11},{rows:5,cols:5},{rows:9,cols:9},null]}),o.set("extra-lives",{id:"extra-lives",title:"Extra lives",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#4F5B46","#231F26","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("fatigued-square-maze",{id:"fatigued-square-maze",title:"Fatigued square maze",author:"Ove Ahlman",homepage:"http://oveahlman.itch.io",backgroundColor:"#be2633",popularColors:["#697175","#9d9d9d","#FFFFFF"],levels:[null,{rows:7,cols:7},null,{rows:7,cols:7},null,{rows:10,cols:10},null,{rows:10,cols:10},null,{rows:10,cols:10},null,{rows:13,cols:13},null,{rows:13,cols:13},null,{rows:13,cols:13},null]}),o.set("fire-in-winter",{id:"fire-in-winter",title:"fire in winter",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#C3D3D9",popularColors:["#4D2E37","#C3D3D9","#A17C8B"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("fish-friend",{id:"fish-friend",title:"Fish Friend",author:null,homepage:null,backgroundColor:null,popularColors:["#25c555","#99d9ea","#1876d6"],levels:[{rows:10,cols:13},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:10,cols:12},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:11,cols:12},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:16},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:14},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:12},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:17},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:13,cols:13},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:16},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:16,cols:19}]}),o.set("flying-kick",{id:"flying-kick",title:"Flying Kick",author:"Aaron Steed",homepage:"www.robotacid.com",backgroundColor:"#000000",popularColors:["#d32112","#820e00","#000000"],levels:[null,{rows:11,cols:8},{rows:12,cols:14},{rows:12,cols:13},{rows:12,cols:9},{rows:12,cols:9},{rows:10,cols:14},{rows:12,cols:11},{rows:12,cols:20},{rows:10,cols:9},{rows:10,cols:13},{rows:14,cols:13},{rows:11,cols:15},{rows:11,cols:17},{rows:12,cols:17},{rows:11,cols:17},{rows:11,cols:12},null,null]}),o.set("garten-der-medusen",{id:"garten-der-medusen",title:"Garten der Medusen",author:"Stephen Lavelle",homepage:"www.increpare.com",backgroundColor:"#000000",popularColors:["#9d9d9d","#697175","#000000"],levels:[null,{rows:12,cols:13},null,{rows:13,cols:13},null,{rows:13,cols:13},null,{rows:10,cols:12},null,{rows:11,cols:14},null,{rows:13,cols:13},null,{rows:19,cols:19},null,{rows:15,cols:15},null]}),o.set("gobble-rush",{id:"gobble-rush",title:"Gobble Rush!",author:"Mark Richardson",homepage:null,backgroundColor:null,popularColors:["#FF0000","#000000","#FFFFFF"],levels:[{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11}]}),o.set("grouping",{id:"grouping",title:"Grouping",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#705C84","#3B3942","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("hack-the-net",{id:"hack-the-net",title:"Hack the Net",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#000000","#a3ce27","#1d57f7"],levels:[{rows:9,cols:10},{rows:8,cols:9},{rows:11,cols:11},{rows:9,cols:13},{rows:7,cols:11},{rows:7,cols:11},{rows:9,cols:11},{rows:7,cols:9},{rows:9,cols:13},{rows:7,cols:7},{rows:7,cols:19},{rows:12,cols:11},{rows:9,cols:14},{rows:7,cols:19},{rows:10,cols:9},{rows:7,cols:13},{rows:11,cols:10},{rows:9,cols:10},{rows:12,cols:11},{rows:9,cols:9},{rows:7,cols:11},{rows:10,cols:9},{rows:7,cols:11},{rows:9,cols:12},{rows:11,cols:13},{rows:8,cols:12},{rows:11,cols:10},{rows:8,cols:13},{rows:10,cols:11},{rows:9,cols:12},{rows:7,cols:9},{rows:9,cols:11},{rows:8,cols:13},{rows:7,cols:9},{rows:10,cols:11},{rows:9,cols:9},{rows:13,cols:13},{rows:11,cols:8},{rows:7,cols:13},{rows:9,cols:15},{rows:11,cols:16},{rows:12,cols:11},{rows:10,cols:9},{rows:13,cols:11},{rows:7,cols:13},null]}),o.set("hue-change",{id:"hue-change",title:"Hue change",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#AAE0F2","#3B3942","#E0AAF2"],levels:[null,null,{rows:9,cols:9}]}),o.set("i-herd-u-liek-water-templs",{id:"i-herd-u-liek-water-templs",title:"i herd u liek water templs",author:"Denis Prause",homepage:"https://twitter.com/zejety",backgroundColor:null,popularColors:["#a3ce27","#697175","#e06f8b"],levels:[null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null]}),o.set("ice-cream-stick",{id:"ice-cream-stick",title:" -ooo- ",author:"Baku",homepage:"http://baku89.com",backgroundColor:null,popularColors:["#000000","#d7b7a2","#EEEEEE"],levels:[{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:15,cols:15},{rows:16,cols:15}]}),o.set("ice-path",{id:"ice-path",title:"Ice path",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#5C6684","#231F26","#D9FFDC"],levels:[null,null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("icecrates",{id:"icecrates",title:"IceCrates",author:"Tyler Glaiel",homepage:"twitter.com/tylerglaiel",backgroundColor:null,popularColors:["#2f484e","#9d9d9d","#697175"],levels:[null,{rows:7,cols:7},null,{rows:9,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:11},null,{rows:12,cols:13},null,{rows:13,cols:15},null]}),o.set("interconnection",{id:"interconnection",title:"interconnection",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#66CC52",popularColors:["#FFD9FC","#66CC52","#5C8484"],levels:[null,null,{rows:13,cols:8},null,{rows:13,cols:8},null,{rows:13,cols:8},null]}),o.set("islands",{id:"islands",title:"Islands",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#AAE0F2",popularColors:["#AAE0F2","#FFD9E0","#E57ED5"],levels:[null,null,{rows:36,cols:30},{rows:12,cols:10}]}),o.set("kettle",{id:"kettle",title:"Kettle",author:"stephen lavelle",homepage:"www.increpare.com",backgroundColor:null,popularColors:["#000000","#3E3E44","#5D6FA7"],levels:[null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:14,cols:15},null,null,{rows:14,cols:15},null,null,{rows:15,cols:15},null,null,null]}),o.set("life-is-hard",{id:"life-is-hard",title:"Life is Hard",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#9d9d9d","#be2633","#ffff00"],levels:[null,null,null,{rows:7,cols:7},{rows:6,cols:8},{rows:7,cols:7},{rows:8,cols:8},{rows:9,cols:9}]}),o.set("lime-rick",{id:"lime-rick",title:"Lime Rick",author:"Tommi Tuovinen",homepage:"http://www.kissmaj7.com/",backgroundColor:null,popularColors:["#a46422","#000000","#be2633"],levels:[null,{rows:15,cols:19},null,{rows:17,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:14,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null]}),o.set("linked",{id:"linked",title:"Linked",author:null,homepage:null,backgroundColor:"#000000",popularColors:["#9d9d9d","#697175","#000000"],levels:[null,null,{rows:7,cols:5},null,{rows:7,cols:6},null,{rows:8,cols:6},null,{rows:9,cols:14},null,{rows:12,cols:16},null,{rows:8,cols:11},null,{rows:11,cols:13},null]}),o.set("maera-public-works",{id:"maera-public-works",title:"Maera Public Works",author:"CHz",homepage:"quiteajolt.com",backgroundColor:"#1B2632",popularColors:["#777700","#222222","#555500"],levels:[{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:8,cols:10},{rows:7,cols:11},{rows:12,cols:19},{rows:15,cols:17},{rows:9,cols:14},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14}]}),o.set("magik",{id:"magik",title:"Magik",author:null,homepage:null,backgroundColor:null,popularColors:["#493c2b","#44891a","#a3ce27"],levels:[null,null,null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:12,cols:9},null]}),o.set("magnetic",{id:"magnetic",title:"magnetic",author:"nick cavazos",homepage:null,backgroundColor:"#1B2632",popularColors:["#1B2632","#000000","#697175"],levels:[null,{rows:9,cols:15},null,{rows:9,cols:15},null,{rows:9,cols:15},null,{rows:9,cols:15}]}),o.set("magnetized",{id:"magnetized",title:"Magnetized",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#FFFFFF","#3B3942","#D9FFDC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("manic-ammo",{id:"manic-ammo",title:"Manic Ammo",author:"David Eastman",homepage:"@eastmad",backgroundColor:null,popularColors:["#493c2b","#a46422","#B2DCEF"],levels:[null,{rows:7,cols:8},null,{rows:7,cols:8},null,{rows:7,cols:8},null,null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null]}),o.set("mazezam",{id:"mazezam",title:"MazezaM",author:"Malcolm Tyrrell",homepage:"https://sites.google.com/site/malcolmsprojects/",backgroundColor:null,popularColors:["#eb8931","#697175","#9d9d9d"],levels:[null,{rows:4,cols:11},null,{rows:4,cols:13},null,{rows:5,cols:13},null,{rows:5,cols:14},null,{rows:6,cols:11},null,{rows:6,cols:13},null,{rows:7,cols:13},null,{rows:5,cols:14},null,{rows:6,cols:13},null,{rows:6,cols:20},null,{rows:6,cols:13},null,{rows:8,cols:19},null,{rows:7,cols:12},null,{rows:6,cols:14},null,{rows:8,cols:12},null,{rows:6,cols:16},null,{rows:6,cols:13},null,{rows:13,cols:11},null,{rows:6,cols:13},null,{rows:6,cols:21},null,{rows:7,cols:14},null,{rows:6,cols:17},null,{rows:7,cols:14},null,{rows:6,cols:15},null,{rows:9,cols:15},null,{rows:8,cols:13},null,{rows:12,cols:19},null,{rows:9,cols:15},null,{rows:12,cols:17},null,{rows:9,cols:16},null]}),o.set("mc-escher-s-equestrian-armageddon",{id:"mc-escher-s-equestrian-armageddon",title:"MC Escher's Equestrian Armageddon",author:"Anna Clarke",homepage:"www.puzzlescript.net",backgroundColor:null,popularColors:["#a46422","#493c2b","#1B2632"],levels:[{rows:6,cols:17},{rows:8,cols:7},{rows:7,cols:20},{rows:20,cols:43}]}),o.set("microban",{id:"microban",title:"Microban",author:"David Skinner",homepage:"www.sneezingtiger.com/sokoban/levels/microbanText.html",backgroundColor:null,popularColors:["#a46422","#493c2b","#44891a"],levels:[null,{rows:7,cols:6},null,{rows:7,cols:6},null,{rows:6,cols:9},null,{rows:6,cols:8},null,{rows:7,cols:8},null,{rows:6,cols:12},null,{rows:8,cols:7},null,{rows:12,cols:8},null,{rows:7,cols:6},null,{rows:8,cols:11},null]}),o.set("midas",{id:"midas",title:"Midas",author:"wanderlands",homepage:"www.wanderlands.org",backgroundColor:null,popularColors:["#9d9d9d","#FFFFFF","#eb8931"],levels:[{rows:6,cols:14},null,{rows:7,cols:15},null,{rows:8,cols:15},null,{rows:6,cols:14},null,{rows:9,cols:17},null,null,{rows:15,cols:21},null,{rows:11,cols:21},null,{rows:10,cols:21},null,{rows:12,cols:21},null,{rows:13,cols:21},null,{rows:17,cols:21},null,{rows:12,cols:21},null,{rows:13,cols:21},null,{rows:16,cols:21},null,{rows:14,cols:21},null]}),o.set("mirror-isles",{id:"mirror-isles",title:"Mirror Isles",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#4e5159","#1d57f7","#FFFFFF"],levels:[{rows:15,cols:13},{rows:15,cols:13},{rows:16,cols:17},{rows:12,cols:15},{rows:13,cols:16},{rows:15,cols:15},{rows:11,cols:11},{rows:14,cols:16},{rows:11,cols:12},{rows:13,cols:17},{rows:12,cols:14},{rows:14,cols:12},{rows:13,cols:15},{rows:12,cols:17},null,{rows:15,cols:17},{rows:12,cols:13},{rows:10,cols:17},{rows:15,cols:13},{rows:11,cols:13},{rows:13,cols:14},{rows:10,cols:17},{rows:11,cols:15},null]}),o.set("miss-direction",{id:"miss-direction",title:"Miss Direction",author:"Malcolm Tyrrell",homepage:"https://sites.google.com/site/malcolmsprojects/miss-direction",backgroundColor:null,popularColors:["#f7e26b","#000000","#1d57f7"],levels:[null,{rows:7,cols:21},{rows:19,cols:13},{rows:22,cols:19},{rows:22,cols:23},{rows:21,cols:26},{rows:14,cols:17},{rows:19,cols:15},{rows:17,cols:19},{rows:9,cols:21},{rows:17,cols:18},{rows:18,cols:27},{rows:20,cols:40},{rows:21,cols:19},{rows:18,cols:17},{rows:21,cols:16},{rows:17,cols:17},{rows:22,cols:25},{rows:24,cols:17},{rows:25,cols:28},{rows:22,cols:21},null,null,null,null]}),o.set("modality",{id:"modality",title:"Modality",author:"Sean Barrett",homepage:"www.silverspaceship.com",backgroundColor:"#603060",popularColors:["#202020","#FFFFFF","#000000"],levels:[{rows:3,cols:5},{rows:5,cols:5},{rows:6,cols:6},{rows:9,cols:11}]}),o.set("monster-mess",{id:"monster-mess",title:"monster mess",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#000000",popularColors:["#000000","#FFFFFF","#ff0000"],levels:[null,null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("moving-target",{id:"moving-target",title:"Moving target",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#736053","#423D39","#7EA1E5"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("mowing",{id:"mowing",title:"Mowing",author:null,homepage:null,backgroundColor:null,popularColors:["#00cc00","#1d57f7","#cccccc"],levels:[null,{rows:6,cols:5},{rows:6,cols:5},null,{rows:6,cols:5},null,{rows:6,cols:5}]}),o.set("multi-word-dictionary-game",{id:"multi-word-dictionary-game",title:"Multi-word Dictionary Game",author:"Sarah Northway",homepage:"www.sarahnorthway.com",backgroundColor:null,popularColors:["#9d9d9d","#de65e2","#000000"],levels:[{rows:7,cols:9}]}),o.set("net",{id:"net",title:"Net",author:null,homepage:null,backgroundColor:null,popularColors:["#000000","#f7e26b","#FFFFFF"],levels:[{rows:77,cols:13}]}),o.set("newton-s-crates",{id:"newton-s-crates",title:"Newton's Crates",author:"Andrey Shevchuk",homepage:"shevchuk.net",backgroundColor:"#493c2b",popularColors:["#493c2b","#cccccc","#9d9d9d"],levels:[{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:20},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:20},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:20},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},null,{rows:17,cols:36},null,null,null,null,{rows:35,cols:49}]}),o.set("okosban",{id:"okosban",title:"Okosban",author:"Ove Ahlman",homepage:"oveahlman.itch.io",backgroundColor:null,popularColors:["#cccccc","#1B2632","#FFFFFF"],levels:[null,{rows:8,cols:6},null,{rows:9,cols:9},null,{rows:9,cols:8},null,{rows:8,cols:7},null,{rows:10,cols:10},null,{rows:11,cols:11},null,{rows:18,cols:20},null,{rows:16,cols:16},null,{rows:11,cols:16},null,{rows:16,cols:16},null,{rows:16,cols:16},null]}),o.set("out-of-bounds",{id:"out-of-bounds",title:"out of bounds [lite demo]",author:"cyathea tree studio",homepage:"www.cyatheatree.com",backgroundColor:null,popularColors:["#161616","#FFFFFF","#cccccc"],levels:[null,{rows:3,cols:6},null,{rows:2,cols:6},null,{rows:2,cols:6},null,{rows:3,cols:7},null,{rows:3,cols:7},null,{rows:3,cols:6},null,{rows:3,cols:7},null,{rows:5,cols:12},null,{rows:5,cols:12},null,{rows:7,cols:11},null,{rows:6,cols:11},null,{rows:9,cols:6},null,{rows:3,cols:10},null,{rows:8,cols:10},null,{rows:9,cols:15},null,{rows:7,cols:4},null,{rows:11,cols:11},null,{rows:7,cols:5},null,null,null,{rows:10,cols:11},null]}),o.set("out-there",{id:"out-there",title:"Out There",author:"CHz",homepage:"quiteajolt.com",backgroundColor:"#303030",popularColors:["#303030","#606060","#C0C0C0"],levels:[null,null,{rows:7,cols:9},{rows:15,cols:19},{rows:13,cols:13},{rows:12,cols:18},{rows:13,cols:14},{rows:9,cols:15},{rows:11,cols:15},{rows:10,cols:13},{rows:11,cols:13},{rows:13,cols:19},{rows:13,cols:18},{rows:12,cols:19},{rows:11,cols:13},{rows:17,cols:19},{rows:23,cols:25},{rows:21,cols:42},{rows:19,cols:42},{rows:21,cols:42},{rows:15,cols:19},null,null]}),o.set("outward-force",{id:"outward-force",title:"Outward force",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#A87EE5","#231F26","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("overstep",{id:"overstep",title:"Overstep",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#191919",popularColors:["#F2F2AA","#191919","#E0AAF2"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("pants-shirt-cap",{id:"pants-shirt-cap",title:"Pants, Shirt, Cap",author:"Jaewoong Hwang",homepage:"www.jaewoong.info",backgroundColor:"#BA381F",popularColors:["#BA4B32","#BA381F","#57381F"],levels:[null,null,{rows:5,cols:7},null,null,null,{rows:5,cols:9},null,null,null,{rows:6,cols:8},null,null,{rows:4,cols:9},null,null,{rows:7,cols:11},null,null,{rows:6,cols:6},null,null,{rows:7,cols:8},null,null,{rows:7,cols:8},null,null,{rows:8,cols:9},null,null,null]}),o.set("path-lines",{id:"path-lines",title:"Path lines",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#E5C17E","#423D39","#E0AAF2"],levels:[null,null,{rows:11,cols:8},null,{rows:11,cols:8},null,{rows:11,cols:8},null,{rows:11,cols:8},null]}),o.set("pathmaker",{id:"pathmaker",title:"Pathmaker",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#FFFFFF","#231F26","#E5C17E"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("positional",{id:"positional",title:"Positional",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2026",popularColors:["#999999","#1F2026","#D9FFF8"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("pot-wash-panic",{id:"pot-wash-panic",title:"Pot Wash Panic",author:"Dan Howard",homepage:"https://twitter.com/DanHowardGames",backgroundColor:"#4B575D",popularColors:["#8E634B","#A7120C","#7F7F7C"],levels:[null,{rows:5,cols:12},null,{rows:7,cols:12},null,{rows:6,cols:10},null,{rows:6,cols:9},null,{rows:9,cols:9},null,{rows:7,cols:14},null,{rows:5,cols:11},null,{rows:6,cols:9},null,{rows:6,cols:12},null,{rows:9,cols:10},null,{rows:7,cols:16},null,{rows:7,cols:14},null,{rows:10,cols:12},null,{rows:9,cols:13},null]}),o.set("pretender-to-the-crown",{id:"pretender-to-the-crown",title:"pretender to the crown",author:"colin thil",homepage:"http://pretendertothecrown.wordpress.com/",backgroundColor:"#d7dbef",popularColors:["#ead5a8","#0c6358","#225039"],levels:[null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,null]}),o.set("programaze",{id:"programaze",title:"PrograMaze",author:"Adam Gashlin",homepage:"gashlin.net",backgroundColor:null,popularColors:["#697175","#9d9d9d","#f7e26b"],levels:[null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},{rows:10,cols:13},{rows:10,cols:13},{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null]}),o.set("purple",{id:"purple",title:"purple",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#536673",popularColors:["#FFEED9","#536673","#C1A2BC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("push",{id:"push",title:"PUSH",author:"lonebot - demake by rmmh",homepage:"http://lonebot.net/games/push/",backgroundColor:null,popularColors:["#f7e26b","#635854","#969283"],levels:[null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},{rows:11,cols:11},null]}),o.set("pushcat-jr",{id:"pushcat-jr",title:"Pushcat Jr",author:"Zut!",homepage:"zutgames.com/pushcat",backgroundColor:null,popularColors:["#556a64","#70a169","#584a4e"],levels:[null,{rows:11,cols:12},null,{rows:14,cols:14},null,{rows:20,cols:18},null,{rows:15,cols:19},null,{rows:13,cols:14},null,{rows:16,cols:15},null,{rows:15,cols:14},null,{rows:19,cols:17},null]}),o.set("rock-paper-scissors",{id:"rock-paper-scissors",title:"Rock, Paper, Scissors",author:"chaotic_iak",homepage:"chaosatthesky.wordpress.com",backgroundColor:null,popularColors:["#eb8931","#2f484e","#a3ce27"],levels:[null,{rows:9,cols:12},null,null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,null,{rows:9,cols:12},null,null,{rows:9,cols:13},{rows:9,cols:16},{rows:9,cols:12},{rows:10,cols:11},{rows:9,cols:14},{rows:13,cols:17},{rows:9,cols:13},{rows:17,cols:23},{rows:9,cols:10},null]}),o.set("roll-those-sixes",{id:"roll-those-sixes",title:"Roll those Sixes",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#697175","#444444","#9d9d9d"],levels:[null,{rows:5,cols:8},null,null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:7,cols:7},null,{rows:7,cols:7},null,{rows:8,cols:8},null,{rows:6,cols:7},null,{rows:8,cols:8},null,{rows:7,cols:8},null]}),o.set("rows-and-columns",{id:"rows-and-columns",title:"rows and columns",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#D9FFDC","#3B3942","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("scaling-walls",{id:"scaling-walls",title:"Scaling walls",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#7EA1E5","#423D39","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("season-finale",{id:"season-finale",title:"Season Finale",author:null,homepage:null,backgroundColor:"#222222",popularColors:["#043804","#78D448","#109010"],levels:[null,null,null,null,null,{rows:5,cols:6},null,null,null,null,null,null,{rows:5,cols:7},null,null,null,null,null,null,null,null,null,null,null,{rows:5,cols:7},null,null,null,null,null,null,null,{rows:9,cols:7},null,null,null,null,null,null,null,{rows:9,cols:7},null,null,null,null,null,null,null,{rows:6,cols:7},null,null,null,null,null,null,null,{rows:7,cols:8},null,null,null,null,null,null,null,null,null,null,null,null,null,{rows:8,cols:7},null,null,null,null,null,null,null,null,null,null,{rows:10,cols:8},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{rows:8,cols:9},null,null,null,null,null,null,null,null,null,null,null,{rows:10,cols:10},null,null,{rows:13,cols:6},null]}),o.set("separation",{id:"separation",title:"Separation",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#777777","#666666","#555555"],levels:[null,{rows:7,cols:7},null,{rows:6,cols:8},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:7,cols:7},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:7,cols:7},null,{rows:6,cols:5},null,{rows:8,cols:8},null,{rows:7,cols:5}]}),o.set("skippa",{id:"skippa",title:"skippa",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2622",popularColors:["#B32D2D","#1F2622","#E5C17E"],levels:[null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("skipping-stones",{id:"skipping-stones",title:"Skipping Stones to Lonely Homes",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#ffffff","#1d57f7","#B2DCEF"],levels:[{rows:70,cols:76}]}),o.set("skyscraper",{id:"skyscraper",title:"Skyscraper",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#AAE0F2",popularColors:["#AAE0F2","#FFD9E0","#A87EE5"],levels:[null,{rows:113,cols:11},{rows:14,cols:11}]}),o.set("sleepy-players",{id:"sleepy-players",title:"Sleepy players",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#1d57f7","#777777","#555555"],levels:[null,null,{rows:7,cols:7},null,null,null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:7},null,{rows:7,cols:7}]}),o.set("slidings",{id:"slidings",title:"Slidings",author:"Alain Brobecker",homepage:"abrobecker.free.fr",backgroundColor:null,popularColors:["#777777","#448888","#FFFFFF"],levels:[null,{rows:4,cols:6},null,{rows:5,cols:6},null,{rows:4,cols:7},null,{rows:5,cols:7},null,{rows:4,cols:10},null,{rows:9,cols:9},null,{rows:7,cols:8},null,{rows:6,cols:7},null,{rows:7,cols:8},null,{rows:8,cols:8},null,{rows:5,cols:8}]}),o.set("slime-swap",{id:"slime-swap",title:"Slime Swap",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:"#9d9d9d",popularColors:["#495e2b","#444444","#9d9d9d"],levels:[{rows:9,cols:10},{rows:7,cols:13},{rows:9,cols:9},{rows:10,cols:14},{rows:10,cols:12},{rows:9,cols:13},{rows:9,cols:9},{rows:14,cols:14},{rows:10,cols:10},{rows:10,cols:12},{rows:13,cols:13},{rows:10,cols:10},{rows:10,cols:12},{rows:13,cols:9},{rows:13,cols:10},null]}),o.set("sokobond",{id:"sokobond",title:"Sokobond: The Demake",author:"Jonah Ostroff",homepage:"www.sokobond.com",backgroundColor:"#FDFDFD",popularColors:["#f7e26b","#FFFFFF","#cccccc"],levels:[null,null,{rows:8,cols:9},null,{rows:5,cols:6},null,{rows:5,cols:8},null,{rows:7,cols:7},null,{rows:5,cols:7},null,{rows:7,cols:7},null,{rows:9,cols:9},null,{rows:5,cols:9},null,{rows:7,cols:8},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:8,cols:9},null,{rows:7,cols:7},null,{rows:8,cols:7},null,{rows:8,cols:8},null,null]}),o.set("sokoboros",{id:"sokoboros",title:"Sokoboros",author:"Trevor Newton",homepage:"https://twitter.com/trevnewt",backgroundColor:"#22170B",popularColors:["#a46422","#493c2b","#eb8931"],levels:[null,{rows:52,cols:52},null]}),o.set("some-lines-crossed",{id:"some-lines-crossed",title:"Some lines were meant to be crossed",author:"Frpzzd",homepage:null,backgroundColor:"#1B2632",popularColors:["#1B2632","#1d57f7","#732930"],levels:[null,{rows:7,cols:7},{rows:7,cols:15},{rows:7,cols:15},{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11},{rows:15,cols:15}]}),o.set("some-pits",{id:"some-pits",title:"Some pits",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#261F1F",popularColors:["#B32D2D","#261F1F","#E0AAF2"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("spacekoban",{id:"spacekoban",title:"Spacekoban",author:"Connorses [Loneship Games]",homepage:null,backgroundColor:"#00001F",popularColors:["#000000","#cccccc","#9d9d9d"],levels:[{rows:9,cols:11},{rows:13,cols:9},{rows:8,cols:12},{rows:8,cols:9},{rows:8,cols:8},{rows:8,cols:9},{rows:13,cols:11},{rows:9,cols:10},{rows:9,cols:31},{rows:11,cols:11},{rows:7,cols:10},{rows:7,cols:10},{rows:9,cols:13},{rows:9,cols:11},{rows:10,cols:8},{rows:9,cols:13},{rows:10,cols:10},{rows:7,cols:11},{rows:11,cols:12},{rows:11,cols:11}]}),o.set("spider-s-hollow",{id:"spider-s-hollow",title:"Spider's Hollow",author:"John Thyer",homepage:null,backgroundColor:null,popularColors:["#bdbdbd","#000000","#3f2a14"],levels:[null,{rows:9,cols:11},null,null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},{rows:9,cols:11},{rows:9,cols:11},{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null]}),o.set("spikes-n-stuff",{id:"spikes-n-stuff",title:"Spikes 'n' Stuff",author:"Alan Hazelden",homepage:null,backgroundColor:null,popularColors:["#767d80","#697175","#373c3f"],levels:[{rows:11,cols:165},null]}),o.set("spooky-pumpkin-game",{id:"spooky-pumpkin-game",title:"Spooky Pumpkin Game",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#1B2632","#9d9d9d","#000000"],levels:[{rows:7,cols:9},{rows:7,cols:7},{rows:7,cols:7},{rows:7,cols:6},{rows:8,cols:6},{rows:7,cols:9},{rows:6,cols:9},{rows:7,cols:7},{rows:10,cols:5},{rows:9,cols:7},{rows:8,cols:8},{rows:7,cols:7},{rows:7,cols:7},{rows:7,cols:10},{rows:8,cols:8},{rows:7,cols:7},null]}),o.set("square-colours",{id:"square-colours",title:"square colours",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#404239",popularColors:["#536673","#404239","#E5C17E"],levels:[null,{rows:11,cols:10},null,{rows:11,cols:10},null,{rows:11,cols:10},null,{rows:11,cols:10},null,{rows:11,cols:10},{rows:11,cols:14}]}),o.set("stairs",{id:"stairs",title:"Stairs",author:null,homepage:null,backgroundColor:null,popularColors:["#2f484e","#000000","#493c2b"],levels:[null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null]}),o.set("stairways",{id:"stairways",title:"Stairways",author:"Franklin P. Dyer",homepage:null,backgroundColor:null,popularColors:["#697175","#9d9d9d","#cccccc"],levels:[null,null,{rows:6,cols:6},{rows:7,cols:7},{rows:7,cols:7},null]}),o.set("stand-off",{id:"stand-off",title:"Stand Off",author:"Mark Richardson",homepage:null,backgroundColor:null,popularColors:["#555555","#444444","#000000"],levels:[null,null,{rows:11,cols:10},{rows:13,cols:13},{rows:13,cols:15},{rows:13,cols:13},{rows:17,cols:17},{rows:13,cols:13},{rows:10,cols:11},{rows:13,cols:17},{rows:14,cols:15},{rows:17,cols:17},null]}),o.set("sticky",{id:"sticky",title:"sticky",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#D9FFF8",popularColors:["#E57ED5","#D9FFF8","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("swap",{id:"swap",title:"swap",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#465B4D",popularColors:["#F2F2AA","#465B4D","#CC7A52"],levels:[null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("swapbot",{id:"swapbot",title:"SwapBot",author:"John Williams",homepage:"john.m.dubs@gmail.com",backgroundColor:null,popularColors:["#eb8931","#000000","#be2633"],levels:[null,{rows:6,cols:6},null,null,{rows:6,cols:6},null,{rows:12,cols:10},{rows:11,cols:10},null,{rows:9,cols:8},{rows:9,cols:11},null,{rows:12,cols:9},{rows:10,cols:10},null,{rows:10,cols:13},{rows:10,cols:17},{rows:10,cols:16},{rows:10,cols:16},null,null]}),o.set("symbols",{id:"symbols",title:"Symbols",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#B32D2D","#423D39","#736053"],levels:[null,null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},{rows:11,cols:14}]}),o.set("take-heart-lass",{id:"take-heart-lass",title:"Take Heart Lass",author:"Kevin Zuhn",homepage:"www.kevinzuhn.com",backgroundColor:null,popularColors:["#a3ce27","#be2633","#44891a"],levels:[null,{rows:6,cols:6},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:6,cols:8},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:12},null,{rows:11,cols:18},null,null]}),o.set("telefrag",{id:"telefrag",title:"Telefrag",author:"CHz",homepage:"quiteajolt.com",backgroundColor:null,popularColors:["#003300","#7F552C","#555555"],levels:[null,null,null,null,{rows:5,cols:6},null,null,{rows:8,cols:5},{rows:7,cols:9},{rows:6,cols:9},null,{rows:5,cols:13},{rows:9,cols:12},{rows:5,cols:11},{rows:19,cols:19},null,null,null,null]}),o.set("teleporters",{id:"teleporters",title:"Teleporters",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#2E3E4D",popularColors:["#82A17C","#2E3E4D","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("the-art-of-cloning",{id:"the-art-of-cloning",title:"the art of cloning",author:"Rosden Shadow [Mark Signorelli]",homepage:"https://twitter.com/Rosden_Shadow",backgroundColor:null,popularColors:["#FFB37F","#1AB258","#0E664E"],levels:[null,null,{rows:9,cols:9},null]}),o.set("the-art-of-storage",{id:"the-art-of-storage",title:"The art of storage",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#E5C17E",popularColors:["#BF9269","#B32D2D","#D88D54"],levels:[null,null,{rows:8,cols:6},null,{rows:10,cols:7},null]}),o.set("the-big-dig",{id:"the-big-dig",title:"the big dig",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#52465B",popularColors:["#A17C8B","#52465B","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("the-copying",{id:"the-copying",title:"the copying",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#5B4846",popularColors:["#82A17C","#5B4846","#AAAAF2"],levels:[null,null,{rows:11,cols:8},null,{rows:11,cols:8},null,{rows:11,cols:8},null]}),o.set("the-fire-calls",{id:"the-fire-calls",title:"The fire calls",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#D9FFDC","#231F26","#D9FFF8"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("the-laser",{id:"the-laser",title:"the laser",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#E0AAF2","#3B3942","#AAE0F2"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("the-packing-crate",{id:"the-packing-crate",title:"The packing crate",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#D9FFF8","#231F26","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("the-switch",{id:"the-switch",title:"the switch",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#5C8466","#3B3942","#FFD9FC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("then-another",{id:"then-another",title:"Then another",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#E5C17E",popularColors:["#FFD9FC","#E5C17E","#C1A2A5"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("tidy-the-cafe",{id:"tidy-the-cafe",title:"Tidy the Cafe!",author:"Sally Bridgwater",homepage:"http://sallyanne.itch.io",backgroundColor:null,popularColors:["#9d9d9d","#697175","#f7e26b"],levels:[{rows:4,cols:4},{rows:5,cols:5},{rows:6,cols:7},{rows:5,cols:7},{rows:5,cols:7},{rows:6,cols:5}]}),o.set("tiny-treasure-hunt",{id:"tiny-treasure-hunt",title:"tiny treasure hunt 1.0",author:"Weeble",homepage:"www.twitter.com/weeble",backgroundColor:null,popularColors:["#111411","#cccccc","#FFFFFF"],levels:[null,{rows:9,cols:12},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:9,cols:11},null,{rows:12,cols:12},null,{rows:7,cols:15},null,{rows:13,cols:13},null]}),o.set("to-nothing-and-back",{id:"to-nothing-and-back",title:"To nothing and back",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#333333",popularColors:["#B32D2D","#333333","#FFFFFF"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("train-braining",{id:"train-braining",title:"Train Braining",author:"Alan Hazelden",homepage:"http://www.draknek.org",backgroundColor:null,popularColors:["#293a7b","#97c04f","#ffa9cf"],levels:[null,{rows:10,cols:13},null,{rows:11,cols:13},{rows:11,cols:13},{rows:11,cols:10},{rows:10,cols:12},{rows:12,cols:12},{rows:12,cols:14},{rows:12,cols:20},{rows:12,cols:12},{rows:10,cols:14},{rows:12,cols:11},{rows:12,cols:16},null]}),o.set("train",{id:"train",title:"Train",author:null,homepage:null,backgroundColor:"#000000",popularColors:["#000000","#9d9d9d","#be2633"],levels:[null,{rows:3,cols:10},{rows:7,cols:7},{rows:7,cols:9},{rows:10,cols:7},{rows:12,cols:8},{rows:10,cols:8},{rows:8,cols:10},null]}),o.set("triple-match",{id:"triple-match",title:"triple match",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#B32D2D","#3B3942","#FFFFFF"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("tunnel-rat",{id:"tunnel-rat",title:"Tunnel Rat",author:"James Noeckel",homepage:null,backgroundColor:null,popularColors:["#8a8a8a","#f7e26b","#eb8931"],levels:[null,{rows:24,cols:19},null,{rows:27,cols:25}]}),o.set("unconventional-guns",{id:"unconventional-guns",title:"Unconventional Guns",author:"rectangular Tim",homepage:"http://ludumdare.com/compo/ludum-dare-32/?action=preview&uid=39396",backgroundColor:"#1B2632",popularColors:["#a46422","#1B2632","#cccccc"],levels:[null,{rows:8,cols:7},null,{rows:12,cols:12},null,{rows:8,cols:7},null,{rows:10,cols:9},null,{rows:8,cols:7},null,{rows:6,cols:7},null,{rows:9,cols:7},null,{rows:9,cols:13},null,{rows:8,cols:8},null,{rows:12,cols:12},null,{rows:8,cols:8},null,{rows:8,cols:9},null,{rows:9,cols:10},null,{rows:8,cols:10},null,null,null,{rows:12,cols:12},null,null,null]}),o.set("vacuum",{id:"vacuum",title:"Vacuum",author:"Mark Richardson",homepage:null,backgroundColor:null,popularColors:["#BBBBBB","#FFFFFF","#AAAAAA"],levels:[null,null,null,null,{rows:54,cols:63},null,null,null,null,null,null]}),o.set("vines",{id:"vines",title:"Vines",author:"Stefan Peeters",homepage:null,backgroundColor:null,popularColors:["#663300","#FFFFFF","#f7e26b"],levels:[{rows:38,cols:11},null]}),o.set("wall-bonding",{id:"wall-bonding",title:"Wall-bonding",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#666666","#3B3942","#845C5C"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("wall-shuffle",{id:"wall-shuffle",title:"wall shuffle",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#FFD9FC","#231F26","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("white-pillars",{id:"white-pillars",title:"White Pillars",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2026",popularColors:["#52465B","#1F2026","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]});var l=r(359),i=r(355),s=r(16),a=r(0);function u(e,t,r,n,o,l){ga&&ga(e,t,r,n,o,l)}function c(e){var t=document.querySelector(e);if(!t)throw new Error('BUG: Could not find "'.concat(e,'" in the page'));return t}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e,t,r,n,o,l,i){try{var s=e[l](i),a=s.value}catch(e){return void r(e)}s.done?t(a):Promise.resolve(a).then(n,o)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p="puzzlescriptGameProgress",v="puzzlescriptGameCheckpoint",w=4e4,y=c("title"),g=c("#theGame"),m=c("#loadingDialog"),b=c("#loadingDialogCancel"),_=c("#loadingIndicator"),S=c("#fullscreenTitle"),k=c("#fullscreenPercentage"),E=c("#authorInfo"),C=c("#gameButtonUndo"),T=c("#gameButtonRestart"),O=c("#gameInstructionsButton2"),M=c("#gameInstructionsDialog"),x=c("#gameInstructionsDialogClose"),R=c("#messageDialog"),A=c("#messageDialogText"),I=c("#messageDialogClose");l.registerDialog(m),l.registerDialog(R),l.registerDialog(M);var L=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameId="",this.levelNum=null,this.gameData=null}var t,r,n;return t=e,(r=[{key:"getGameId",value:function(){if(""===this.gameId)throw new Error("BUG: Did not set game id");return this.gameId}},{key:"hasGame",value:function(){return!!this.gameId}},{key:"getLevelNum",value:function(){if(null===this.levelNum)throw new Error("BUG: Did not set level num");return this.levelNum}},{key:"setGameAndLevel",value:function(e,t){this.gameId=e,this.levelNum=t}},{key:"loadStorage",value:function(){return this.loadJson(p,{_version:2})}},{key:"loadCurrentLevelNum",value:function(){var e=this.getGameId(),t=this.loadStorage()[e];return t?t.currentLevelNum:null}},{key:"loadCheckpoint",value:function(){var e=this.getGameId();return this.loadJson("".concat(v,".").concat(e),null)}},{key:"saveCurrentLevelNum",value:function(e){var t=this.getGameId(),r=this.loadStorage();r[t]=r[t]||{},r[t].currentLevelNum=e,r[t].completedLevelAt=Date.now(),r[t].lastPlayedAt=Date.now(),this.saveJson(p,r),u("send","event","game","level",t,e),L.levelNum=e;var n=r[t];if(n.levelMaps){var o=n.levelMaps.slice(0,n.currentLevelNum).filter(function(e){return e}).length,l=n.levelMaps.filter(function(e){return e}).length,i=Math.floor(100*o/l);i>0&&(k.textContent="(".concat(i,"%)"))}}},{key:"saveGameInfo",value:function(e){var t=e.levels,r=e.title,n=this.getGameId(),o=this.loadStorage();this.gameData=e,o[n]=o[n]||{},o[n].levelMaps=t.map(function(e){return"LEVEL_MAP"===e.type}),o[n].title=r,o[n].lastPlayedAt=Date.now(),this.saveJson(p,o)}},{key:"saveCheckpoint",value:function(e){var t=this.getGameId(),r={_version:2,levelNum:this.getLevelNum(),data:e};this.saveJson("".concat(v,".").concat(t),r)}},{key:"getNumberOfPlayedGames",value:function(){var e=this.loadStorage();return Object.keys(e).length-1}},{key:"forEachGame",value:function(e){var t=this.loadStorage();for(var r in t)"_version"!==r&&e(r,t[r])}},{key:"loadJson",value:function(e,t){var r=window.localStorage.getItem(e);return r?JSON.parse(r):t}},{key:"saveJson",value:function(e,t){window.localStorage.setItem(e,JSON.stringify(t))}}])&&d(t.prototype,r),n&&d(t,n),e}());I.addEventListener("click",function(){R.close(),g.focus()}),O.addEventListener("click",function(){M.showModal()}),x.addEventListener("click",function(){M.close(),g.focus()}),b.addEventListener("click",function(){N()});var P=null;function F(){m.open||(P&&clearTimeout(P),P=setTimeout(function(){m.showModal()},500))}function N(){P&&clearTimeout(P),m.open&&m.close()}var D={onMessage:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.j)(10,function(){return!G.inputWatcher.isSomethingPressed()});case 2:return A.textContent=t,R.showModal(),I.focus(),e.next=7,Object(a.j)(10,function(){return!R.open});case 7:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var l=e.apply(t,r);function i(e){h(l,n,o,i,s,"next",e)}function s(e){h(l,n,o,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}(),onLevelLoad:function(e,t){var r=t&&t.rows*t.cols>400;_.setAttribute("data-size",r?"large":"small"),F()},onLevelChange:function(e){N(),g.focus(),function(e,t){if(window.location.hash="#".concat(e,"|").concat(t),ga){var r=window.location,n=r.pathname,o=r.search;ga("set","page","".concat(n).concat(o,"#").concat(e,"|").concat(t)),ga("send","pageview")}}(L.getGameId(),e),L.saveCurrentLevelNum(e)},onGameChange:function(e){var t=e.metadata.backgroundColor;(t=t||new s.a({code:"",sourceOffset:0},"#000000")).toRgb().isDark()?window.document.body.classList.add("is-background-dark"):window.document.body.classList.remove("is-background-dark"),window.document.body.style.backgroundColor=t.toHex();var r,n=e.metadata,o=n.author,l=n.homepage;o&&(E.textContent=o,l?E.setAttribute("href",/^https?:\/\//.test(r=l)?r:"http://".concat(r)):E.removeAttribute("href")),L.saveGameInfo(e),S.textContent=e.title,y.textContent=e.title},onTick:function(e,t){t&&L.saveCheckpoint(t)}},B=new Worker("./puzzlescript-webworker.js"),G=new i.a(B,g,D);C.addEventListener("click",function(){G.press(a.b.UNDO),g.focus()}),T.addEventListener("click",function(){G.press(a.b.RESTART),g.focus()});var j=c("#disableCss");function U(e){e||u("send","event","accessibility","toggle",j.checked?"show":"hide"),j.checked?g.classList.add("ps-ui-disabled"):g.classList.remove("ps-ui-disabled"),g.focus()}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}j.addEventListener("change",function(){return U(!1)}),U(!0);var H=["push","pot-wash-panic","skipping-stones","entanglement-one","mirror-isles","cyber-lasso","swapbot","bubble-butler","flying-kick","beam-islands","pushcat-jr","icecrates","sokobond","spooky-pumpkin-game","spikes-n-stuff"],q=["esl-puzzle-game","explod","alien-disco","kettle","okosban","season-finale","easy-enigma","collapsable-sokoban"],z=500,V=10,K=6,J=c("#browseGamesList");function Y(e,t,r,n){var o=document.createElement(e);if(t&&t.forEach(function(e){return o.classList.add(e)}),r)for(var l=Object.keys(r),i=0;i<l.length;i++){var s=l[i];o.setAttribute(s,r[s])}return n&&n.forEach(function(e){"string"==typeof e?o.appendChild(document.createTextNode(e)):e&&o.appendChild(e)}),o}function X(e,t,r,n,o,l,i){try{var s=e[l](i),a=s.value}catch(e){return void r(e)}s.done?t(a):Promise.resolve(a).then(n,o)}function $(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var l=e.apply(t,r);function i(e){X(l,n,o,i,s,"next",e)}function s(e){X(l,n,o,i,s,"throw",e)}i(void 0)})}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}window.addEventListener("load",function(){var e=c("body"),t=c("#testShowNotificationButton"),r=c("#iosInstallInstructions");!function(){var e=L.loadStorage(),t=e;if(1===t._version){var r=new Map;r.set("gist-f0b9b8e95d0bc87c9fb9e411756daa23","icecrates"),r.set("gist-7f4470ab80d9f7ffe4b9e28c83b26adc","push"),r.set("pot-wash-panic_itch","pot-wash-panic"),r.set("gist-457c6d8be68ffb6d921211d40ca48c15","pants-shirt-cap"),r.set("gist-e13482e035a5f75e9b0e4d0b5f28f8b6","pushcat-jr"),r.set("separation_itch","separation"),r.set("roll-those-sixes-itch","roll-those-sixes"),r.set("gist-6daa8b63cf79202cd085c1b168048c09","rock-paper-scissors"),r.set("gist-c5ec035de4e0c145a85327942fb76098","some-lines-crossed"),r.set("sleepy-player_itch","sleepy-players"),r.set("skipping-stones_d6fd6fcf84de185e2584","skipping-stones"),r.set("gist-8074d60a0af768f970ef055d4460414d","bubble-butler"),r.set("gist-ee39bfe12012c774acfc5e3d32fb4f89","boxes-and-balloons"),r.set("mirror-isles_219a7db6511dad557b84","mirror-isles"),r.set("gist-e86e1d6cf24307499c1cd1aaaa733a91","swapbot"),r.set("spikes-n-stuff_dc5c4a669e362e389e994025075f7d0b","spikes-n-stuff"),r.set("aunt-floras-mansion","aunt-flora-s-mansion"),r.set("spacekoban_6a6c07f71d7039e4155e","spacekoban"),r.set("gist-181f370a15625905ca6e844a972a4abf","miss-direction"),r.set("gist-711d6220e4fe2a36254cc544c6ba4885","castlemouse"),r.set("rosden.itch.io_islands","islands"),r.set("rosden.itch.io_bomb-n-ice","bomb-n-ice"),r.set("cyber-lasso-e3e444f7c63fb21b6ec0","cyber-lasso"),r.set("boxes-love-bloxing_c2d717a77f9aa02ecb1b793111f3a921","boxes-love-bloxing-gloves"),r.set("hack-the-net_8b5eb39cb825277832d261b3142f084b","hack-the-net"),r.set("spooky-pumpkin_7242443","spooky-pumpkin-game"),r.set("gist-b6c8ba9363b4cca270d8ce5e88f79abf","vacuum"),r.set("gist-542b97948cb1d377dce6d276c0bcd9d5","sokoboros"),r.set("gist-2b9ece642cd7cdfb4a5f2c9fa8455e40","beam-islands"),r.set("entanglement","entanglement-one");var n=!0,o=!1,l=void 0;try{for(var i,s=r.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=f(i.value,2),u=a[0],c=a[1],h=e[u];h&&(delete e[u],e[c]=h);var d="".concat(v,".").concat(u),w=window.localStorage.getItem(d);w&&(window.localStorage.setItem("".concat(v,".").concat(c),w),window.localStorage.removeItem(d))}}catch(e){o=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}t._version=2,L.saveJson(p,e)}}(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&r.classList.remove("hidden");var l=null;function i(){var t=window.location.hash;if(l!==t){if(!l&&t){var r=Z(window.location.hash.substring(1).split("|"),2),n=r[0],i=r[1];e.setAttribute("data-mode","playingGame"),function(e,t){L.setGameAndLevel(e,t),_.setAttribute("data-size","small"),F(),fetch("./games/".concat(L.getGameId(),"/script.txt"),{redirect:"follow"}).then(function(e){if(e.ok)return e.text().then(function(e){e.length>w&&_.setAttribute("data-size","large"),t=null!==L.levelNum?L.levelNum:L.loadCurrentLevelNum();var r=L.loadCheckpoint();if(r){var n=r.levelNum,o=r.data;if(t!==n)throw new Error("BUG: Checkpoint level number (".concat(n,") does not match current level number (").concat(t,")"));G.setGame(e,t||0,o)}else G.setGame(e,t||0,null)});alert("Problem finding game file. Please choose another one"),N()},function(e){alert("Could not download the game. Are you connected to the internet?"),console.error(e),N()})}(n,i?Number.parseInt(i,10):null)}else t||(e.setAttribute("data-mode","browseGames"),e.removeAttribute("style"),function(){J.innerHTML="";var e=[],t=[],r=[],n=[],l=[],i=[],s=[],a=[],u=new Map,c=new Map;o.forEach(function(e,t){return u.set(t,e)}),L.forEachGame(function(e,t){c.set(e,t)});var f=!0,h=!1,d=void 0;try{for(var p,v=u.values()[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=p.value,y=w.id,g=w.title,m=w.author,b=w.backgroundColor,_=w.popularColors,S=w.levels,k=m?Y("div",["game-author"],null,["by ".concat(m)]):null,E=Y("a",null,{href:"#".concat(y),title:g},[Y("figure",null,{id:y,"aria-hidden":"true"},[Y("div",["thumbnail-wrapper"],{style:"background-color: ".concat(b||_[0])},[Y("img",["game-thumbnail"],{src:"./game-thumbnails/".concat(y,".png")})]),Y("figcaption",null,null,[Y("div",["game-title"],null,[g]),k])])]),C=Math.max.apply(Math,W(S.map(function(e){return e?e.rows*e.cols:0}))),T=S.filter(function(e){return!!e}).length,O=!S[0];c.has(y)?e.push(E):q.includes(y)?a.push(E):H.includes(y)?t.push(E):C>=z?r.push(E):T>=V?n.push(E):O?T<=K?i.push(E):s.push(E):l.push(E)}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}function M(e,t){t.length>0&&(J.appendChild(Y("h2",["category-title"],null,[e])),J.appendChild(Y("div",["category-games"],null,t)))}M("Continue Playing",e),M("Popular Games",t),M("Progressively Challenging Games",n),M("Large Games",r),M("Short Games",i),M("Medium-length Games",s),M("Games without Instructions",l),M("Uncategorized Games",a)}());l=t}}window.addEventListener("hashchange",i),i();var s=c("#gamepadIcon"),a=c("#gamepadDisabled"),h=c("#gamepadRecognized"),d=c("#gamepadNotRecognized"),y=c("#messageDialog"),g=c("#messageDialogClose");G.inputWatcher&&setInterval(function(){G.inputWatcher.gamepad.isRecognized()?(s.classList.contains("enabled")||u("send","event","gamepad","recognized"),s.classList.add("enabled"),a.classList.add("hidden"),h.classList.remove("hidden"),d.classList.add("hidden"),y.open&&G.inputWatcher.gamepad.isButtonPressed(n.a.CLUSTER_BOTTOM)&&g.click()):G.inputWatcher.gamepad.isSomethingConnected()?(d.classList.contains("hidden")&&u("send","event","gamepad","something-connected"),s.classList.remove("enabled"),a.classList.add("hidden"),h.classList.add("hidden"),d.classList.remove("hidden")):(s.classList.remove("enabled"),a.classList.remove("hidden"),h.classList.add("hidden"),d.classList.add("hidden"))},200);var m=c("#btnAdd"),b=null;window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),b=e,m.classList.remove("hidden")}),m.addEventListener("click",function(e){m.classList.add("hidden"),b&&b.prompt(),b&&b.userChoice.then(function(){b=null})}),t.addEventListener("click",$(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={body:t="You are playing a game! (just a test notification)",icon:"./pwa-icon-144.png",badge:"./pwa-icon-144.png",vibrate:[200,100,200],actions:[{action:"action-1",title:"Option 1"},{action:"action-2",title:"Option 2"}]},e.next=4,new Promise(function(e){"undefined"!=typeof Notification?Notification.requestPermission(function(){var n=$(regeneratorRuntime.mark(function n(o){var l,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l=function(){new Notification("Test Title",r),e()},"granted"!==o){n.next=18;break}if(!navigator.serviceWorker){n.next=15;break}return n.next=5,navigator.serviceWorker.ready;case 5:if(!(i=n.sent).showNotification){n.next=12;break}return n.next=9,i.showNotification("Test Title",r);case 9:e(),n.next=13;break;case 12:l();case 13:n.next=16;break;case 15:l();case 16:n.next=20;break;case 18:alert(t),e();case 20:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()):(alert(t),e())});case 4:case"end":return e.stop()}},e,this)})))})}]);
//# sourceMappingURL=pwa-app.js.map