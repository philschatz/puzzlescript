!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=363)}([function(t,e,r){"use strict";function n(t,e,r,n,o,l,i){try{var s=t[l](i),a=s.value}catch(t){return void r(t)}s.done?e(a):Promise.resolve(a).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,l){var i=t.apply(e,r);function s(t){n(i,o,l,s,a,"next",t)}function a(t){n(i,o,l,s,a,"throw",t)}s(void 0)})}}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s,a,u;function c(t){var e=[];return t.forEach(function(t){t.forEach(function(t){e.push(t)})}),e}function f(t){var e;return function(){e&&clearTimeout(e),e=setTimeout(function(){t()},10)}}function h(t){switch(t){case s.UP:return s.DOWN;case s.DOWN:return s.UP;case s.LEFT:return s.RIGHT;case s.RIGHT:return s.LEFT;default:throw new Error('BUG: Invalid direction: "'.concat(t,'"'))}}function d(t,e){if(t.size!==e.size)return!1;var r=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;if(!t.has(s))return!1}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return!0}function p(t,e){var r=new Set(t),n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;r.add(a)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}function v(t,e){var r=new Set,n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;t.has(a)&&r.add(a)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}function w(t,e){var r=new Set(t),n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;r.delete(a)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}r.d(e,"d",function(){return s}),r.d(e,"b",function(){return a}),r.d(e,"e",function(){return u}),r.d(e,"g",function(){return c}),r.d(e,"f",function(){return f}),r.d(e,"i",function(){return h}),r.d(e,"n",function(){return d}),r.d(e,"l",function(){return p}),r.d(e,"o",function(){return v}),r.d(e,"m",function(){return w}),r.d(e,"h",function(){return _}),r.d(e,"k",function(){return S}),r.d(e,"q",function(){return k}),r.d(e,"j",function(){return E}),r.d(e,"c",function(){return g}),r.d(e,"p",function(){return C}),r.d(e,"a",function(){return T}),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.ACTION="ACTION",t.STATIONARY="STATIONARY",t.RANDOMDIR="RANDOMDIR"}(s||(s={})),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.ACTION="ACTION",t.UNDO="UNDO",t.RESTART="RESTART"}(a||(a={})),function(t){t.RELATIVE_LEFT="<",t.RELATIVE_RIGHT=">",t.RELATIVE_UP="^",t.RELATIVE_DOWN="V"}(u||(u={}));var y,g,m=1,b=null;function _(t){if(b){if(b.length<=m-1)throw new Error("BUG: the list of random values for testing was too short.\n            See calls to setRandomValuesForTesting([...]).\n            The list was [".concat(b,"]. Index being requested is ").concat(m-1));var e=b[m-1];return m++,e}var r=1e4*Math.sin(m++);return Math.round((r-Math.floor(r))*(t-1))}function S(){m=1}function k(t){var e=t.getPlayer().getSprites(),r=new Set(e),n=!0,o=!1,l=void 0;try{for(var s,a=r[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value.getCollisionLayer(),c=!0,f=!1,h=void 0;try{for(var d,p=t.objects[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var w=d.value;w.getCollisionLayer()===u&&r.add(w)}}catch(t){f=!0,h=t}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}}catch(t){o=!0,l=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}var y=!0,g=!1,m=void 0;try{for(var b,_=t.winConditions[Symbol.iterator]();!(y=(b=_.next()).done);y=!0){var S=b.value,k=!0,E=!1,C=void 0;try{for(var T,O=S.a11yGetTiles()[Symbol.iterator]();!(k=(T=O.next()).done);k=!0){var M=T.value,x=!0,R=!1,A=void 0;try{for(var I,L=M.getSprites()[Symbol.iterator]();!(x=(I=L.next()).done);x=!0){var P=I.value;r.add(P)}}catch(t){R=!0,A=t}finally{try{x||null==L.return||L.return()}finally{if(R)throw A}}}}catch(t){E=!0,C=t}finally{try{k||null==O.return||O.return()}finally{if(E)throw C}}}}catch(t){g=!0,m=t}finally{try{y||null==_.return||_.return()}finally{if(g)throw m}}var F=!0,N=!1,D=void 0;try{for(var B,G=t.rules[Symbol.iterator]();!(F=(B=G.next()).done);F=!0){var j=B.value,U=!0,W=!1,H=void 0;try{for(var q,z=j.a11yGetConditionSprites()[Symbol.iterator]();!(U=(q=z.next()).done);U=!0){var V=q.value;if(v(V,r).size>0){var K=!0,J=!1,Y=void 0;try{for(var X,$=V[Symbol.iterator]();!(K=(X=$.next()).done);K=!0){var Z=X.value;r.add(Z)}}catch(t){J=!0,Y=t}finally{try{K||null==$.return||$.return()}finally{if(J)throw Y}}}}}catch(t){W=!0,H=t}finally{try{U||null==z.return||z.return()}finally{if(W)throw H}}}}catch(t){N=!0,D=t}finally{try{F||null==G.return||G.return()}finally{if(N)throw D}}var Q=t.getMagicBackgroundSprite();return Q&&r.delete(Q),new Set(i(r).filter(function(t){return!t.isTransparent()}))}function E(t,e){return new Promise(function(r){var n=setInterval(function(){var t=e();t&&(clearInterval(n),r(t))},t)})}!function(t){t.BREAKPOINT="DEBUGGER",t.BREAKPOINT_REMOVE="DEBUGGER_REMOVE"}(y||(y={})),function(t){t.PAUSE="PAUSE",t.RESUME="RESUME",t.TICK="TICK",t.PRESS="PRESS",t.CLOSE="CLOSE",t.ON_GAME_CHANGE="ON_GAME_CHANGE",t.ON_PRESS="ON_PRESS",t.ON_MESSAGE="ON_MESSAGE",t.ON_MESSAGE_DONE="ON_MESSAGE_DONE",t.ON_LEVEL_LOAD="ON_LEVEL_LOAD",t.ON_LEVEL_CHANGE="ON_LEVEL_CHANGE",t.ON_WIN="ON_WIN",t.ON_SOUND="ON_SOUND",t.ON_TICK="ON_TICK",t.ON_PAUSE="ON_PAUSE",t.ON_RESUME="ON_RESUME"}(g||(g={}));var C=function(t,e){var r=Date.now(),n=Math.min(t.realtimeInterval||1e3,t.keyRepeatInterval||1e3,t.againInterval||1e3);return(n>100||Number.isNaN(n))&&(n=.01),r-e>=1e3*n},T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subHandlers=e||[]}var e,r,n;return e=t,(r=[{key:"onGameChange",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.subHandlers[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;i.onGameChange&&i.onGameChange(t)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"onPress",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.subHandlers[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;i.onPress&&i.onPress(t)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"onMessage",value:function(){var t=o(regeneratorRuntime.mark(function t(e){var r,n,o,l,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,n=!1,o=void 0,t.prev=3,l=this.subHandlers[Symbol.iterator]();case 5:if(r=(i=l.next()).done){t.next=14;break}if(s=i.value,t.t0=s.onMessage,!t.t0){t.next=11;break}return t.next=11,s.onMessage(e);case 11:r=!0,t.next=5;break;case 14:t.next=20;break;case 16:t.prev=16,t.t1=t.catch(3),n=!0,o=t.t1;case 20:t.prev=20,t.prev=21,r||null==l.return||l.return();case 23:if(t.prev=23,!n){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},t,this,[[3,16,20,28],[21,,23,27]])}));return function(e){return t.apply(this,arguments)}}()},{key:"onLevelLoad",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var l,i=this.subHandlers[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;s.onLevelLoad&&s.onLevelLoad(t,e)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"onLevelChange",value:function(t,e,r){var n=!0,o=!1,l=void 0;try{for(var i,s=this.subHandlers[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;a.onLevelChange&&a.onLevelChange(t,e,r)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"onWin",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.subHandlers[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value;l.onWin&&l.onWin()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"onSound",value:function(){var t=o(regeneratorRuntime.mark(function t(e){var r,n,o,l,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=!0,n=!1,o=void 0,t.prev=3,l=this.subHandlers[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)(s=i.value).onSound&&s.onSound(e);t.next=11;break;case 7:t.prev=7,t.t0=t.catch(3),n=!0,o=t.t0;case 11:t.prev=11,t.prev=12,r||null==l.return||l.return();case 14:if(t.prev=14,!n){t.next=17;break}throw o;case 17:return t.finish(14);case 18:return t.finish(11);case 19:case"end":return t.stop()}},t,this,[[3,7,11,19],[12,,14,18]])}));return function(e){return t.apply(this,arguments)}}()},{key:"onTick",value:function(t,e,r,n){var o=!0,l=!1,i=void 0;try{for(var s,a=this.subHandlers[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;u.onTick&&u.onTick(t,e,r,n)}}catch(t){l=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}}},{key:"onPause",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.subHandlers[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value;l.onPause&&l.onPause()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"onResume",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.subHandlers[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value;l.onResume&&l.onResume()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}}])&&l(e.prototype,r),n&&l(e,n),t}()},function(t,e,r){var n=r(4),o=r(26),l=r(18),i=r(19),s=r(27),a=function t(e,r,a){var u,c,f,h,d=e&t.F,p=e&t.G,v=e&t.P,w=e&t.B,y=p?n:e&t.S?n[r]||(n[r]={}):(n[r]||{}).prototype,g=p?o:o[r]||(o[r]={}),m=g.prototype||(g.prototype={});for(u in p&&(a=r),a)f=((c=!d&&y&&void 0!==y[u])?y:a)[u],h=w&&c?s(f,n):v&&"function"==typeof f?s(Function.call,f):f,y&&i(y,u,f,e&t.U),g[u]!=f&&l(g,u,h),v&&m[u]!=f&&(m[u]=f)};n.core=o,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,r){"use strict";var n,o,l,i,s,a,u,c,f,h,d,p,v,w;r.d(e,"e",function(){return n}),r.d(e,"b",function(){return a}),r.d(e,"h",function(){return u}),r.d(e,"i",function(){return c}),r.d(e,"g",function(){return f}),r.d(e,"f",function(){return h}),r.d(e,"a",function(){return d}),r.d(e,"c",function(){return p}),r.d(e,"j",function(){return v}),r.d(e,"d",function(){return w}),function(t){t.RANDOM="RANDOM",t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.VERTICAL="VERTICAL",t.HORIZONTAL="HORIZONTAL",t.ORTHOGONAL="ORTHOGONAL",t.PERPENDICULAR="PERPENDICULAR",t.PARALLEL="PARALLEL",t.MOVING="MOVING",t.LATE="LATE",t.RIGID="RIGID"}(n||(n={})),function(t){t.NO="NO",t.LEFT="LEFT",t.RIGHT="RIGHT",t.UP="UP",t.DOWN="DOWN",t.RANDOMDIR="RANDOMDIR",t.RANDOM="RANDOM",t.STATIONARY="STATIONARY",t.MOVING="MOVING",t.ACTION="ACTION",t.VERTICAL="VERTICAL",t.HORIZONTAL="HORIZONTAL",t.PERPENDICULAR="PERPENDICULAR",t.PARALLEL="PARALLEL",t.ORTHOGONAL="ORTHOGONAL",t.ARROW_ANY="ARROW_ANY"}(o||(o={})),function(t){t.RESTART="RESTART",t.UNDO="UNDO",t.TITLESCREEN="TITLESCREEN",t.STARTGAME="STARTGAME",t.STARTLEVEL="STARTLEVEL",t.ENDLEVEL="ENDLEVEL",t.ENDGAME="ENDGAME",t.SHOWMESSAGE="SHOWMESSAGE",t.CLOSEMESSAGE="CLOSEMESSAGE"}(l||(l={})),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.HORIZONTAL="HORIZONTAL",t.VERTICAL="VERTICAL"}(i||(i={})),function(t){t.CREATE="CREATE",t.DESTROY="DESTROY",t.CANTMOVE="CANTMOVE"}(s||(s={})),function(t){t.HEX8="HEX8",t.HEX6="HEX6",t.NAME="NAME"}(a||(a={})),function(t){t.NO_PIXELS="NO_PIXELS",t.WITH_PIXELS="WITH_PIXELS"}(u||(u={})),function(t){t.SIMPLE="LEGEND_ITEM_SIMPLE",t.OR="LEGEND_ITEM_OR",t.AND="LEGEND_ITEM_AND"}(c||(c={})),function(t){t.WHEN="SOUND_WHEN",t.SFX="SOUND_SFX",t.SPRITE_DIRECTION="SOUND_SPRITE_DIRECTION",t.SPRITE_MOVE="SOUND_SPRITE_MOVE",t.SPRITE_EVENT="SOUND_SPRITE_EVENT"}(f||(f={})),function(t){t.GROUP="RULE_GROUP",t.LOOP="RULE_LOOP",t.SIMPLE="RULE_SIMPLE"}(h||(h={})),function(t){t.SIMPLE="BRACKET_SIMPLE",t.ELLIPSIS="BRACKET_ELLIPSIS"}(d||(d={})),function(t){t.MESSAGE="COMMAND_MESSAGE",t.AGAIN="COMMAND_AGAIN",t.CANCEL="COMMAND_CANCEL",t.CHECKPOINT="COMMAND_CHECKPOINT",t.RESTART="COMMAND_RESTART",t.WIN="COMMAND_WIN",t.SFX="COMMAND_SFX"}(p||(p={})),function(t){t.SIMPLE="WINCONDITION_SIMPLE",t.ON="WINCONDITION_ON"}(v||(v={})),function(t){t.MESSAGE="LEVEL_MESSAGE",t.MAP="LEVEL_MAP"}(w||(w={}))},function(t,e,r){var n=r(7);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){"use strict";(function(t){r.d(e,"f",function(){return T}),r.d(e,"g",function(){return O}),r.d(e,"e",function(){return M}),r.d(e,"h",function(){return x}),r.d(e,"b",function(){return I}),r.d(e,"c",function(){return F}),r.d(e,"a",function(){return L}),r.d(e,"d",function(){return B});var n=r(21),o=r(147),l=r(2),i=r(40),s=r(0),a=r(13);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=r(106),b=100,_=(s.d.RIGHT,s.d.DOWN,s.d.LEFT,s.d.UP,function t(e,r){g(this,t),this.condition=e,this.action=r}),S=function(t){function e(t,r,n){var o;return g(this,e),(o=p(this,v(e).call(this,t,r))).extra=n,o}return w(e,_),e}(),k=function(){function t(e,r){g(this,t),this.cell=e,this.messages=r}return h(t,[{key:"hasCell",value:function(){return!0}},{key:"getCell",value:function(){return this.cell}},{key:"getCommand",value:function(){throw new Error("BUG: check hasCommand first")}}]),t}(),E=function(){function t(e){g(this,t),this.command=e,this.messages=[]}return h(t,[{key:"getCommand",value:function(){return this.command}},{key:"hasCell",value:function(){return!1}},{key:"getCell",value:function(){throw new Error("BUG: check hasCell first")}}]),t}();var C,T=function(t){function e(t,r,n){var o;return g(this,e),(o=p(this,v(e).call(this,t))).rules=n,o.isRandom=r,o}return w(e,a["a"]),h(e,[{key:"hasMatches",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.rules[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){if(o.value.hasMatches(t))return!0}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!1}},{key:"evaluate",value:function(t,e){var r;n.b.isLevel(n.a.DEBUG)&&(r=Date.now());var o,l=[];for(o=0;o<350;o++){if(349===o)throw new Error("BUG: Iterated too many times in startloop or + (rule group)\n".concat(this.toString()));if(this.isRandom){var i=this.rules.filter(function(e){return e.hasMatches(t)});return 0===i.length?[]:1===i.length?i[0].evaluate(t,!0):i[Object(s.h)(i.length)].evaluate(t,!0)}var a=!1,u=!0,c=!1,f=void 0;try{for(var h,d=this.rules[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var p=h.value.evaluate(t,e);if(p.length>0){if(p.filter(function(t){return t.hasCell()}).length>0&&(a=!0),e)return p;l.push(p)}}}catch(t){c=!0,f=t}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}if(!a)break}return n.b.isLevel(n.a.DEBUG)&&l.length>0&&(r&&Date.now()-r>30?n.b.debug("Rule ".concat(this.__getSourceLineAndColumn().lineNum," applied. ").concat(1===o?"":"(x".concat(o,")")," [[").concat(Date.now()-r,"ms]]")):n.b.debug("Rule ".concat(this.__getSourceLineAndColumn().lineNum," applied. ").concat(1===o?"":"(x".concat(o,")")))),Object(s.g)(l)}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.rules[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"getChildRules",value:function(){return this.rules}},{key:"isLate",value:function(){return this.rules[0].isLate()}},{key:"hasRigid",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.rules[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){if(n.value.hasRigid())return!0}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}return!1}},{key:"addCellsToEmptyRules",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.rules[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){o.value.addCellsToEmptyRules(t)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"toKey",value:function(){return this.rules.map(function(t){return t.toKey()}).join("\n")}},{key:"a11yGetConditionSprites",value:function(){var t=[],e=!0,r=!1,n=void 0;try{for(var o,l=this.rules[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;t=[].concat(c(t),c(i.a11yGetConditionSprites()))}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return t}}]),e}(),O=function(t){function e(){return g(this,e),p(this,v(e).apply(this,arguments))}return w(e,T),e}(),M=function(t){function e(t,r,n,o,l,i,s){var a;if(g(this,e),(a=p(this,v(e).call(this,t))).conditionBrackets=r,a.actionBrackets=n,a.commands=o,a._isLate=l,a.isRigid=i,a.debugFlag=s,a.isSubscribedToCellChanges=!1,n.length>0)for(var u=0;u<r.length;u++)r[u].prepareAction(n[u]);return a}return w(e,a["a"]),h(e,[{key:"toKey",value:function(){var t=this.conditionBrackets.map(function(t){return t.toKey()}),e=this.actionBrackets.map(function(t){return t.toKey()}),r=this.commands.map(function(t){return function(t){switch(t.type){case l.c.AGAIN:case l.c.CANCEL:case l.c.CHECKPOINT:case l.c.RESTART:case l.c.WIN:return t.type;case l.c.MESSAGE:return"".concat(t.type,":").concat(t.message);case l.c.SFX:return"".concat(t.type,":").concat(t.sound.type,":").concat(t.sound.soundCode)}}(t)});return"{Late?".concat(this._isLate,"} {Rigid?").concat(this.isRigid,"} ").concat(t," -> ").concat(e," ").concat(r.join(" ")," {debugger?").concat(this.debugFlag,"}")}},{key:"getChildRules",value:function(){return[]}},{key:"subscribeToCellChanges",value:function(){if(!this.isSubscribedToCellChanges){var t=!0,e=!1,r=void 0;try{for(var n,o=this.conditionBrackets[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){n.value.subscribeToNeighborChanges()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}this.isSubscribedToCellChanges=!0}}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.conditionBrackets[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"getMatches",value:function(t){for(var e=[],r=0;r<this.conditionBrackets.length;r++){var n=this.conditionBrackets[r],o=this.actionBrackets[r],l=n.getMatches(t,o);if(0===l.length)return[];e.push(l)}return e}},{key:"evaluate",value:function(t,e){var r=[];var n=this.getMatches(t);if(0===n.length)return[];if(this.actionBrackets.length>0){var o=function(t){var e=[[]],r=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,a=[],u=!0,c=!1,f=void 0;try{for(var h,d=s[Symbol.iterator]();!(u=(h=d.next()).done);u=!0)for(var p=h.value,v=0;v<e.length;v++){var w=e[v].concat([p]);a.push(w)}}catch(t){c=!0,f=t}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}e=a}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}(n),l=[],i=!0,a=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var h=c.value,d=!0,p=new Map,v=!0,w=!1,y=void 0;try{for(var g,m=h[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;if(!b.doesStillMatch()){d=!1;break}b.populateMagicOrTiles(p)}}catch(t){w=!0,y=t}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}if(d){var _=!0,S=!1,k=void 0;try{for(var C,T=h[Symbol.iterator]();!(_=(C=T.next()).done);_=!0){var O=C.value;O.doesStillMatch()&&l.push(O.evaluate(p))}}catch(t){S=!0,k=t}finally{try{_||null==T.return||T.return()}finally{if(S)throw k}}if(e)break}}}catch(t){a=!0,u=t}finally{try{i||null==f.return||f.return()}finally{if(a)throw u}}r=Object(s.g)(l)}var M=!0,x=!1,R=void 0;try{for(var A,I=this.commands[Symbol.iterator]();!(M=(A=I.next()).done);M=!0){var L=A.value;r.push(new E(L))}}catch(t){x=!0,R=t}finally{try{M||null==I.return||I.return()}finally{if(x)throw R}}return r}},{key:"hasMatches",value:function(t){for(var e=0;e<this.conditionBrackets.length;e++){var r=this.conditionBrackets[e],n=this.actionBrackets[e];if(!r.hasMatches(t,n))return!1}return!0}},{key:"isLate",value:function(){return this._isLate}},{key:"hasRigid",value:function(){return this.isRigid}},{key:"canCollapseBecauseBracketsMatch",value:function(t){for(var e=0;e<this.conditionBrackets.length;e++){if(this.conditionBrackets[e]!==t.conditionBrackets[e])return!1;if(this.conditionBrackets[e]._getAllNeighbors().length>1)return!1}for(var r=0;r<this.actionBrackets.length;r++)if(this.actionBrackets[r]!==t.actionBrackets[r])return!1;return!0}},{key:"addCellsToEmptyRules",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.conditionBrackets[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){o.value.addCellsToEmptyRules(t)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"a11yGetConditionSprites",value:function(){var t=[],e=!0,r=!1,n=void 0;try{for(var o,l=this.conditionBrackets[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;t=[].concat(c(t),c(i.a11yGetSprites()))}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return t}}]),e}(),x=function(t){function e(t,r,n,o,l,i){var s;return g(this,e),(s=p(this,v(e).call(this,t)))._isNegated=r,s._isRandom=n,s._direction=o,s._tile=l,s.neighbors=new Set,s._debugFlag=i,s.trickleCells=new Set,s}return w(e,a["a"]),h(e,[{key:"toKey",value:function(t){var e=this._tile.getSprites().map(function(t){return t.getName()}).sort();return t?"{-?".concat(this._isNegated,"} {#?").concat(this._isRandom,'} dir="').concat(this._direction,'" [').concat(e.join(" "),"]"):"{-?".concat(this._isNegated,"} {#?").concat(this._isRandom,'} dir="').concat(this._direction,'" [').concat(e.join(" "),"]{debugging?").concat(!!this._debugFlag,"}")}},{key:"equals",value:function(t){return this._isNegated===t._isNegated&&this._tile.equals(t._tile)&&this._direction===t._direction&&this._isRandom===t._isRandom}},{key:"clearCaches",value:function(){}},{key:"isNo",value:function(){return this._isNegated}},{key:"isRandom",value:function(){return this._isRandom}},{key:"getCollisionLayers",value:function(){var t=new Set,e=!0,r=!1,n=void 0;try{for(var o,l=this._tile.getSprites()[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;t.add(i.getCollisionLayer())}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return t}},{key:"subscribeToCellChanges",value:function(t){this.neighbors.add(t),this._tile.subscribeToCellChanges(this)}},{key:"addCells",value:function(t,e,r,n){if(this._direction&&n!==this._direction?this._tile.isOr()&&this.matchesFirstCell(r,n)?!this.isNo():this.isNo():!this.isNo()){var o=!0,l=!1,i=void 0;try{for(var s,a=r[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;this.trickleCells.add(u)}}catch(t){l=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}var c=!0,f=!1,h=void 0;try{for(var d,p=this.neighbors[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){d.value.addCells(this,e,r,n)}}catch(t){f=!0,h=t}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}else{var v=!0,w=!1,y=void 0;try{for(var g,m=r[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;this.trickleCells.delete(b)}}catch(t){w=!0,y=t}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}var _=!0,S=!1,k=void 0;try{for(var E,C=this.neighbors[Symbol.iterator]();!(_=(E=C.next()).done);_=!0){E.value.removeCells(this,e,r)}}catch(t){S=!0,k=t}finally{try{_||null==C.return||C.return()}finally{if(S)throw k}}}}},{key:"updateCells",value:function(t,e,r){if(this.matchesFirstCell(e,r)){var n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;this.trickleCells.add(a)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}if(r){var u=!0,c=!1,f=void 0;try{for(var h,d=this.neighbors[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){h.value.updateCells(this,t,e,r)}}catch(t){c=!0,f=t}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}}}else{var p=!0,v=!1,w=void 0;try{for(var y,g=e[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var m=y.value;this.trickleCells.delete(m)}}catch(t){v=!0,w=t}finally{try{p||null==g.return||g.return()}finally{if(v)throw w}}var b=!0,_=!1,S=void 0;try{for(var k,E=this.neighbors[Symbol.iterator]();!(b=(k=E.next()).done);b=!0){k.value.removeCells(this,t,e)}}catch(t){_=!0,S=t}finally{try{b||null==E.return||E.return()}finally{if(_)throw S}}}}},{key:"removeCells",value:function(t,e,r){if(this._tile.isOr()?this.matchesFirstCell(r,null):this.isNo()){var n=!0,o=!1,l=void 0;try{for(var i,a=r[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;this.trickleCells.add(u)}}catch(t){o=!0,l=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}var c=!0,f=!1,h=void 0;try{for(var d,p=this.neighbors[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){d.value.addCells(this,e,r,s.d.STATIONARY)}}catch(t){f=!0,h=t}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}else{var v=!0,w=!1,y=void 0;try{for(var g,m=r[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;this.trickleCells.delete(b)}}catch(t){w=!0,y=t}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}var _=!0,S=!1,k=void 0;try{for(var E,C=this.neighbors[Symbol.iterator]();!(_=(E=C.next()).done);_=!0){E.value.removeCells(this,e,r)}}catch(t){S=!0,k=t}finally{try{_||null==C.return||C.return()}finally{if(S)throw k}}}}},{key:"hasCell",value:function(t){return this.trickleCells.has(t)}},{key:"matchesCellWantsToMove",value:function(t,e){var r=this._tile.hasCell(t);if(this._isNegated!==(r&&(this._direction===e||!this._direction)))return!0;if(this._direction){var n=!0,o=!1,l=void 0;try{for(var i,s=this._tile.getSpritesThatMatch(t)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(this._direction===t.getWantsToMove(a))return!0}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return!1}return!1}},{key:"matchesFirstCell",value:function(t,e){return this.matchesCellWantsToMove(t[0],e)}}]),e}(),R=function(t){function e(t,r,n,o){var l;return g(this,e),(l=p(this,v(e).call(this,t))).direction=r,l.debugFlag=o,l.allNeighbors=n,l.firstCells=new Set,l}return w(e,a["a"]),h(e,[{key:"_getAllNeighbors",value:function(){return this.allNeighbors}},{key:"hasMatches",value:function(t,e){return this.getMatches(t,e).length>0}}]),e}(),A=function(){function t(e){g(this,t),this.cellsAndNeighbors=e,this.cellKeys=new Map;var r=!0,n=!1,o=void 0;try{for(var l,i=this.cellsAndNeighbors[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value.cell;this.cellKeys.set(s,s.toKey())}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}return h(t,[{key:"firstCell",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.cellsAndNeighbors[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){return n.value.cell}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}throw new Error("BUG: ? No cells were included in the match")}},{key:"lastCell",value:function(){var t,e=!0,r=!1,n=void 0;try{for(var o,l=this.cellsAndNeighbors[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){t=o.value.cell}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}if(t)return t;throw new Error("BUG: ? No cells were included in the match")}},{key:"doesStillMatch",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.cellsAndNeighbors[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value,i=l.cell,s=l.condition;if(i.toKey()!==this.cellKeys.get(i)){if(!s.matchesCellSimple(i))return!1;this.cellKeys.set(i,i.toKey())}}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}return!0}},{key:"populateMagicOrTiles",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.cellsAndNeighbors[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value,s=i.cell;i.condition.populateMagicOrTiles(s,t)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"evaluate",value:function(t){var e=[],r=!0,n=!1,o=void 0;try{for(var l,i=this.cellsAndNeighbors[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,a=s.cell,u=s.condition,c=s.action;if(!c)throw new Error("BUG: Should not have tried to evaluate something when there is no action");var f=u.evaluate(c,a,t);f&&e.push(f)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}}]),t}(),I=function(e){function r(t,e,n,o){var l;g(this,r),(l=p(this,v(r).call(this,t,e,n,o))).actionDebugFlag=null,l.neighbors=n,l.ellipsisBracketListeners=new Map,l.spritesPresentInRowOrColumn=l.neighbors[0].spritesPresent.union(l.neighbors.map(function(t){return t.spritesPresent}));var s=[],a=!0,u=!1,c=void 0;try{for(var f,h=l.neighbors[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value,w=!0,y=!1,m=void 0;try{for(var b,_=d.anySpritesPresent[Symbol.iterator]();!(w=(b=_.next()).done);w=!0){var S=b.value;s.push(S)}}catch(t){y=!0,m=t}finally{try{w||null==_.return||_.return()}finally{if(y)throw m}}}}catch(t){u=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}return l.anySpritesPresentInRowOrColumn=(new i.a).union(s),l}return w(r,R),h(r,[{key:"toKey",value:function(){var t=this.dependsOnDirection()?this.direction:"";return"{".concat(t,"[").concat(this.neighbors.map(function(t){return t.toKey()}).join("|"),"]{debugging?").concat(!!this.debugFlag,"}}")}},{key:"dependsOnDirection",value:function(){return this.neighbors.length>1||!!this.neighbors.find(function(t){return t.dependsOnDirection()})}},{key:"subscribeToNeighborChanges",value:function(){var t=this;this.shouldUseOnDemandMethod()||this.neighbors.forEach(function(e,r){e.subscribeToTileChanges(t,r)})}},{key:"addEllipsisBracket",value:function(t,e){this.ellipsisBracketListeners.set(t,e)}},{key:"clearCaches",value:function(){this.firstCells.clear();var t=!0,e=!1,r=void 0;try{for(var n,o=this.neighbors[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"getNeighbors",value:function(){return this.neighbors}},{key:"prepareAction",value:function(t){var e=t;this.actionDebugFlag=e.debugFlag;for(var r=0;r<this.neighbors.length;r++){var n=this.neighbors[r],o=e.neighbors[r];n.prepareAction(o)}}},{key:"addCellsToEmptyRules",value:function(t){if(1===this.neighbors.length&&0===this.neighbors[0]._tilesWithModifier.size){var e=!0,r=!1,n=void 0;try{for(var o,l=t[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;this._addFirstCell(i)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}}},{key:"_addFirstCell",value:function(t){this.firstCells.add(t);var e=!0,r=!1,n=void 0;try{for(var o,l=this.ellipsisBracketListeners[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=u(o.value,2),s=i[0],a=i[1];s.addFirstCell(this,t,a)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"addCell",value:function(t,e,r,n,o,l){if(this.matchesDownstream(o,t)){var i=this.matchesUpstream(o,t);if(i)this._addFirstCell(i);else{var s=this.getUpstream(o,t);s&&this._removeFirstCell(s)}}else{this.getUpstream(o,t)&&this._removeFirstCell(o)}}},{key:"removeCell",value:function(t,e,r,n,o){var l=this.getFirstCellToRemove(o,t);l&&this.firstCells.has(l)&&this._removeFirstCell(l)}},{key:"shouldUseOnDemandMethod",value:function(){return"ondemand"===t.env.PUZZLESCRIPT_METHOD}},{key:"getMatchesByTrickling",value:function(t,e){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=this.firstCells[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;this.addToCellMatches(r,a,e)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}},{key:"getMatchesByLooping",value:function(t,e){var r=[],n=t.getCells(),o=n.length,l=n[0].length;switch(this.direction){case s.d.UP:case s.d.DOWN:for(var i=0;i<l;i++)if(t.colContainsSprites(i,this.spritesPresentInRowOrColumn,this.anySpritesPresentInRowOrColumn))for(var a=0;a<o;a++)this.addIfCellMatches(r,t.getCell(a,i),e);break;case s.d.LEFT:case s.d.RIGHT:for(var u=0;u<o;u++)if(t.rowContainsSprites(u,this.spritesPresentInRowOrColumn,this.anySpritesPresentInRowOrColumn))for(var c=0;c<l;c++)this.addIfCellMatches(r,t.getCell(u,c),e);break;default:throw new Error('BUG: Unsupported Direction "'.concat(this.direction,'"'))}return r}},{key:"getMatches",value:function(e,r){var n;if(this.shouldUseOnDemandMethod())n=this.getMatchesByLooping(e,r);else if(n=this.getMatchesByTrickling(e,r),t.env.VERIFY_MATCHES){var o=this.getMatchesByLooping(e,r);if(n.length!==o.length)throw this.getMatchesByTrickling(e,r),this.getMatchesByLooping(e,r),new Error("Match lengths differ. Expected ".concat(o.length," but found ").concat(n.length,". \n").concat(this.toString()))}return n}},{key:"a11yGetSprites",value:function(){var t=new Set,e=!0,r=!1,n=void 0;try{for(var o,l=this.neighbors[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value,s=!0,a=!1,u=void 0;try{for(var c,f=i._tilesWithModifier[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,d=!0,p=!1,v=void 0;try{for(var w,y=h._tile.getSprites()[Symbol.iterator]();!(d=(w=y.next()).done);d=!0){var g=w.value;t.add(g)}}catch(t){p=!0,v=t}finally{try{d||null==y.return||y.return()}finally{if(p)throw v}}}}catch(t){a=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(a)throw u}}}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return[t]}},{key:"_removeFirstCell",value:function(t){if(this.firstCells.has(t)){0,this.firstCells.delete(t);var e=!0,r=!1,n=void 0;try{for(var o,l=this.ellipsisBracketListeners[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=u(o.value,2),s=i[0],a=i[1];s.removeFirstCell(this,t,a)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}}},{key:"matchesDownstream",value:function(t,e){for(var r=!0,n=t,o=e+1;o<this.neighbors.length;o++)if(!(n=n.getNeighbor(this.direction))||0!==this.neighbors[o]._tilesWithModifier.size&&!this.neighbors[o].matchesCellSimple(n)){r=!1;break}return r}},{key:"getUpstream",value:function(t,e){for(var r=t,n=e-1;n>=0;n--)if(!(r=r.getNeighbor(Object(s.i)(this.direction))))return null;return r}},{key:"matchesUpstream",value:function(t,e){for(var r=!0,n=t,o=e-1;o>=0;o--)if(!(n=n.getNeighbor(Object(s.i)(this.direction)))||0!==this.neighbors[o]._tilesWithModifier.size&&!this.neighbors[o].matchesCellSimple(n)){r=!1;break}return r?n:null}},{key:"getFirstCellToRemove",value:function(t,e){for(var r=!0,n=t,o=e-1;o>=0;o--)if(!(n=n.getNeighbor(Object(s.i)(this.direction)))){r=!1;break}return r?n:null}},{key:"addToCellMatches",value:function(t,e,r){for(var n=[],o=e,l=!0,i=0;i<this.neighbors.length;i++){if(!o){l=!1;break}var s=this.neighbors[i],a=null;r&&(a=r.neighbors[i]||null);var u={cell:o,condition:s,action:a};n.push(u),o=o.getNeighbor(this.direction)}l&&t.push(new A(n))}},{key:"addIfCellMatches",value:function(t,e,r){this.neighbors[0].matchesCellSimple(e)&&this.matchesDownstream(e,0)&&this.addToCellMatches(t,e,r)}}]),r}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(C||(C={}));var L,P=function(){function t(){g(this,t),this.map=new Map}return h(t,[{key:"clear",value:function(){this.map.clear()}},{key:"getB",value:function(t){return this.map.get(t)}},{key:"add",value:function(t,e){var r=this.map.get(t);return r||(r=new Set,this.map.set(t,r)),!r.has(e)&&(r.add(e),!0)}},{key:"deleteAllA",value:function(t){this.map.delete(t)}},{key:"deleteAllB",value:function(t){var e=new Set,r=!0,n=!1,o=void 0;try{for(var l,i=this.map[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=u(l.value,2),a=s[0],c=s[1];c.has(t)&&(c.delete(t),0===c.size&&(this.map.delete(a),e.add(a)))}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"sizeA",value:function(){return this.map.size}}]),t}(),F=function(t){function e(t,r,n,o,l){var i;return g(this,e),(i=p(this,v(e).call(this,t,r,[].concat(c(n),c(o)),l))).beforeEllipsisBracket=new I(t,r,n,l),i.afterEllipsisBracket=new I(t,r,o,l),i.linkages=new P,i}return w(e,R),h(e,[{key:"subscribeToNeighborChanges",value:function(){this.beforeEllipsisBracket.subscribeToNeighborChanges(),this.afterEllipsisBracket.subscribeToNeighborChanges(),this.beforeEllipsisBracket.addEllipsisBracket(this,C.BEFORE),this.afterEllipsisBracket.addEllipsisBracket(this,C.AFTER)}},{key:"toKey",value:function(){return"[".concat(this.direction," ").concat(this.beforeEllipsisBracket.toKey()," ... ").concat(this.afterEllipsisBracket.toKey(),"]}")}},{key:"clearCaches",value:function(){this.firstCells.clear(),this.linkages.clear(),this.beforeEllipsisBracket.clearCaches(),this.afterEllipsisBracket.clearCaches()}},{key:"prepareAction",value:function(t){var e=t;this.beforeEllipsisBracket.prepareAction(e.beforeEllipsisBracket),this.afterEllipsisBracket.prepareAction(e.afterEllipsisBracket)}},{key:"addCellsToEmptyRules",value:function(t){this.beforeEllipsisBracket.addCellsToEmptyRules(t),this.afterEllipsisBracket.addCellsToEmptyRules(t)}},{key:"addCell",value:function(t,e,r,n,o,l){throw new Error("BUG: We should not be subscribed to these events")}},{key:"removeCell",value:function(t,e,r,n,o){throw new Error("BUG: We should not be subscribed to these events")}},{key:"addFirstCell",value:function(t,e,r){}},{key:"removeFirstCell",value:function(t,e,r){if(this.checkInvariants(),t===this.beforeEllipsisBracket){if(this.linkages.deleteAllA(e),this.firstCells.has(e))throw new Error("BUG: Unreachable code")}else{if(t!==this.afterEllipsisBracket)throw new Error("BUG: Bracket should only ever be the before-ellipsis or after-ellipsis one");if(this.linkages.deleteAllB(e).size>0)throw new Error("BUG: Unreachable code")}this.checkInvariants()}},{key:"getMatches",value:function(t,e){var r,n,o=[];e?(r=this.beforeEllipsisBracket.getMatches(t,e.beforeEllipsisBracket),n=this.afterEllipsisBracket.getMatches(t,e.afterEllipsisBracket)):(r=this.beforeEllipsisBracket.getMatches(t,null),n=this.afterEllipsisBracket.getMatches(t,null));var l=new P;if(0===r.length||0===n.length)return[];switch(this.direction){case s.d.UP:case s.d.DOWN:var i=!0,a=!1,u=void 0;try{for(var f,h=r[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){var d=f.value;l.add(d.lastCell().colIndex,d)}}catch(t){a=!0,u=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw u}}var p=!0,v=!1,w=void 0;try{for(var y,g=n[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var m=y.value,b=m.firstCell(),_=b.colIndex,S=b.rowIndex,k=!0,E=!1,C=void 0;try{for(var T,O=(l.getB(_)||[])[Symbol.iterator]();!(k=(T=O.next()).done);k=!0){var M=T.value,x=M.lastCell().rowIndex;(this.direction===s.d.DOWN?x<S:S<x)&&o.push(new A(c(M.cellsAndNeighbors).concat(c(m.cellsAndNeighbors))))}}catch(t){E=!0,C=t}finally{try{k||null==O.return||O.return()}finally{if(E)throw C}}}}catch(t){v=!0,w=t}finally{try{p||null==g.return||g.return()}finally{if(v)throw w}}break;case s.d.LEFT:case s.d.RIGHT:var R=!0,I=!1,L=void 0;try{for(var F,N=r[Symbol.iterator]();!(R=(F=N.next()).done);R=!0){var D=F.value;l.add(D.lastCell().rowIndex,D)}}catch(t){I=!0,L=t}finally{try{R||null==N.return||N.return()}finally{if(I)throw L}}var B=!0,G=!1,j=void 0;try{for(var U,W=n[Symbol.iterator]();!(B=(U=W.next()).done);B=!0){var H=U.value,q=H.firstCell(),z=(S=q.rowIndex,_=q.colIndex,!0),V=!1,K=void 0;try{for(var J,Y=(l.getB(S)||[])[Symbol.iterator]();!(z=(J=Y.next()).done);z=!0){var X=J.value,$=X.lastCell().colIndex;(this.direction===s.d.RIGHT?$<_:_<$)&&o.push(new A(c(X.cellsAndNeighbors).concat(c(H.cellsAndNeighbors))))}}catch(t){V=!0,K=t}finally{try{z||null==Y.return||Y.return()}finally{if(V)throw K}}}}catch(t){G=!0,j=t}finally{try{B||null==W.return||W.return()}finally{if(G)throw j}}break;default:throw new Error("BUG: Invalid direction ".concat(this.direction))}return o}},{key:"a11yGetSprites",value:function(){return[].concat(c(this.beforeEllipsisBracket.a11yGetSprites()),c(this.afterEllipsisBracket.a11yGetSprites()))}},{key:"checkInvariants",value:function(){if(this.firstCells.size!==this.linkages.sizeA())throw new Error("BUG: Invariant violation")}}]),e}();!function(t){t.ADD="ADD",t.REPLACE="REPLACE",t.REMOVE="REMOVE",t.MOVE="MOVE"}(L||(L={}));var N=function(){function t(e,r,n,o,l){if(g(this,t),!e)throw new Error("BUG: collisionLayer is not set");this.collisionLayer=e,this.actionTileWithModifier=r,this.mightNotFindConditionButThatIsOk=n,this.conditionSpritesToRemove=o,this.newDirection=l}return h(t,[{key:"replace",value:function(t,e,r){var n=!1,o=[];if(this.actionTileWithModifier){var l;if(this.actionTileWithModifier.isRandom()){var i=this.actionTileWithModifier._tile.getSprites();l=[i[Object(s.h)(i.length)]]}else if(this.actionTileWithModifier._tile.isOr()){var a=e.get(this.actionTileWithModifier._tile);if(!a)throw new Error("BUG: Magic OR tile not found\n".concat(this.actionTileWithModifier.toString()));l=a}else l=this.actionTileWithModifier._tile.getSprites();var u=[],c=[],f=!0,h=!1,d=void 0;try{for(var p,v=l[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=p.value,y=w.getCollisionLayer(),g=this.newDirection||t.getCollisionLayerWantsToMove(y),m=void 0;if(t.hasSprite(w)){if(!g)throw new Error("BUG: Invariant violation. if the sprite exists then wantsToMove must also exist (at least it would be STATIONARY)");m=t.updateSprite(w,g)}else{var b=t.getSpriteByCollisionLayer(y);b?c.push({oldSprite:b,newSprite:w}):u.push(w),m=t.addSprite(w,g)}n=n||m}}catch(t){h=!0,d=t}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}o.push({type:L.ADD,cell:t,sprites:u}),o.push({type:L.REPLACE,cell:t,replacements:c})}else{var _=new Set,S=t.getSpriteByCollisionLayer(this.collisionLayer);if(!S&&this.mightNotFindConditionButThatIsOk)return{didActuallyChange:!1,messages:[]};if(!S)throw new Error("BUG: No tile found");if(!this.conditionSpritesToRemove)throw new Error("BUG: Not implemented (just commented out)");if(this.conditionSpritesToRemove._tile.isOr()){if(!r.has(this.conditionSpritesToRemove._tile)){var k=S.getSprites(),E=!0,C=!1,T=void 0;try{for(var O,M=this.conditionSpritesToRemove._tile.getSprites()[Symbol.iterator]();!(E=(O=M.next()).done);E=!0){var x=O.value;if(k.indexOf(x)>=0){var R=t.removeSprite(x);_.add(x),n=n||R,R&&r.add(this.conditionSpritesToRemove._tile);break}}}catch(t){C=!0,T=t}finally{try{E||null==M.return||M.return()}finally{if(C)throw T}}}}else{var A=new Set(this.conditionSpritesToRemove._tile.getSprites()),I=!0,P=!1,F=void 0;try{for(var N,D=S.getSprites()[Symbol.iterator]();!(I=(N=D.next()).done);I=!0){var B=N.value;if(A.has(B)){var G=t.removeSprite(B);_.add(B),n=n||G}}}catch(t){P=!0,F=t}finally{try{I||null==D.return||D.return()}finally{if(P)throw F}}}o.push({type:L.REMOVE,cell:t,sprites:_})}return{didActuallyChange:n,messages:o}}}]),t}(),D=function(){function t(e,r,n){if(g(this,t),!e)throw new Error("BUG: collisionLayer is not set");this.collisionLayer=e,this.direction=r,this.mightNotFindConditionButThatIsOk=n}return h(t,[{key:"replace",value:function(t){var e=this.direction;if(this.mightNotFindConditionButThatIsOk&&!t.getSpriteByCollisionLayer(this.collisionLayer))return{didActuallyChange:!1};if(this.direction===s.d.RANDOMDIR){if(t.getCollisionLayerWantsToMove(this.collisionLayer)!==s.d.STATIONARY)return{didActuallyChange:!1};switch(Object(s.h)(4)){case 0:e=s.d.UP;break;case 1:e=s.d.DOWN;break;case 2:e=s.d.LEFT;break;case 3:e=s.d.RIGHT;break;default:throw new Error("BUG: invalid random number chosen")}}return{didActuallyChange:t.setWantsToMoveCollisionLayer(this.collisionLayer,e)}}}]),t}(),B=function(t){function e(t,r,n){var l;g(this,e),(l=p(this,v(e).call(this,t)))._tilesWithModifier=r,l.brackets=new Map,l.debugFlag=n,l.staticCache=new Map,l.spritesPresent=new i.a,l.spritesMissing=new i.a,l.anySpritesPresent=new Set,l.spriteMovementsPresent=new Map,l.orTileMovementsPresent=new Map,l.trickleCells=new Set,l.lruCache=new o.a(b),l.cacheYesBitSets=new Map,l.cacheNoBitSets=new Map,l.cacheDirections=new Map,l.cacheMultiCollisionLayerTiles=new Set;var s=c(r),a=s.filter(function(t){return t.isNo()}),u=s.filter(function(t){return!t.isNo()}),f=!0,h=!1,d=void 0;try{for(var w,y=u[Symbol.iterator]();!(f=(w=y.next()).done);f=!0){var _=w.value;if(_._tile.hasSingleCollisionLayer()){var S=!0,k=!1,E=void 0;try{for(var C,T=_._tile.getSprites()[Symbol.iterator]();!(S=(C=T.next()).done);S=!0){var O=C.value,M=O.getCollisionLayer();_._direction&&l.cacheDirections.set(M,_._direction);var x=l.cacheYesBitSets.get(M);x||(x=new m,l.cacheYesBitSets.set(M,x)),x.set(M.getBitSetIndexOf(O))}}catch(t){k=!0,E=t}finally{try{S||null==T.return||T.return()}finally{if(k)throw E}}}else l.cacheMultiCollisionLayerTiles.add(_);if(_._tile.isOr())l.anySpritesPresent.add(new i.a(_._tile.getSprites())),_._direction&&l.orTileMovementsPresent.set(_._tile,_._direction);else{l.spritesPresent.addAll(_._tile.getSprites());var R=!0,A=!1,I=void 0;try{for(var L,P=_._tile.getSprites()[Symbol.iterator]();!(R=(L=P.next()).done);R=!0){var F=L.value;if(_._direction){var N=l.spriteMovementsPresent.get(F.getCollisionLayer());if(N&&N!==_._direction)throw new Error("BUG??? prev=".concat(N," ").concat(_._direction));l.spriteMovementsPresent.set(F.getCollisionLayer(),_._direction)}}}catch(t){A=!0,I=t}finally{try{R||null==P.return||P.return()}finally{if(A)throw I}}}}}catch(t){h=!0,d=t}finally{try{f||null==y.return||y.return()}finally{if(h)throw d}}var D=!0,B=!1,G=void 0;try{for(var j,U=a[Symbol.iterator]();!(D=(j=U.next()).done);D=!0){var W=j.value;if(W._tile.hasSingleCollisionLayer()){var H=!0,q=!1,z=void 0;try{for(var V,K=W._tile.getSprites()[Symbol.iterator]();!(H=(V=K.next()).done);H=!0){var J=V.value,Y=J.getCollisionLayer();if(W._direction)throw new Error("BUG: Unreachable code");var X=l.cacheNoBitSets.get(Y);X||(X=new m,l.cacheNoBitSets.set(Y,X)),X.set(Y.getBitSetIndexOf(J))}}catch(t){q=!0,z=t}finally{try{H||null==K.return||K.return()}finally{if(q)throw z}}}else l.cacheMultiCollisionLayerTiles.add(W);W._tile.isOr(),l.spritesMissing.addAll(W._tile.getSprites())}}catch(t){B=!0,G=t}finally{try{D||null==U.return||U.return()}finally{if(B)throw G}}return l}return w(e,a["a"]),h(e,[{key:"toKey",value:function(){return"{".concat(c(this._tilesWithModifier).map(function(t){return t.toKey()}).sort().join(" ")," debugging?").concat(!!this.debugFlag,"}")}},{key:"dependsOnDirection",value:function(){return!!c(this._tilesWithModifier).find(function(t){return!!t._direction})}},{key:"prepareAction",value:function(t){if(!this.staticCache.has(t)){var e=new Map,r=new Map,n=!0,o=!1,l=void 0;try{for(var i,a=this._tilesWithModifier[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(c._tile.isOr()&&!c._tile.hasSingleCollisionLayer())c.isNo()||r.set(c._tile,c);else if(c._tile.hasSingleCollisionLayer()){var f=c._tile.getCollisionLayer();if(!f)throw new Error("BUG: Tile is not assigned to a collision layer\n".concat(c._tile.toString()));e.has(f)||e.set(f,new S(c,null,!1))}else{var h=!0,d=!1,p=void 0;try{for(var v,w=c._tile.getSprites()[Symbol.iterator]();!(h=(v=w.next()).done);h=!0){var y=v.value.getCollisionLayer();e.has(y)||e.set(y,new S(c,null,!1))}}catch(t){d=!0,p=t}finally{try{h||null==w.return||w.return()}finally{if(d)throw p}}}}}catch(t){o=!0,l=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw l}}var g=new Map(r.entries()),m=!0,b=!1,_=void 0;try{for(var k,E=t._tilesWithModifier[Symbol.iterator]();!(m=(k=E.next()).done);m=!0){var C=k.value;if(C._tile.isOr()&&!C._tile.hasSingleCollisionLayer()){var T=r.get(C._tile);if(T){g.delete(C._tile);var O=T;if(O._direction!==C._direction){var M=!0,R=!1,A=void 0;try{for(var I,L=C._tile.getSprites()[Symbol.iterator]();!(M=(I=L.next()).done);M=!0){var P=I.value,F=P.getCollisionLayer();e.has(F)||e.set(F,new S(new x(O.__source,O._isNegated,O._isRandom,O._direction,P,O._debugFlag),new x(C.__source,C._isNegated,C._isRandom,C._direction,P,C._debugFlag),!0))}}catch(t){R=!0,A=t}finally{try{M||null==L.return||L.return()}finally{if(R)throw A}}}}else if(C.isNo()){var B=!0,G=!1,j=void 0;try{for(var U,W=C._tile.getSprites()[Symbol.iterator]();!(B=(U=W.next()).done);B=!0){var H=U.value.getCollisionLayer();if(!e.has(H)){var q=new x(C.__source,!1,C._isRandom,C._direction,C._tile,C._debugFlag);e.set(H,new S(q,null,!0))}}}catch(t){G=!0,j=t}finally{try{B||null==W.return||W.return()}finally{if(G)throw j}}}else{var z=!0,V=!1,K=void 0;try{for(var J,Y=C._tile.getSprites()[Symbol.iterator]();!(z=(J=Y.next()).done);z=!0){var X=J.value.getCollisionLayer();if(!e.has(X)){var $=new x(C.__source,!1,C._isRandom,C._direction,C._tile,C._debugFlag);e.set(X,new S(null,$,!0))}}}catch(t){V=!0,K=t}finally{try{z||null==Y.return||Y.return()}finally{if(V)throw K}}}}else{var Z=!0,Q=!1,tt=void 0;try{for(var et,rt=C.getCollisionLayers()[Symbol.iterator]();!(Z=(et=rt.next()).done);Z=!0){var nt=et.value;if(!nt)throw new Error("BUG: Tile is not assigned to a collision layer.\n".concat(C._tile.toString()));var ot=e.get(nt),lt=ot&&ot.condition||null;if(lt&&lt.equals(C))e.delete(nt);else if(C.isNo())if(ot){if(ot.condition===C)throw new Error("BUG: Unreachable code")}else{var it=new x(C.__source,!1,!1,C._direction,C._tile,C._debugFlag);e.set(nt,new S(it,null,!0))}else ot?ot.action=C:e.set(nt,new S(null,C,!1))}}catch(t){Q=!0,tt=t}finally{try{Z||null==rt.return||rt.return()}finally{if(Q)throw tt}}}}}catch(t){b=!0,_=t}finally{try{m||null==E.return||E.return()}finally{if(b)throw _}}if(g.size>0){var st=!0,at=!1,ut=void 0;try{for(var ct,ft=g.values()[Symbol.iterator]();!(st=(ct=ft.next()).done);st=!0){var ht=ct.value,dt=!0,pt=!1,vt=void 0;try{for(var wt,yt=ht._tile.getSprites()[Symbol.iterator]();!(dt=(wt=yt.next()).done);dt=!0){var gt=wt.value.getCollisionLayer();if(!e.has(gt)){var mt=new x(ht.__source,!1,!1,ht._direction,ht._tile,ht._debugFlag);e.set(gt,new S(mt,null,!0))}}}catch(t){pt=!0,vt=t}finally{try{dt||null==yt.return||yt.return()}finally{if(pt)throw vt}}}}catch(t){at=!0,ut=t}finally{try{st||null==ft.return||ft.return()}finally{if(at)throw ut}}}var bt=new Set,_t=new Set,St=!0,kt=!1,Et=void 0;try{for(var Ct,Tt=e.entries()[Symbol.iterator]();!(St=(Ct=Tt.next()).done);St=!0){var Ot=u(Ct.value,2),Mt=Ot[0],xt=Ot[1],Rt=xt.condition,At=xt.action,It=xt.extra;if(Rt&&At){if(Rt!==At){var Lt=null;(Rt._direction!==At._direction||Rt.isNo())&&(Lt=At._direction||s.d.STATIONARY),!Rt._tile.equals(At._tile)||Rt.isNo()?bt.add(new N(Mt,At,It,null,Lt)):Lt&&_t.add(new D(Mt,Lt,It))}}else Rt?Rt.isNo()||bt.add(new N(Mt,null,It,Rt,null)):At&&(At.isNo()||bt.add(new N(Mt,At,It,null,At._direction||s.d.STATIONARY)))}}catch(t){kt=!0,Et=t}finally{try{St||null==Tt.return||Tt.return()}finally{if(kt)throw Et}}this.staticCache.set(t,{replaceTiles:bt,replaceDirections:_t})}}},{key:"evaluate",value:function(t,e,r){var n=this.staticCache.get(t);if(!n)throw new Error("BUG: Missing actionNeighbor. Should have been prepared before");var o=n.replaceTiles,l=n.replaceDirections,i=!1,s=!1,a=new Set,u=[],f=!0,h=!1,d=void 0;try{for(var p,v=o[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=p.value.replace(e,r,a),y=w.didActuallyChange,g=w.messages;y&&(u=[].concat(c(u),c(g))),i=i||y||!1}}catch(t){h=!0,d=t}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}var m=!0,b=!1,_=void 0;try{for(var S,E=l[Symbol.iterator]();!(m=(S=E.next()).done);m=!0){y=S.value.replace(e).didActuallyChange;s=s||y}}catch(t){b=!0,_=t}finally{try{m||null==E.return||E.return()}finally{if(b)throw _}}return i||s?new k(e,u):null}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this._tilesWithModifier[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"populateMagicOrTiles",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var l,i=this._tilesWithModifier[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var a=l.value;if(!a.isNo()&&a._tile.isOr()){var u=Object(s.o)(new Set(a._tile.getSprites()),t.getSpritesAsSet());e.set(a._tile,u)}}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"subscribeToTileChanges",value:function(t,e){var r=this,n=this.brackets.get(t);n||(n=new Set,this.brackets.set(t,n)),n.add(e),this._tilesWithModifier.forEach(function(t){t.subscribeToCellChanges(r)})}},{key:"matchesCellSimple",value:function(t){return this.matchesCell(t,null,null)}},{key:"addCells",value:function(t,e,r,n){var o=!0,l=!1,i=void 0;try{for(var s,a=r[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var c=s.value;if(this.matchesTiles(c)){this.trickleCells.add(c);var f=!0,h=!1,d=void 0;try{for(var p,v=this.brackets.entries()[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=u(p.value,2),y=w[0],g=w[1],m=!0,b=!1,_=void 0;try{for(var S,k=g[Symbol.iterator]();!(m=(S=k.next()).done);m=!0){var E=S.value;y.addCell(E,this,t,e,c,n)}}catch(t){b=!0,_=t}finally{try{m||null==k.return||k.return()}finally{if(b)throw _}}}}catch(t){h=!0,d=t}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}else if(this.trickleCells.has(c))throw new Error("BUG: Should be unreachable")}}catch(t){l=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}}},{key:"updateCells",value:function(t,e,r,n){this.addCells(t,e,r,n)}},{key:"removeCells",value:function(t,e,r){var n=!0,o=!1,l=void 0;try{for(var i,s=r[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(!this.matchesTiles(a)){this.trickleCells.delete(a);var c=!0,f=!1,h=void 0;try{for(var d,p=this.brackets.entries()[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=u(d.value,2),w=v[0],y=v[1],g=!0,m=!1,b=void 0;try{for(var _,S=y[Symbol.iterator]();!(g=(_=S.next()).done);g=!0){var k=_.value;w.removeCell(k,this,t,e,a)}}catch(t){m=!0,b=t}finally{try{g||null==S.return||S.return()}finally{if(m)throw b}}}}catch(t){f=!0,h=t}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"check1",value:function(t){return t.spriteBitSet.containsNone(this.spritesMissing)&&t.spriteBitSet.containsAll(this.spritesPresent)}},{key:"check2",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.anySpritesPresent[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;if(!t.spriteBitSet.containsAny(i))return!1}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!0}},{key:"check3",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.spriteMovementsPresent[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=u(o.value,2),s=i[0];if(i[1]!==t.getCollisionLayerWantsToMove(s))return!1}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!0}},{key:"check4",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.orTileMovementsPresent[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=u(o.value,2),s=i[0],a=i[1];if(s.hasSingleCollisionLayer()){if(a!==t.getCollisionLayerWantsToMove(s.getCollisionLayer()))return!1}else{var c=!1,f=!1,h=!0,d=!1,p=void 0;try{for(var v,w=s.getSprites()[Symbol.iterator]();!(h=(v=w.next()).done);h=!0){var y=v.value;if(t.spriteBitSet.has(y))c=!0,a===t.getCollisionLayerWantsToMove(y.getCollisionLayer())&&(f=!0)}}catch(t){d=!0,p=t}finally{try{h||null==w.return||w.return()}finally{if(d)throw p}}if(!f)return!1;if(!c)throw new Error("BUG: Could not find sprite. One should have already been matched before")}}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!0}},{key:"matchesCell",value:function(t,e,r){var n=this;return this.lruCache.get("[".concat(t.toKey(),"]"),function(){return n.check1(t)&&n.check2(t)&&n.check3(t)&&n.check4(t)})}},{key:"matchesTiles",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this._tilesWithModifier[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){if(!o.value.hasCell(t))return!1}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!0}}]),e}()}).call(this,r(107))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===r(t)?null!==t:"function"==typeof t}},function(t,e,r){var n=r(63)("wks"),o=r(42),l=r(4).Symbol,i="function"==typeof l;(t.exports=function(t){return n[t]||(n[t]=i&&l[t]||(i?l:o)("Symbol."+t))}).store=n},function(t,e,r){var n=r(29),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,r){t.exports=!r(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(3),o=r(110),l=r(31),i=Object.defineProperty;e.f=r(10)?Object.defineProperty:function(t,e,r){if(n(t),e=l(e,!0),n(r),o)try{return i(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(32);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){for(var r=1,n=1,o=0,l=0,i=null,s=null,a=-1;o<e;){var u=t.charAt(o++);"\n"===u?(r++,n=1,a=l,l=o):"\r"!==u&&n++}var c=t.indexOf("\n",l);if(-1===c)c=t.length;else{var f=t.indexOf("\n",c+1);i=(i=-1===f?t.slice(c):t.slice(c,f)).replace(/^\r?\n/,"").replace(/\r$/,"")}return a>=0&&(s=t.slice(a,l).replace(/\r?\n$/,"")),{lineNum:r,colNum:n,line:t.slice(l,c).replace(/\r$/,""),prevLine:s,nextLine:i}}r.d(e,"a",function(){return l});var l=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("BUG: failed to provide the source when constructing this object");this.__source=e,this.__coverageCount=null}var e,r,l;return e=t,(r=[{key:"__getSourceLineAndColumn",value:function(){var t=this.__source;return o(t.code,t.sourceOffset)}},{key:"toString",value:function(){var t=this.__source,e=o(t.code,t.sourceOffset),r=e.lineNum,n=e.colNum,l=e.line;return"".concat(l,"\nSource: ").concat(r,":").concat(n)}},{key:"toSourceString",value:function(){var t=this.__source,e=o(t.code,t.sourceOffset).lineNum;return t.code.split("\n")[e-1]}},{key:"__getLineAndColumnRange",value:function(){var t=this.__source,e=o(t.code,t.sourceOffset),r=e.lineNum,n=e.colNum;return{start:{line:r,col:n},end:{line:r,col:n+1}}}},{key:"__incrementCoverage",value:function(){0}}])&&n(e.prototype,r),l&&n(e,l),t}()},function(t,e,r){"use strict";r.d(e,"d",function(){return v}),r.d(e,"f",function(){return w}),r.d(e,"e",function(){return y}),r.d(e,"c",function(){return m}),r.d(e,"a",function(){return b}),r.d(e,"b",function(){return _});var n=r(0),o=r(13);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function c(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=r(106),v=function(t){function e(t,r,n){var o;return s(this,e),(o=c(this,f(e).call(this,t))).name=r,o._optionalLegendChar=n,o.trickleCells=new Set,o.trickleTiles=new Set,o.trickleTilesWithModifier=new Set,o.allSpritesBitSetIndex=-1,o.collisionLayer=null,o.bitSet=null,o}return h(e,o["a"]),u(e,[{key:"isOr",value:function(){return!1}},{key:"equals",value:function(t){return this===t}},{key:"getName",value:function(){return this.name}},{key:"isBackground",value:function(){return"background"===this.name.toLowerCase()}},{key:"_getDescendantTiles",value:function(){return[]}},{key:"getSprites",value:function(){return[this]}},{key:"hasCollisionLayer",value:function(){return!!this.collisionLayer}},{key:"hasSingleCollisionLayer",value:function(){return this.hasCollisionLayer()}},{key:"setCollisionLayer",value:function(t){this.collisionLayer=t}},{key:"setCollisionLayerAndIndex",value:function(t,e){this.collisionLayer=t,this.bitSet=new p,this.bitSet.set(e)}},{key:"getCollisionLayer",value:function(){if(!this.collisionLayer)throw new Error("ERROR: This sprite was not in a Collision Layer\n".concat(this.toString()));return this.collisionLayer}},{key:"clearCaches",value:function(){this.trickleCells.clear()}},{key:"hasCell",value:function(t){return this.trickleCells.has(t)}},{key:"matchesCell",value:function(t){return t.getSpritesAsSet().has(this)}},{key:"getSpritesThatMatch",value:function(t){return t.getSpritesAsSet().has(this)?new Set([this]):new Set}},{key:"subscribeToCellChanges",value:function(t){this.trickleTilesWithModifier.add(t)}},{key:"subscribeToCellChangesTile",value:function(t){this.trickleTiles.add(t)}},{key:"addCell",value:function(t,e){this.addCells(this,[t],e)}},{key:"removeCell",value:function(t){this.removeCells(this,[t])}},{key:"updateCell",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var l,i=this.trickleTiles[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){l.value.updateCells(this,[t],e)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}var s=!0,a=!1,u=void 0;try{for(var c,f=this.trickleTilesWithModifier[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){c.value.updateCells(this,[t],e)}}catch(t){a=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(a)throw u}}}},{key:"addCells",value:function(t,e,r){var n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(this.trickleCells.has(a))throw new Error("BUG: should not be trying to add a cell that has already been matched (right?)");this.trickleCells.add(a)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}var u=!0,c=!1,f=void 0;try{for(var h,d=this.trickleTiles[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){h.value.addCells(this,e,r)}}catch(t){c=!0,f=t}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}var p=!0,v=!1,w=void 0;try{for(var y,g=this.trickleTilesWithModifier[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){y.value.addCells(this,this,e,r)}}catch(t){v=!0,w=t}finally{try{p||null==g.return||g.return()}finally{if(v)throw w}}}},{key:"updateCells",value:function(t,e,r){throw new Error("BUG: Unreachable code")}},{key:"removeCells",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;this.trickleCells.delete(s)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}var a=!0,u=!1,c=void 0;try{for(var f,h=this.trickleTiles[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){f.value.removeCells(this,e)}}catch(t){u=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}var d=!0,p=!1,v=void 0;try{for(var w,y=this.trickleTilesWithModifier[Symbol.iterator]();!(d=(w=y.next()).done);d=!0){w.value.removeCells(this,this,e)}}catch(t){p=!0,v=t}finally{try{d||null==y.return||y.return()}finally{if(p)throw v}}}},{key:"has",value:function(t){return this.trickleCells.has(t)}},{key:"hasNegationTileWithModifier",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.trickleTilesWithModifier[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){if(n.value.isNo())return!0}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}var l=!0,i=!1,s=void 0;try{for(var a,u=this.trickleTiles[Symbol.iterator]();!(l=(a=u.next()).done);l=!0){if(a.value.hasNegationTileWithModifier())return!0}}catch(t){i=!0,s=t}finally{try{l||null==u.return||u.return()}finally{if(i)throw s}}return!1}},{key:"getCellsThatMatch",value:function(t){var e=this;return this.trickleCells.size>0?this.trickleCells:t?new Set(i(t).filter(function(t){return e.matchesCell(t)})):new Set}}]),e}(),w=function(t){function e(t,r,n,o){var l;return s(this,e),(l=c(this,f(e).call(this,t,r,n))).color=o[0],l}return h(e,v),u(e,[{key:"isTransparent",value:function(){return this.color.isTransparent()}},{key:"hasAlpha",value:function(){return this.color.hasAlpha()}},{key:"hasPixels",value:function(){return!1}},{key:"getPixels",value:function(t,e){for(var r=[],n=0;n<t;n++){r.push([]);for(var o=0;o<e;o++)r[n].push(this.color)}return r}}]),e}(),y=function(t){function e(t,r,n,o){var l;s(this,e),(l=c(this,f(e).call(this,t,r,n))).pixels=o,l._isTransparent=!0,l._hasAlpha=!1;var i=!0,a=!1,u=void 0;try{for(var h,d=o[Symbol.iterator]();!(i=(h=d.next()).done);i=!0){var p=h.value,v=!0,w=!1,y=void 0;try{for(var g,m=p[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;b.isTransparent()||(l._isTransparent=!1),b.hasAlpha()&&(l._hasAlpha=!0)}}catch(t){w=!0,y=t}finally{try{v||null==m.return||m.return()}finally{if(w)throw y}}}}catch(t){a=!0,u=t}finally{try{i||null==d.return||d.return()}finally{if(a)throw u}}return l}return h(e,v),u(e,[{key:"isTransparent",value:function(){return this._isTransparent}},{key:"hasAlpha",value:function(){return this._hasAlpha}},{key:"getSprites",value:function(){return[this]}},{key:"hasPixels",value:function(){return!0}},{key:"getPixels",value:function(t,e){return this.pixels.map(function(t){return t.map(function(t){return t})})}}]),e}(),g=function(t){function e(t,r,n){var o;return s(this,e),(o=c(this,f(e).call(this,t))).spriteNameOrLevelChar=r,o.tiles=n,o.trickleCells=new Set,o.trickleTilesWithModifier=new Set,o.collisionLayer=null,o.spritesCache=null,o}return h(e,o["a"]),u(e,[{key:"equals",value:function(t){return this.isOr()===t.isOr()&&0===Object(n.m)(new Set(this.getSprites()),t.getSprites()).size}},{key:"isOr",value:function(){return!1}},{key:"getName",value:function(){return this.spriteNameOrLevelChar}},{key:"_getDescendantTiles",value:function(){return this.tiles.concat(Object(n.g)(this.tiles.map(function(t){return t._getDescendantTiles()})))}},{key:"getSprites",value:function(){return this.spritesCache||(this.spritesCache=Object(n.g)(this.tiles.map(function(t){return t.getSprites()})).sort(function(t,e){return t.getCollisionLayer().id-e.getCollisionLayer().id}).reverse()),this.spritesCache}},{key:"setCollisionLayer",value:function(t){this.collisionLayer=t}},{key:"getCollisionLayer",value:function(){if(this.collisionLayer)return this.collisionLayer;var t=this.getSprites()[0].getCollisionLayer(),e=!0,r=!1,n=void 0;try{for(var o,l=this.getSprites()[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){if(o.value.getCollisionLayer()!==t)throw new Error("ooh, sprites in a tile have different collision layers... that's a problem\n".concat(this.toString()))}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return t}},{key:"getCollisionLayers",value:function(){var t=new Set,e=!0,r=!1,n=void 0;try{for(var o,l=this.getSprites()[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var s=o.value;t.add(s.getCollisionLayer())}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return i(t)}},{key:"getCellsThatMatch",value:function(t){var e=new Set,r=!0,n=!1,o=void 0;try{for(var l,i=this.getSprites()[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,a=!0,u=!1,c=void 0;try{for(var f,h=s.getCellsThatMatch(t)[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value;e.add(d)}}catch(t){u=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"subscribeToCellChanges",value:function(t){this.trickleTilesWithModifier.add(t);var e=!0,r=!1,n=void 0;try{for(var o,l=this.getSprites()[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){o.value.subscribeToCellChangesTile(this)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"hasNegationTileWithModifier",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.trickleTilesWithModifier[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){if(n.value.isNo())return!0}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}return!1}},{key:"addCells",value:function(t,e,r){var n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(!this.trickleCells.has(a)&&this.matchesCell(a)){this.trickleCells.add(a);var u=!0,c=!1,f=void 0;try{for(var h,d=this.trickleTilesWithModifier[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){h.value.addCells(this,t,[a],r)}}catch(t){c=!0,f=t}finally{try{u||null==d.return||d.return()}finally{if(c)throw f}}}}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"updateCells",value:function(t,e,r){var n=!0,o=!1,l=void 0;try{for(var i,s=this.trickleTilesWithModifier[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){i.value.updateCells(t,e,r)}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}}},{key:"removeCells",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;if(this.matchesCell(s))this.trickleCells.has(s)?this.updateCells(t,[s],null):this.addCells(t,[s],null);else{this.trickleCells.delete(s);var a=!0,u=!1,c=void 0;try{for(var f,h=this.trickleTilesWithModifier[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){f.value.removeCells(this,t,[s])}}catch(t){u=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}}}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"hasCell",value:function(t){return this.trickleCells.has(t)}}]),e}(),m=function(t){function e(t,r,n){return s(this,e),c(this,f(e).call(this,t,r,[n]))}return h(e,g),u(e,[{key:"matchesCell",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.tiles[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){if(!o.value.matchesCell(t))return!1}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!0}},{key:"getSpritesThatMatch",value:function(t){return Object(n.o)(new Set(this.getSprites()),t.getSpritesAsSet())}},{key:"hasSingleCollisionLayer",value:function(){return!!this.collisionLayer}}]),e}(),b=function(t){function e(){return s(this,e),c(this,f(e).apply(this,arguments))}return h(e,g),u(e,[{key:"matchesCell",value:function(t){throw new Error("BUG: Unreachable code")}},{key:"getSpritesThatMatch",value:function(t){throw new Error("BUG: This method should only be called for OR tiles")}},{key:"hasSingleCollisionLayer",value:function(){return!!this.collisionLayer}}]),e}(),_=function(t){function e(){return s(this,e),c(this,f(e).apply(this,arguments))}return h(e,g),u(e,[{key:"isOr",value:function(){return!0}},{key:"matchesCell",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=this.tiles[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){if(o.value.matchesCell(t))return!0}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!1}},{key:"getSpritesThatMatch",value:function(t){return Object(n.o)(new Set(this.getSprites()),t.getSpritesAsSet())}},{key:"hasSingleCollisionLayer",value:function(){var t=this.getSprites(),e=!0,r=!1,n=void 0;try{for(var o,l=t[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){if(o.value.getCollisionLayer()!==t[0].getCollisionLayer())return!1}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!0}}]),e}()},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){"use strict";r.d(e,"a",function(){return d}),r.d(e,"b",function(){return p}),r.d(e,"c",function(){return v});var n=r(13);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}var h=function(){function t(e,r,n,o){u(this,t),this.r=e,this.g=r,this.b=n,this.a=o}return f(t,[{key:"isDark",value:function(){return this.r+this.g+this.b<384}}]),t}(),d=function(t){function e(t,r){var n;return u(this,e),(n=l(this,i(e).call(this,t))).hex=r,n}return s(e,n["a"]),f(e,[{key:"isTransparent",value:function(){return!1}},{key:"hasAlpha",value:function(){return this.hex.length>7}},{key:"toRgb",value:function(){return v(this.hex)}},{key:"toHex",value:function(){return this.hex}}]),e}(),p=function(t){function e(t){return u(this,e),l(this,i(e).call(this,t))}return s(e,n["a"]),f(e,[{key:"isTransparent",value:function(){return!0}},{key:"hasAlpha",value:function(){return!1}},{key:"toRgb",value:function(){throw new Error("BUG: Transparent colors do not have RGB data")}},{key:"toHex",value:function(){throw new Error("BUG: Transparent colors do not have a hex color value")}}]),e}();function v(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,n){return e+e+r+r+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);if(e)return new h(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?parseInt(e[4],16)/255:null);throw new Error("BUG: Invalid hex color: '".concat(t,"'"))}},function(t,e,r){"use strict";var n,o,l,i,s,a={id:"Wireless Controller (STANDARD GAMEPAD)",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,HOME:16,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:2,CLUSTER_RIGHT:1,CLUSTER_BOTTOM:0,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},u=[a,{id:"54c-9cc-Wireless Controller",buttons:{ARROW_UP:14,ARROW_DOWN:15,ARROW_LEFT:16,ARROW_RIGHT:17,HOME:12,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:0,CLUSTER_RIGHT:2,CLUSTER_BOTTOM:1,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11,TOUCHSCREEN:13},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:5}},analogs:{BUMPER_LEFT:3,BUMPER_RIGHT:4}},{id:"[temp xbox id]",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,HOME:16,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:2,CLUSTER_RIGHT:1,CLUSTER_BOTTOM:0,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},{id:"54c-268-PLAYSTATION(R)3 Controller",buttons:{ARROW_UP:4,ARROW_DOWN:6,ARROW_LEFT:7,ARROW_RIGHT:5,HOME:16,START:3,SELECT:0,CLUSTER_TOP:12,CLUSTER_LEFT:15,CLUSTER_RIGHT:13,CLUSTER_BOTTOM:14,BUMPER_TOP_LEFT:10,BUMPER_BOTTOM_LEFT:8,BUMPER_TOP_RIGHT:11,BUMPER_BOTTOM_RIGHT:9,STICK_PRESS_LEFT:1,STICK_PRESS_RIGHT:2},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},{id:"45e-28e-Xbox 360 Wired Controller",buttons:{ARROW_UP:0,ARROW_DOWN:1,ARROW_LEFT:2,ARROW_RIGHT:3,HOME:10,START:4,SELECT:5,CLUSTER_TOP:14,CLUSTER_LEFT:13,CLUSTER_RIGHT:12,CLUSTER_BOTTOM:11,BUMPER_TOP_LEFT:8,BUMPER_TOP_RIGHT:9,STICK_PRESS_LEFT:6,STICK_PRESS_RIGHT:7},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:3,yAxis:4}},analogs:{BUMPER_LEFT:2,BUMPER_RIGHT:5}},{id:"79-6-Generic   USB  Joystick  ",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,START:9,CLUSTER_TOP:3,CLUSTER_LEFT:8,CLUSTER_RIGHT:2,CLUSTER_BOTTOM:6,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:7,BUMPER_TOP_RIGHT:5,STICK_PRESS_LEFT:0,STICK_PRESS_RIGHT:1},sticks:{LEFT:{xAxis:1,yAxis:2}},analogs:{}}];function c(t){return"standard"===t.mapping?a:u.find(function(e){return t.id===e.id})||null}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t}r.d(e,"a",function(){return n}),r.d(e,"c",function(){return o}),r.d(e,"b",function(){return y}),function(t){t.ARROW_UP="ARROW_UP",t.ARROW_DOWN="ARROW_DOWN",t.ARROW_LEFT="ARROW_LEFT",t.ARROW_RIGHT="ARROW_RIGHT",t.HOME="HOME",t.START="START",t.SELECT="SELECT",t.CLUSTER_TOP="CLUSTER_TOP",t.CLUSTER_LEFT="CLUSTER_LEFT",t.CLUSTER_RIGHT="CLUSTER_RIGHT",t.CLUSTER_BOTTOM="CLUSTER_BOTTOM",t.BUMPER_TOP_LEFT="BUMPER_TOP_LEFT",t.BUMPER_BOTTOM_LEFT="BUMPER_BOTTOM_LEFT",t.BUMPER_TOP_RIGHT="BUMPER_TOP_RIGHT",t.BUMPER_BOTTOM_RIGHT="BUMPER_BOTTOM_RIGHT",t.STICK_PRESS_LEFT="STICK_PRESS_LEFT",t.STICK_PRESS_RIGHT="STICK_PRESS_RIGHT",t.TOUCHSCREEN="TOUCHSCREEN"}(n||(n={})),function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"}(o||(o={})),function(t){t.BUMPER_LEFT="BUMPER_LEFT",t.BUMPER_RIGHT="BUMPER_RIGHT"}(l||(l={})),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT"}(i||(i={})),function(t){t.ALT="ALT",t.CTRL="CTRL",t.META="META",t.SHIFT="SHIFT"}(s||(s={}));var v=function(){function t(e){if(h(this,t),!(e>=0))throw new Error("Must provide an index. Or, use the AnyGamepad class");this.index=e}return p(t,[{key:"isSomethingConnected",value:function(){return!!this.raw()}},{key:"isRecognized",value:function(){var t=this.raw();return!!t&&null!==c(t)}},{key:"isButtonPressed",value:function(t){var e=this.raw();if(e){var r=this.buttonIndex(t);return null!==r&&e.buttons[r].pressed}return!1}},{key:"hasButton",value:function(t){return null!==this.buttonIndex(t)}},{key:"button",value:function(t){var e=this;return{has:function(){return e.hasButton(t)},query:function(){return e.isButtonPressed(t)}}}},{key:"getStickValue",value:function(t){var e=this.raw();if(e){var r=this.stickIndex(t);if(r){var n=r.xAxis,o=r.yAxis;return{x:e.axes[n],y:e.axes[o]}}}return{x:0,y:0}}},{key:"getStickDirection",value:function(t){var e=this.getStickValue(t),r=e.x,n=e.y,o=Math.abs(r),l=Math.abs(n);return o<.5&&l<.5?null:o>l?r>0?i.LEFT:i.RIGHT:n>0?i.DOWN:i.UP}},{key:"hasStick",value:function(t){return null!==this.stickIndex(t)}},{key:"stick",value:function(t){var e=this;return{has:function(){return e.hasStick(t)},query:function(){return e.getStickValue(t)},direction:function(){return e.getStickDirection(t)}}}},{key:"raw",value:function(){return f(navigator.getGamepads())[this.index]||null}},{key:"buttonIndex",value:function(t){var e=this.raw();return e&&function(t,e){var r=c(t);if(r){var n=r.buttons[e];if(void 0!==n)return n}return null}(e,t)}},{key:"stickIndex",value:function(t){var e=this.raw();return e&&function(t,e){var r=c(t);return r&&r.sticks[e]||null}(e,t)}}]),t}(),w=function(){function t(){h(this,t)}return p(t,[{key:"isSomethingConnected",value:function(){return!!y.getGamepads().find(function(t){return!!t&&t.isSomethingConnected()})}},{key:"isRecognized",value:function(){return!!y.getGamepads().find(function(t){return!!t&&t.isRecognized()})}},{key:"hasButton",value:function(t){return!!y.getGamepads().find(function(e){return!!e&&e.hasButton(t)})}},{key:"isButtonPressed",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=y.getGamepads()[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;if(i&&i.isButtonPressed(t))return!0}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return!1}},{key:"button",value:function(t){var e=this;return{has:function(){return e.hasButton(t)},query:function(){return e.isButtonPressed(t)}}}},{key:"hasStick",value:function(t){return!!y.getGamepads().find(function(e){return!!e&&e.hasStick(t)})}},{key:"getStickValue",value:function(t){var e=0,r=0,n=!0,o=!1,l=void 0;try{for(var i,s=y.getGamepads()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(a){var u=a.getStickValue(t),c=u.x,f=u.y;e+=c,r+=f}}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return{x:e,y:r}}},{key:"getStickDirection",value:function(t){var e=y.getGamepads().find(function(e){return!!e&&null!==e.getStickDirection(t)})||null;return e&&e.getStickDirection(t)}},{key:"stick",value:function(t){var e=this;return{has:function(){return e.hasStick(t)},query:function(){return e.getStickValue(t)},direction:function(){return e.getStickDirection(t)}}}}]),t}(),y=new(function(){function t(){h(this,t),this.cache=[],this.any=null}return p(t,[{key:"getGamepads",value:function(){var t=this;return f(navigator.getGamepads()).map(function(e,r){return e&&t.getGamepad(r)})}},{key:"getGamepad",value:function(t){return this.cache[t]=this.cache[t]||new v(t),this.cache[t]}},{key:"getAnyGamepad",value:function(){if(this.any)return this.any;var t=new w;return this.any=t,t}},{key:"key",value:function(t,e,r){var n=new Set(r||[]),o=!1,l=function(t,e){return t.has(s.ALT)===e.altKey&&t.has(s.CTRL)===e.ctrlKey&&t.has(s.META)===e.metaKey&&t.has(s.SHIFT)===e.shiftKey},i=function t(e,r){return e===r||!(null===r||!r.parentElement)&&t(e,r.parentElement)},a=function(r){r.key===t&&l(n,r)&&(e&&!i(e,window.document.activeElement)||(o=!0,r.preventDefault()))},u=function(r){r.key===t&&l(n,r)&&(e&&!i(e,window.document.activeElement)||(o=!1,r.preventDefault()))};return window.addEventListener("keydown",a),window.addEventListener("keyup",u),{has:function(){return!0},query:function(){return o},dispose:function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",u)}}}},{key:"or",value:function(t){return{has:function(){return!!t.find(function(t){return t.has()})},query:function(){return!!t.find(function(t){return t.query()})}}}},{key:"asStick",value:function(t,e,r,n){function o(){return{x:0+(t.query()?-1:0)+(e.query()?1:0),y:0+(r.query()?-1:0)+(n.query()?1:0)}}return{query:o,has:function(){return t.has()&&e.has()&&r.has()&&n.has()},direction:function(){var t=o(),e=t.x,r=t.y;return e<0&&0===r?i.UP:e>0&&0===r?i.DOWN:r<0&&0===e?i.LEFT:r>0&&0===e?i.RIGHT:null}}}},{key:"orSticks",value:function(t){function e(){var e=0,r=0,n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value.query(),u=a.x,c=a.y;e+=u,r+=c}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return{x:e,y:r}}return{query:e,has:function(){return!!t.find(function(t){return t.has()})},direction:function(){var t=e(),r=t.x,n=t.y;return r<0&&0===n?i.UP:r>0&&0===n?i.DOWN:n<0&&0===r?i.LEFT:n>0&&0===r?i.RIGHT:null}}}}]),t}())},function(t,e,r){var n=r(11),o=r(41);t.exports=r(10)?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(4),o=r(18),l=r(22),i=r(42)("src"),s=Function.toString,a=(""+s).split("toString");r(26).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,r,s){var u="function"==typeof r;u&&(l(r,"name")||o(r,"name",e)),t[e]!==r&&(u&&(l(r,i)||o(r,i,t[e]?""+t[e]:a.join(String(e)))),t===n?t[e]=r:s?t[e]?t[e]=r:o(t,e,r):(delete t[e],o(t,e,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||s.call(this)})},function(t,e,r){var n=r(1),o=r(6),l=r(32),i=/"/g,s=function(t,e,r,n){var o=String(l(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(n).replace(i,"&quot;")+'"'),s+">"+o+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(s),n(n.P+n.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)}},function(t,e,r){"use strict";(function(t){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o;r.d(e,"a",function(){return o}),r.d(e,"b",function(){return s}),function(t){t.SEVERE="SEVERE",t.WARN="WARN",t.INFO="INFO",t.DEBUG="DEBUG",t.TRACE="TRACE"}(o||(o={}));var l=[o.SEVERE,o.WARN,o.INFO,o.DEBUG,o.TRACE];function i(t){return l.indexOf(t)}var s=new(function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentLevelNum=i(function(t){if(!t)return o.SEVERE;switch(t.toUpperCase()){case o.SEVERE:return o.SEVERE;case o.DEBUG:return o.DEBUG;case o.TRACE:return o.TRACE;default:throw new Error("ERROR: Invalid log level. valid levels are ".concat(JSON.stringify(l)))}}(t.env.LOG_LEVEL))}var r,s,a;return r=e,(s=[{key:"isLevel",value:function(t){return i(t)<=this.currentLevelNum}},{key:"warn",value:function(t){this.log(o.WARN,t)}},{key:"info",value:function(t){this.log(o.INFO,t)}},{key:"debug",value:function(t){this.log(o.DEBUG,t)}},{key:"trace",value:function(t){this.log(o.TRACE,t)}},{key:"logFn",value:function(t,e){this.isLevel(t)&&console.warn(e())}},{key:"log",value:function(t,e){"string"==typeof e?this.logFn(t,function(){return e}):this.logFn(t,e)}}])&&n(r.prototype,s),a&&n(r,a),e}())}).call(this,r(107))},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(59),o=r(32);t.exports=function(t){return n(o(t))}},function(t,e,r){var n=r(60),o=r(41),l=r(23),i=r(31),s=r(22),a=r(110),u=Object.getOwnPropertyDescriptor;e.f=r(10)?u:function(t,e){if(t=l(t),e=i(e,!0),a)try{return u(t,e)}catch(t){}if(s(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(22),o=r(12),l=r(81)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,l)?t[l]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},function(t,e){var r=t.exports={version:"2.6.0"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(15);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){"use strict";var n=r(6);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,r){var n=r(7);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(1),o=r(26),l=r(6);t.exports=function(t,e){var r=(o.Object||{})[t]||Object[t],i={};i[t]=e(r),n(n.S+n.F*l(function(){r(1)}),"Object",i)}},function(t,e,r){var n=r(27),o=r(59),l=r(12),i=r(9),s=r(97);t.exports=function(t,e){var r=1==t,a=2==t,u=3==t,c=4==t,f=6==t,h=5==t||f,d=e||s;return function(e,s,p){for(var v,w,y=l(e),g=o(y),m=n(s,p,3),b=i(g.length),_=0,S=r?d(e,b):a?d(e,0):void 0;b>_;_++)if((h||_ in g)&&(w=m(v=g[_],_,y),t))if(r)S[_]=w;else if(w)switch(t){case 3:return!0;case 5:return v;case 6:return _;case 2:S.push(v)}else if(c)return!1;return f?-1:u||c?c:S}}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if(r(10)){var o=r(38),l=r(4),i=r(6),s=r(1),a=r(74),u=r(105),c=r(27),f=r(48),h=r(41),d=r(18),p=r(50),v=r(29),w=r(9),y=r(138),g=r(44),m=r(31),b=r(22),_=r(53),S=r(7),k=r(12),E=r(94),C=r(45),T=r(25),O=r(46).f,M=r(96),x=r(42),R=r(8),A=r(34),I=r(64),L=r(62),P=r(99),F=r(55),N=r(69),D=r(47),B=r(98),G=r(127),j=r(11),U=r(24),W=j.f,H=U.f,q=l.RangeError,z=l.TypeError,V=l.Uint8Array,K=Array.prototype,J=u.ArrayBuffer,Y=u.DataView,X=A(0),$=A(2),Z=A(3),Q=A(4),tt=A(5),et=A(6),rt=I(!0),nt=I(!1),ot=P.values,lt=P.keys,it=P.entries,st=K.lastIndexOf,at=K.reduce,ut=K.reduceRight,ct=K.join,ft=K.sort,ht=K.slice,dt=K.toString,pt=K.toLocaleString,vt=R("iterator"),wt=R("toStringTag"),yt=x("typed_constructor"),gt=x("def_constructor"),mt=a.CONSTR,bt=a.TYPED,_t=a.VIEW,St=A(1,function(t,e){return Ot(L(t,t[gt]),e)}),kt=i(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Et=!!V&&!!V.prototype.set&&i(function(){new V(1).set({})}),Ct=function(t,e){var r=v(t);if(r<0||r%e)throw q("Wrong offset!");return r},Tt=function(t){if(S(t)&&bt in t)return t;throw z(t+" is not a typed array!")},Ot=function(t,e){if(!(S(t)&&yt in t))throw z("It is not a typed array constructor!");return new t(e)},Mt=function(t,e){return xt(L(t,t[gt]),e)},xt=function(t,e){for(var r=0,n=e.length,o=Ot(t,n);n>r;)o[r]=e[r++];return o},Rt=function(t,e,r){W(t,e,{get:function(){return this._d[r]}})},At=function(t){var e,r,n,o,l,i,s=k(t),a=arguments.length,u=a>1?arguments[1]:void 0,f=void 0!==u,h=M(s);if(null!=h&&!E(h)){for(i=h.call(s),n=[],e=0;!(l=i.next()).done;e++)n.push(l.value);s=n}for(f&&a>2&&(u=c(u,arguments[2],2)),e=0,r=w(s.length),o=Ot(this,r);r>e;e++)o[e]=f?u(s[e],e):s[e];return o},It=function(){for(var t=0,e=arguments.length,r=Ot(this,e);e>t;)r[t]=arguments[t++];return r},Lt=!!V&&i(function(){pt.call(new V(1))}),Pt=function(){return pt.apply(Lt?ht.call(Tt(this)):Tt(this),arguments)},Ft={copyWithin:function(t,e){return G.call(Tt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(Tt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(Tt(this),arguments)},filter:function(t){return Mt(this,$(Tt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return tt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return et(Tt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){X(Tt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return rt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Tt(this),arguments)},lastIndexOf:function(t){return st.apply(Tt(this),arguments)},map:function(t){return St(Tt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(Tt(this),arguments)},reduceRight:function(t){return ut.apply(Tt(this),arguments)},reverse:function(){for(var t,e=Tt(this).length,r=Math.floor(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return Z(Tt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ft.call(Tt(this),t)},subarray:function(t,e){var r=Tt(this),n=r.length,o=g(t,n);return new(L(r,r[gt]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,w((void 0===e?n:g(e,n))-o))}},Nt=function(t,e){return Mt(this,ht.call(Tt(this),t,e))},Dt=function(t){Tt(this);var e=Ct(arguments[1],1),r=this.length,n=k(t),o=w(n.length),l=0;if(o+e>r)throw q("Wrong length!");for(;l<o;)this[e+l]=n[l++]},Bt={entries:function(){return it.call(Tt(this))},keys:function(){return lt.call(Tt(this))},values:function(){return ot.call(Tt(this))}},Gt=function(t,e){return S(t)&&t[bt]&&"symbol"!=n(e)&&e in t&&String(+e)==String(e)},jt=function(t,e){return Gt(t,e=m(e,!0))?h(2,t[e]):H(t,e)},Ut=function(t,e,r){return!(Gt(t,e=m(e,!0))&&S(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?W(t,e,r):(t[e]=r.value,t)};mt||(U.f=jt,j.f=Ut),s(s.S+s.F*!mt,"Object",{getOwnPropertyDescriptor:jt,defineProperty:Ut}),i(function(){dt.call({})})&&(dt=pt=function(){return ct.call(this)});var Wt=p({},Ft);p(Wt,Bt),d(Wt,vt,Bt.values),p(Wt,{slice:Nt,set:Dt,constructor:function(){},toString:dt,toLocaleString:Pt}),Rt(Wt,"buffer","b"),Rt(Wt,"byteOffset","o"),Rt(Wt,"byteLength","l"),Rt(Wt,"length","e"),W(Wt,wt,{get:function(){return this[bt]}}),t.exports=function(t,e,r,n){var u=t+((n=!!n)?"Clamped":"")+"Array",c="get"+t,h="set"+t,p=l[u],v=p||{},g=p&&T(p),m=!p||!a.ABV,b={},k=p&&p.prototype,E=function(t,r){W(t,r,{get:function(){return function(t,r){var n=t._d;return n.v[c](r*e+n.o,kt)}(this,r)},set:function(t){return function(t,r,o){var l=t._d;n&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),l.v[h](r*e+l.o,o,kt)}(this,r,t)},enumerable:!0})};m?(p=r(function(t,r,n,o){f(t,p,u,"_d");var l,i,s,a,c=0,h=0;if(S(r)){if(!(r instanceof J||"ArrayBuffer"==(a=_(r))||"SharedArrayBuffer"==a))return bt in r?xt(p,r):At.call(p,r);l=r,h=Ct(n,e);var v=r.byteLength;if(void 0===o){if(v%e)throw q("Wrong length!");if((i=v-h)<0)throw q("Wrong length!")}else if((i=w(o)*e)+h>v)throw q("Wrong length!");s=i/e}else s=y(r),l=new J(i=s*e);for(d(t,"_d",{b:l,o:h,l:i,e:s,v:new Y(l)});c<s;)E(t,c++)}),k=p.prototype=C(Wt),d(k,"constructor",p)):i(function(){p(1)})&&i(function(){new p(-1)})&&N(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=r(function(t,r,n,o){var l;return f(t,p,u),S(r)?r instanceof J||"ArrayBuffer"==(l=_(r))||"SharedArrayBuffer"==l?void 0!==o?new v(r,Ct(n,e),o):void 0!==n?new v(r,Ct(n,e)):new v(r):bt in r?xt(p,r):At.call(p,r):new v(y(r))}),X(g!==Function.prototype?O(v).concat(O(g)):O(v),function(t){t in p||d(p,t,v[t])}),p.prototype=k,o||(k.constructor=p));var M=k[vt],x=!!M&&("values"==M.name||null==M.name),R=Bt.values;d(p,yt,!0),d(k,bt,u),d(k,_t,!0),d(k,gt,p),(n?new p(1)[wt]==u:wt in k)||W(k,wt,{get:function(){return u}}),b[u]=p,s(s.G+s.W+s.F*(p!=v),b),s(s.S,u,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*i(function(){v.of.call(p,1)}),u,{from:At,of:It}),"BYTES_PER_ELEMENT"in k||d(k,"BYTES_PER_ELEMENT",e),s(s.P,u,Ft),D(u),s(s.P+s.F*Et,u,{set:Dt}),s(s.P+s.F*!x,u,Bt),o||k.toString==dt||(k.toString=dt),s(s.P+s.F*i(function(){new p(1).slice()}),u,{slice:Nt}),s(s.P+s.F*(i(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!i(function(){k.toLocaleString.call([1,2])})),u,{toLocaleString:Pt}),F[u]=x?M:R,o||x||d(k,vt,R)}}else t.exports=function(){}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(133),l=r(1),i=r(63)("metadata"),s=i.store||(i.store=new(r(136))),a=function(t,e,r){var n=s.get(t);if(!n){if(!r)return;s.set(t,n=new o)}var l=n.get(e);if(!l){if(!r)return;n.set(e,l=new o)}return l};t.exports={store:s,map:a,has:function(t,e,r){var n=a(e,r,!1);return void 0!==n&&n.has(t)},get:function(t,e,r){var n=a(e,r,!1);return void 0===n?void 0:n.get(t)},set:function(t,e,r,n){a(r,n,!0).set(t,e)},keys:function(t,e){var r=a(t,e,!1),n=[];return r&&r.forEach(function(t,e){n.push(e)}),n},key:function(t){return void 0===t||"symbol"==n(t)?t:String(t)},exp:function(t){l(l.S,"Reflect",t)}}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(42)("meta"),l=r(7),i=r(22),s=r(11).f,a=0,u=Object.isExtensible||function(){return!0},c=!r(6)(function(){return u(Object.preventExtensions({}))}),f=function(t){s(t,o,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:o,NEED:!1,fastKey:function(t,e){if(!l(t))return"symbol"==n(t)?t:("string"==typeof t?"S":"P")+t;if(!i(t,o)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[o].i},getWeak:function(t,e){if(!i(t,o)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[o].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!i(t,o)&&f(t),t}}},function(t,e){t.exports=!1},function(t,e,r){var n=r(8)("unscopables"),o=Array.prototype;null==o[n]&&r(18)(o,n,{}),t.exports=function(t){o[n][t]=!0}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r.d(e,"a",function(){return h});var c=r(106),f=function(){function t(e,r){s(this,t),this.bitSet=r||new c,e&&this.addAll(e)}return u(t,[{key:"isEmpty",value:function(){return this.bitSet.isEmpty()}},{key:"addAll",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,l=t[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=o.value;this.add(i)}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}}},{key:"add",value:function(t){this.bitSet.set(this._indexOf(t))}},{key:"remove",value:function(t){this.bitSet.clear(this._indexOf(t))}},{key:"has",value:function(t){return!!this.bitSet.get(this._indexOf(t))}},{key:"containsAll",value:function(t){return t.bitSet.cardinality()===this.bitSet.and(t.bitSet).cardinality()}},{key:"containsAny",value:function(t){return!this.bitSet.and(t.bitSet).isEmpty()}},{key:"containsNone",value:function(t){return t.bitSet.and(this.bitSet).isEmpty()}},{key:"_indexOf",value:function(t){var e=this.indexOf(t);if(e<0)throw new Error("BUG: Expected the item index to be >= 0 but it was ".concat(e));return e}}]),t}(),h=function(t){function e(){return s(this,e),o(this,l(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(e,f),u(e,[{key:"indexOf",value:function(t){return t.allSpritesBitSetIndex}},{key:"union",value:function(t){var e=this,r=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;e=e.or(s)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"toString",value:function(t){var e=[],r=!0,n=!1,o=void 0;try{for(var l,i=this.getSprites(t)[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;e.push(s.getName())}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e.join(" ")}},{key:"getSprites",value:function(t){var e=new Set,r=!0,n=!1,o=void 0;try{for(var l,i=t.objects[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;this.has(s)&&e.add(s)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"or",value:function(t){return new e(void 0,this.bitSet.or(t.bitSet))}}]),e}()},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(112),o=r(82);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(29),o=Math.max,l=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):l(t,e)}},function(t,e,r){var n=r(3),o=r(113),l=r(82),i=r(81)("IE_PROTO"),s=function(){},a=function(){var t,e=r(79)("iframe"),n=l.length;for(e.style.display="none",r(83).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;n--;)delete a.prototype[l[n]];return a()};t.exports=Object.create||function(t,e){var r;return null!==t?(s.prototype=n(t),r=new s,s.prototype=null,r[i]=t):r=a(),void 0===e?r:o(r,e)}},function(t,e,r){var n=r(112),o=r(82).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e,r){"use strict";var n=r(4),o=r(11),l=r(10),i=r(8)("species");t.exports=function(t){var e=n[t];l&&e&&!e[i]&&o.f(e,i,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(27),o=r(125),l=r(94),i=r(3),s=r(9),a=r(96),u={},c={};(e=t.exports=function(t,e,r,f,h){var d,p,v,w,y=h?function(){return t}:a(t),g=n(r,f,e?2:1),m=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(l(y)){for(d=s(t.length);d>m;m++)if((w=e?g(i(p=t[m])[0],p[1]):g(t[m]))===u||w===c)return w}else for(v=y.call(t);!(p=v.next()).done;)if((w=o(v,g,p.value,e))===u||w===c)return w}).BREAK=u,e.RETURN=c},function(t,e,r){var n=r(19);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",function(){return l}),r.d(e,"b",function(){return i});var l=function t(e,r){o(this,t),this.width=e,this.height=r},i=function(){function t(){o(this,t),this.noAction=!1,this.noUndo=!1,this.noRepeatAction=!1,this.throttleMovement=!1,this.noRestart=!1,this.requirePlayerMovement=!1,this.verboseLogging=!1,this.author=null,this.homepage=null,this.youtube=null,this.zoomscreen=null,this.flickscreen=null,this.colorPalette=null,this.backgroundColor=null,this.textColor=null,this.realtimeInterval=null,this.keyRepeatInterval=null,this.againInterval=null,this.runRulesOnLevelStart=null}var e,r,l;return e=t,(r=[{key:"_setValue",value:function(t,e){switch(t.toLowerCase()){case"author":this.author=e;break;case"homepage":this.homepage=e;break;case"youtube":this.youtube=e;break;case"zoomscreen":this.zoomscreen=e;break;case"flickscreen":this.flickscreen=e;break;case"colorpalette":case"color_palette":this.colorPalette=e;break;case"backgroundcolor":case"background_color":this.backgroundColor=e;break;case"textcolor":case"text_color":this.textColor=e;break;case"realtimeinterval":case"realtime_interval":this.realtimeInterval=e;break;case"keyrepeatinterval":case"key_repeat_interval":this.keyRepeatInterval=e;break;case"againinterval":case"again_interval":this.againInterval=e;break;case"noaction":this.noAction=e;break;case"noundo":this.noUndo=e;break;case"runrulesonlevelstart":case"run_rules_on_level_start":this.runRulesOnLevelStart=e;break;case"norepeataction":case"norepeat_action":this.noRepeatAction=e;break;case"throttlemovement":case"throttle_movement":this.throttleMovement=e;break;case"norestart":this.noRestart=e;break;case"requireplayermovement":case"require_player_movement":this.requirePlayerMovement=e;break;case"verboselogging":case"verbose_logging":this.verboseLogging=e;break;default:throw new Error('BUG: Unsupported config field "'.concat(t,'" with value "').concat(e,'"'))}}}])&&n(e.prototype,r),l&&n(e,l),t}()},function(t,e,r){var n=r(11).f,o=r(22),l=r(8)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,l)&&n(t,l,{configurable:!0,value:e})}},function(t,e,r){var n=r(28),o=r(8)("toStringTag"),l="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:l?n(e):"Object"==(i=n(e))&&"function"==typeof e.callee?"Arguments":i}},function(t,e,r){var n=r(1),o=r(32),l=r(6),i=r(85),s="["+i+"]",a=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),c=function(t,e,r){var o={},s=l(function(){return!!i[t]()||""!=""[t]()}),a=o[t]=s?e(f):i[t];r&&(o[r]=a),n(n.P+n.F*s,"String",o)},f=c.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(a,"")),2&e&&(t=t.replace(u,"")),t};t.exports=c},function(t,e){t.exports={}},function(t,e,r){var n=r(7);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,r){"use strict";r.d(e,"b",function(){return p}),r.d(e,"a",function(){return v});var n,o=r(13);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function c(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t){t.NO="NO",t.ALL="ALL",t.ANY="ANY",t.SOME="SOME"}(n||(n={}));var p=function(t){function e(t,r,n){var o;if(s(this,e),(o=c(this,f(e).call(this,t))).qualifier=r,o.tile=n,!n)throw new Error("BUG: Could not find win condition tile");return o}return h(e,o["a"]),u(e,[{key:"cellsThatMatchTile",value:function(t,e){return i(t).filter(function(t){return e.matchesCell(t)})}},{key:"isSatisfied",value:function(t){var e=this._isSatisfied(t);return e}},{key:"a11yGetTiles",value:function(){return[this.tile]}},{key:"_isSatisfied",value:function(t){var e=this.cellsThatMatchTile(t,this.tile);switch(this.qualifier){case n.NO:return 0===e.length;case n.ANY:case n.SOME:return e.length>0;default:throw new Error('BUG: Invalid qualifier: "'.concat(this.qualifier,'"'))}}}]),e}(),v=function(t){function e(t,r,n,o){var l;return s(this,e),(l=c(this,f(e).call(this,t,r,n))).onTile=o,l}return h(e,p),u(e,[{key:"a11yGetTiles",value:function(){return[this.tile,this.onTile]}},{key:"_isSatisfied",value:function(t){var e=this.cellsThatMatchTile(t,this.tile),r=this.cellsThatMatchTile(e,this.onTile);switch(this.qualifier){case n.NO:return 0===r.length;case n.ANY:case n.SOME:return r.length>0;case n.ALL:return r.length===e.length;default:throw new Error('BUG: Invalid qualifier: "'.concat(this.qualifier,'"'))}}}]),e}()},function(t,e,r){"use strict";r.d(e,"a",function(){return h});var n=r(0),o=r(13);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var f=0,h=function(t){function e(t,r){var o,s,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,u=a(e).call(this,t),(o=!u||"object"!==l(u)&&"function"!=typeof u?c(s):u).id=f++,r.forEach(function(t){t.setCollisionLayer(c(c(o))),t._getDescendantTiles().forEach(function(t){t.setCollisionLayer(c(c(o)))})}),o.sprites=i(new Set(Object(n.g)(r.map(function(t){return t.getSprites()})))),o.sprites.forEach(function(t,e){return t.setCollisionLayerAndIndex(c(c(o)),e)}),o}var r,h,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,o["a"]),r=e,(h=[{key:"getBitSetIndexOf",value:function(t){var e=this.sprites.indexOf(t);if(e<0)throw new Error("BUG: Sprite is not in this CollisionLayer");return e}}])&&s(r.prototype,h),d&&s(r,d),e}()},function(t,e,r){var n=r(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){"use strict";var n=r(3);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){var n=r(3),o=r(15),l=r(8)("species");t.exports=function(t,e){var r,i=n(t).constructor;return void 0===i||null==(r=n(i)[l])?e:o(r)}},function(t,e,r){var n=r(26),o=r(4),l=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return l[t]||(l[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(38)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(23),o=r(9),l=r(44);t.exports=function(t){return function(e,r,i){var s,a=n(e),u=o(a.length),c=l(i,u);if(t&&r!=r){for(;u>c;)if((s=a[c++])!=s)return!0}else for(;u>c;c++)if((t||c in a)&&a[c]===r)return t||c||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(28);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(29),o=r(32);t.exports=function(t){return function(e,r){var l,i,s=String(o(e)),a=n(r),u=s.length;return a<0||a>=u?t?"":void 0:(l=s.charCodeAt(a))<55296||l>56319||a+1===u||(i=s.charCodeAt(a+1))<56320||i>57343?t?s.charAt(a):l:t?s.slice(a,a+2):i-56320+(l-55296<<10)+65536}}},function(t,e,r){var n=r(7),o=r(28),l=r(8)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==o(t))}},function(t,e,r){var n=r(8)("iterator"),o=!1;try{var l=[7][n]();l.return=function(){o=!0},Array.from(l,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var l=[7],i=l[n]();i.next=function(){return{done:r=!0}},l[n]=function(){return i},t(l)}catch(t){}return r}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(53),l=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var i=r.call(t,e);if("object"!==n(i))throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==o(t))throw new TypeError("RegExp#exec called on incompatible receiver");return l.call(t,e)}},function(t,e,r){"use strict";r(129);var n=r(19),o=r(18),l=r(6),i=r(32),s=r(8),a=r(100),u=s("species"),c=!l(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var h=s(t),d=!l(function(){var e={};return e[h]=function(){return 7},7!=""[t](e)}),p=d?!l(function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[u]=function(){return r}),r[h](""),!e}):void 0;if(!d||!p||"replace"===t&&!c||"split"===t&&!f){var v=/./[h],w=r(i,h,""[t],function(t,e,r,n,o){return e.exec===a?d&&!o?{done:!0,value:v.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),y=w[0],g=w[1];n(String.prototype,t,y),o(RegExp.prototype,h,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},function(t,e,r){var n=r(4).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){"use strict";var n=r(4),o=r(1),l=r(19),i=r(50),s=r(37),a=r(49),u=r(48),c=r(7),f=r(6),h=r(69),d=r(52),p=r(86);t.exports=function(t,e,r,v,w,y){var g=n[t],m=g,b=w?"set":"add",_=m&&m.prototype,S={},k=function(t){var e=_[t];l(_,t,"delete"==t?function(t){return!(y&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(y||_.forEach&&!f(function(){(new m).entries().next()}))){var E=new m,C=E[b](y?{}:-0,1)!=E,T=f(function(){E.has(1)}),O=h(function(t){new m(t)}),M=!y&&f(function(){for(var t=new m,e=5;e--;)t[b](e,e);return!t.has(-0)});O||((m=e(function(e,r){u(e,m,t);var n=p(new g,e,m);return null!=r&&a(r,w,n[b],n),n})).prototype=_,_.constructor=m),(T||M)&&(k("delete"),k("has"),w&&k("get")),(M||C)&&k(b),y&&_.clear&&delete _.clear}else m=v.getConstructor(e,t,w,b),i(m.prototype,r),s.NEED=!0;return d(m,t),S[t]=m,o(o.G+o.W+o.F*(m!=g),S),y||v.setStrong(m,t,w),m}},function(t,e,r){for(var n,o=r(4),l=r(18),i=r(42),s=i("typed_array"),a=i("view"),u=!(!o.ArrayBuffer||!o.DataView),c=u,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(n=o[h[f++]])?(l(n.prototype,s,!0),l(n.prototype,a,!0)):c=!1;t.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:a}},function(t,e,r){"use strict";t.exports=r(38)||!r(6)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(4)[t]})},function(t,e,r){"use strict";var n=r(1);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,r){"use strict";var n=r(1),o=r(15),l=r(27),i=r(49);t.exports=function(t){n(n.S,t,{from:function(t){var e,r,n,s,a=arguments[1];return o(this),(e=void 0!==a)&&o(a),null==t?new this:(r=[],e?(n=0,s=l(a,arguments[2],2),i(t,!1,function(t){r.push(s(t,n++))})):i(t,!1,r.push,r),new this(r))}})}},function(t,e,r){"use strict";var n=r(16),o=r(14);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=new Map;function s(t,e,r){var l=new n.a(t,"#ffffff"),i=new n.a(t,"#000000"),s=r.map(function(t){return t.map(function(t){return 0===t?i:l})});return new o.e(t,'letterchar="'.concat(e,'"'),"",s)}function a(t,e){i.set(t,e)}a("a",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,0]]),a("b",[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,0,0],[1,0,0,1,0],[0,1,1,0,0]]),a("c",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[0,1,1,1,0]]),a("d",[[0,0,0,1,0],[0,0,0,1,0],[0,1,1,1,0],[1,0,0,1,0],[0,1,1,0,0]]),a("e",[[0,1,1,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,0,0],[0,1,1,0,0]]),a("f",[[0,0,0,0,0],[0,0,1,1,0],[0,1,0,0,0],[1,1,1,0,0],[0,1,0,0,0]]),a("g",[[0,1,1,0,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0],[0,1,1,0,0]]),a("h",[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0]]),a("i",[[0,0,1,0,0],[0,0,0,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,1,1,1,0]]),a("j",[[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[1,0,1,0,0],[0,1,0,0,0]]),a("k",[[1,0,0,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0]]),a("l",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,1,0],[0,1,1,0,0]]),a("m",[[0,0,0,0,0],[0,1,0,1,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]]),a("n",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0]]),a("o",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,0,0]]),a("p",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,0,0]]),a("q",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0]]),a("r",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0]]),a("s",[[0,1,1,1,0],[1,0,0,0,0],[0,1,1,0,0],[0,0,0,1,0],[1,1,1,0,0]]),a("t",[[0,1,0,0,0],[1,1,1,0,0],[0,1,0,0,0],[0,1,0,0,1],[0,0,1,1,0]]),a("u",[[0,0,0,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0],[1,1,1,0,0]]),a("v",[[0,0,0,0,0],[1,0,0,1,0],[1,0,1,0,0],[1,1,0,0,0],[1,0,0,0,0]]),a("w",[[0,0,0,0,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,0,1,0]]),a("x",[[0,0,0,0,0],[1,0,0,1,0],[0,1,1,0,0],[0,1,1,0,0],[1,0,0,1,0]]),a("y",[[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0],[1,1,1,0,0]]),a("z",[[0,0,0,0,0],[1,1,1,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,0]]),a("A",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]]),a("B",[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0]]),a("C",[[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]]),a("D",[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0]]),a("E",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]]),a("F",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]]),a("G",[[0,1,1,1,1],[1,0,0,0,0],[1,0,0,1,1],[1,0,0,0,1],[0,1,1,1,1]]),a("H",[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]]),a("I",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]]),a("J",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,0,0]]),a("K",[[1,0,0,0,1],[1,0,1,1,0],[1,1,0,0,0],[1,0,1,1,0],[1,0,0,0,1]]),a("L",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]]),a("M",[[1,1,1,1,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]]),a("N",[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1]]),a("O",[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]]),a("P",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]]),a("Q",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,0,0,1],[0,0,0,0,1]]),a("R",[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1]]),a("S",[[0,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),a("T",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]]),a("U",[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]]),a("V",[[1,0,0,0,1],[0,1,0,1,0],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0]]),a("W",[[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,0,1,0]]),a("X",[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]]),a("Y",[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]]),a("Z",[[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]),a("0",[[1,1,1,1,1],[1,0,0,1,1],[1,0,1,0,1],[1,1,0,0,1],[1,1,1,1,1]]),a("1",[[1,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]]),a("2",[[1,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]]),a("3",[[1,1,1,1,0],[0,0,0,0,1],[0,0,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),a("4",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,1,0],[1,1,1,1,1],[0,0,0,1,0]]),a("5",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),a("6",[[0,1,1,1,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0]]),a("7",[[1,1,1,1,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]]),a("8",[[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0]]),a("9",[[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,1,1,1,0]]),a(".",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0]]),a(",",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,1,0,0]]),a(";",[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,1,0,0]]),a(":",[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0]]),a("?",[[0,1,1,1,0],[1,0,0,0,1],[0,0,1,1,0],[0,0,1,0,0],[0,0,1,0,0]]),a("!",[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0]]),a("@",[[0,1,1,1,0],[1,0,0,0,1],[1,0,1,1,1],[1,0,0,0,0],[0,1,1,1,0]]),a("",[[0,1,1,1,0],[0,1,0,0,1],[1,1,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]),a("$",[[0,1,1,1,1],[1,0,1,0,0],[0,1,1,1,0],[0,0,1,0,1],[1,1,1,1,0]]),a("%",[[1,1,0,0,1],[1,1,0,1,0],[0,0,1,0,0],[0,1,0,1,1],[1,0,0,1,1]]),a("^",[[0,0,1,0,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("&",[[0,1,1,0,0],[1,0,0,0,0],[0,1,0,1,1],[1,0,0,1,0],[0,1,1,0,0]]),a("*",[[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0]]),a("(",[[0,0,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,1,0]]),a(")",[[0,1,0,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,0,0,0]]),a("+",[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]]),a("-",[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]]),a("_",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1]]),a("=",[[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0]]),a(" ",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("{",[[0,0,1,1,0],[0,0,1,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,1,1,0]]),a("}",[[0,1,1,0,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,1,0,0],[0,1,1,0,0]]),a("[",[[0,0,1,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,1,0]]),a("]",[[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,0,0]]),a("'",[[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a('"',[[0,1,0,1,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("/",[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]]),a("\\",[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]]),a("|",[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]]),a("<",[[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0]]),a(">",[[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]]),a("~",[[0,0,0,0,0],[0,1,0,0,0],[1,0,1,0,1],[0,0,0,1,0],[0,0,0,0,0]]),a("`",[[0,1,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),a("#",[[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0]]);var u=r(58);function c(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.d(e,"a",function(){return h});var h=function(){function t(e,r,n,o,a,f,h,d,p,v){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=r,this.metadata=n,this.objects=o,this.legends=a,this.sounds=f,this.collisionLayers=h,this.winConditions=p,this.levels=v,this.rules=d,this.cachedBackgroundSprite=null;var w=this.objects.filter(function(t){return t.hasPixels()})[0];if(w){var y=w.getPixels(1,1);this.cacheSpriteSize={spriteHeight:y.length,spriteWidth:y[0].length}}else this.cacheSpriteSize={spriteHeight:1,spriteWidth:1};var g=this.objects.length;this.letterSprites=function(t){var e=new Map,r=!0,n=!1,o=void 0;try{for(var a,u=i.entries()[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=l(a.value,2),f=c[0],h=s(t,f,c[1]);e.set(f,h)}}catch(t){n=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(n)throw o}}return e}(e);var m=!0,b=!1,_=void 0;try{for(var S,k=this.letterSprites.values()[Symbol.iterator]();!(m=(S=k.next()).done);m=!0){S.value.allSpritesBitSetIndex=g++}}catch(t){b=!0,_=t}finally{try{m||null==k.return||k.return()}finally{if(b)throw _}}var E=new u.a(e,c(this.letterSprites.values()));this.collisionLayers.push(E)}var e,r,n;return e=t,(r=[{key:"_getSpriteByName",value:function(t){return this.objects.find(function(e){return e.getName().toLowerCase()===t.toLowerCase()})||null}},{key:"_getTileByName",value:function(t){return this.legends.find(function(e){return e.getName().toLowerCase()===t.toLowerCase()})}},{key:"getSpriteByName",value:function(t){var e=this._getSpriteByName(t);if(!e)throw new Error('BUG: Could not find sprite "'.concat(t,'" but expected one to exist.'));return e}},{key:"getTileByName",value:function(t){var e=this._getTileByName(t);if(!e)throw new Error('BUG: Could not find tile "'.concat(t,'" but expected one to exist.'));return e}},{key:"getMagicBackgroundSprite",value:function(){if(this.cachedBackgroundSprite)return this.cachedBackgroundSprite;var t=this._getSpriteByName("background");if(!t){var e=this.legends.find(function(t){return"background"===t.getName().toLowerCase()});if(e)return e.isOr()?null:e.getSprites()[0]}if(!t)throw new Error("ERROR: Game does not have a Background Sprite or Tile");return this.cachedBackgroundSprite=t,t}},{key:"getPlayer",value:function(){var t=this._getSpriteByName("player")||this.legends.find(function(t){return"player"===t.getName().toLowerCase()});if(!t)throw new Error("BUG: Could not find the Player sprite or tile in the game");return t}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.rules[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}var l=!0,i=!1,s=void 0;try{for(var a,u=this.objects[Symbol.iterator]();!(l=(a=u.next()).done);l=!0){a.value.clearCaches()}}catch(t){i=!0,s=t}finally{try{l||null==u.return||u.return()}finally{if(i)throw s}}}},{key:"getSpriteSize",value:function(){return this.cacheSpriteSize}},{key:"getLetterSprite",value:function(t){var e=this.letterSprites.get(t);if(!e)throw new Error('BUG: Cannot find sprite for letter "'.concat(t,'"'));return e}}])&&f(e.prototype,r),n&&f(e,n),t}()},function(t,e,r){var n=r(7),o=r(4).document,l=n(o)&&n(o.createElement);t.exports=function(t){return l?o.createElement(t):{}}},function(t,e,r){var n=r(4),o=r(26),l=r(38),i=r(111),s=r(11).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=l?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:i.f(t)})}},function(t,e,r){var n=r(63)("keys"),o=r(42);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(4).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(7),o=r(3),l=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=r(27)(Function.call,r(24).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return l(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:l}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,r){var n=r(7),o=r(84).set;t.exports=function(t,e,r){var l,i=e.constructor;return i!==r&&"function"==typeof i&&(l=i.prototype)!==r.prototype&&n(l)&&o&&o(t,l),t}},function(t,e,r){"use strict";var n=r(29),o=r(32);t.exports=function(t){var e=String(o(this)),r="",l=n(t);if(l<0||l==1/0)throw RangeError("Count can't be negative");for(;l>0;(l>>>=1)&&(e+=e))1&l&&(r+=e);return r}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,e,r){"use strict";var n=r(38),o=r(1),l=r(19),i=r(18),s=r(55),a=r(91),u=r(52),c=r(25),f=r(8)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,r,p,v,w,y){a(r,e,p);var g,m,b,_=function(t){if(!h&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=e+" Iterator",k="values"==v,E=!1,C=t.prototype,T=C[f]||C["@@iterator"]||v&&C[v],O=T||_(v),M=v?k?_("entries"):O:void 0,x="Array"==e&&C.entries||T;if(x&&(b=c(x.call(new t)))!==Object.prototype&&b.next&&(u(b,S,!0),n||"function"==typeof b[f]||i(b,f,d)),k&&T&&"values"!==T.name&&(E=!0,O=function(){return T.call(this)}),n&&!y||!h&&!E&&C[f]||i(C,f,O),s[e]=O,s[S]=d,v)if(g={values:k?O:_("values"),keys:w?O:_("keys"),entries:M},y)for(m in g)m in C||l(C,m,g[m]);else o(o.P+o.F*(h||E),e,g);return g}},function(t,e,r){"use strict";var n=r(45),o=r(41),l=r(52),i={};r(18)(i,r(8)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(i,{next:o(1,r)}),l(t,e+" Iterator")}},function(t,e,r){var n=r(68),o=r(32);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(t))}},function(t,e,r){var n=r(8)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,r){var n=r(55),o=r(8)("iterator"),l=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||l[o]===t)}},function(t,e,r){"use strict";var n=r(11),o=r(41);t.exports=function(t,e,r){e in t?n.f(t,e,o(0,r)):t[e]=r}},function(t,e,r){var n=r(53),o=r(8)("iterator"),l=r(55);t.exports=r(26).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||l[n(t)]}},function(t,e,r){var n=r(244);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){"use strict";var n=r(12),o=r(44),l=r(9);t.exports=function(t){for(var e=n(this),r=l(e.length),i=arguments.length,s=o(i>1?arguments[1]:void 0,r),a=i>2?arguments[2]:void 0,u=void 0===a?r:o(a,r);u>s;)e[s++]=t;return e}},function(t,e,r){"use strict";var n=r(39),o=r(128),l=r(55),i=r(23);t.exports=r(90)(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),l.Arguments=l.Array,n("keys"),n("values"),n("entries")},function(t,e,r){"use strict";var n,o,l=r(61),i=RegExp.prototype.exec,s=String.prototype.replace,a=i,u=(n=/a/,o=/b*/g,i.call(n,"a"),i.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(a=function(t){var e,r,n,o,a=this;return c&&(r=new RegExp("^"+a.source+"$(?!\\s)",l.call(a))),u&&(e=a.lastIndex),n=i.call(a,t),u&&n&&(a.lastIndex=a.global?n.index+n[0].length:e),c&&n&&n.length>1&&s.call(n[0],r,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n}),t.exports=a},function(t,e,r){"use strict";var n=r(67)(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var n,o,l,i=r(27),s=r(118),a=r(83),u=r(79),c=r(4),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,w=0,y={},g=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},m=function(t){g.call(t.data)};h&&d||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return y[++w]=function(){s("function"==typeof t?t:Function(t),e)},n(w),w},d=function(t){delete y[t]},"process"==r(28)(f)?n=function(t){f.nextTick(i(g,t,1))}:v&&v.now?n=function(t){v.now(i(g,t,1))}:p?(l=(o=new p).port2,o.port1.onmessage=m,n=i(l.postMessage,l,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",m,!1)):n="onreadystatechange"in u("script")?function(t){a.appendChild(u("script")).onreadystatechange=function(){a.removeChild(this),g.call(t)}}:function(t){setTimeout(i(g,t,1),0)}),t.exports={set:h,clear:d}},function(t,e,r){var n=r(4),o=r(102).set,l=n.MutationObserver||n.WebKitMutationObserver,i=n.process,s=n.Promise,a="process"==r(28)(i);t.exports=function(){var t,e,r,u=function(){var n,o;for(a&&(n=i.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(a)r=function(){i.nextTick(u)};else if(!l||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(u)}}else r=function(){o.call(n,u)};else{var f=!0,h=document.createTextNode("");new l(u).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}},function(t,e,r){"use strict";var n=r(15);function o(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new o(t)}},function(t,e,r){"use strict";var n=r(4),o=r(10),l=r(38),i=r(74),s=r(18),a=r(50),u=r(6),c=r(48),f=r(29),h=r(9),d=r(138),p=r(46).f,v=r(11).f,w=r(98),y=r(52),g="prototype",m="Wrong index!",b=n.ArrayBuffer,_=n.DataView,S=n.Math,k=n.RangeError,E=n.Infinity,C=b,T=S.abs,O=S.pow,M=S.floor,x=S.log,R=S.LN2,A=o?"_b":"buffer",I=o?"_l":"byteLength",L=o?"_o":"byteOffset";function P(t,e,r){var n,o,l,i=new Array(r),s=8*r-e-1,a=(1<<s)-1,u=a>>1,c=23===e?O(2,-24)-O(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===E?(o=t!=t?1:0,n=a):(n=M(x(t)/R),t*(l=O(2,-n))<1&&(n--,l*=2),(t+=n+u>=1?c/l:c*O(2,1-u))*l>=2&&(n++,l/=2),n+u>=a?(o=0,n=a):n+u>=1?(o=(t*l-1)*O(2,e),n+=u):(o=t*O(2,u-1)*O(2,e),n=0));e>=8;i[f++]=255&o,o/=256,e-=8);for(n=n<<e|o,s+=e;s>0;i[f++]=255&n,n/=256,s-=8);return i[--f]|=128*h,i}function F(t,e,r){var n,o=8*r-e-1,l=(1<<o)-1,i=l>>1,s=o-7,a=r-1,u=t[a--],c=127&u;for(u>>=7;s>0;c=256*c+t[a],a--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=e;s>0;n=256*n+t[a],a--,s-=8);if(0===c)c=1-i;else{if(c===l)return n?NaN:u?-E:E;n+=O(2,e),c-=i}return(u?-1:1)*n*O(2,c-e)}function N(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function D(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function j(t){return P(t,52,8)}function U(t){return P(t,23,4)}function W(t,e,r){v(t[g],e,{get:function(){return this[r]}})}function H(t,e,r,n){var o=d(+r);if(o+e>t[I])throw k(m);var l=t[A]._b,i=o+t[L],s=l.slice(i,i+e);return n?s:s.reverse()}function q(t,e,r,n,o,l){var i=d(+r);if(i+e>t[I])throw k(m);for(var s=t[A]._b,a=i+t[L],u=n(+o),c=0;c<e;c++)s[a+c]=u[l?c:e-c-1]}if(i.ABV){if(!u(function(){b(1)})||!u(function(){new b(-1)})||u(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var z,V=(b=function(t){return c(this,b),new C(d(t))})[g]=C[g],K=p(C),J=0;K.length>J;)(z=K[J++])in b||s(b,z,C[z]);l||(V.constructor=b)}var Y=new _(new b(2)),X=_[g].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||a(_[g],{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else b=function(t){c(this,b,"ArrayBuffer");var e=d(t);this._b=w.call(new Array(e),0),this[I]=e},_=function(t,e,r){c(this,_,"DataView"),c(t,b,"DataView");var n=t[I],o=f(e);if(o<0||o>n)throw k("Wrong offset!");if(o+(r=void 0===r?n-o:h(r))>n)throw k("Wrong length!");this[A]=t,this[L]=o,this[I]=r},o&&(W(b,"byteLength","_l"),W(_,"buffer","_b"),W(_,"byteLength","_l"),W(_,"byteOffset","_o")),a(_[g],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return N(H(this,4,t,arguments[1]))},getUint32:function(t){return N(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return F(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return F(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){q(this,1,t,D,e)},setUint8:function(t,e){q(this,1,t,D,e)},setInt16:function(t,e){q(this,2,t,B,e,arguments[2])},setUint16:function(t,e){q(this,2,t,B,e,arguments[2])},setInt32:function(t,e){q(this,4,t,G,e,arguments[2])},setUint32:function(t,e){q(this,4,t,G,e,arguments[2])},setFloat32:function(t,e){q(this,4,t,U,e,arguments[2])},setFloat64:function(t,e){q(this,8,t,j,e,arguments[2])}});y(b,"ArrayBuffer"),y(_,"DataView"),s(_[g],i.VIEW,!0),e.ArrayBuffer=b,e.DataView=_},function(t,e,r){var n;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/**
 * @license BitSet.js v5.0.4 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license BitSet.js v5.0.4 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
!function(r){"use strict";var l=32,i=5;function s(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}function a(t,e){for(var r=0,n=0;n<t.length;n++){r*=2;var o=(t[n]+r)/e|0;r=(t[n]+r)%e,t[n]=o}return r}function u(t,e){if(null==e)return t.data=[0,0,0,0,0,0,0,0,0,0],void(t._=0);if(e instanceof c)return t.data=e.data,void(t._=e._);switch(o(e)){case"number":t.data=[0|e],t._=0;break;case"string":var r=2,n=l;0===e.indexOf("0b")?e=e.substr(2):0===e.indexOf("0x")&&(e=e.substr(2),r=16,n=8),t.data=[],t._=0;for(var s=e.length-n,a=e.length;;){var u=parseInt(e.slice(s>0?s:0,a),r);if(isNaN(u))throw SyntaxError("Invalid param");if(t.data.push(0|u),s<=0)break;s-=n,a-=n}break;default:t.data=[0];var h=t.data;if(e instanceof Array){for(var d=e.length-1;d>=0;d--){var p=e[d];p===1/0?t._=-1:(f(t,p),h[p>>>i]|=1<<p)}break}if(Uint8Array&&e instanceof Uint8Array){f(t,8*e.length);for(d=0;d<e.length;d++)for(var v=e[d],w=0;w<8;w++){var y=8*d+w;h[y>>>i]|=(v>>w&1)<<y}break}throw SyntaxError("Invalid param")}}function c(t){if(!(this instanceof c))return new c(t);u(this,t),this.data=this.data.slice()}function f(t,e){for(var r=e>>>i,n=t.data,o=t._,l=n.length;r>=l;r--)n.push(o)}var h={data:[],_:0};c.prototype={data:[],_:0,set:function(t,e){return f(this,t|=0),void 0===e||e?this.data[t>>>i]|=1<<t:this.data[t>>>i]&=~(1<<t),this},get:function(t){t|=0;var e=this.data,r=t>>>i;return r>e.length?1&this._:e[r]>>>t&1},not:function(){for(var t=this.clone(),e=t.data,r=0;r<e.length;r++)e[r]=~e[r];return t._=~t._,t},and:function(t){u(h,t);var e=this.clone(),r=e.data,n=h.data,o=n.length,i=h._;0!==e._&&f(e,o*l-1);for(var s=r.length,a=Math.min(o,s),c=0;c<a;c++)r[c]&=n[c];for(;c<s;c++)r[c]&=i;return e._&=i,e},or:function(t){u(h,t);for(var e=this.clone(),r=e.data,n=h.data,o=n.length-1,l=r.length-1,i=Math.min(l,o),s=o;s>i;s--)r[s]=n[s];for(;s>=0;s--)r[s]|=n[s];return e._|=h._,e},xor:function(t){u(h,t);var e=this.clone(),r=e.data,n=h.data,o=e._,l=h._,i=0,s=r.length-1,a=n.length-1;for(i=s;i>a;i--)r[i]^=l;for(i=a;i>s;i--)r[i]=o^n[i];for(;i>=0;i--)r[i]^=n[i];return e._^=l,e},andNot:function(t){return this.and(new c(t).flip())},flip:function(t,e){if(void 0===t){for(var r=this.data,n=0;n<r.length;n++)r[n]=~r[n];this._=~this._}else if(void 0===e)f(this,t),this.data[t>>>i]^=1<<t;else if(0<=t&&t<=e){f(this,e);for(n=t;n<=e;n++)this.data[n>>>i]^=1<<n}return this},clear:function(t,e){var r=this.data;if(void 0===t){for(var n=r.length-1;n>=0;n--)r[n]=0;this._=0}else if(void 0===e)f(this,t|=0),r[t>>>i]&=~(1<<t);else if(t<=e){f(this,e);for(n=t;n<=e;n++)r[n>>>i]&=~(1<<n)}return this},slice:function(t,e){if(void 0===t)return this.clone();if(void 0===e){e=this.data.length*l,(n=Object.create(c.prototype))._=this._,n.data=[0];for(var r=t;r<=e;r++)n.set(r-t,this.get(r));return n}if(t<=e&&0<=t){var n;(n=Object.create(c.prototype)).data=[0];for(r=t;r<=e;r++)n.set(r-t,this.get(r));return n}return null},setRange:function(t,e,r){for(var n=t;n<=e;n++)this.set(n,r);return this},clone:function(){var t=Object.create(c.prototype);return t.data=this.data.slice(),t._=this._,t},toArray:Math.clz32?function(){for(var t=[],e=this.data,r=e.length-1;r>=0;r--)for(var n=e[r];0!==n;){var o=31-Math.clz32(n);n^=1<<o,t.unshift(r*l+o)}return 0!==this._&&t.push(1/0),t}:function(){for(var t=[],e=this.data,r=0;r<e.length;r++)for(var n=e[r];0!==n;){var o=n&-n;n^=o,t.push(r*l+s(o-1))}return 0!==this._&&t.push(1/0),t},toString:function(t){var e=this.data;if(t||(t=2),0==(t&t-1)&&t<36){for(var r="",n=2+Math.log(4294967295)/Math.log(t)|0,o=e.length-1;o>=0;o--){var i=e[o];i<0&&(i+=4294967296);var s=i.toString(t);""!==r&&(r+="0".repeat(n-s.length-1)),r+=s}return 0===this._?(""===(r=r.replace(/^0+/,""))&&(r="0"),r):(r="1111"+r).replace(/^1+/,"...1111")}if(2>t||t>36)throw SyntaxError("Invalid base");r=[];var u=[];for(o=e.length;o--;)for(var c=l;c--;)u.push(e[o]>>>c&1);do{r.unshift(a(u,t).toString(t))}while(!u.every(function(t){return 0===t}));return r.join("")},isEmpty:function(){if(0!==this._)return!1;for(var t=this.data,e=t.length-1;e>=0;e--)if(0!==t[e])return!1;return!0},cardinality:function(){if(0!==this._)return 1/0;for(var t=0,e=this.data,r=0;r<e.length;r++){var n=e[r];0!==n&&(t+=s(n))}return t},msb:Math.clz32?function(){if(0!==this._)return 1/0;for(var t=this.data,e=t.length;e-- >0;){var r=Math.clz32(t[e]);if(r!==l)return e*l+l-1-r}return 1/0}:function(){if(0!==this._)return 1/0;for(var t=this.data,e=t.length;e-- >0;){var r=t[e],n=0;if(r){for(;(r>>>=1)>0;n++);return e*l+n}}return 1/0},ntz:function(){for(var t=this.data,e=0;e<t.length;e++){var r=t[e];if(0!==r)return e*l+s(r=(r^r-1)>>>1)}return 1/0},lsb:function(){for(var t=this.data,e=0;e<t.length;e++){var r=t[e],n=0;if(r){for(var o=r&-r;o>>>=1;n++);return l*e+n}}return 1&this._},equals:function(t){u(h,t);var e=this.data,r=h.data,n=this._,o=h._,l=e.length-1,i=r.length-1;if(o!==n)return!1;for(var s=l<i?l:i,a=0;a<=s;a++)if(e[a]!==r[a])return!1;for(a=l;a>i;a--)if(e[a]!==o)return!1;for(a=i;a>l;a--)if(r[a]!==n)return!1;return!0}},c.fromBinaryString=function(t){return new c("0b"+t)},c.fromHexString=function(t){return new c("0x"+t)},c.Random=function(t){(void 0===t||t<0)&&(t=l);for(var e=t%l,r=[],n=Math.ceil(t/l),o=Object.create(c.prototype),i=0;i<n;i++)r.push(4294967296*Math.random()|0);return e>0&&(r[n-1]&=(1<<e)-1),o.data=r,o._=0,o},void 0===(n=function(){return c}.apply(e,[]))||(t.exports=n)}()},function(t,e){var r,n,o=t.exports={};function l(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch(t){r=l}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var a,u=[],c=!1,f=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):f=-1,u.length&&d())}function d(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(a=u,u=[];++f<e;)a&&a[f].run();f=-1,e=u.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,r){"use strict";r.d(e,"a",function(){return S});var n,o=r(58),l=r(16),i=r(78),s=r(51),a=r(5),u=r(14),c=r(57),f=r(2);function h(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){p(t,e,r[e])})}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),t}function m(t){return t}!function(t){t.OR="OR",t.AND="AND",t.SIMPLE="SIMPLE",t.SPRITE="SPRITE"}(n||(n={}));var b=function(){function t(e){w(this,t),this.counter=0,this.prefix=e,this.idMap=new Map,this.jsonMap=new Map}return g(t,[{key:"set",value:function(t,e,r){return this.idMap.has(t)||this.idMap.set(t,r||this.freshId()),this.jsonMap.set(t,e),this.getId(t)}},{key:"get",value:function(t){var e=this.jsonMap.get(t);if(!e)throw new Error("BUG: Element has not been added to the set");return e}},{key:"getId",value:function(t){var e=this.idMap.get(t);if(!e)throw new Error("BUG: Element has not been added to the set");return e}},{key:"toJson",value:function(){var t={},e=!0,r=!1,n=void 0;try{for(var o,l=this.idMap[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=v(o.value,2),s=i[0],a=i[1],u=this.jsonMap.get(s);if(!u)throw new Error('BUG: Could not find matching json representation for "'.concat(a,'"'));t[a]=u}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return t}},{key:"freshId",value:function(){return"".concat(this.prefix,"-").concat(this.counter++)}}]),t}(),_=function(){function t(){w(this,t),this.map=new Map}return g(t,[{key:"get",value:function(t){var e=this.map.get(t);if(!e)throw new Error('ERROR: JSON is missing key "'.concat(t,'". Should have already been added'));return e}},{key:"set",value:function(t,e){this.map.set(t,e)}},{key:"values",value:function(){return this.map.values()}}]),t}(),S=function(){function t(e){var r=this;if(w(this,t),this.game=e,this.colorsMap=new Map,this.spritesMap=new b("sprite"),this.soundMap=new b("sound"),this.collisionLayerMap=new b("collision"),this.conditionsMap=new b("bracket"),this.neighborsMap=new b("neighbor"),this.tileWithModifierMap=new b("twm"),this.tileMap=new b("tile"),this.ruleMap=new b("rule"),this.commandMap=new b("command"),this.game.metadata.backgroundColor){var n=this.game.metadata.backgroundColor.toHex();this.colorsMap.set(n,n)}if(this.game.metadata.textColor){var o=this.game.metadata.textColor.toHex();this.colorsMap.set(o,o)}this.game.collisionLayers.forEach(function(t){return r.buildCollisionLayer(t)}),this.game.sounds.forEach(function(t){r.buildSound(t)}),this.game.objects.forEach(function(t){r.buildSprite(t)}),this.orderedRules=this.game.rules.map(function(t){return r.recBuildRule(t)}),this.game.legends.forEach(function(t){r.buildTile(t)}),this.levels=this.game.levels.map(function(t){return r.buildLevel(t)}),this.winConditions=this.game.winConditions.map(function(t){return t instanceof c.a?{_sourceOffset:t.__source.sourceOffset,type:f.j.ON,qualifier:t.qualifier,tile:r.buildTile(t.tile),onTile:r.buildTile(t.onTile)}:{_sourceOffset:t.__source.sourceOffset,type:f.j.SIMPLE,qualifier:t.qualifier,tile:r.buildTile(t.tile)}})}return g(t,null,[{key:"fromJson",value:function(t,e){for(var r=new _,n=new _,p=new _,w=new _,y=new _,g=new _,m=new _,b=new _,S=new _,k=new _,E=Object.entries(t.colors),C=0;C<E.length;C++){var T=v(E[C],2),O=T[0],M=T[1];r.set(O,new l.a({code:e,sourceOffset:0},M))}for(var x=new _,R=Object.entries(t.collisionLayers),A=0;A<R.length;A++){var I=v(R[A],1)[0];x.set(I,[])}for(var L=new l.b({code:e,sourceOffset:0}),P=0,F=Object.entries(t.sprites),N=0;N<F.length;N++){var D=v(F[N],2),B=D[0],G=(M=D[1])._sourceOffset,j=M.name,U=M.pixels,W=new u.e({code:e,sourceOffset:G},j,null,U.map(function(t){return t.map(function(t){return t&&r.get(t)||L})}));W.allSpritesBitSetIndex=P,P++,n.set(B,W),x.get(M.collisionLayer).push(W)}for(var H=Object.entries(t.tiles),q=0;q<H.length;q++){var z=v(H[q],2),V=z[0],K=(G=(M=z[1])._sourceOffset,void 0);switch(M.type){case"OR":K=new u.b({code:e,sourceOffset:G},M.name,M.sprites.map(function(t){return n.get(t)}));break;case"AND":K=new u.a({code:e,sourceOffset:G},M.name,M.sprites.map(function(t){return n.get(t)}));break;case"SIMPLE":case"SPRITE":K=new u.c({code:e,sourceOffset:G},M.name,n.get(M.sprite));break;default:throw new Error("ERROR: Unsupported tile type")}b.set(V,K)}for(var J=Object.entries(t.sounds),Y=0;Y<J.length;Y++){var X=v(J[Y],2),$=X[0];switch((M=X[1]).type){case f.g.SFX:case f.g.WHEN:p.set($,d({},M));break;case f.g.SPRITE_DIRECTION:case f.g.SPRITE_EVENT:case f.g.SPRITE_MOVE:p.set($,d({},M,{sprite:b.get(M.sprite)}))}}for(var Z=Object.entries(t.commands),Q=0;Q<Z.length;Q++){var tt=v(Z[Q],2),et=tt[0];switch((M=tt[1]).type){case f.c.MESSAGE:k.set(et,M);break;case f.c.SFX:k.set(et,d({},M,{sound:p.get(M.sound)}));break;case f.c.RESTART:case f.c.AGAIN:case f.c.CANCEL:case f.c.CHECKPOINT:case f.c.WIN:k.set(et,M);break;default:throw new Error("ERROR: Unsupported command type")}}for(var rt=Object.entries(t.collisionLayers),nt=0;nt<rt.length;nt++){var ot=v(rt[nt],2),lt=ot[0];G=(M=ot[1])._sourceOffset;w.set(lt,new o.a({code:e,sourceOffset:G},x.get(lt)))}for(var it=Object.entries(t.tilesWithModifiers),st=0;st<it.length;st++){var at=v(it[st],2),ut=at[0];G=(M=at[1])._sourceOffset;m.set(ut,new a.h({code:e,sourceOffset:G},M.isNegated,M.isRandom,M.direction,b.get(M.tile),M.debugFlag))}for(var ct=Object.entries(t.neighbors),ft=0;ft<ct.length;ft++){var ht=v(ct[ft],2),dt=ht[0];G=(M=ht[1])._sourceOffset;g.set(dt,new a.d({code:e,sourceOffset:G},new Set(M.tileWithModifiers.map(function(t){return m.get(t)})),M.debugFlag))}for(var pt=Object.entries(t.brackets),vt=0;vt<pt.length;vt++){var wt=v(pt[vt],2),yt=wt[0];G=(M=wt[1])._sourceOffset;switch(M.type){case f.a.SIMPLE:y.set(yt,new a.b({code:e,sourceOffset:G},M.direction,M.neighbors.map(function(t){return g.get(t)}),M.debugFlag));break;case f.a.ELLIPSIS:y.set(yt,new a.c({code:e,sourceOffset:G},M.direction,M.beforeNeighbors.map(function(t){return g.get(t)}),M.afterNeighbors.map(function(t){return g.get(t)}),M.debugFlag));break;default:throw new Error("ERROR: Unsupported bracket type")}}for(var gt=Object.entries(t.ruleDefinitions),mt=0;mt<gt.length;mt++){var bt=v(gt[mt],2),_t=bt[0];G=(M=bt[1])._sourceOffset;switch(M.type){case f.f.SIMPLE:S.set(_t,new a.e({code:e,sourceOffset:G},M.conditions.map(function(t){return y.get(t)}),M.actions.map(function(t){return y.get(t)}),M.commands.map(function(t){return k.get(t)}),M.isLate,M.isRigid,M.debugFlag));break;case f.f.GROUP:S.set(_t,new a.f({code:e,sourceOffset:G},M.isRandom,M.rules.map(function(t){return S.get(t)})));break;case f.f.LOOP:S.set(_t,new a.g({code:e,sourceOffset:G},!1,M.rules.map(function(t){return S.get(t)})));break;default:throw new Error("ERROR: Unsupported rule type")}}for(var St=t.levels.map(function(t){switch(t.type){case f.d.MAP:return d({},t,{cells:t.cells.map(function(t){return t.map(function(t){return b.get(t)})})});case f.d.MESSAGE:return t;default:throw new Error("ERROR: Invalid level type")}}),kt=t.winConditions.map(function(t){var r=t._sourceOffset;switch(t.type){case f.j.SIMPLE:return new c.b({code:e,sourceOffset:r},t.qualifier,b.get(t.tile));case f.j.ON:return new c.a({code:e,sourceOffset:r},t.qualifier,b.get(t.tile),b.get(t.onTile));default:throw new Error("ERROR: Unsupported Win Condition type")}}),Et=new s.b,Ct=Object.entries(t.metadata),Tt=0;Tt<Ct.length;Tt++){var Ot=v(Ct[Tt],2),Mt=Ot[0];if(M=Ot[1])switch(Mt){case"backgroundColor":case"textColor":Et._setValue(Mt,r.get(M));break;case"zoomScreen":case"flickScreen":var xt=M.width,Rt=M.height;Et._setValue(Mt,new s.a(xt,Rt));break;default:Et._setValue(Mt,M)}}return new i.a({code:e,sourceOffset:0},t.title,Et,h(n.values()),h(b.values()),h(p.values()),h(w.values()),t.rules.map(function(t){return S.get(t)}),kt,St)}}]),g(t,[{key:"buildCollisionLayer",value:function(t){return this.collisionLayerMap.set(t,{_sourceOffset:t.__source.sourceOffset})}},{key:"metadataToJson",value:function(){return{author:this.game.metadata.author,homepage:this.game.metadata.homepage,youtube:this.game.metadata.youtube,zoomscreen:this.game.metadata.zoomscreen,flickscreen:this.game.metadata.flickscreen,colorPalette:this.game.metadata.colorPalette,backgroundColor:this.game.metadata.backgroundColor?this.buildColor(this.game.metadata.backgroundColor):null,textColor:this.game.metadata.textColor?this.buildColor(this.game.metadata.textColor):null,realtimeInterval:this.game.metadata.realtimeInterval,keyRepeatInterval:this.game.metadata.keyRepeatInterval,againInterval:this.game.metadata.againInterval,noAction:this.game.metadata.noAction,noUndo:this.game.metadata.noUndo,runRulesOnLevelStart:this.game.metadata.runRulesOnLevelStart,noRepeatAction:this.game.metadata.noRepeatAction,throttleMovement:this.game.metadata.throttleMovement,noRestart:this.game.metadata.noRestart,requirePlayerMovement:this.game.metadata.requirePlayerMovement,verboseLogging:this.game.metadata.verboseLogging}}},{key:"toJson",value:function(){var t={},e=!0,r=!1,n=void 0;try{for(var o,l=this.colorsMap[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var i=v(o.value,2),s=i[0],a=i[1];t[s]=a}}catch(t){r=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw n}}return{version:1,title:this.game.title,metadata:this.metadataToJson(),colors:t,sounds:this.soundMap.toJson(),collisionLayers:this.collisionLayerMap.toJson(),commands:this.commandMap.toJson(),sprites:this.spritesMap.toJson(),tiles:this.tileMap.toJson(),tilesWithModifiers:this.tileWithModifierMap.toJson(),neighbors:this.neighborsMap.toJson(),brackets:this.conditionsMap.toJson(),ruleDefinitions:this.ruleMap.toJson(),winConditions:this.winConditions,rules:this.orderedRules,levels:this.levels}}},{key:"buildLevel",value:function(t){var e=this;switch(t.type){case f.d.MAP:return d({},t,{cells:t.cells.map(function(t){return t.map(function(t){return e.buildTile(t)})})});case f.d.MESSAGE:return t;default:throw new Error("BUG: Unsupported level subtype")}}},{key:"recBuildRule",value:function(t){var e=this;if(t instanceof a.e)return this.ruleMap.set(t,{type:f.f.SIMPLE,directions:[],conditions:t.conditionBrackets.map(function(t){return e.buildConditionBracket(t)}),actions:t.actionBrackets.map(function(t){return e.buildConditionBracket(t)}),commands:t.commands.map(function(t){return e.buildCommand(t)}),isRandom:null,isLate:t.isLate(),isRigid:t.hasRigid(),_sourceOffset:t.__source.sourceOffset,debugFlag:t.debugFlag});if(t instanceof a.f)return this.ruleMap.set(t,{type:f.f.GROUP,isRandom:t.isRandom,rules:t.getChildRules().map(function(t){return e.recBuildRule(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:null});if(t instanceof a.g){var r={type:f.f.LOOP,rules:t.getChildRules().map(function(t){return e.recBuildRule(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:null};return this.ruleMap.set(t,r)}throw new Error("BUG: Unsupported rule type")}},{key:"buildCommand",value:function(t){switch(t.type){case f.c.SFX:return this.commandMap.set(t,d({},t,{sound:this.soundMap.getId(t.sound)}));case f.c.AGAIN:case f.c.CANCEL:case f.c.CHECKPOINT:case f.c.MESSAGE:case f.c.RESTART:case f.c.WIN:return this.commandMap.set(t,t);default:throw new Error("BUG: Unsupoprted command type")}}},{key:"buildConditionBracket",value:function(t){var e=this;if(t instanceof a.c){var r=t,n=r.beforeEllipsisBracket.getNeighbors().map(function(t){return e.buildNeighbor(t)}),o=r.afterEllipsisBracket.getNeighbors().map(function(t){return e.buildNeighbor(t)});return this.conditionsMap.set(t,{type:f.a.ELLIPSIS,direction:m(r.direction),beforeNeighbors:n,afterNeighbors:o,_sourceOffset:t.__source.sourceOffset,debugFlag:r.debugFlag})}if(t instanceof a.b)return this.conditionsMap.set(t,{type:f.a.SIMPLE,direction:m(t.direction),neighbors:t.getNeighbors().map(function(t){return e.buildNeighbor(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:t.debugFlag});throw new Error("BUG: Unsupported bracket type")}},{key:"buildNeighbor",value:function(t){var e=this;return this.neighborsMap.set(t,{tileWithModifiers:h(t._tilesWithModifier).map(function(t){return e.buildTileWithModifier(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:null})}},{key:"buildTileWithModifier",value:function(t){return this.tileWithModifierMap.set(t,{direction:t._direction?m(t._direction):null,isNegated:t._isNegated,isRandom:t._isRandom,tile:this.buildTile(t._tile),_sourceOffset:t.__source.sourceOffset,debugFlag:t._debugFlag})}},{key:"buildTile",value:function(t){var e=this;if(t instanceof u.b)return this.tileMap.set(t,{type:n.OR,name:t.getName(),sprites:t.getSprites().map(function(t){return e.buildSprite(t)}),collisionLayers:t.getCollisionLayers().map(function(t){return e.buildCollisionLayer(t)}),_sourceOffset:t.__source.sourceOffset});if(t instanceof u.a)return this.tileMap.set(t,{type:n.AND,name:t.getName(),sprites:t.getSprites().map(function(t){return e.buildSprite(t)}),collisionLayers:t.getCollisionLayers().map(function(t){return e.buildCollisionLayer(t)}),_sourceOffset:t.__source.sourceOffset});if(t instanceof u.c)return this.tileMap.set(t,{type:n.SIMPLE,name:t.getName(),sprite:this.buildSprite(t.getSprites()[0]),collisionLayers:t.getCollisionLayers().map(function(t){return e.buildCollisionLayer(t)}),_sourceOffset:t.__source.sourceOffset});if(t instanceof u.d)return this.tileMap.set(t,{type:n.SPRITE,name:t.getName(),sprite:this.buildSprite(t),collisionLayer:this.buildCollisionLayer(t.getCollisionLayer()),_sourceOffset:t.__source.sourceOffset});throw new Error("BUG: Invalid tile type")}},{key:"buildSprite",value:function(t){var e=this,r=this.game.getSpriteSize(),n=r.spriteHeight,o=r.spriteWidth;return this.spritesMap.set(t,{name:t.getName(),collisionLayer:this.collisionLayerMap.getId(t.getCollisionLayer()),pixels:t.getPixels(n,o).map(function(t){return t.map(function(t){return t.isTransparent()?null:e.buildColor(t)})}),_sourceOffset:t.__source.sourceOffset})}},{key:"buildColor",value:function(t){var e=t.toHex();return this.colorsMap.set(e,e),e}},{key:"buildSound",value:function(t){switch(t.type){case f.g.SFX:case f.g.WHEN:return this.soundMap.set(t,d({},t));case f.g.SPRITE_DIRECTION:case f.g.SPRITE_EVENT:case f.g.SPRITE_MOVE:return this.soundMap.set(t,d({},t,{sprite:this.buildTile(t.sprite)}))}}}]),t}()},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,r){t.exports=!r(10)&&!r(6)(function(){return 7!=Object.defineProperty(r(79)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){e.f=r(8)},function(t,e,r){var n=r(22),o=r(23),l=r(64)(!1),i=r(81)("IE_PROTO");t.exports=function(t,e){var r,s=o(t),a=0,u=[];for(r in s)r!=i&&n(s,r)&&u.push(r);for(;e.length>a;)n(s,r=e[a++])&&(~l(u,r)||u.push(r));return u}},function(t,e,r){var n=r(11),o=r(3),l=r(43);t.exports=r(10)?Object.defineProperties:function(t,e){o(t);for(var r,i=l(e),s=i.length,a=0;s>a;)n.f(t,r=i[a++],e[r]);return t}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(23),l=r(46).f,i={}.toString,s="object"==("undefined"==typeof window?"undefined":n(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?function(t){try{return l(t)}catch(t){return s.slice()}}(t):l(o(t))}},function(t,e,r){"use strict";var n=r(43),o=r(65),l=r(60),i=r(12),s=r(59),a=Object.assign;t.exports=!a||r(6)(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=a({},t)[r]||Object.keys(a({},e)).join("")!=n})?function(t,e){for(var r=i(t),a=arguments.length,u=1,c=o.f,f=l.f;a>u;)for(var h,d=s(arguments[u++]),p=c?n(d).concat(c(d)):n(d),v=p.length,w=0;v>w;)f.call(d,h=p[w++])&&(r[h]=d[h]);return r}:a},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,r){"use strict";var n=r(15),o=r(7),l=r(118),i=[].slice,s={};t.exports=Function.bind||function(t){var e=n(this),r=i.call(arguments,1),a=function n(){var o=r.concat(i.call(arguments));return this instanceof n?function(t,e,r){if(!(e in s)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,r)}(e,o.length,o):l(e,o,t)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(4).parseInt,o=r(54).trim,l=r(85),i=/^[-+]?0[xX]/;t.exports=8!==n(l+"08")||22!==n(l+"0x16")?function(t,e){var r=o(String(t),3);return n(r,e>>>0||(i.test(r)?16:10))}:n},function(t,e,r){var n=r(4).parseFloat,o=r(54).trim;t.exports=1/n(r(85)+"-0")!=-1/0?function(t){var e=o(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},function(t,e,r){var n=r(28);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,r){var n=r(7),o=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,r){var n=r(88),o=Math.pow,l=o(2,-52),i=o(2,-23),s=o(2,127)*(2-i),a=o(2,-126);t.exports=Math.fround||function(t){var e,r,o=Math.abs(t),u=n(t);return o<a?u*(o/a/i+1/l-1/l)*a*i:(r=(e=(1+i/l)*o)-(e-o))>s||r!=r?u*(1/0):u*r}},function(t,e,r){var n=r(3);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){var l=t.return;throw void 0!==l&&n(l.call(t)),e}}},function(t,e,r){var n=r(15),o=r(12),l=r(59),i=r(9);t.exports=function(t,e,r,s,a){n(e);var u=o(t),c=l(u),f=i(u.length),h=a?f-1:0,d=a?-1:1;if(r<2)for(;;){if(h in c){s=c[h],h+=d;break}if(h+=d,a?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;a?h>=0:f>h;h+=d)h in c&&(s=e(s,c[h],h,u));return s}},function(t,e,r){"use strict";var n=r(12),o=r(44),l=r(9);t.exports=[].copyWithin||function(t,e){var r=n(this),i=l(r.length),s=o(t,i),a=o(e,i),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?i:o(u,i))-a,i-s),f=1;for(a<s&&s<a+c&&(f=-1,a+=c-1,s+=c-1);c-- >0;)a in r?r[s]=r[a]:delete r[s],s+=f,a+=f;return r}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){"use strict";var n=r(100);r(1)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(61)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var n=r(3),o=r(7),l=r(104);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=l.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";var n=r(134),o=r(56);t.exports=r(73)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(o(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,r){"use strict";var n=r(11).f,o=r(45),l=r(50),i=r(27),s=r(48),a=r(49),u=r(90),c=r(128),f=r(47),h=r(10),d=r(37).fastKey,p=r(56),v=h?"_s":"size",w=function(t,e){var r,n=d(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,u){var c=t(function(t,n){s(t,c,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[v]=0,null!=n&&a(n,r,t[u],t)});return l(c.prototype,{clear:function(){for(var t=p(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var r=p(this,e),n=w(r,t);if(n){var o=n.n,l=n.p;delete r._i[n.i],n.r=!0,l&&(l.n=o),o&&(o.p=l),r._f==n&&(r._f=o),r._l==n&&(r._l=l),r[v]--}return!!n},forEach:function(t){p(this,e);for(var r,n=i(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!w(p(this,e),t)}}),h&&n(c.prototype,"size",{get:function(){return p(this,e)[v]}}),c},def:function(t,e,r){var n,o,l=w(t,e);return l?l.v=r:(t._l=l={i:o=d(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=l),n&&(n.n=l),t[v]++,"F"!==o&&(t._i[o]=l)),t},getEntry:w,setStrong:function(t,e,r){u(t,e,function(t,r){this._t=p(t,e),this._k=r,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},r?"entries":"values",!r,!0),f(e)}}},function(t,e,r){"use strict";var n=r(134),o=r(56);t.exports=r(73)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(o(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,r){"use strict";var n,o=r(34)(0),l=r(19),i=r(37),s=r(115),a=r(137),u=r(7),c=r(6),f=r(56),h=i.getWeak,d=Object.isExtensible,p=a.ufstore,v={},w=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(u(t)){var e=h(t);return!0===e?p(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return a.def(f(this,"WeakMap"),t,e)}},g=t.exports=r(73)("WeakMap",w,y,a,!0,!0);c(function(){return 7!=(new g).set((Object.freeze||Object)(v),7).get(v)})&&(s((n=a.getConstructor(w,"WeakMap")).prototype,y),i.NEED=!0,o(["delete","has","get","set"],function(t){var e=g.prototype,r=e[t];l(e,t,function(e,o){if(u(e)&&!d(e)){this._f||(this._f=new n);var l=this._f[t](e,o);return"set"==t?this:l}return r.call(this,e,o)})}))},function(t,e,r){"use strict";var n=r(50),o=r(37).getWeak,l=r(3),i=r(7),s=r(48),a=r(49),u=r(34),c=r(22),f=r(56),h=u(5),d=u(6),p=0,v=function(t){return t._l||(t._l=new w)},w=function(){this.a=[]},y=function(t,e){return h(t.a,function(t){return t[0]===e})};w.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var r=y(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,l){var u=t(function(t,n){s(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=n&&a(n,r,t[l],t)});return n(u.prototype,{delete:function(t){if(!i(t))return!1;var r=o(t);return!0===r?v(f(this,e)).delete(t):r&&c(r,this._i)&&delete r[this._i]},has:function(t){if(!i(t))return!1;var r=o(t);return!0===r?v(f(this,e)).has(t):r&&c(r,this._i)}}),u},def:function(t,e,r){var n=o(l(e),!0);return!0===n?v(t).set(e,r):n[t._i]=r,t},ufstore:v}},function(t,e,r){var n=r(29),o=r(9);t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=o(e);if(e!==r)throw RangeError("Wrong length!");return r}},function(t,e,r){var n=r(46),o=r(65),l=r(3),i=r(4).Reflect;t.exports=i&&i.ownKeys||function(t){var e=n.f(l(t)),r=o.f;return r?e.concat(r(t)):e}},function(t,e,r){"use strict";var n=r(66),o=r(7),l=r(9),i=r(27),s=r(8)("isConcatSpreadable");t.exports=function t(e,r,a,u,c,f,h,d){for(var p,v,w=c,y=0,g=!!h&&i(h,d,3);y<u;){if(y in a){if(p=g?g(a[y],y,r):a[y],v=!1,o(p)&&(v=void 0!==(v=p[s])?!!v:n(p)),v&&f>0)w=t(e,r,p,l(p.length),w,f-1)-1;else{if(w>=9007199254740991)throw TypeError();e[w]=p}w++}y++}return w}},function(t,e,r){var n=r(9),o=r(87),l=r(32);t.exports=function(t,e,r,i){var s=String(l(t)),a=s.length,u=void 0===r?" ":String(r),c=n(e);if(c<=a||""==u)return s;var f=c-a,h=o.call(u,Math.ceil(f/u.length));return h.length>f&&(h=h.slice(0,f)),i?h+s:s+h}},function(t,e,r){var n=r(43),o=r(23),l=r(60).f;t.exports=function(t){return function(e){for(var r,i=o(e),s=n(i),a=s.length,u=0,c=[];a>u;)l.call(i,r=s[u++])&&c.push(t?[r,i[r]]:i[r]);return c}}},function(t,e,r){var n=r(53),o=r(144);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,r){var n=r(49);t.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},function(t,e){t.exports=Math.scale||function(t,e,r,n,o){return 0===arguments.length||t!=t||e!=e||r!=r||n!=n||o!=o?NaN:t===1/0||t===-1/0?t:(t-e)*(o-n)/(r-e)+n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}r.d(e,"a",function(){return s});var i=function(){function t(e){n(this,t),this.maxSize=e,this.size=0,this.cache={},this.oldCache={}}return l(t,[{key:"set",value:function(t,e){var r=void 0!==this.cache[t]||void 0!==this.oldCache[t];this.size>this.maxSize&&(this.oldCache=this.cache,this.size=0),r||(this.cache[t]=e,this.size++)}},{key:"get",value:function(t){var e=this.cache[t];return void 0!==e?e:this.oldCache[t]}}]),t}(),s=function(){function t(e){n(this,t),this.lru=new i(e)}return l(t,[{key:"get",value:function(t,e){var r=this.lru.get(t);if(void 0!==r)return r;var n=e();return this.lru.set(t,n),n}}]),t}()},function(t,e,r){var n,o=r(359).RNG,l=r(360).MakeRiff,i=.25,s=5512,a=8,u=0,c=["square","sawtooth","sine","noise","triangle","breaker"];function f(){try{null==n&&("undefined"!=typeof AudioContext?n=new AudioContext:"undefined"!=typeof webkitAudioContext&&(n=new webkitAudioContext))}catch(t){window.console.log(t)}}f();var h;function d(){var t={};return t.wave_type=u,t.p_env_attack=0,t.p_env_sustain=.3,t.p_env_punch=0,t.p_env_decay=.4,t.p_base_freq=.3,t.p_freq_limit=0,t.p_freq_ramp=0,t.p_freq_dramp=0,t.p_vib_strength=0,t.p_vib_speed=0,t.p_arp_mod=0,t.p_arp_speed=0,t.p_duty=0,t.p_duty_ramp=0,t.p_repeat_speed=0,t.p_pha_offset=0,t.p_pha_ramp=0,t.p_lpf_freq=1,t.p_lpf_ramp=0,t.p_lpf_resonance=0,t.p_hpf_freq=0,t.p_hpf_ramp=0,t.sound_vol=.5,t.sample_rate=44100,t.bit_depth=8,t}var p=!1;function v(t){return p?h.uniform()*t:Math.random()*t}function w(t){return p?Math.floor(h.uniform()*(t+1)):Math.floor(Math.random()*(t+1))}pickupCoin=function(){var t=d();if(t.wave_type=Math.floor(v(c.length)),3===t.wave_type&&(t.wave_type=0),t.p_base_freq=.4+v(.5),t.p_env_attack=0,t.p_env_sustain=v(.1),t.p_env_decay=.1+v(.4),t.p_env_punch=.3+v(.3),w(1)){t.p_arp_speed=.5+v(.2);var e=1+(1|v(7)),r=e+(1|v(7))+2;t.p_arp_mod=+e/+r}return t},laserShoot=function(){var t=d();return t.wave_type=w(2),2===t.wave_type&&w(1)&&(t.wave_type=w(1)),t.wave_type=Math.floor(v(c.length)),3===t.wave_type&&(t.wave_type=u),t.p_base_freq=.5+v(.5),t.p_freq_limit=t.p_base_freq-.2-v(.6),t.p_freq_limit<.2&&(t.p_freq_limit=.2),t.p_freq_ramp=-.15-v(.2),0===w(2)&&(t.p_base_freq=.3+v(.6),t.p_freq_limit=v(.1),t.p_freq_ramp=-.35-v(.3)),w(1)?(t.p_duty=v(.5),t.p_duty_ramp=v(.2)):(t.p_duty=.4+v(.5),t.p_duty_ramp=-v(.7)),t.p_env_attack=0,t.p_env_sustain=.1+v(.2),t.p_env_decay=v(.4),w(1)&&(t.p_env_punch=v(.3)),0===w(2)&&(t.p_pha_offset=v(.2),t.p_pha_ramp=-v(.2)),w(1)&&(t.p_hpf_freq=v(.3)),t},explosion=function(){var t=d();return w(1)?(t.p_base_freq=.1+v(.4),t.p_freq_ramp=-.1+v(.4)):(t.p_base_freq=.2+v(.7),t.p_freq_ramp=-.2-v(.2)),t.p_base_freq*=t.p_base_freq,0===w(4)&&(t.p_freq_ramp=0),0===w(2)&&(t.p_repeat_speed=.3+v(.5)),t.p_env_attack=0,t.p_env_sustain=.1+v(.3),t.p_env_decay=v(.5),0===w(1)&&(t.p_pha_offset=-.3+v(.9),t.p_pha_ramp=-v(.3)),t.p_env_punch=.2+v(.6),w(1)&&(t.p_vib_strength=v(.7),t.p_vib_speed=v(.6)),0===w(2)&&(t.p_arp_speed=.6+v(.3),t.p_arp_mod=.8-v(1.6)),t},birdSound=function(){var t=d();return v(10)<1?(t.wave_type=Math.floor(v(c.length)),3===t.wave_type&&(t.wave_type=u),t.p_env_attack=.4304400932967592+v(.2)-.1,t.p_env_sustain=.15739346034252394+v(.2)-.1,t.p_env_punch=.004488201744871758+v(.2)-.1,t.p_env_decay=.07478075528212291+v(.2)-.1,t.p_base_freq=.9865265720147687+v(.2)-.1,t.p_freq_limit=0+v(.2)-.1,t.p_freq_ramp=-.2995018224359539+v(.2)-.1,v(1)<.5&&(t.p_freq_ramp=.1+v(.15)),t.p_freq_dramp=.004598608156964473+v(.1)-.05,t.p_vib_strength=-.2202799497929496+v(.2)-.1,t.p_vib_speed=.8084998703158364+v(.2)-.1,t.p_arp_mod=0,t.p_arp_speed=0,t.p_duty=-.9031808754347107+v(.2)-.1,t.p_duty_ramp=-.8128699999808343+v(.2)-.1,t.p_repeat_speed=.601486018931999+v(.2)-.1,t.p_pha_offset=-.9424902314367765+v(.2)-.1,t.p_pha_ramp=-.1055482222272056+v(.2)-.1,t.p_lpf_freq=.9989765717851521+v(.2)-.1,t.p_lpf_ramp=-.25051720626043017+v(.2)-.1,t.p_lpf_resonance=.32777871505494693+v(.2)-.1,t.p_hpf_freq=.0023548750981756753+v(.2)-.1,t.p_hpf_ramp=-.002375673204842568+v(.2)-.1,t):v(10)<1?(t.wave_type=Math.floor(v(c.length)),3===t.wave_type&&(t.wave_type=u),t.p_env_attack=.5277795946672003+v(.2)-.1,t.p_env_sustain=.18243733568468432+v(.2)-.1,t.p_env_punch=-.020159754546840117+v(.2)-.1,t.p_env_decay=.1561353422051903+v(.2)-.1,t.p_base_freq=.9028855606533718+v(.2)-.1,t.p_freq_limit=-.008842787837148716,t.p_freq_ramp=-.1,t.p_freq_dramp=-.012891241489551925,t.p_vib_strength=-.17923136138403065+v(.2)-.1,t.p_vib_speed=.908263385610142+v(.2)-.1,t.p_arp_mod=.41690153355414894+v(.2)-.1,t.p_arp_speed=.0010766233195860704+v(.2)-.1,t.p_duty=-.8735363011184684+v(.2)-.1,t.p_duty_ramp=-.7397985366747507+v(.2)-.1,t.p_repeat_speed=.0591789344172107+v(.2)-.1,t.p_pha_offset=-.9961184222777699+v(.2)-.1,t.p_pha_ramp=-.08234769395850523+v(.2)-.1,t.p_lpf_freq=.9412475115697335+v(.2)-.1,t.p_lpf_ramp=-.18261358925834958+v(.2)-.1,t.p_lpf_resonance=.24541438107389477+v(.2)-.1,t.p_hpf_freq=-.01831940280978611+v(.2)-.1,t.p_hpf_ramp=-.03857383633171346+v(.2)-.1,t):v(10)<1?(t.wave_type=Math.floor(v(c.length)),3===t.wave_type&&(t.wave_type=u),t.p_env_attack=.4304400932967592+v(.2)-.1,t.p_env_sustain=.15739346034252394+v(.2)-.1,t.p_env_punch=.004488201744871758+v(.2)-.1,t.p_env_decay=.07478075528212291+v(.2)-.1,t.p_base_freq=.9865265720147687+v(.2)-.1,t.p_freq_limit=0+v(.2)-.1,t.p_freq_ramp=-.2995018224359539+v(.2)-.1,t.p_freq_dramp=.004598608156964473+v(.2)-.1,t.p_vib_strength=-.2202799497929496+v(.2)-.1,t.p_vib_speed=.8084998703158364+v(.2)-.1,t.p_arp_mod=-.46410459213693644+v(.2)-.1,t.p_arp_speed=-.10955361249587248+v(.2)-.1,t.p_duty=-.9031808754347107+v(.2)-.1,t.p_duty_ramp=-.8128699999808343+v(.2)-.1,t.p_repeat_speed=.7014860189319991+v(.2)-.1,t.p_pha_offset=-.9424902314367765+v(.2)-.1,t.p_pha_ramp=-.1055482222272056+v(.2)-.1,t.p_lpf_freq=.9989765717851521+v(.2)-.1,t.p_lpf_ramp=-.25051720626043017+v(.2)-.1,t.p_lpf_resonance=.32777871505494693+v(.2)-.1,t.p_hpf_freq=.0023548750981756753+v(.2)-.1,t.p_hpf_ramp=-.002375673204842568+v(.2)-.1,t):v(5)>1?(t.wave_type=Math.floor(v(c.length)),3===t.wave_type&&(t.wave_type=u),w(1)?(t.p_arp_mod=.2697849293151393+v(.2)-.1,t.p_arp_speed=-.3131172257760948+v(.2)-.1,t.p_base_freq=.8090588299313949+v(.2)-.1,t.p_duty=-.6210022920964955+v(.2)-.1,t.p_duty_ramp=-.00043441813553182567+v(.2)-.1,t.p_env_attack=.004321877246874195+v(.2)-.1,t.p_env_decay=.1+v(.2)-.1,t.p_env_punch=.061737781504416146+v(.2)-.1,t.p_env_sustain=.4987252564798832+v(.2)-.1,t.p_freq_dramp=.31700340314222614+v(.2)-.1,t.p_freq_limit=0+v(.2)-.1,t.p_freq_ramp=-.163380391341416+v(.2)-.1,t.p_hpf_freq=.4709005021145149+v(.2)-.1,t.p_hpf_ramp=.6924667290539194+v(.2)-.1,t.p_lpf_freq=.8351398631384511+v(.2)-.1,t.p_lpf_ramp=.36616557192873134+v(.2)-.1,t.p_lpf_resonance=-.08685777111664439+v(.2)-.1,t.p_pha_offset=-.036084571580025544+v(.2)-.1,t.p_pha_ramp=-.014806445085568108+v(.2)-.1,t.p_repeat_speed=-.8094368475518489+v(.2)-.1,t.p_vib_speed=.4496665457171294+v(.2)-.1,t.p_vib_strength=.23413762515532424+v(.2)-.1):(t.p_arp_mod=-.35697118026766184+v(.2)-.1,t.p_arp_speed=.3581140690559588+v(.2)-.1,t.p_base_freq=1.3260897696157528+v(.2)-.1,t.p_duty=-.30984900436710694+v(.2)-.1,t.p_duty_ramp=-.0014374759133411626+v(.2)-.1,t.p_env_attack=.3160357835682254+v(.2)-.1,t.p_env_decay=.1+v(.2)-.1,t.p_env_punch=.24323114016870148+v(.2)-.1,t.p_env_sustain=.4+v(.2)-.1,t.p_freq_dramp=.2866475886237244+v(.2)-.1,t.p_freq_limit=0+v(.2)-.1,t.p_freq_ramp=-.10956352368742976+v(.2)-.1,t.p_hpf_freq=.20772718017889846+v(.2)-.1,t.p_hpf_ramp=.1564090637378835+v(.2)-.1,t.p_lpf_freq=.6021372770637031+v(.2)-.1,t.p_lpf_ramp=.24016227139979027+v(.2)-.1,t.p_lpf_resonance=-.08787383821160144+v(.2)-.1,t.p_pha_offset=-.381597686151701+v(.2)-.1,t.p_pha_ramp=-.0002481687661373495+v(.2)-.1,t.p_repeat_speed=.07812112809425686+v(.2)-.1,t.p_vib_speed=-.13648848579133943+v(.2)-.1,t.p_vib_strength=.0018874158972302657+v(.2)-.1),t):(t.wave_type=Math.floor(v(c.length)),1!==t.wave_type&&3!==t.wave_type||(t.wave_type=2),t.p_base_freq=.85+v(.15),t.p_freq_ramp=.3+v(.15),t.p_env_attack=0+v(.09),t.p_env_sustain=.2+v(.3),t.p_env_decay=0+v(.1),t.p_duty=v(2)-1,t.p_duty_ramp=Math.pow(v(2)-1,3),t.p_repeat_speed=.5+v(.1),t.p_pha_offset=-.3+v(.9),t.p_pha_ramp=-v(.3),t.p_arp_speed=.4+v(.6),t.p_arp_mod=.8+v(.1),t.p_lpf_resonance=v(2)-1,t.p_lpf_freq=1-Math.pow(v(1),3),t.p_lpf_ramp=Math.pow(v(2)-1,3),t.p_lpf_freq<.1&&t.p_lpf_ramp<-.05&&(t.p_lpf_ramp=-t.p_lpf_ramp),t.p_hpf_freq=Math.pow(v(1),5),t.p_hpf_ramp=Math.pow(v(2)-1,5),t)},pushSound=function(){var t=d();return t.wave_type=Math.floor(v(c.length)),2===t.wave_type&&t.wave_type++,0===t.wave_type&&(t.wave_type=3),t.p_base_freq=.1+v(.4),t.p_freq_ramp=.05+v(.2),t.p_env_attack=.01+v(.09),t.p_env_sustain=.01+v(.09),t.p_env_decay=.01+v(.09),t.p_repeat_speed=.3+v(.5),t.p_pha_offset=-.3+v(.9),t.p_pha_ramp=-v(.3),t.p_arp_speed=.6+v(.3),t.p_arp_mod=.8-v(1.6),t},powerUp=function(){var t=d();return w(1)?t.wave_type=1:t.p_duty=v(.6),t.wave_type=Math.floor(v(c.length)),3===t.wave_type&&(t.wave_type=u),w(1)?(t.p_base_freq=.2+v(.3),t.p_freq_ramp=.1+v(.4),t.p_repeat_speed=.4+v(.4)):(t.p_base_freq=.2+v(.3),t.p_freq_ramp=.05+v(.2),w(1)&&(t.p_vib_strength=v(.7),t.p_vib_speed=v(.6))),t.p_env_attack=0,t.p_env_sustain=v(.4),t.p_env_decay=.1+v(.4),t},hitHurt=function(){return result=d(),result.wave_type=w(2),2===result.wave_type&&(result.wave_type=3),result.wave_type===u&&(result.p_duty=v(.6)),result.wave_type=Math.floor(v(c.length)),result.p_base_freq=.2+v(.6),result.p_freq_ramp=-.3-v(.4),result.p_env_attack=0,result.p_env_sustain=v(.1),result.p_env_decay=.1+v(.2),w(1)&&(result.p_hpf_freq=v(.3)),result},jump=function(){return result=d(),result.wave_type=u,result.wave_type=Math.floor(v(c.length)),3===result.wave_type&&(result.wave_type=u),result.p_duty=v(.6),result.p_base_freq=.3+v(.3),result.p_freq_ramp=.1+v(.2),result.p_env_attack=0,result.p_env_sustain=.1+v(.3),result.p_env_decay=.1+v(.2),w(1)&&(result.p_hpf_freq=v(.3)),w(1)&&(result.p_lpf_freq=1-v(.6)),result},blipSelect=function(){return result=d(),result.wave_type=w(1),result.wave_type=Math.floor(v(c.length)),3===result.wave_type&&(result.wave_type=w(1)),result.wave_type===u&&(result.p_duty=v(.6)),result.p_base_freq=.2+v(.4),result.p_env_attack=0,result.p_env_sustain=.1+v(.1),result.p_env_decay=v(.2),result.p_hpf_freq=.1,result},random=function(){return result=d(),result.wave_type=Math.floor(v(c.length)),result.p_base_freq=Math.pow(v(2)-1,2),w(1)&&(result.p_base_freq=Math.pow(v(2)-1,3)+.5),result.p_freq_limit=0,result.p_freq_ramp=Math.pow(v(2)-1,5),result.p_base_freq>.7&&result.p_freq_ramp>.2&&(result.p_freq_ramp=-result.p_freq_ramp),result.p_base_freq<.2&&result.p_freq_ramp<-.05&&(result.p_freq_ramp=-result.p_freq_ramp),result.p_freq_dramp=Math.pow(v(2)-1,3),result.p_duty=v(2)-1,result.p_duty_ramp=Math.pow(v(2)-1,3),result.p_vib_strength=Math.pow(v(2)-1,3),result.p_vib_speed=v(2)-1,result.p_env_attack=Math.pow(v(2)-1,3),result.p_env_sustain=Math.pow(v(2)-1,2),result.p_env_decay=v(2)-1,result.p_env_punch=Math.pow(v(.8),2),result.p_env_attack+result.p_env_sustain+result.p_env_decay<.2&&(result.p_env_sustain+=.2+v(.3),result.p_env_decay+=.2+v(.3)),result.p_lpf_resonance=v(2)-1,result.p_lpf_freq=1-Math.pow(v(1),3),result.p_lpf_ramp=Math.pow(v(2)-1,3),result.p_lpf_freq<.1&&result.p_lpf_ramp<-.05&&(result.p_lpf_ramp=-result.p_lpf_ramp),result.p_hpf_freq=Math.pow(v(1),5),result.p_hpf_ramp=Math.pow(v(2)-1,5),result.p_pha_offset=Math.pow(v(2)-1,3),result.p_pha_ramp=Math.pow(v(2)-1,3),result.p_repeat_speed=v(2)-1,result.p_arp_speed=v(2)-1,result.p_arp_mod=v(2)-1,result};var y=[pickupCoin,laserShoot,explosion,powerUp,hitHurt,jump,blipSelect,pushSound,random,birdSound];function g(t,e){this._buffer=n.createBuffer(1,t,e)}generateFromSeed=function(t){h=new o(t/100|0),p=!0;var e=(0,y[t%100%y.length])();return e.seed=t,p=!1,e},g.prototype.getBuffer=function(){return this._buffer.getChannelData(0)},g.prototype.play=function(){var t=n.createBufferSource(),e=n.createBiquadFilter(),r=n.createBiquadFilter(),o=n.createBiquadFilter();t.buffer=this._buffer,t.connect(e),e.frequency.value=1600,r.frequency.value=1600,o.frequency.value=1600,e.connect(r),r.connect(o),o.connect(n.destination);var l=n.currentTime;return void 0!==t.start?t.start(l):t.noteOn(l)},g.MIN_SAMPLE_RATE=22050,void 0===n&&((g=function(t,e){this._sample_rate=e,this._buffer=new Array(t),this._audioElement=null}).prototype.getBuffer=function(){return this._audioElement=null,this._buffer},g.prototype.play=function(){if(!this._audioElement){for(var t=0;t<this._buffer.length;t++)this._buffer[t]=255&Math.floor(128*Math.max(0,Math.min(this._buffer[t]+1,2)));var e=l(this._sample_rate,a,this._buffer);return this._audioElement=new Audio,this._audioElement.src=e.dataURI,this._audioElement.play()}this._audioElement.cloneNode(!1).play()},g.MIN_SAMPLE_RATE=1),g.generate=function(t){function e(){r=0,n=100/(t.p_base_freq*t.p_base_freq+.001),o=Math.floor(n),l=100/(t.p_freq_limit*t.p_freq_limit+.001),i=1-.01*Math.pow(t.p_freq_ramp,3),s=1e-6*-Math.pow(t.p_freq_dramp,3),a=.5-.5*t.p_duty,c=5e-5*-t.p_duty_ramp,f=t.p_arp_mod>=0?1-.9*Math.pow(t.p_arp_mod,2):1+10*Math.pow(t.p_arp_mod,2),0,h=Math.floor(2e4*Math.pow(1-t.p_arp_speed,2)+32),1==t.p_arp_speed&&(h=0)}var r,n,o,l,i,s,a,c,f,h;e();var d=0,p=0,v=.1*Math.pow(t.p_lpf_freq,3),w=1+1e-4*t.p_lpf_ramp,y=5/(1+20*Math.pow(t.p_lpf_resonance,2))*(.01+v);y>.8&&(y=.8);var m=0,b=.1*Math.pow(t.p_hpf_freq,2),_=1+3e-4*t.p_hpf_ramp,S=0,k=.01*Math.pow(t.p_vib_speed,2),E=.5*t.p_vib_strength,C=0,T=0,O=0,M=[Math.floor(t.p_env_attack*t.p_env_attack*1e5),Math.floor(t.p_env_sustain*t.p_env_sustain*1e5),Math.floor(t.p_env_decay*t.p_env_decay*1e5)],x=M[0]+M[1]+M[2],R=0,A=1020*Math.pow(t.p_pha_offset,2);t.p_pha_offset<0&&(A=-A);var I=1*Math.pow(t.p_pha_ramp,2);t.p_pha_ramp<0&&(I=-I);for(var L=Math.abs(Math.floor(A)),P=0,F=[],N=0;N<1024;++N)F[N]=0;var D=[];for(N=0;N<32;++N)D[N]=2*Math.random()-1;var B=Math.floor(2e4*Math.pow(1-t.p_repeat_speed,2)+32);0==t.p_repeat_speed&&(B=0);for(var G,j=t.sound_vol,U=(j=Math.exp(t.sound_vol)-1,0),W=0,H=Math.floor(44100/t.sample_rate),q=0,z=Math.ceil(x/H),V=(G=t.sample_rate<g.MIN_SAMPLE_RATE?new g(4*z,g.MIN_SAMPLE_RATE):new g(z,t.sample_rate)).getBuffer(),K=0;;++K){0!=B&&++r>=B&&e(),0!=h&&K>=h&&(h=0,n*=f),(n*=i+=s)>l&&(n=l,t.p_freq_limit>0&&!0);var J=n;if(E>0&&(S+=k,J=n*(1+Math.sin(S)*E)),(o=Math.floor(J))<8&&(o=8),(a+=c)<0&&(a=0),a>.5&&(a=.5),++O>M[T]){for(O=1,T++;T<3&&0===M[T];)T++;if(3===T)break}C=0===T?O/M[0]:1===T?1+2*Math.pow(1-O/M[1],1)*t.p_env_punch:1-O/M[2],A+=I,(L=Math.abs(Math.floor(A)))>1023&&(L=1023),0!=_&&((b*=_)<1e-5&&(b=1e-5),b>.1&&(b=.1));for(var Y=0,X=0;X<8;++X){var $=0;if(++R>=o&&(R%=o,3===t.wave_type))for(N=0;N<32;++N)D[N]=2*Math.random()-1;var Z=R/o;if(t.wave_type===u)$=Z<a?.5:-.5;else if(1===t.wave_type)$=1-2*Z;else if(2===t.wave_type)$=Math.sin(2*Z*Math.PI);else if(3===t.wave_type)$=D[Math.floor(32*R/o)];else if(4===t.wave_type)$=Math.abs(1-2*Z)-1;else{if(5!==t.wave_type)throw new Exception("bad wave type! "+t.wave_type);$=Math.abs(1-Z*Z*2)-1}var Q=d;(v*=w)<0&&(v=0),v>.1&&(v=.1),1!=t.p_lpf_freq?(p+=($-d)*v,p-=p*y):(d=$,p=0),m+=(d+=p)-Q,$=m-=m*b,F[1023&P]=$,$+=F[P-L+1024&1023],P=P+1&1023,Y+=$*C}U+=Y,++W>=H&&(W=0,Y=U/H,U=0,Y=Y/8*1,Y*=j,V[q++]=Y,t.sample_rate<g.MIN_SAMPLE_RATE&&(V[q++]=Y,V[q++]=Y,V[q++]=Y))}return H>0&&(Y=(Y=U/H)/8*1,Y*=j,V[q++]=Y,t.sample_rate<g.MIN_SAMPLE_RATE&&(V[q++]=Y,V[q++]=Y,V[q++]=Y)),G};var m={},b=[],_=50;t.exports={playSound:function(t){return f(),function(t){if(t in m)return m[t];var e=generateFromSeed(t);e.sound_vol=i,e.sample_rate=s,e.bit_depth=a;var r=g.generate(e);for(m[t]=r,b.push(t);b.length>_;){var n=b[0];b=b.slice(1),delete m[n]}return r}(t).play()}}},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n=r(0),o=r(17);function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gamepad=o.b.getAnyGamepad(),this.table=e,this.polledInput=null,this.repeatIntervalInSeconds=null,this.boundKeys=[],this.touchStart=null,this.touchStartedAt=0,this.touchHoldInterval=null;var l=function(t){var n=o.b.key(t,e);return r.boundKeys.push(n),n};this.controls={up:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_UP),l("w"),l("ArrowUp")])},down:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_DOWN),l("s"),l("ArrowDown")])},left:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_LEFT),l("a"),l("ArrowLeft")])},right:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.ARROW_RIGHT),l("d"),l("ArrowRight")])},action:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.CLUSTER_BOTTOM),l("x"),l(" "),l("Enter")])},undo:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.CLUSTER_LEFT),this.gamepad.button(o.a.BUMPER_TOP_LEFT),l("z"),l("u")])},restart:{lastPressed:null,button:o.b.or([this.gamepad.button(o.a.CLUSTER_TOP),l("r")])}},this.stickControls={left:{lastPressed:null,stick:this.gamepad.stick(o.c.LEFT)},right:{lastPressed:null,stick:this.gamepad.stick(o.c.RIGHT)}};var i=function(t,e){return function(){var n=Date.now(),o=1e3*(r.repeatIntervalInSeconds||.25),l=r.controls[t],i=l.button,s=l.lastPressed;i.query()?(!s||s+o<n)&&(e(),r.controls[t].lastPressed=n):r.controls[t].lastPressed=null}},s=function(t){return function(){var e=Date.now(),o=1e3*(r.repeatIntervalInSeconds||.25),l=r.stickControls[t],i=l.stick,s=l.lastPressed,a=i.query(),u=a.x,c=a.y,f=Math.abs(c),h=Math.abs(u);if(f>h){if(f>.5)return void((!s||s+o<e)&&(l.lastPressed=e,r.polledInput=c<0?n.b.UP:n.b.DOWN))}else if(h>.5)return void((!s||s+o<e)&&(l.lastPressed=e,r.polledInput=u<0?n.b.LEFT:n.b.RIGHT));l.lastPressed=null}};this.controlCheckers=[s("left"),s("right"),i("up",function(){return r.polledInput=n.b.UP}),i("down",function(){return r.polledInput=n.b.DOWN}),i("left",function(){return r.polledInput=n.b.LEFT}),i("right",function(){return r.polledInput=n.b.RIGHT}),i("action",function(){return r.polledInput=n.b.ACTION}),i("undo",function(){return r.polledInput=n.b.UNDO}),i("restart",function(){return r.polledInput=n.b.RESTART})],this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.table.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.table.addEventListener("touchmove",this.onTouchMove),this.table.addEventListener("touchend",this.onTouchEnd)}var e,r,i;return e=t,(r=[{key:"pollControls",value:function(){if(window.document.activeElement!==this.table)return null;this.controlCheckers.forEach(function(t){return t()});var t=this.polledInput;return this.polledInput=null,t}},{key:"isSomethingPressed",value:function(){for(var t=Object.values(this.controls),e=0;e<t.length;e++){if(t[e].button.query())return!0}return!1}},{key:"setKeyRepeatInterval",value:function(t){this.repeatIntervalInSeconds=t}},{key:"dispose",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.boundKeys[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){n.value.dispose()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}this.table.removeEventListener("touchstart",this.onTouchStart),this.table.removeEventListener("touchmove",this.onTouchMove),this.table.removeEventListener("touchend",this.onTouchEnd)}},{key:"startTouchHoldInterval",value:function(){var t=this;this.touchHoldInterval||(this.touchHoldInterval=setInterval(function(){return t.polledInput=n.b.UNDO},500))}},{key:"endTouchHoldInterval",value:function(){this.touchHoldInterval&&clearInterval(this.touchHoldInterval),this.touchHoldInterval=null}},{key:"onTouchStart",value:function(t){1===t.changedTouches.length&&(this.table.focus(),this.touchStart=t.changedTouches[0],this.touchStartedAt=Date.now(),this.startTouchHoldInterval())}},{key:"onTouchMove",value:function(t){this.touchStart&&1===t.touches.length&&t.preventDefault()}},{key:"onTouchEnd",value:function(t){var e=this,r=function(){var t=Date.now()-e.touchStartedAt;if(t>=2e3){var r=confirm("You were holding for a while. Do you want to restart the level?");e.polledInput=r?n.b.RESTART:null}else t<200&&(e.polledInput=n.b.ACTION)};if(this.endTouchHoldInterval(),this.touchStart&&1===t.changedTouches.length){var o=t.changedTouches[0],l=o.pageX-this.touchStart.pageX,i=o.pageY-this.touchStart.pageY,s=Math.abs(l),a=Math.abs(i);s>a?s>this.table.clientWidth/15?this.polledInput=l>0?n.b.RIGHT:n.b.LEFT:r():a>this.table.clientWidth/15?this.polledInput=i>0?n.b.DOWN:n.b.UP:r(),this.touchStart=null,t.preventDefault()}}}])&&l(e.prototype,r),i&&l(e,i),t}()},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n,o=r(0);function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t.WIDTH="WIDTH",t.HEIGHT="HEIGHT"}(n||(n={}));var i=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.handler=r,this.columns=1,this.rows=1,this.boundResizeHandler=Object(o.f)(this.trigger.bind(this)),window.addEventListener("resize",this.boundResizeHandler)}var e,r,i;return e=t,(r=[{key:"setLevel",value:function(t,e){this.rows=t,this.columns=e}},{key:"trigger",value:function(){var t=this.columns/this.rows,e=this.leftWithoutAutoMargins(),r=(window.outerWidth>0?Math.min(window.outerWidth,window.innerWidth):window.innerWidth)-e,o=(window.outerHeight>0?Math.min(window.outerHeight,window.innerHeight):window.innerHeight)-this.table.offsetTop,l=0,i=n.WIDTH;r/t<o?(i=n.WIDTH,l=Math.floor(r)):(i=n.HEIGHT,l=Math.floor(o*t/this.rows/5)*this.rows*5);var s=r/2-l/2-e;this.handler(Math.floor(l),Math.floor(s),i)}},{key:"dispose",value:function(){window.removeEventListener("resize",this.boundResizeHandler)}},{key:"leftWithoutAutoMargins",value:function(){var t=this.table.offsetLeft,e=window.getComputedStyle(this.table).width,r=e?Number.parseFloat(e.replace(/px$/,"")):0;this.table.style.width="".concat(2*t+r,"px");var n=this.table.offsetLeft;return this.table.style.width=e,n}}])&&l(e.prototype,r),i&&l(e,i),t}()},function(t,e,r){"use strict";var n=r(16),o=r(5),l=r(148),i=r(0);function s(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}var f=function(){function t(){a(this,t),this.cache=new Map}return c(t,[{key:"get",value:function(t,e,r,o){var l=t.map(function(t){return t.getName()}).join(" "),i=this.cache.get(l);return i||(i=function(t,e,r,o){if(0===t.length){for(var l=[],i=0;i<r;i++){l[i]=l[i]||[];for(var s=0;s<o;s++)e&&(l[i][s]=e)}return l}0;if(1===t.length)return t[0].getPixels(r,o);if(t.find(function(t){return t.hasAlpha()})){var a=(t=t.reverse())[0].getPixels(r,o);return t.slice(1).forEach(function(t,e){for(var l=t.getPixels(r,o),i=0;i<r;i++){a[i]=a[i]||[];for(var s=0;s<o;s++){var u=l[i][s];if(u.hasAlpha()&&!a[i][s].isTransparent()){var c=a[i][s].toRgb(),f=c.r,h=c.g,d=c.b,p=u.toRgb(),v=p.r,w=p.g,y=p.b,g=p.a;if(null===g)throw new Error("BUG: No alpha channel");var m=Math.round(g*v+(1-g)*f),b=Math.round(g*w+(1-g)*h),_=Math.round(g*y+(1-g)*d),S="".concat(m<16?"0":"").concat(m.toString(16)),k="".concat(b<16?"0":"").concat(b.toString(16)),E="".concat(_<16?"0":"").concat(_.toString(16));a[i][s]=new n.a(u.__source,"#".concat(S).concat(k).concat(E))}else u&&!u.isTransparent()&&(a[i][s]=u)}}}),a}var u=t[0].getPixels(r,o);return t.slice(1).forEach(function(t,e){for(var n=t.getPixels(r,o),l=0;l<r;l++){u[l]=u[l]||[];for(var i=0;i<o;i++){var s=n[l][i];u[l][i]&&!u[l][i].isTransparent()||!s||s.isTransparent()||(u[l][i]=s)}}}),u}(t,e,r,o),this.cache.set(l,i)),i}},{key:"clear",value:function(){this.cache.clear()}}]),t}();var h=function(){function t(){a(this,t),this.cellColorCache=new f,this.renderedPixels=[],this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.isDumpingScreen=!1,this.PIXEL_HEIGHT=1,this.PIXEL_WIDTH=2,this.SPRITE_HEIGHT=5,this.SPRITE_WIDTH=5,this.hasVisualUi=!0,this.gameData=null,this.currentLevelMessage=null,this.currentLevelCells=null,this.windowOffsetWidth=null,this.windowOffsetHeight=null}return c(t,[{key:"destroy",value:function(){this.gameData=null,this.currentLevelMessage=null,this.currentLevelCells=null,this.renderedPixels=[],this.cellColorCache.clear()}},{key:"onGameChange",value:function(t){if(this.gameData=t,this.renderedPixels=[],this.cellColorCache.clear(),this.clearScreen(),this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.windowOffsetWidth=null,this.windowOffsetHeight=null,this.gameData.metadata.flickscreen){var e=this.gameData.metadata.flickscreen,r=e.width,n=e.height;this.windowOffsetWidth=r,this.windowOffsetHeight=n}else if(this.gameData.metadata.zoomscreen){var o=this.gameData.metadata.zoomscreen,l=o.width,i=o.height;this.windowOffsetWidth=l,this.windowOffsetHeight=i}var s=this.gameData.getSpriteSize(),a=s.spriteHeight,u=s.spriteWidth;this.SPRITE_HEIGHT=a,this.SPRITE_WIDTH=u}},{key:"getGameData",value:function(){if(!this.gameData)throw new Error("BUG: Game has not been specified yet");return this.gameData}},{key:"onLevelChange",value:function(t,e,r){if(!e&&!r||e&&r)throw new Error("BUG: Must provide either cells or a message (but not both)");this.currentLevelCells=e,this.currentLevelMessage=r}},{key:"getCurrentLevelCells",value:function(){if(!this.currentLevelCells)throw new Error("BUG: There are no cells to render. Maybe it is a message level? Or no level has been set yet");return this.currentLevelCells}},{key:"debugRenderScreen",value:function(){this.renderScreen(!0)}},{key:"renderMessageScreen",value:function(t){var e=this.windowOffsetColStart,r=this.windowOffsetRowStart,n=this.windowOffsetHeight,o=this.windowOffsetWidth;this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.windowOffsetHeight=13,this.windowOffsetWidth=34,this.clearScreen(),this.windowOffsetColStart=e,this.windowOffsetRowStart=r,this.windowOffsetHeight=n,this.windowOffsetWidth=o}},{key:"renderScreen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.gameData)throw new Error("BUG: gameData was not set yet");this.currentLevelMessage?this.renderMessageScreen(this.currentLevelMessage):this.currentLevelCells&&(t&&(this.cellColorCache.clear(),this.renderedPixels=[]),this.renderLevelScreen(this.currentLevelCells,e))}},{key:"drawCells",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.gameData)throw new Error("BUG: gameData was not set yet");var n=Object(i.g)(this.getCurrentLevelCells()),o=this.gameData.getPlayer().getCellsThatMatch(n);if(1===o.size&&r<=1){var l=s(o)[0],a=this.cellPosToXY(l).isOnScreen;this.recenterPlayerIfNeeded(l,a)&&(t=Object(i.g)(this.getCurrentLevelCells()))}this.hasVisualUi&&this.drawCellsAfterRecentering(t,r)}},{key:"getPixelsForCell",value:function(t){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var e=t.getSprites().filter(function(t){return!t.isTransparent()}),r=this.gameData.getMagicBackgroundSprite();return r&&e.push(r),this.cellColorCache.get(e,this.gameData.metadata.backgroundColor,this.SPRITE_HEIGHT,this.SPRITE_WIDTH)}},{key:"createMessageTextScreen",value:function(t){var e=["                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","          X to continue           ","                                  ","                                  "];var r=e[9],n=e[10];e[10]=r;var o=e[0].length,l=function(t,e){if(!t)return t;var r=".{1,"+(e=e||75)+"}(\\s|$)|.{"+e+"}|.+$",n=t.match(RegExp(r,"g"));if(n)return n;throw new Error("BUG: Match did not work")}(t,e[0].length),i=5-(l.length/2|0);i<0&&(i=0);for(var s=Math.min(l.length,12),a=0;a<s;a++){var u=l[a],c=i+a,f=(o-u.length)/2|0,h=e[c];e[c]=h.slice(0,f)+u+h.slice(f+u.length)}var d=10;return s>=10&&(d=s<12?s+1:12),e[d]=n,e}},{key:"createMessageSprites",value:function(t){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var e=this.createMessageTextScreen(t),r=[],n=!0,o=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value,u=[];r.push(u);var c=!0,f=!1,h=void 0;try{for(var d,p=a[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value,w=this.gameData.getLetterSprite(v);u.push(new Set([w]))}}catch(t){f=!0,h=t}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}},{key:"cellPosToXY",value:function(t){var e,r,n=t.colIndex,o=t.rowIndex,l=!0;return this.windowOffsetHeight&&this.windowOffsetWidth&&(this.windowOffsetColStart>n||this.windowOffsetRowStart>o||this.windowOffsetColStart+this.windowOffsetWidth<=n||this.windowOffsetRowStart+this.windowOffsetHeight<=o)&&(l=!1),e=(n-this.windowOffsetColStart)*this.SPRITE_WIDTH,r=(o-this.windowOffsetRowStart)*this.SPRITE_HEIGHT,l&&(l=this.checkIfCellCanBeDrawnOnScreen(e,r)),(e<0||r<0)&&(l=!1),{isOnScreen:l,cellStartX:e,cellStartY:r}}},{key:"clearScreen",value:function(){this.renderedPixels=[]}},{key:"recenterPlayerIfNeeded",value:function(t,e){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var r,n,o,l,i,s,a=this.windowOffsetColStart,u=this.windowOffsetRowStart,c=this.gameData.metadata.flickscreen,f=this.gameData.metadata.zoomscreen,h=this.getMaxSize(),d=h.columns,p=h.rows,v=Math.floor(d/this.SPRITE_WIDTH/this.PIXEL_WIDTH),w=Math.floor(p/this.SPRITE_HEIGHT/this.PIXEL_HEIGHT);if(c?(n=t.rowIndex-t.rowIndex%c.height,r=t.colIndex-t.colIndex%c.width,l=c.height,o=c.width):(r=0,n=0,l=this.getCurrentLevelCells().length,o=this.getCurrentLevelCells()[0].length),f?(s=Math.min(f.height,w),i=Math.min(f.width,v)):(s=w,i=v),!(l<=s&&o<=i)){var y=!1;if(o>i&&(a+Math.round(i/4)>t.colIndex||a+Math.round(3*i/4)<=t.colIndex)){var g=t.colIndex-Math.floor(i/2);(g=Math.max(g,r))+i>r+o&&(g=r+o-i),g!==this.windowOffsetColStart&&(this.windowOffsetColStart=g,y=!0)}if(l>s&&(u+Math.round(s/4)>t.rowIndex||u+Math.round(3*s/4)<=t.rowIndex)){var m=t.rowIndex-Math.floor(s/2);(m=Math.max(m,n))+s>n+l&&(m=n+l-s),m!==this.windowOffsetRowStart&&(this.windowOffsetRowStart=m,y=!0)}return y||e?y:(this.windowOffsetColStart=r,this.windowOffsetRowStart=n,!0)}return!e&&(this.windowOffsetColStart=r,this.windowOffsetRowStart=n,!0)}}]),t}();function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(t,e,r,n,o,l,i){try{var s=t[l](i),a=s.value}catch(t){return void r(t)}s.done?e(a):Promise.resolve(a).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var l=t.apply(e,r);function i(t){w(l,n,o,i,s,"next",t)}function s(t){w(l,n,o,i,s,"throw",t)}i(void 0)})}}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var k=function(t){function e(t,r){var n,o,l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(l=b(e).call(this))||"object"!==d(l)&&"function"!=typeof l?S(o):l).table=t,n.tableCells=[],n.inputsProcessed=0,n.interactsWithPlayer=new Set,n.usedInMessages=new Set,t.classList.add("ps-table"),n.markAcceptingInput(!1),n.onPress=n.onPress.bind(S(S(n))),n.onLevelChange=n.onLevelChange.bind(S(S(n))),n.handler=new i.a(r?[r]:[]);var s=t.querySelector("[aria-live]")||document.querySelector("[aria-live]");if(!s)throw new Error("Error: For screenreaders to work, an element inside the table (for now) with an aria-live attribute needs to exist in the initial page. See https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions");return n.liveLog=s,n.didPressCauseTick=!1,n.silencedOutput=!1,n.messagesSincePress=0,n.isCollecting=!1,n.collectedSprites=new Map,n.collectingTickCount=0,n}var r,s,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,h),r=e,(s=[{key:"onPause",value:function(){this.table.setAttribute("data-ps-state","paused"),this.handler.onPause()}},{key:"onResume",value:function(){this.table.setAttribute("data-ps-state","running"),this.handler.onResume()}},{key:"onGameChange",value:function(t){m(b(e.prototype),"onGameChange",this).call(this,t),this.silencedOutput=!1,this.didPressCauseTick=!1,this.interactsWithPlayer=Object(i.q)(this.getGameData()),this.usedInMessages=new Set(this.interactsWithPlayer),this.collectedSprites.clear(),this.handler.onGameChange(t)}},{key:"onPress",value:function(t){switch(this.didPressCauseTick=!0,this.liveLog.innerHTML="",this.markAcceptingInput(!1),t){case i.b.UNDO:case i.b.RESTART:this.renderScreen(!1)}this.handler.onPress(t)}},{key:"onLevelLoad",value:function(t,e){this.handler.onLevelLoad(t,e)}},{key:"onLevelChange",value:function(t,r,n){if(this.clearScreen(),this.table.setAttribute("data-ps-current-level","".concat(t)),r){m(b(e.prototype),"onLevelChange",this).call(this,t,r,n),this.tableCells=[];var o=this.getGameData(),l=o.metadata.flickscreen||o.metadata.zoomscreen||{width:r[0].length,height:r.length},i=l.width,s=l.height;this.table.setAttribute("tabindex","0");for(var a=document.createElement("tbody"),u=0;u<s;u++){for(var c=document.createElement("tr"),f=[],h=0;h<i;h++){var d=document.createElement("td"),p=[];d.classList.add("ps-cell");var v=document.createElement("span");v.classList.add("ps-cell-label"),d.appendChild(v);var w=document.createElement("div");w.classList.add("ps-sprite-whole"),w.setAttribute("aria-hidden","true");for(var y=0;y<this.SPRITE_HEIGHT;y++){var g=document.createElement("div");g.classList.add("ps-sprite-row");for(var _=[],S=0;S<this.SPRITE_WIDTH;S++){var k=document.createElement("span");k.classList.add("ps-sprite-pixel"),g.appendChild(k),_.push(k)}w.appendChild(g),p.push(_)}d.appendChild(w),c.appendChild(d),f.push({td:d,label:v,pixels:p})}a.appendChild(c),this.tableCells.push(f)}this.table.prepend(a);var E=!0,C=!1,T=void 0;try{for(var O,M=r[Symbol.iterator]();!(E=(O=M.next()).done);E=!0){var x=O.value;this.drawCells(x,!1)}}catch(t){C=!0,T=t}finally{try{E||null==M.return||M.return()}finally{if(C)throw T}}}this.markAcceptingInput(!0),this.handler.onLevelChange(t,r,n)}},{key:"onMessage",value:function(){var t=y(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handler.onMessage(e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onWin",value:function(){this.handler.onWin()}},{key:"onSound",value:function(){var t=y(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(l.playSound)(e.soundCode),t.next=3,this.handler.onSound(e);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onTick",value:function(t,e,r,n){this.collectingTickCount++,this.printMessageLog(n,r),this.drawCells(t,!1),this.markAcceptingInput(!r),this.didPressCauseTick=!1,this.handler.onTick(t,e,r,n)}},{key:"willAllLevelsFitOnScreen",value:function(t){return!0}},{key:"_drawPixel",value:function(t,e,r,n,o){var l=Math.floor(e/this.SPRITE_HEIGHT),i=Math.floor(t/this.SPRITE_WIDTH),s=e%this.SPRITE_HEIGHT,a=t%this.SPRITE_WIDTH,u=this.tableCells[l][i].pixels[s][a];if(!u)throw new Error("BUG: Could not set pixel because table is too small");var c="color: ".concat(r,";");n&&(c+=" background-color: ".concat(n,";")),u.setAttribute("style",c)}},{key:"clearScreen",value:function(){m(b(e.prototype),"clearScreen",this).call(this);var t=this.table.querySelector("tbody");t&&t.remove(),this.liveLog.innerHTML="",this.tableCells=[]}},{key:"renderLevelScreen",value:function(t,e){this.drawCells(Object(i.g)(t),!1,e)}},{key:"setPixel",value:function(t,e,r,o,l){var i=Math.floor(e/this.SPRITE_HEIGHT),s=Math.floor(t/this.SPRITE_WIDTH),a=e%this.SPRITE_HEIGHT,u=t%this.SPRITE_WIDTH,c=this.tableCells[i][s].pixels[a][u];if(!c)throw new Error("BUG: Could not set pixel because table is too small");l&&0!==l.trim().length||(l=""),this.renderedPixels[e]||(this.renderedPixels[e]=[]);var f=this.renderedPixels[e][t];if(!f||f.hex!==r||f.chars!==l){this.renderedPixels[e][t]={hex:r,chars:l};var h=Object(n.c)(r),d=h.r,p=h.g,v=h.b,w=h.a;null!==w?c.setAttribute("style","background-color: rgba(".concat(d,",").concat(p,",").concat(v,",").concat(w,")")):c.setAttribute("style","background-color: ".concat(r))}}},{key:"drawCellsAfterRecentering",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;this._drawCell(s,e)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}},{key:"checkIfCellCanBeDrawnOnScreen",value:function(t,e){return!0}},{key:"getMaxSize",value:function(){return{columns:1e3,rows:1e3}}},{key:"printMessageLog",value:function(t,e){var r=this;if(!this.silencedOutput||this.didPressCauseTick){var n=[],l=function(t,e){if(n.push(t),r.isCollecting){var o=!0,l=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;c=r.collectedSprites,f=u,h=void 0,h=c.get(f),c.set(f,h?h+1:1)}}catch(t){l=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(l)throw i}}}var c,f,h};e&&l("game tick",[]);var s=!0,a=!1,u=void 0;try{for(var c,f=t[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value;switch(h.type){case o.a.ADD:var d=!0,w=!1,y=void 0;try{for(var g,m=Object(i.o)(this.usedInMessages,h.sprites)[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var b=g.value;l("Added ".concat(b.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[b])}}catch(t){w=!0,y=t}finally{try{d||null==m.return||m.return()}finally{if(w)throw y}}break;case o.a.REPLACE:var _=!0,S=!1,k=void 0;try{for(var E,C=h.replacements[Symbol.iterator]();!(_=(E=C.next()).done);_=!0){var T=E.value,O=T.oldSprite,M=T.newSprite;this.usedInMessages.has(O)?this.usedInMessages.has(M)?l("Replaced ".concat(O.getName()," with ").concat(M.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[O,M]):l("Removed* ".concat(O.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[O]):this.usedInMessages.has(M)&&l("Added* ".concat(M.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[M])}}catch(t){S=!0,k=t}finally{try{_||null==C.return||C.return()}finally{if(S)throw k}}break;case o.a.REMOVE:var x=!0,R=!1,A=void 0;try{for(var I,L=Object(i.o)(this.usedInMessages,h.sprites)[Symbol.iterator]();!(x=(I=L.next()).done);x=!0){var P=I.value;l("Removed ".concat(P.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[P])}}catch(t){R=!0,A=t}finally{try{x||null==L.return||L.return()}finally{if(R)throw A}}break;case o.a.MOVE:l("Moved ".concat(h.sprite.getName()," ").concat(h.direction," to ").concat(h.newCell.rowIndex,",").concat(h.newCell.colIndex),[h.sprite]);break;default:throw new Error("BUG: unsupported a11y message type ".concat(h))}}}catch(t){a=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(a)throw u}}if(this.didPressCauseTick)n.length>10&&(n=[].concat(v(n.slice(0,4)),["(truncated messages)"],v(n.slice(n.length-4,n.length))));else if(this.silencedOutput)n=[];else if(!this.isCollecting&&(this.messagesSincePress>10||n.length>10))this.collectedSprites.size>0?(this.silencedOutput=!0,n=["Things keep changing so switching to a quieter mode"]):(this.isCollecting=!0,this.collectingTickCount=0,n=["Many things changed (probably animations). Collecting data for a few ticks to see what to ignore"]);else if(this.isCollecting&&this.collectingTickCount<20)n=[];else if(this.isCollecting){this.isCollecting=!1,n=["Done collecting. Found ".concat(this.collectedSprites.size," sprites to ignore: ").concat(v(this.collectedSprites.keys()).map(function(t){return t.getName()}).join(", "))],this.messagesSincePress=0;var F=!0,N=!1,D=void 0;try{for(var B,G=this.collectedSprites[Symbol.iterator]();!(F=(B=G.next()).done);F=!0){var j=p(B.value,2);b=j[0];j[1]>4&&this.usedInMessages.delete(b)}}catch(t){N=!0,D=t}finally{try{F||null==G.return||G.return()}finally{if(N)throw D}}}!function(){for(var t=0;t<n.length;t++){var e=n[t],o=document.createElement("p");o.textContent=e,r.liveLog.append(o),r.didPressCauseTick||r.messagesSincePress++}}(),this.didPressCauseTick&&(this.messagesSincePress=0)}}},{key:"markAcceptingInput",value:function(t){t?this.table.setAttribute("data-ps-accepting-input","true"):(this.inputsProcessed++,this.table.setAttribute("data-ps-accepting-input","false")),this.table.setAttribute("data-ps-last-input-processed","".concat(this.inputsProcessed))}},{key:"_drawCell",value:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.gameData)throw new Error("BUG: gameData was not set yet");if(!this.hasVisualUi)throw new Error("BUG: Should not get to this point");var r=t.getSprites().filter(function(t){return e.interactsWithPlayer.has(t)}),n=this.cellPosToXY(t),o=n.isOnScreen,l=n.cellStartX,i=n.cellStartY;if(o){var s=this.tableCells[t.rowIndex-this.windowOffsetRowStart];if(!s)throw new Error("BUG: Should not be trying to draw when there are no table cells");var a=s[t.colIndex-this.windowOffsetColStart];if(!a)throw new Error("BUG: Should not be trying to draw when there is not a matching table cell");var u=a.label;if(!u)throw new Error("BUG: Could not find cell in the table: [".concat(t.rowIndex," - ").concat(this.windowOffsetRowStart,"][").concat(t.colIndex," - ").concat(this.windowOffsetColStart,"]"));if(r.length>0)u.classList.remove("ps-cell-empty"),this.gameData.getPlayer().getSpritesThatMatch(t).size>0?u.classList.add("ps-player"):u.classList.remove("ps-player"),u.textContent=r.map(function(t){return t.getName()}).join(", ");else u.classList.remove("ps-player"),u.classList.add("ps-cell-empty"),u.textContent="(empty)";this.getPixelsForCell(t).forEach(function(t,r){t.forEach(function(t,n){if(!e.gameData)throw new Error("BUG: gameData was not set yet");var o=l+n,s=i+r,a=null;if(t&&(a=t.isTransparent()?e.gameData.metadata.backgroundColor?e.gameData.metadata.backgroundColor:null:t),a){var u=a.toRgb(),c=(u.r,u.g,u.b,a.toHex());e.setPixel(o,s,c,null," ")}})})}}}])&&g(r.prototype,s),a&&g(r,a),e}();e.a=k},,function(t,e,r){"use strict";(function(t){if(r(154),r(350),r(351),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";function n(t,r,n){t[r]||Object[e](t,r,{writable:!0,configurable:!0,value:n})}n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,r(109))},function(t,e,r){r(155),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(231),r(232),r(234),r(235),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(99),r(258),r(129),r(259),r(130),r(260),r(261),r(262),r(263),r(264),r(133),r(135),r(136),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(344),r(345),r(346),r(347),r(348),r(349),t.exports=r(26)},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(4),l=r(22),i=r(10),s=r(1),a=r(19),u=r(37).KEY,c=r(6),f=r(63),h=r(52),d=r(42),p=r(8),v=r(111),w=r(80),y=r(156),g=r(66),m=r(3),b=r(7),_=r(23),S=r(31),k=r(41),E=r(45),C=r(114),T=r(24),O=r(11),M=r(43),x=T.f,R=O.f,A=C.f,I=o.Symbol,L=o.JSON,P=L&&L.stringify,F=p("_hidden"),N=p("toPrimitive"),D={}.propertyIsEnumerable,B=f("symbol-registry"),G=f("symbols"),j=f("op-symbols"),U=Object.prototype,W="function"==typeof I,H=o.QObject,q=!H||!H.prototype||!H.prototype.findChild,z=i&&c(function(){return 7!=E(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=x(U,e);n&&delete U[e],R(t,e,r),n&&t!==U&&R(U,e,n)}:R,V=function(t){var e=G[t]=E(I.prototype);return e._k=t,e},K=W&&"symbol"==n(I.iterator)?function(t){return"symbol"==n(t)}:function(t){return t instanceof I},J=function(t,e,r){return t===U&&J(j,e,r),m(t),e=S(e,!0),m(r),l(G,e)?(r.enumerable?(l(t,F)&&t[F][e]&&(t[F][e]=!1),r=E(r,{enumerable:k(0,!1)})):(l(t,F)||R(t,F,k(1,{})),t[F][e]=!0),z(t,e,r)):R(t,e,r)},Y=function(t,e){m(t);for(var r,n=y(e=_(e)),o=0,l=n.length;l>o;)J(t,r=n[o++],e[r]);return t},X=function(t){var e=D.call(this,t=S(t,!0));return!(this===U&&l(G,t)&&!l(j,t))&&(!(e||!l(this,t)||!l(G,t)||l(this,F)&&this[F][t])||e)},$=function(t,e){if(t=_(t),e=S(e,!0),t!==U||!l(G,e)||l(j,e)){var r=x(t,e);return!r||!l(G,e)||l(t,F)&&t[F][e]||(r.enumerable=!0),r}},Z=function(t){for(var e,r=A(_(t)),n=[],o=0;r.length>o;)l(G,e=r[o++])||e==F||e==u||n.push(e);return n},Q=function(t){for(var e,r=t===U,n=A(r?j:_(t)),o=[],i=0;n.length>i;)!l(G,e=n[i++])||r&&!l(U,e)||o.push(G[e]);return o};W||(a((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0);return i&&q&&z(U,t,{configurable:!0,set:function e(r){this===U&&e.call(j,r),l(this,F)&&l(this[F],t)&&(this[F][t]=!1),z(this,t,k(1,r))}}),V(t)}).prototype,"toString",function(){return this._k}),T.f=$,O.f=J,r(46).f=C.f=Z,r(60).f=X,r(65).f=Q,i&&!r(38)&&a(U,"propertyIsEnumerable",X,!0),v.f=function(t){return V(p(t))}),s(s.G+s.W+s.F*!W,{Symbol:I});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var rt=M(p.store),nt=0;rt.length>nt;)w(rt[nt++]);s(s.S+s.F*!W,"Symbol",{for:function(t){return l(B,t+="")?B[t]:B[t]=I(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),s(s.S+s.F*!W,"Object",{create:function(t,e){return void 0===e?E(t):Y(E(t),e)},defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:Q}),L&&s(s.S+s.F*(!W||c(function(){var t=I();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=e=n[1],(b(e)||void 0!==t)&&!K(t))return g(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!K(e))return e}),n[1]=e,P.apply(L,n)}}),I.prototype[N]||r(18)(I.prototype,N,I.prototype.valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(o.JSON,"JSON",!0)},function(t,e,r){var n=r(43),o=r(65),l=r(60);t.exports=function(t){var e=n(t),r=o.f;if(r)for(var i,s=r(t),a=l.f,u=0;s.length>u;)a.call(t,i=s[u++])&&e.push(i);return e}},function(t,e,r){var n=r(1);n(n.S,"Object",{create:r(45)})},function(t,e,r){var n=r(1);n(n.S+n.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,e,r){var n=r(1);n(n.S+n.F*!r(10),"Object",{defineProperties:r(113)})},function(t,e,r){var n=r(23),o=r(24).f;r(33)("getOwnPropertyDescriptor",function(){return function(t,e){return o(n(t),e)}})},function(t,e,r){var n=r(12),o=r(25);r(33)("getPrototypeOf",function(){return function(t){return o(n(t))}})},function(t,e,r){var n=r(12),o=r(43);r(33)("keys",function(){return function(t){return o(n(t))}})},function(t,e,r){r(33)("getOwnPropertyNames",function(){return r(114).f})},function(t,e,r){var n=r(7),o=r(37).onFreeze;r(33)("freeze",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},function(t,e,r){var n=r(7),o=r(37).onFreeze;r(33)("seal",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},function(t,e,r){var n=r(7),o=r(37).onFreeze;r(33)("preventExtensions",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},function(t,e,r){var n=r(7);r(33)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(7);r(33)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(7);r(33)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,r){var n=r(1);n(n.S+n.F,"Object",{assign:r(115)})},function(t,e,r){var n=r(1);n(n.S,"Object",{is:r(116)})},function(t,e,r){var n=r(1);n(n.S,"Object",{setPrototypeOf:r(84).set})},function(t,e,r){"use strict";var n=r(53),o={};o[r(8)("toStringTag")]="z",o+""!="[object z]"&&r(19)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,r){var n=r(1);n(n.P,"Function",{bind:r(117)})},function(t,e,r){var n=r(11).f,o=Function.prototype,l=/^\s*function ([^ (]*)/;"name"in o||r(10)&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},function(t,e,r){"use strict";var n=r(7),o=r(25),l=r(8)("hasInstance"),i=Function.prototype;l in i||r(11).f(i,l,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,r){var n=r(1),o=r(119);n(n.G+n.F*(parseInt!=o),{parseInt:o})},function(t,e,r){var n=r(1),o=r(120);n(n.G+n.F*(parseFloat!=o),{parseFloat:o})},function(t,e,r){"use strict";var n=r(4),o=r(22),l=r(28),i=r(86),s=r(31),a=r(6),u=r(46).f,c=r(24).f,f=r(11).f,h=r(54).trim,d=n.Number,p=d,v=d.prototype,w="Number"==l(r(45)(v)),y="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var r,n,o,l=(e=y?e.trim():h(e,3)).charCodeAt(0);if(43===l||45===l){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===l){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var i,a=e.slice(2),u=0,c=a.length;u<c;u++)if((i=a.charCodeAt(u))<48||i>o)return NaN;return parseInt(a,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof d&&(w?a(function(){v.valueOf.call(r)}):"Number"!=l(r))?i(new p(g(e)),r,d):g(e)};for(var m,b=r(10)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;b.length>_;_++)o(p,m=b[_])&&!o(d,m)&&f(d,m,c(p,m));d.prototype=v,v.constructor=d,r(19)(n,"Number",d)}},function(t,e,r){"use strict";var n=r(1),o=r(29),l=r(121),i=r(87),s=1..toFixed,a=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*u[r],u[r]=n%1e7,n=a(n/1e7)},h=function(t){for(var e=6,r=0;--e>=0;)r+=u[e],u[e]=a(r/t),r=r%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var r=String(u[t]);e=""===e?r:e+i.call("0",7-r.length)+r}return e},p=function t(e,r,n){return 0===r?n:r%2==1?t(e,r-1,n*e):t(e*e,r/2,n)};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(6)(function(){s.call({})})),"Number",{toFixed:function(t){var e,r,n,s,a=l(this,c),u=o(t),v="",w="0";if(u<0||u>20)throw RangeError(c);if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(v="-",a=-a),a>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(a*p(2,69,1))-69)<0?a*p(2,-e,1):a/p(2,e,1),r*=4503599627370496,(e=52-e)>0){for(f(0,r),n=u;n>=7;)f(1e7,0),n-=7;for(f(p(10,n,1),0),n=e-1;n>=23;)h(1<<23),n-=23;h(1<<n),f(1,1),h(2),w=d()}else f(0,r),f(1<<-e,0),w=d()+i.call("0",u);return w=u>0?v+((s=w.length)<=u?"0."+i.call("0",u-s)+w:w.slice(0,s-u)+"."+w.slice(s-u)):v+w}})},function(t,e,r){"use strict";var n=r(1),o=r(6),l=r(121),i=1..toPrecision;n(n.P+n.F*(o(function(){return"1"!==i.call(1,void 0)})||!o(function(){i.call({})})),"Number",{toPrecision:function(t){var e=l(this,"Number#toPrecision: incorrect invocation!");return void 0===t?i.call(e):i.call(e,t)}})},function(t,e,r){var n=r(1);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,r){var n=r(1),o=r(4).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,r){var n=r(1);n(n.S,"Number",{isInteger:r(122)})},function(t,e,r){var n=r(1);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(1),o=r(122),l=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return o(t)&&l(t)<=9007199254740991}})},function(t,e,r){var n=r(1);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(1);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(1),o=r(120);n(n.S+n.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,r){var n=r(1),o=r(119);n(n.S+n.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,r){var n=r(1),o=r(123),l=Math.sqrt,i=Math.acosh;n(n.S+n.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+l(t-1)*l(t+1))}})},function(t,e,r){var n=r(1),o=Math.asinh;n(n.S+n.F*!(o&&1/o(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,r){var n=r(1),o=Math.atanh;n(n.S+n.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,r){var n=r(1),o=r(88);n(n.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,r){var n=r(1),o=Math.exp;n(n.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,r){var n=r(1),o=r(89);n(n.S+n.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,r){var n=r(1);n(n.S,"Math",{fround:r(124)})},function(t,e,r){var n=r(1),o=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,l=0,i=0,s=arguments.length,a=0;i<s;)a<(r=o(arguments[i++]))?(l=l*(n=a/r)*n+1,a=r):l+=r>0?(n=r/a)*n:r;return a===1/0?1/0:a*Math.sqrt(l)}})},function(t,e,r){var n=r(1),o=Math.imul;n(n.S+n.F*r(6)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var r=+t,n=+e,o=65535&r,l=65535&n;return 0|o*l+((65535&r>>>16)*l+o*(65535&n>>>16)<<16>>>0)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,r){var n=r(1);n(n.S,"Math",{log1p:r(123)})},function(t,e,r){var n=r(1);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){var n=r(1);n(n.S,"Math",{sign:r(88)})},function(t,e,r){var n=r(1),o=r(89),l=Math.exp;n(n.S+n.F*r(6)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(l(t-1)-l(-t-1))*(Math.E/2)}})},function(t,e,r){var n=r(1),o=r(89),l=Math.exp;n(n.S,"Math",{tanh:function(t){var e=o(t=+t),r=o(-t);return e==1/0?1:r==1/0?-1:(e-r)/(l(t)+l(-t))}})},function(t,e,r){var n=r(1);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(1),o=r(44),l=String.fromCharCode,i=String.fromCodePoint;n(n.S+n.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,i=0;n>i;){if(e=+arguments[i++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?l(e):l(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){var n=r(1),o=r(23),l=r(9);n(n.S,"String",{raw:function(t){for(var e=o(t.raw),r=l(e.length),n=arguments.length,i=[],s=0;r>s;)i.push(String(e[s++])),s<n&&i.push(String(arguments[s]));return i.join("")}})},function(t,e,r){"use strict";r(54)("trim",function(t){return function(){return t(this,3)}})},function(t,e,r){"use strict";var n=r(67)(!0);r(90)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){"use strict";var n=r(1),o=r(67)(!1);n(n.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,r){"use strict";var n=r(1),o=r(9),l=r(92),i="".endsWith;n(n.P+n.F*r(93)("endsWith"),"String",{endsWith:function(t){var e=l(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=o(e.length),s=void 0===r?n:Math.min(o(r),n),a=String(t);return i?i.call(e,a,s):e.slice(s-a.length,s)===a}})},function(t,e,r){"use strict";var n=r(1),o=r(92);n(n.P+n.F*r(93)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(1);n(n.P,"String",{repeat:r(87)})},function(t,e,r){"use strict";var n=r(1),o=r(9),l=r(92),i="".startsWith;n(n.P+n.F*r(93)("startsWith"),"String",{startsWith:function(t){var e=l(this,t,"startsWith"),r=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return i?i.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";r(20)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,r){"use strict";r(20)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,r){"use strict";r(20)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,r){"use strict";r(20)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,r){"use strict";r(20)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,r){"use strict";r(20)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,r){"use strict";r(20)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,r){"use strict";r(20)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,r){"use strict";r(20)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,r){"use strict";r(20)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,r){"use strict";r(20)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,r){"use strict";r(20)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,r){"use strict";r(20)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,r){var n=r(1);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,r){"use strict";var n=r(1),o=r(12),l=r(31);n(n.P+n.F*r(6)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=o(this),r=l(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},function(t,e,r){var n=r(1),o=r(233);n(n.P+n.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(t,e,r){"use strict";var n=r(6),o=Date.prototype.getTime,l=Date.prototype.toISOString,i=function(t){return t>9?t:"0"+t};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-5e13-1))})||!n(function(){l.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+i(t.getUTCMonth()+1)+"-"+i(t.getUTCDate())+"T"+i(t.getUTCHours())+":"+i(t.getUTCMinutes())+":"+i(t.getUTCSeconds())+"."+(r>99?r:"0"+i(r))+"Z"}:l},function(t,e,r){var n=Date.prototype,o=n.toString,l=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(19)(n,"toString",function(){var t=l.call(this);return t==t?o.call(this):"Invalid Date"})},function(t,e,r){var n=r(8)("toPrimitive"),o=Date.prototype;n in o||r(18)(o,n,r(236))},function(t,e,r){"use strict";var n=r(3),o=r(31);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(n(this),"number"!=t)}},function(t,e,r){var n=r(1);n(n.S,"Array",{isArray:r(66)})},function(t,e,r){"use strict";var n=r(27),o=r(1),l=r(12),i=r(125),s=r(94),a=r(9),u=r(95),c=r(96);o(o.S+o.F*!r(69)(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,o,f,h=l(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,w=void 0!==v,y=0,g=c(h);if(w&&(v=n(v,p>2?arguments[2]:void 0,2)),null==g||d==Array&&s(g))for(r=new d(e=a(h.length));e>y;y++)u(r,y,w?v(h[y],y):h[y]);else for(f=g.call(h),r=new d;!(o=f.next()).done;y++)u(r,y,w?i(f,v,[o.value,y],!0):o.value);return r.length=y,r}})},function(t,e,r){"use strict";var n=r(1),o=r(95);n(n.S+n.F*r(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)o(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){"use strict";var n=r(1),o=r(23),l=[].join;n(n.P+n.F*(r(59)!=Object||!r(30)(l)),"Array",{join:function(t){return l.call(o(this),void 0===t?",":t)}})},function(t,e,r){"use strict";var n=r(1),o=r(83),l=r(28),i=r(44),s=r(9),a=[].slice;n(n.P+n.F*r(6)(function(){o&&a.call(o)}),"Array",{slice:function(t,e){var r=s(this.length),n=l(this);if(e=void 0===e?r:e,"Array"==n)return a.call(this,t,e);for(var o=i(t,r),u=i(e,r),c=s(u-o),f=new Array(c),h=0;h<c;h++)f[h]="String"==n?this.charAt(o+h):this[o+h];return f}})},function(t,e,r){"use strict";var n=r(1),o=r(15),l=r(12),i=r(6),s=[].sort,a=[1,2,3];n(n.P+n.F*(i(function(){a.sort(void 0)})||!i(function(){a.sort(null)})||!r(30)(s)),"Array",{sort:function(t){return void 0===t?s.call(l(this)):s.call(l(this),o(t))}})},function(t,e,r){"use strict";var n=r(1),o=r(34)(0),l=r(30)([].forEach,!0);n(n.P+n.F*!l,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,r){var n=r(7),o=r(66),l=r(8)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&null===(e=e[l])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){"use strict";var n=r(1),o=r(34)(1);n(n.P+n.F*!r(30)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),o=r(34)(2);n(n.P+n.F*!r(30)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),o=r(34)(3);n(n.P+n.F*!r(30)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),o=r(34)(4);n(n.P+n.F*!r(30)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),o=r(126);n(n.P+n.F*!r(30)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,r){"use strict";var n=r(1),o=r(126);n(n.P+n.F*!r(30)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,r){"use strict";var n=r(1),o=r(64)(!1),l=[].indexOf,i=!!l&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(i||!r(30)(l)),"Array",{indexOf:function(t){return i?l.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),o=r(23),l=r(29),i=r(9),s=[].lastIndexOf,a=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(a||!r(30)(s)),"Array",{lastIndexOf:function(t){if(a)return s.apply(this,arguments)||0;var e=o(this),r=i(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,l(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,r){var n=r(1);n(n.P,"Array",{copyWithin:r(127)}),r(39)("copyWithin")},function(t,e,r){var n=r(1);n(n.P,"Array",{fill:r(98)}),r(39)("fill")},function(t,e,r){"use strict";var n=r(1),o=r(34)(5),l=!0;"find"in[]&&Array(1).find(function(){l=!1}),n(n.P+n.F*l,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(39)("find")},function(t,e,r){"use strict";var n=r(1),o=r(34)(6),l="findIndex",i=!0;l in[]&&Array(1)[l](function(){i=!1}),n(n.P+n.F*i,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(39)(l)},function(t,e,r){r(47)("Array")},function(t,e,r){var n=r(4),o=r(86),l=r(11).f,i=r(46).f,s=r(68),a=r(61),u=n.RegExp,c=u,f=u.prototype,h=/a/g,d=/a/g,p=new u(h)!==h;if(r(10)&&(!p||r(6)(function(){return d[r(8)("match")]=!1,u(h)!=h||u(d)==d||"/a/i"!=u(h,"i")}))){u=function(t,e){var r=this instanceof u,n=s(t),l=void 0===e;return!r&&n&&t.constructor===u&&l?t:o(p?new c(n&&!l?t.source:t,e):c((n=t instanceof u)?t.source:t,n&&l?a.call(t):e),r?this:f,u)};for(var v=function(t){t in u||l(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},w=i(c),y=0;w.length>y;)v(w[y++]);f.constructor=u,u.prototype=f,r(19)(n,"RegExp",u)}r(47)("RegExp")},function(t,e,r){"use strict";r(130);var n=r(3),o=r(61),l=r(10),i=/./.toString,s=function(t){r(19)(RegExp.prototype,"toString",t,!0)};r(6)(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?s(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!l&&t instanceof RegExp?o.call(t):void 0)}):"toString"!=i.name&&s(function(){return i.call(this)})},function(t,e,r){"use strict";var n=r(3),o=r(9),l=r(101),i=r(70);r(71)("match",1,function(t,e,r,s){return[function(r){var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=s(r,t,this);if(e.done)return e.value;var a=n(t),u=String(this);if(!a.global)return i(a,u);var c=a.unicode;a.lastIndex=0;for(var f,h=[],d=0;null!==(f=i(a,u));){var p=String(f[0]);h[d]=p,""===p&&(a.lastIndex=l(u,o(a.lastIndex),c)),d++}return 0===d?null:h}]})},function(t,e,r){"use strict";var n=r(3),o=r(12),l=r(9),i=r(29),s=r(101),a=r(70),u=Math.max,c=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;r(71)("replace",2,function(t,e,r,p){return[function(n,o){var l=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,l,o):r.call(String(l),n,o)},function(t,e){var o=p(r,t,this,e);if(o.done)return o.value;var f=n(t),h=String(this),d="function"==typeof e;d||(e=String(e));var w=f.global;if(w){var y=f.unicode;f.lastIndex=0}for(var g=[];;){var m=a(f,h);if(null===m)break;if(g.push(m),!w)break;""===String(m[0])&&(f.lastIndex=s(h,l(f.lastIndex),y))}for(var b,_="",S=0,k=0;k<g.length;k++){m=g[k];for(var E=String(m[0]),C=u(c(i(m.index),h.length),0),T=[],O=1;O<m.length;O++)T.push(void 0===(b=m[O])?b:String(b));var M=m.groups;if(d){var x=[E].concat(T,C,h);void 0!==M&&x.push(M);var R=String(e.apply(void 0,x))}else R=v(E,h,C,T,M,e);C>=S&&(_+=h.slice(S,C)+R,S=C+E.length)}return _+h.slice(S)}];function v(t,e,n,l,i,s){var a=n+t.length,u=l.length,c=d;return void 0!==i&&(i=o(i),c=h),r.call(s,c,function(r,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":s=i[o.slice(1,-1)];break;default:var c=+o;if(0===c)return o;if(c>u){var h=f(c/10);return 0===h?o:h<=u?void 0===l[h-1]?o.charAt(1):l[h-1]+o.charAt(1):o}s=l[c-1]}return void 0===s?"":s})}})},function(t,e,r){"use strict";var n=r(3),o=r(116),l=r(70);r(71)("search",1,function(t,e,r,i){return[function(r){var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=i(r,t,this);if(e.done)return e.value;var s=n(t),a=String(this),u=s.lastIndex;o(u,0)||(s.lastIndex=0);var c=l(s,a);return o(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},function(t,e,r){"use strict";var n=r(68),o=r(3),l=r(62),i=r(101),s=r(9),a=r(70),u=r(100),c=Math.min,f=[].push,h=!!function(){try{return new RegExp("x","y")}catch(t){}}();r(71)("split",2,function(t,e,r,d){var p=r;return"c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?p=function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!n(t))return r.call(o,t,e);for(var l,i,s,a=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=void 0===e?4294967295:e>>>0,p=new RegExp(t.source,c+"g");(l=u.call(p,o))&&!((i=p.lastIndex)>h&&(a.push(o.slice(h,l.index)),l.length>1&&l.index<o.length&&f.apply(a,l.slice(1)),s=l[0].length,h=i,a.length>=d));)p.lastIndex===l.index&&p.lastIndex++;return h===o.length?!s&&p.test("")||a.push(""):a.push(o.slice(h)),a.length>d?a.slice(0,d):a}:"0".split(void 0,0).length&&(p=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}),[function(r,n){var o=t(this),l=null==r?void 0:r[e];return void 0!==l?l.call(r,o,n):p.call(String(o),r,n)},function(t,e){var n=d(p,t,this,e,p!==r);if(n.done)return n.value;var u=o(t),f=String(this),v=l(u,RegExp),w=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),g=new v(h?u:"^(?:"+u.source+")",y),m=void 0===e?4294967295:e>>>0;if(0===m)return[];if(0===f.length)return null===a(g,f)?[f]:[];for(var b=0,_=0,S=[];_<f.length;){g.lastIndex=h?_:0;var k,E=a(g,h?f:f.slice(_));if(null===E||(k=c(s(g.lastIndex+(h?0:_)),f.length))===b)_=i(f,_,w);else{if(S.push(f.slice(b,_)),S.length===m)return S;for(var C=1;C<=E.length-1;C++)if(S.push(E[C]),S.length===m)return S;_=b=k}}return S.push(f.slice(b)),S}]})},function(t,e,r){"use strict";var n,o,l,i,s=r(38),a=r(4),u=r(27),c=r(53),f=r(1),h=r(7),d=r(15),p=r(48),v=r(49),w=r(62),y=r(102).set,g=r(103)(),m=r(104),b=r(131),_=r(72),S=r(132),k=a.TypeError,E=a.process,C=E&&E.versions,T=C&&C.v8||"",O=a.Promise,M="process"==c(E),x=function(){},R=o=m.f,A=!!function(){try{var t=O.resolve(1),e=(t.constructor={})[r(8)("species")]=function(t){t(x,x)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e&&0!==T.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),I=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},L=function(t,e){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var n=t._v,o=1==t._s,l=0,i=function(e){var r,l,i,s=o?e.ok:e.fail,a=e.resolve,u=e.reject,c=e.domain;try{s?(o||(2==t._h&&N(t),t._h=1),!0===s?r=n:(c&&c.enter(),r=s(n),c&&(c.exit(),i=!0)),r===e.promise?u(k("Promise-chain cycle")):(l=I(r))?l.call(r,a,u):a(r)):u(n)}catch(t){c&&!i&&c.exit(),u(t)}};r.length>l;)i(r[l++]);t._c=[],t._n=!1,e&&!t._h&&P(t)})}},P=function(t){y.call(a,function(){var e,r,n,o=t._v,l=F(t);if(l&&(e=b(function(){M?E.emit("unhandledRejection",o,t):(r=a.onunhandledrejection)?r({promise:t,reason:o}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=M||F(t)?2:1),t._a=void 0,l&&e.e)throw e.v})},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){y.call(a,function(){var e;M?E.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},B=function t(e){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(r=I(e))?g(function(){var o={_w:n,_d:!1};try{r.call(e,u(t,o,1),u(D,o,1))}catch(t){D.call(o,t)}}):(n._v=e,n._s=1,L(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};A||(O=function(t){p(this,O,"Promise","_h"),d(t),n.call(this);try{t(u(B,this,1),u(D,this,1))}catch(t){D.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(50)(O.prototype,{then:function(t,e){var r=R(w(this,O));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=M?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),l=function(){var t=new n;this.promise=t,this.resolve=u(B,t,1),this.reject=u(D,t,1)},m.f=R=function(t){return t===O||t===i?new l(t):o(t)}),f(f.G+f.W+f.F*!A,{Promise:O}),r(52)(O,"Promise"),r(47)("Promise"),i=r(26).Promise,f(f.S+f.F*!A,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(t){return S(s&&this===i?O:this,t)}}),f(f.S+f.F*!(A&&r(69)(function(t){O.all(t).catch(x)})),"Promise",{all:function(t){var e=this,r=R(e),n=r.resolve,o=r.reject,l=b(function(){var r=[],l=0,i=1;v(t,!1,function(t){var s=l++,a=!1;r.push(void 0),i++,e.resolve(t).then(function(t){a||(a=!0,r[s]=t,--i||n(r))},o)}),--i||n(r)});return l.e&&o(l.v),r.promise},race:function(t){var e=this,r=R(e),n=r.reject,o=b(function(){v(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(t,e,r){"use strict";var n=r(137),o=r(56);r(73)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(o(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,r){"use strict";var n=r(1),o=r(74),l=r(105),i=r(3),s=r(44),a=r(9),u=r(7),c=r(4).ArrayBuffer,f=r(62),h=l.ArrayBuffer,d=l.DataView,p=o.ABV&&c.isView,v=h.prototype.slice,w=o.VIEW;n(n.G+n.W+n.F*(c!==h),{ArrayBuffer:h}),n(n.S+n.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||u(t)&&w in t}}),n(n.P+n.U+n.F*r(6)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(i(this),t);for(var r=i(this).byteLength,n=s(t,r),o=s(void 0===e?r:e,r),l=new(f(this,h))(a(o-n)),u=new d(this),c=new d(l),p=0;n<o;)c.setUint8(p++,u.getUint8(n++));return l}}),r(47)("ArrayBuffer")},function(t,e,r){var n=r(1);n(n.G+n.W+n.F*!r(74).ABV,{DataView:r(105).DataView})},function(t,e,r){r(35)("Int8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}},!0)},function(t,e,r){r(35)("Int16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Int32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Float32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Float64",8,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){var n=r(1),o=r(15),l=r(3),i=(r(4).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(6)(function(){i(function(){})}),"Reflect",{apply:function(t,e,r){var n=o(t),a=l(r);return i?i(n,e,a):s.call(n,e,a)}})},function(t,e,r){var n=r(1),o=r(45),l=r(15),i=r(3),s=r(7),a=r(6),u=r(117),c=(r(4).Reflect||{}).construct,f=a(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),h=!a(function(){c(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(t,e){l(t),i(e);var r=arguments.length<3?t:l(arguments[2]);if(h&&!f)return c(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(u.apply(t,n))}var a=r.prototype,d=o(s(a)?a:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},function(t,e,r){var n=r(11),o=r(1),l=r(3),i=r(31);o(o.S+o.F*r(6)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,r){l(t),e=i(e,!0),l(r);try{return n.f(t,e,r),!0}catch(t){return!1}}})},function(t,e,r){var n=r(1),o=r(24).f,l=r(3);n(n.S,"Reflect",{deleteProperty:function(t,e){var r=o(l(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){"use strict";var n=r(1),o=r(3),l=function(t){this._t=o(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};r(91)(l,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new l(t)}})},function(t,e,r){var n=r(24),o=r(25),l=r(22),i=r(1),s=r(7),a=r(3);i(i.S,"Reflect",{get:function t(e,r){var i,u,c=arguments.length<3?e:arguments[2];return a(e)===c?e[r]:(i=n.f(e,r))?l(i,"value")?i.value:void 0!==i.get?i.get.call(c):void 0:s(u=o(e))?t(u,r,c):void 0}})},function(t,e,r){var n=r(24),o=r(1),l=r(3);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(l(t),e)}})},function(t,e,r){var n=r(1),o=r(25),l=r(3);n(n.S,"Reflect",{getPrototypeOf:function(t){return o(l(t))}})},function(t,e,r){var n=r(1);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,r){var n=r(1),o=r(3),l=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return o(t),!l||l(t)}})},function(t,e,r){var n=r(1);n(n.S,"Reflect",{ownKeys:r(139)})},function(t,e,r){var n=r(1),o=r(3),l=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){o(t);try{return l&&l(t),!0}catch(t){return!1}}})},function(t,e,r){var n=r(11),o=r(24),l=r(25),i=r(22),s=r(1),a=r(41),u=r(3),c=r(7);s(s.S,"Reflect",{set:function t(e,r,s){var f,h,d=arguments.length<4?e:arguments[3],p=o.f(u(e),r);if(!p){if(c(h=l(e)))return t(h,r,s,d);p=a(0)}if(i(p,"value")){if(!1===p.writable||!c(d))return!1;if(f=o.f(d,r)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,n.f(d,r,f)}else n.f(d,r,a(0,s));return!0}return void 0!==p.set&&(p.set.call(d,s),!0)}})},function(t,e,r){var n=r(1),o=r(84);o&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,r){"use strict";var n=r(1),o=r(64)(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(39)("includes")},function(t,e,r){"use strict";var n=r(1),o=r(140),l=r(12),i=r(9),s=r(15),a=r(97);n(n.P,"Array",{flatMap:function(t){var e,r,n=l(this);return s(t),e=i(n.length),r=a(n,0),o(r,n,n,e,0,1,t,arguments[1]),r}}),r(39)("flatMap")},function(t,e,r){"use strict";var n=r(1),o=r(140),l=r(12),i=r(9),s=r(29),a=r(97);n(n.P,"Array",{flatten:function(){var t=arguments[0],e=l(this),r=i(e.length),n=a(e,0);return o(n,e,e,r,0,void 0===t?1:s(t)),n}}),r(39)("flatten")},function(t,e,r){"use strict";var n=r(1),o=r(67)(!0);n(n.P,"String",{at:function(t){return o(this,t)}})},function(t,e,r){"use strict";var n=r(1),o=r(141),l=r(72);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(l),"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){"use strict";var n=r(1),o=r(141),l=r(72);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(l),"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){"use strict";r(54)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,r){"use strict";r(54)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,r){"use strict";var n=r(1),o=r(32),l=r(9),i=r(68),s=r(61),a=RegExp.prototype,u=function(t,e){this._r=t,this._s=e};r(91)(u,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(o(this),!i(t))throw TypeError(t+" is not a regexp!");var e=String(this),r="flags"in a?String(t.flags):s.call(t),n=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=l(t.lastIndex),new u(n,e)}})},function(t,e,r){r(80)("asyncIterator")},function(t,e,r){r(80)("observable")},function(t,e,r){var n=r(1),o=r(139),l=r(23),i=r(24),s=r(95);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=l(t),a=i.f,u=o(n),c={},f=0;u.length>f;)void 0!==(r=a(n,e=u[f++]))&&s(c,e,r);return c}})},function(t,e,r){var n=r(1),o=r(142)(!1);n(n.S,"Object",{values:function(t){return o(t)}})},function(t,e,r){var n=r(1),o=r(142)(!0);n(n.S,"Object",{entries:function(t){return o(t)}})},function(t,e,r){"use strict";var n=r(1),o=r(12),l=r(15),i=r(11);r(10)&&n(n.P+r(75),"Object",{__defineGetter__:function(t,e){i.f(o(this),t,{get:l(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(1),o=r(12),l=r(15),i=r(11);r(10)&&n(n.P+r(75),"Object",{__defineSetter__:function(t,e){i.f(o(this),t,{set:l(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(1),o=r(12),l=r(31),i=r(25),s=r(24).f;r(10)&&n(n.P+r(75),"Object",{__lookupGetter__:function(t){var e,r=o(this),n=l(t,!0);do{if(e=s(r,n))return e.get}while(r=i(r))}})},function(t,e,r){"use strict";var n=r(1),o=r(12),l=r(31),i=r(25),s=r(24).f;r(10)&&n(n.P+r(75),"Object",{__lookupSetter__:function(t){var e,r=o(this),n=l(t,!0);do{if(e=s(r,n))return e.set}while(r=i(r))}})},function(t,e,r){var n=r(1);n(n.P+n.R,"Map",{toJSON:r(143)("Map")})},function(t,e,r){var n=r(1);n(n.P+n.R,"Set",{toJSON:r(143)("Set")})},function(t,e,r){r(76)("Map")},function(t,e,r){r(76)("Set")},function(t,e,r){r(76)("WeakMap")},function(t,e,r){r(76)("WeakSet")},function(t,e,r){r(77)("Map")},function(t,e,r){r(77)("Set")},function(t,e,r){r(77)("WeakMap")},function(t,e,r){r(77)("WeakSet")},function(t,e,r){var n=r(1);n(n.G,{global:r(4)})},function(t,e,r){var n=r(1);n(n.S,"System",{global:r(4)})},function(t,e,r){var n=r(1),o=r(28);n(n.S,"Error",{isError:function(t){return"Error"===o(t)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{clamp:function(t,e,r){return Math.min(r,Math.max(e,t))}})},function(t,e,r){var n=r(1);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,r){var n=r(1),o=180/Math.PI;n(n.S,"Math",{degrees:function(t){return t*o}})},function(t,e,r){var n=r(1),o=r(145),l=r(124);n(n.S,"Math",{fscale:function(t,e,r,n,i){return l(o(t,e,r,n,i))}})},function(t,e,r){var n=r(1);n(n.S,"Math",{iaddh:function(t,e,r,n){var o=t>>>0,l=r>>>0;return(e>>>0)+(n>>>0)+((o&l|(o|l)&~(o+l>>>0))>>>31)|0}})},function(t,e,r){var n=r(1);n(n.S,"Math",{isubh:function(t,e,r,n){var o=t>>>0,l=r>>>0;return(e>>>0)-(n>>>0)-((~o&l|~(o^l)&o-l>>>0)>>>31)|0}})},function(t,e,r){var n=r(1);n(n.S,"Math",{imulh:function(t,e){var r=+t,n=+e,o=65535&r,l=65535&n,i=r>>16,s=n>>16,a=(i*l>>>0)+(o*l>>>16);return i*s+(a>>16)+((o*s>>>0)+(65535&a)>>16)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,r){var n=r(1),o=Math.PI/180;n(n.S,"Math",{radians:function(t){return t*o}})},function(t,e,r){var n=r(1);n(n.S,"Math",{scale:r(145)})},function(t,e,r){var n=r(1);n(n.S,"Math",{umulh:function(t,e){var r=+t,n=+e,o=65535&r,l=65535&n,i=r>>>16,s=n>>>16,a=(i*l>>>0)+(o*l>>>16);return i*s+(a>>>16)+((o*s>>>0)+(65535&a)>>>16)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,r){"use strict";var n=r(1),o=r(26),l=r(4),i=r(62),s=r(132);n(n.P+n.R,"Promise",{finally:function(t){var e=i(this,o.Promise||l.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then(function(){return r})}:t,r?function(r){return s(e,t()).then(function(){throw r})}:t)}})},function(t,e,r){"use strict";var n=r(1),o=r(104),l=r(131);n(n.S,"Promise",{try:function(t){var e=o.f(this),r=l(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},function(t,e,r){var n=r(36),o=r(3),l=n.key,i=n.set;n.exp({defineMetadata:function(t,e,r,n){i(t,e,o(r),l(n))}})},function(t,e,r){var n=r(36),o=r(3),l=n.key,i=n.map,s=n.store;n.exp({deleteMetadata:function(t,e){var r=arguments.length<3?void 0:l(arguments[2]),n=i(o(e),r,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var a=s.get(e);return a.delete(r),!!a.size||s.delete(e)}})},function(t,e,r){var n=r(36),o=r(3),l=r(25),i=n.has,s=n.get,a=n.key;n.exp({getMetadata:function(t,e){return function t(e,r,n){if(i(e,r,n))return s(e,r,n);var o=l(r);return null!==o?t(e,o,n):void 0}(t,o(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,r){var n=r(135),o=r(144),l=r(36),i=r(3),s=r(25),a=l.keys,u=l.key;l.exp({getMetadataKeys:function(t){return function t(e,r){var l=a(e,r),i=s(e);if(null===i)return l;var u=t(i,r);return u.length?l.length?o(new n(l.concat(u))):u:l}(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,e,r){var n=r(36),o=r(3),l=n.get,i=n.key;n.exp({getOwnMetadata:function(t,e){return l(t,o(e),arguments.length<3?void 0:i(arguments[2]))}})},function(t,e,r){var n=r(36),o=r(3),l=n.keys,i=n.key;n.exp({getOwnMetadataKeys:function(t){return l(o(t),arguments.length<2?void 0:i(arguments[1]))}})},function(t,e,r){var n=r(36),o=r(3),l=r(25),i=n.has,s=n.key;n.exp({hasMetadata:function(t,e){return function t(e,r,n){if(i(e,r,n))return!0;var o=l(r);return null!==o&&t(e,o,n)}(t,o(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,r){var n=r(36),o=r(3),l=n.has,i=n.key;n.exp({hasOwnMetadata:function(t,e){return l(t,o(e),arguments.length<3?void 0:i(arguments[2]))}})},function(t,e,r){var n=r(36),o=r(3),l=r(15),i=n.key,s=n.set;n.exp({metadata:function(t,e){return function(r,n){s(t,e,(void 0!==n?o:l)(r),i(n))}}})},function(t,e,r){var n=r(1),o=r(103)(),l=r(4).process,i="process"==r(28)(l);n(n.G,{asap:function(t){var e=i&&l.domain;o(e?e.bind(t):t)}})},function(t,e,r){"use strict";var n=r(1),o=r(4),l=r(26),i=r(103)(),s=r(8)("observable"),a=r(15),u=r(3),c=r(48),f=r(50),h=r(18),d=r(49),p=d.RETURN,v=function(t){return null==t?void 0:a(t)},w=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},g=function(t){y(t)||(t._o=void 0,w(t))},m=function(t,e){u(t),this._c=void 0,this._o=t,t=new b(this);try{var r=e(t),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:a(r),this._c=r)}catch(e){return void t.error(e)}y(this)&&w(this)};m.prototype=f({},{unsubscribe:function(){g(this)}});var b=function(t){this._s=t};b.prototype=f({},{next:function(t){var e=this._s;if(!y(e)){var r=e._o;try{var n=v(r.next);if(n)return n.call(r,t)}catch(t){try{g(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var r=e._o;e._o=void 0;try{var n=v(r.error);if(!n)throw t;t=n.call(r,t)}catch(t){try{w(e)}finally{throw t}}return w(e),t},complete:function(t){var e=this._s;if(!y(e)){var r=e._o;e._o=void 0;try{var n=v(r.complete);t=n?n.call(r,t):void 0}catch(t){try{w(e)}finally{throw t}}return w(e),t}}});var _=function(t){c(this,_,"Observable","_f")._f=a(t)};f(_.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var e=this;return new(l.Promise||o.Promise)(function(r,n){a(t);var o=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),o.unsubscribe()}},error:n,complete:r})})}}),f(_,{from:function(t){var e="function"==typeof this?this:_,r=v(u(t)[s]);if(r){var n=u(r.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var r=!1;return i(function(){if(!r){try{if(d(t,!1,function(t){if(e.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void e.error(t)}e.complete()}}),function(){r=!0}})},of:function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:_)(function(t){var e=!1;return i(function(){if(!e){for(var n=0;n<r.length;++n)if(t.next(r[n]),e)return;t.complete()}}),function(){e=!0}})}}),h(_.prototype,s,function(){return this}),n(n.G,{Observable:_}),r(47)("Observable")},function(t,e,r){var n=r(4),o=r(1),l=r(72),i=[].slice,s=/MSIE .\./.test(l),a=function(t){return function(e,r){var n=arguments.length>2,o=!!n&&i.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,r)}};o(o.G+o.B+o.F*s,{setTimeout:a(n.setTimeout),setInterval:a(n.setInterval)})},function(t,e,r){var n=r(1),o=r(102);n(n.G+n.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,r){for(var n=r(99),o=r(43),l=r(19),i=r(4),s=r(18),a=r(55),u=r(8),c=u("iterator"),f=u("toStringTag"),h=a.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(d),v=0;v<p.length;v++){var w,y=p[v],g=d[y],m=i[y],b=m&&m.prototype;if(b&&(b[c]||s(b,c,h),b[f]||s(b,f,y),a[y]=h,g))for(w in n)b[w]||l(b,w,n[w],!0)}},function(t,e,r){(function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";var n,o=Object.prototype,l=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"===r(e),f=t.regeneratorRuntime;if(f)c&&(e.exports=f);else{(f=t.regeneratorRuntime=c?e.exports:{}).wrap=_;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",w={},y={};y[s]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(I([])));m&&m!==o&&l.call(m,s)&&(y=m);var b=C.prototype=k.prototype=Object.create(y);E.prototype=b.constructor=C,C.constructor=E,C[u]=E.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},f.awrap=function(t){return{__await:t}},T(O.prototype),O.prototype[a]=function(){return this},f.AsyncIterator=O,f.async=function(t,e,r,n){var o=new O(_(t,e,r,n));return f.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},T(b),b[u]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return s.type="throw",s.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),u=l.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),w}}}function _(t,e,r,n){var o=e&&e.prototype instanceof k?e:k,l=Object.create(o.prototype),i=new A(n||[]);return l._invoke=function(t,e,r){var n=h;return function(o,l){if(n===p)throw new Error("Generator is already running");if(n===v){if("throw"===o)throw l;return L()}for(r.method=o,r.arg=l;;){var i=r.delegate;if(i){var s=M(i,r);if(s){if(s===w)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var a=S(t,e,r);if("normal"===a.type){if(n=r.done?v:d,a.arg===w)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(n=v,r.method="throw",r.arg=a.arg)}}}(t,r,i),l}function S(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function k(){}function E(){}function C(){}function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(e){function n(t,o,i,s){var a=S(e[t],e,o);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"===r(c)&&l.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,i,s)},function(t){n("throw",t,i,s)}):Promise.resolve(c).then(function(t){u.value=t,i(u)},s)}s(a.arg)}var o;"object"===r(t.process)&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(t,e){function r(){return new Promise(function(r,o){n(t,e,r,o)})}return o=o?o.then(r,r):r()}}function M(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,M(t,e),"throw"===e.method))return w;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var o=S(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,w;var l=o.arg;return l?l.done?(e[t.resultName]=l.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,w):l:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:n,done:!0}}}("object"===(void 0===t?"undefined":r(t))?t:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:this)}).call(this,r(109),r(146)(t))},function(t,e,r){r(352),t.exports=r(26).RegExp.escape},function(t,e,r){var n=r(1),o=r(353)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return o(t)}})},function(t,e){t.exports=function(t,e){var r=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,r)}}},function(t,e,r){"use strict";r.d(e,"a",function(){return _});var n=r(51),o=r(5),l=r(2),i=r(108),s=r(151),a=r(0),u=r(149),c=r(150);function f(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e,r,n,o,l,i){try{var s=t[l](i),a=s.value}catch(t){return void r(t)}s.done?e(a):Promise.resolve(a).then(n,o)}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){p(t,e,r[e])})}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e&&w(t.prototype,e),r&&w(t,r),t}var g=function(){function t(e,r,n){v(this,t),this.rowIndex=e,this.colIndex=r,this.sprites=n}return y(t,[{key:"getSprites",value:function(){return this.sprites}},{key:"getSpritesAsSet",value:function(){return new Set(this.sprites)}},{key:"getWantsToMove",value:function(){return a.d.STATIONARY}}]),t}(),m=new TextDecoder,b=new TextEncoder,_=function(){function t(e,r,n){var o=this;v(this,t),this.worker=e,this.table=r;n&&n.onMessage||(n=d({},n,{onMessage:function(t){return Object(a.j)(10,function(){return!o.inputWatcher.isSomethingPressed()&&(alert(t),!0)})}})),this.cellCache=[],this.levelNum=-123456,this.gameData=null,this.ui=new s.a(r,n),this.resizeWatcher=new c.a(r,this.handleResize.bind(this)),this.inputWatcher=new u.a(r),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.messageListener=this.messageListener.bind(this),this.pollInputWatcher=this.pollInputWatcher.bind(this),r.addEventListener("blur",this.pause),r.addEventListener("focus",this.resume),e.addEventListener("message",this.messageListener),this.inputInterval=window.setInterval(this.pollInputWatcher,10)}return y(t,[{key:"setGame",value:function(t,e,r){var n=b.encode(t).buffer;this.worker.postMessage({type:a.c.ON_GAME_CHANGE,code:n,level:e,checkpoint:r},[n])}},{key:"dispose",value:function(){this.inputWatcher.dispose(),this.resizeWatcher.dispose(),clearInterval(this.inputInterval)}},{key:"press",value:function(t){this.worker.postMessage({type:a.c.PRESS,button:t})}},{key:"pause",value:function(){this.worker.postMessage({type:a.c.PAUSE}),this.inputInterval&&clearInterval(this.inputInterval),this.inputInterval=0}},{key:"resume",value:function(){this.worker.postMessage({type:a.c.RESUME}),this.inputInterval||(this.inputInterval=window.setInterval(this.pollInputWatcher,10))}},{key:"resize",value:function(){this.resizeWatcher.trigger()}},{key:"pollInputWatcher",value:function(){var t=this.inputWatcher.pollControls();t&&this.press(t)}},{key:"getScreenDimensions",value:function(t){var e=this.getGameData().metadata;return e.flickscreen||e.zoomscreen||new n.a(t[0].length,t.length)}},{key:"messageListener",value:function(){var t,e=(t=regeneratorRuntime.mark(function t(e){var r,n,o,l,s,u=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.data,t.t0=r.type,t.next=t.t0===a.c.ON_GAME_CHANGE?4:t.t0===a.c.ON_LEVEL_LOAD?8:t.t0===a.c.ON_LEVEL_CHANGE?10:t.t0===a.c.ON_MESSAGE?16:t.t0===a.c.ON_PRESS?21:t.t0===a.c.ON_TICK?23:t.t0===a.c.ON_SOUND?25:t.t0===a.c.ON_PAUSE?28:t.t0===a.c.ON_RESUME?30:t.t0===a.c.TICK?32:t.t0===a.c.PRESS?32:t.t0===a.c.PAUSE?32:t.t0===a.c.RESUME?32:33;break;case 4:return n=i.a.fromJson(JSON.parse(m.decode(r.payload)),"**source not included because of laziness**"),this.gameData=n,this.ui.onGameChange(n),t.abrupt("break",34);case 8:return this.ui.onLevelLoad(r.level,r.levelSize),t.abrupt("break",34);case 10:return this.cellCache=[],this.levelNum=r.level,r.cells?(this.ui.onLevelChange(r.level,r.cells.map(function(t){return t.map(function(t){return u.convertToCellish(t)})}),null),o=this.getScreenDimensions(r.cells),l=o.width,s=o.height,this.resizeWatcher.setLevel(s,l)):this.ui.onLevelChange(r.level,null,r.message),this.resizeWatcher.trigger(),this.table.focus(),t.abrupt("break",34);case 16:return t.next=18,this.ui.onMessage(r.message);case 18:return this.worker.postMessage({type:a.c.ON_MESSAGE_DONE}),this.table.focus(),t.abrupt("break",34);case 21:return this.ui.onPress(r.direction),t.abrupt("break",34);case 23:return this.ui.onTick(new Set(r.changedCells.map(function(t){return u.convertToCellish(t)})),r.checkpoint,r.hasAgain,this.convertToA11yMessages(r.a11yMessages)),t.abrupt("break",34);case 25:return t.next=27,this.ui.onSound({soundCode:r.soundCode});case 27:return t.abrupt("break",34);case 28:return this.ui.onPause(),t.abrupt("break",34);case 30:return this.ui.onResume(),t.abrupt("break",34);case 32:return t.abrupt("break",34);case 33:console.log('BUG: Unhandled Event occurred. Ignoring "'.concat(r.type,'"'),r);case 34:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var l=t.apply(e,r);function i(t){h(l,n,o,i,s,"next",t)}function s(t){h(l,n,o,i,s,"throw",t)}i(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"convertToA11yMessages",value:function(t){var e=this;return t.map(function(t){switch(t.type){case o.a.ADD:return d({},t,{cell:e.convertToCellish(t.cell),sprites:f(t.sprites).map(function(t){return e.lookupSprite(t)})});case o.a.MOVE:return d({},t,{oldCell:e.convertToCellish(t.oldCell),newCell:e.convertToCellish(t.newCell),sprite:e.lookupSprite(t.sprite)});case o.a.REMOVE:return d({},t,{cell:e.convertToCellish(t.cell),sprites:f(t.sprites).map(function(t){return e.lookupSprite(t)})});case o.a.REPLACE:return d({},t,{cell:e.convertToCellish(t.cell),replacements:f(t.replacements).map(function(t){var r=t.oldSprite,n=t.newSprite;return{oldSprite:e.lookupSprite(r),newSprite:e.lookupSprite(n)}})})}})}},{key:"lookupSprite",value:function(t){var e=this.getGameData()._getSpriteByName(t);if(!e)throw new Error('Could not find sprite "'.concat(t,'"'));return e}},{key:"convertToCellish",value:function(t){var e=this,r=t.rowIndex,n=t.colIndex,o=t.spriteNames;this.cellCache[r]||(this.cellCache[r]=[]),this.cellCache[r][n]||(this.cellCache[r][n]=new g(r,n,[]));var l=this.cellCache[r][n];return l.sprites=o.map(function(t){return e.lookupSprite(t)}),l}},{key:"getGameData",value:function(){if(!this.gameData)throw new Error("BUG: Game Data has not been retreived from the worker yet");return this.gameData}},{key:"isCurrentLevelAMessage",value:function(){return this.getGameData().levels[this.levelNum].type===l.d.MESSAGE}},{key:"handleResize",value:function(t,e,r){this.isCurrentLevelAMessage()||(this.table.setAttribute("style","width: ".concat(t,"px")),this.table.parentElement&&this.table.parentElement.setAttribute("style","left: ".concat(e,"px; /*chrome display quirk with fractional pixels*/")),document.body.setAttribute("data-ps-game-limited-by",r))}}]),t}()},,,,function(t,e,r){(function(t){var n;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var l=window.CustomEvent;function i(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement}return null}function s(t){t&&t.blur&&t!==document.body&&t.blur()}function a(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1}function u(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function c(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]})}else{var e,r=!1,n=function(){r?this.downgradeModal():this.maybeHideModal(),r=!1}.bind(this),o=function(o){if(o.target===t){var l="DOMNodeRemoved";r|=o.type.substr(0,l.length)===l,window.clearTimeout(e),e=window.setTimeout(n,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(e){t.addEventListener(e,o)})}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}l&&"object"!==o(l)||((l=function(t,e){e=e||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),r}).prototype=window.Event.prototype),c.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),f.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var r=document.createEvent("MouseEvents");r.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(r),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),!t){var e=["button","input","keygen","select","textarea"].map(function(t){return t+":not([disabled])"});e.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))}s(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!f.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),r=function(t,r){return!(void 0===e[t]||e[t]===r)};if(e.opacity<1||r("zIndex","auto")||r("transform","none")||r("mixBlendMode","normal")||r("filter","none")||r("perspective","none")||"isolate"===e.isolation||"fixed"===e.position||"touch"===e.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,f.needsCentering(this.dialog_)?(f.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var e=new l("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(e)}};var f={reposition:function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,r=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,r)+"px"},isInlinePositionSetByStylesheet:function(t){for(var e=0;e<document.styleSheets.length;++e){var r=document.styleSheets[e],n=null;try{n=r.cssRules}catch(t){}if(n)for(var o=0;o<n.length;++o){var l=n[o],i=null;try{i=document.querySelectorAll(l.selectorText)}catch(t){}if(i&&a(i,t)){var s=l.style.getPropertyValue("top"),u=l.style.getPropertyValue("bottom");if(s&&"auto"!==s||u&&"auto"!==u)return!0}}}return!1},needsCentering:function(t){return"absolute"===window.getComputedStyle(t).position&&(!("auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom)&&!f.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new c(t)},registerDialog:function(t){t.showModal||f.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(e){var r=[];e.forEach(function(t){for(var e,n=0;e=t.removedNodes[n];++n)e instanceof Element&&("dialog"===e.localName&&r.push(e),r=r.concat(e.querySelectorAll("dialog")))}),r.length&&t(r)}))}};if(f.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},f.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},f.DialogManager.prototype.updateStacking=function(){for(var t,e=this.zIndexHigh_,r=0;t=this.pendingDialogStack[r];++r)t.updateZIndex(--e,--e),0===r&&(this.overlay.style.zIndex=--e);var n=this.pendingDialogStack[0];n?(n.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},f.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=i(t);){for(var e,r=0;e=this.pendingDialogStack[r];++r)if(e.dialog===t)return 0===r;t=t.parentElement}return!1},f.DialogManager.prototype.handleFocus_=function(t){if(!this.containedByTopDialog_(t.target)&&(t.preventDefault(),t.stopPropagation(),s(t.target),void 0!==this.forwardTab_)){var e=this.pendingDialogStack[0];return e.dialog.compareDocumentPosition(t.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():document.documentElement.focus()),!1}},f.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var e=new l("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(e)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},f.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach(function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()})},f.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(1===this.pendingDialogStack.unshift(t)&&this.blockDocument(),this.updateStacking(),!0)},f.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},f.dm=new f.DialogManager,f.formSubmitter=null,f.useValue=null,void 0===window.HTMLDialogElement){var h=document.createElement("form");if(h.setAttribute("method","dialog"),"dialog"!==h.method){var d=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(d){var p=d.get;d.get=function(){return u(this)?"dialog":p.call(this)};var v=d.set;d.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):v.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",d)}}document.addEventListener("click",function(t){if(f.formSubmitter=null,f.useValue=null,!t.defaultPrevented){var e=t.target;if(e&&u(e.form)){if(!("submit"===e.type&&["button","input"].indexOf(e.localName)>-1)){if("input"!==e.localName||"image"!==e.type)return;f.useValue=t.offsetX+","+t.offsetY}i(e)&&(f.formSubmitter=e)}}},!1);var w=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!u(this))return w.call(this);var t=i(this);t&&t.close()},document.addEventListener("submit",function(t){var e=t.target;if(u(e)){t.preventDefault();var r=i(e);if(r){var n=f.formSubmitter;n&&n.form===e?r.close(f.useValue||n.value):r.close(),f.formSubmitter=null}}},!0)}f.forceRegisterDialog=f.forceRegisterDialog,f.registerDialog=f.registerDialog,"amd"in r(361)?void 0===(n=function(){return f}.call(e,r,e,t))||(t.exports=n):"object"===o(t)&&"object"===o(t.exports)?t.exports=f:window.dialogPolyfill=f}()}).call(this,r(146)(t))},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}
/**
 * Seedable random number generator functions.
 * @version 1.0.0
 * @license Public Domain
 *
 * @example
 * var rng = new RNG('Example');
 * rng.random(40, 50);  // =>  42
 * rng.uniform();       // =>  0.7972798995050903
 * rng.normal();        // => -0.6698504543216376
 * rng.exponential();   // =>  1.0547367609131555
 * rng.poisson(4);      // =>  2
 * rng.gamma(4);        // =>  2.781724687386858
 */r.r(e),r.d(e,"RNG",function(){return s});var i=function(){function t(e){n(this,t),this.s=new Array(256),this.i=0,this.j=0;for(var r=0;r<256;r++)this.s[r]=r;e&&this.mix(e)}return l(t,[{key:"_swap",value:function(t,e){var r=this.s[t];this.s[t]=this.s[e],this.s[e]=r}},{key:"mix",value:function(t){for(var e=function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r),o=[];do{o.push(255&n),n>>=8}while(n>0);e=e.concat(o.reverse())}return e}(t),r=0,n=0;n<this.s.length;n++)r+=this.s[n]+e[n%e.length],r%=256,this._swap(n,r)}},{key:"next",value:function(){return this.i=(this.i+1)%256,this.j=(this.j+this.s[this.i])%256,this._swap(this.i,this.j),this.s[(this.s[this.i]+this.s[this.j])%256]}}]),t}(),s=function(){function t(e){n(this,t),this._normal=null,this._state=new i(JSON.stringify(e))}return l(t,[{key:"nextByte",value:function(){return this._state.next()}},{key:"uniform",value:function(){for(var t=0,e=0;e<7;e++)t*=256,t+=this.nextByte();return t/(Math.pow(2,56)-1)}},{key:"random",value:function(t,e){return null===t?this.uniform():(null===e&&(e=t,t=0),t+Math.floor(this.uniform()*(e-t)))}},{key:"normal",value:function(){if(null!==this._normal){var t=this._normal;return this._normal=null,t}var e=this.uniform()||Math.pow(2,-53),r=this.uniform();return this._normal=Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*r),Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*r)}},{key:"exponential",value:function(){return-Math.log(this.uniform()||Math.pow(2,-53))}},{key:"poisson",value:function(t){var e=Math.exp(-(t||1)),r=0,n=1;do{r++,n*=this.uniform()}while(n>e);return r-1}}]),t}()},function(t,e,r){"use strict";r.r(e),r.d(e,"MakeRiff",function(){return a}),r.d(e,"FastBase64_Encode",function(){return l});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[];function l(t){for(var e,r=t.length,l="",i=0;r>2;)e=t[i]<<16|t[i+1]<<8|t[i+2],l+=o[e>>12]+o[4095&e],r-=3,i+=3;if(r>0){var s=(252&t[i])>>2,a=(3&t[i])<<4;if(r>1&&(a|=(240&t[++i])>>4),l+=n[s],l+=n[a],2===r){var u=(15&t[i++])<<2;u|=(192&t[i])>>6,l+=n[u]}1===r&&(l+="="),l+="="}return l}function i(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function s(t){return[255&t,t>>8&255]}function a(t,e,r){var n,o={audioFormat:1,bitsPerSample:e,blockAlign:0,byteRate:0,chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],numChannels:1,sampleRate:t,subChunk1Id:[102,109,116,32],subChunk1Size:16,subChunk2Id:[100,97,116,97],subChunk2Size:0};return o.byteRate=o.sampleRate*o.numChannels*o.bitsPerSample>>3,o.blockAlign=o.numChannels*o.bitsPerSample>>3,o.subChunk2Size=r.length,o.chunkSize=36+o.subChunk2Size,{dat:[],dataURI:"data:audio/wav;base64,"+l(n=o.chunkId.concat(i(o.chunkSize),o.format,o.subChunk1Id,i(o.subChunk1Size),s(o.audioFormat),s(o.numChannels),i(o.sampleRate),i(o.byteRate),s(o.blockAlign),s(o.bitsPerSample),o.subChunk2Id,i(o.subChunk2Size),r)),header:o,wav:n}}!function(){for(var t=0;t<4096;t++)o[t]=n[t>>6]+n[63&t]}()},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},,function(t,e,r){"use strict";r.r(e);r(153);var n=r(17),o=new Map;o.set("1-2-3-ban",{id:"1-2-3-ban",title:"1-2-3-Ban",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:"#697175",popularColors:["#1d57f7","#FFFFFF","#9d9d9d"],levels:[{rows:6,cols:7},{rows:8,cols:9},{rows:7,cols:7},{rows:9,cols:9},{rows:9,cols:9},{rows:9,cols:9},{rows:11,cols:11},null]}),o.set("2d-whale-world",{id:"2d-whale-world",title:"2D Whale World",author:"increpare",homepage:"www.increpare.com",backgroundColor:"#eb8931",popularColors:["#FF5500","#FFFF55","#000000"],levels:[null,{rows:15,cols:16},null,{rows:9,cols:11},null,{rows:14,cols:16},null,{rows:13,cols:16},null,{rows:13,cols:17},null,{rows:16,cols:17},null,{rows:13,cols:16},null,{rows:11,cols:11},null]}),o.set("a-sneeze-a-day",{id:"a-sneeze-a-day",title:"A Sneeze A Day Keeps The Crates Away",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#eb8931","#c4c692","#acad80"],levels:[null,null,{rows:7,cols:10},{rows:7,cols:9},{rows:7,cols:10},{rows:7,cols:7},{rows:7,cols:7},{rows:7,cols:9},{rows:7,cols:7},null]}),o.set("aaaah-i-m-being-attacked",{id:"aaaah-i-m-being-attacked",title:"Aaaah! I'm Being Attacked by a Giant Tentacle!",author:"Ricky Liu",homepage:"www.puzzlescript.net",backgroundColor:null,popularColors:["#a46422","#555555","#444444"],levels:[null,{rows:12,cols:12},null,{rows:11,cols:12},null,{rows:15,cols:19},null,{rows:11,cols:14},null,{rows:11,cols:17},null,{rows:15,cols:18},null,{rows:21,cols:19},null,{rows:25,cols:20},null,{rows:17,cols:18},null,{rows:21,cols:19},null]}),o.set("airport-aggression",{id:"airport-aggression",title:"Airport Aggression",author:null,homepage:null,backgroundColor:null,popularColors:["#F3E6E0","#CCCCFF","#CCFFCC"],levels:[null,{rows:80,cols:31}]}),o.set("alien-disco",{id:"alien-disco",title:"Alien Disco",author:"Toph Wells",homepage:null,backgroundColor:null,popularColors:["#a00080","#501060","#103060"],levels:[{rows:7,cols:7},{rows:9,cols:9},{rows:7,cols:9},{rows:10,cols:11},{rows:10,cols:10},{rows:8,cols:8},{rows:9,cols:4},{rows:10,cols:10},{rows:9,cols:9},{rows:9,cols:4},{rows:8,cols:9},{rows:8,cols:8}]}),o.set("atlas-shrank",{id:"atlas-shrank",title:"Atlas Shrank",author:"James Noeckel",homepage:null,backgroundColor:null,popularColors:["#8b4c42","#a7aae3","#697490"],levels:[null,{rows:7,cols:15},null,null,{rows:7,cols:15},{rows:11,cols:18},{rows:10,cols:15},null,{rows:22,cols:18},null,{rows:11,cols:18},{rows:11,cols:18},{rows:11,cols:18},null,{rows:19,cols:18},{rows:20,cols:54},{rows:11,cols:72},{rows:12,cols:36},null,null,null]}),o.set("barrier-trail",{id:"barrier-trail",title:"Barrier Trail",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#3B3942","#231F26","#D9FFDC"],levels:[null,null,null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:11,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("beam-islands",{id:"beam-islands",title:"Beam Islands",author:"mjau",homepage:"http://twitter.com/kamjau",backgroundColor:null,popularColors:["#6719ac","#a13cb7","#a27d5b"],levels:[null,{rows:8,cols:11},null,{rows:14,cols:14},null,{rows:10,cols:13},null,{rows:9,cols:11},{rows:11,cols:15},{rows:11,cols:18},{rows:10,cols:13},{rows:11,cols:12},null]}),o.set("block-touching",{id:"block-touching",title:"Block touching",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#E0AAF2","#3B3942","#FFD9E0"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("blocker-snake",{id:"blocker-snake",title:"Blocker snake",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#423D39","#E5C17E","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("bomb-n-ice",{id:"bomb-n-ice",title:"bomb n ice",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#7EA1E5","#423D39","#E5C17E"],levels:[null,null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},null,{rows:12,cols:11},{rows:11,cols:14}]}),o.set("botsket-ball",{id:"botsket-ball",title:"Botsket Ball",author:null,homepage:null,backgroundColor:null,popularColors:["#697175","#cccccc","#000000"],levels:[null,null,null,{rows:11,cols:11},null,null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11}]}),o.set("boxes-and-balloons",{id:"boxes-and-balloons",title:"Boxes & Balloons",author:"Ben Reilly",homepage:"ben-reilly.com",backgroundColor:null,popularColors:["#333333","#FFEEDD","#FF6644"],levels:[null,null,{rows:9,cols:10},null,{rows:9,cols:9},null,{rows:10,cols:10},null,{rows:13,cols:14},null,{rows:7,cols:10},null,{rows:9,cols:15},null,{rows:9,cols:15},null,{rows:16,cols:20},null,{rows:8,cols:11},null,{rows:7,cols:13},null,{rows:14,cols:12},null,{rows:7,cols:12},null,{rows:16,cols:15},null,{rows:11,cols:13},null,{rows:14,cols:11},null,{rows:9,cols:15},null,{rows:15,cols:16},null,{rows:16,cols:17},null,{rows:13,cols:12},null,{rows:11,cols:12},null,{rows:12,cols:10},null,{rows:17,cols:21}]}),o.set("boxes-love-bloxing-gloves",{id:"boxes-love-bloxing-gloves",title:"Boxes Love Bloxing Gloves",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#d67823","#9d9d9d","#000000"],levels:[{rows:6,cols:10},{rows:8,cols:8},{rows:7,cols:12},{rows:8,cols:11},{rows:8,cols:19},{rows:7,cols:15},{rows:7,cols:11},{rows:11,cols:11},{rows:7,cols:13},{rows:7,cols:16},{rows:9,cols:14},{rows:8,cols:18},{rows:9,cols:15},{rows:8,cols:11},{rows:8,cols:14},{rows:10,cols:15},{rows:9,cols:12},{rows:6,cols:10},{rows:12,cols:17},{rows:9,cols:20},{rows:11,cols:13},null]}),o.set("bubble-butler",{id:"bubble-butler",title:"Bubble Butler: CMD REORGANIZE",author:"John M. Williams",homepage:"john.m.dubs@gmail.com",backgroundColor:null,popularColors:["#000000","#2f484e","#44891a"],levels:[null,null,null,{rows:7,cols:7},null,{rows:5,cols:7},null,{rows:6,cols:7},null,{rows:9,cols:9},null,{rows:7,cols:8},null,null,{rows:6,cols:8},null,{rows:7,cols:8},null,{rows:8,cols:9},null,null,{rows:9,cols:10},null,{rows:7,cols:8},null,{rows:8,cols:8},null,{rows:7,cols:8},null,{rows:9,cols:9},null,{rows:7,cols:7},null,{rows:7,cols:9},null,{rows:9,cols:9},null,{rows:11,cols:12},null,{rows:8,cols:11},null,{rows:9,cols:10},null,{rows:8,cols:11},null,{rows:10,cols:7},null,{rows:12,cols:12},null,{rows:7,cols:7},null,{rows:7,cols:10},null,{rows:7,cols:10},null,{rows:7,cols:10},null,{rows:10,cols:9},null,{rows:12,cols:8},null,{rows:11,cols:9},null,{rows:7,cols:11},null,{rows:10,cols:9},null,null,null]}),o.set("castlemouse",{id:"castlemouse",title:"Memories Of Castlemouse",author:"Wayne Myers",homepage:"www.conniptions.org",backgroundColor:null,popularColors:["#cccccc","#000000","#493c2b"],levels:[null,{rows:13,cols:21},null,{rows:16,cols:26},null,{rows:13,cols:21},null,{rows:16,cols:26},null,{rows:13,cols:19},null,{rows:16,cols:26},null,{rows:13,cols:19},null,{rows:16,cols:26},null,{rows:14,cols:19},null,{rows:16,cols:26},null,null,null,null]}),o.set("climbing-cubes",{id:"climbing-cubes",title:"climbing cubes",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#7EA1E5",popularColors:["#000000","#7EA1E5","#E5C17E"],levels:[null,null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},{rows:11,cols:14}]}),o.set("closure-demake",{id:"closure-demake",title:"Closure Demake",author:"Tyler Glaiel",homepage:"www.closuregame.com",backgroundColor:null,popularColors:["#000000","#111111","#697175"],levels:[{rows:12,cols:14},{rows:15,cols:22},{rows:14,cols:23},{rows:14,cols:23},{rows:14,cols:23},{rows:14,cols:23},null,null]}),o.set("coin-counter",{id:"coin-counter",title:"Coin Counter",author:null,homepage:null,backgroundColor:null,popularColors:["#493c2b","#B2DCEF","#1d57f7"],levels:[{rows:10,cols:11},{rows:7,cols:15},{rows:12,cols:8},{rows:8,cols:9},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:10},{rows:7,cols:10},{rows:9,cols:11},{rows:11,cols:11},{rows:34,cols:34}]}),o.set("collapsable-sokoban",{id:"collapsable-sokoban",title:"Collapsable Sokoban",author:"Franklin P. Dyer",homepage:null,backgroundColor:null,popularColors:["#44891a","#a3ce27","#eb8931"],levels:[null,{rows:10,cols:10},null,{rows:10,cols:10},null,{rows:10,cols:10},null]}),o.set("collapse",{id:"collapse",title:"Collapse",author:"Terry Cavanagh",homepage:"www.distractionware.com",backgroundColor:"#000000",popularColors:["#FF0000","#ffa9cf","#992222"],levels:[null,null,{rows:10,cols:48},{rows:20,cols:65},null,null,null]}),o.set("covering-holes",{id:"covering-holes",title:"Covering holes",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#E5C17E","#3B3942","#AAE0F2"],levels:[null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("cubes-barrier",{id:"cubes-barrier",title:"Cubes barrier",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#222533",popularColors:["#FFEB33","#222533","#FAFFFC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:12,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("cubes-medusa",{id:"cubes-medusa",title:"cubes medusa",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2526",popularColors:["#FFD9E0","#1F2526","#C1A2A5"],levels:[null,null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("cyber-lasso",{id:"cyber-lasso",title:"Cyber-Lasso",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#be2633","#000000","#697175"],levels:[{rows:22,cols:33},{rows:33,cols:55},{rows:33,cols:22},null,null]}),o.set("dang-i-m-huge",{id:"dang-i-m-huge",title:"Dang I'm Huge",author:"Guilherme Tows",homepage:"zarat.us",backgroundColor:null,popularColors:["#A03C50","#000000","#1C3C88"],levels:[null,{rows:10,cols:12},null,{rows:11,cols:8},null,{rows:6,cols:12},null,{rows:10,cols:12},null,{rows:10,cols:12},null,{rows:11,cols:9},null,{rows:11,cols:11},null,{rows:15,cols:14},null]}),o.set("dangerous-dungeon",{id:"dangerous-dungeon",title:"Dangerous Dungeon",author:null,homepage:null,backgroundColor:null,popularColors:["#697175","#222222","#eeb62f"],levels:[null,null,{rows:7,cols:7},null,null,null,null,{rows:7,cols:4},{rows:7,cols:5},null,null,null,{rows:5,cols:8},{rows:8,cols:8},null,{rows:4,cols:7},{rows:5,cols:13},{rows:10,cols:7},{rows:7,cols:8},null,null,null,null,null,null,null,{rows:3,cols:13}]}),o.set("directional",{id:"directional",title:"Directional",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2526",popularColors:["#FFD9FC","#1F2526","#D9FFDC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("duality",{id:"duality",title:"duality",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#7EA1E5","#3B3942","#A17C8B"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("dungeon-janitor",{id:"dungeon-janitor",title:"Dungeon Janitor",author:"Farbs",homepage:"www.farbs.org",backgroundColor:null,popularColors:["#1B2632","#9d9d9d","#a46422"],levels:[null,null,{rows:7,cols:5},null,{rows:7,cols:8},null,{rows:10,cols:20},null,null,{rows:15,cols:20},null,null]}),o.set("dup-block",{id:"dup-block",title:"dup-block",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#FFD9E0","#423D39","#A2C1BE"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("easy-enigma",{id:"easy-enigma",title:"Easy Enigma",author:null,homepage:null,backgroundColor:"#000000",popularColors:["#FFFFFF","#000000"],levels:[{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:25,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:42},{rows:19,cols:84}]}),o.set("electric-wire",{id:"electric-wire",title:"Electric wire",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#E5C17E","#231F26","#FFD9FC"],levels:[null,null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("element-walkers",{id:"element-walkers",title:"Element Walkers",author:"Ove Ahlman",homepage:"http://oveahlman.itch.io",backgroundColor:"#732930",popularColors:["#44891a","#9d9d9d","#cccccc"],levels:[null,null,{rows:7,cols:9},null,{rows:5,cols:9},null,{rows:4,cols:15},null,{rows:4,cols:11},null,{rows:6,cols:11},null,{rows:8,cols:13},null,{rows:4,cols:17},null,{rows:4,cols:17},null,{rows:5,cols:12},null,{rows:6,cols:11},null,{rows:5,cols:14},null,{rows:6,cols:11},null,{rows:6,cols:11},null,{rows:5,cols:14},null]}),o.set("enqueue",{id:"enqueue",title:"Enqueue",author:"Allen Webster",homepage:"www.pushthegame.com",backgroundColor:null,popularColors:["#697175","#000000","#990000"],levels:[{rows:7,cols:8},{rows:7,cols:8},null,{rows:11,cols:8},{rows:11,cols:8},{rows:11,cols:10},{rows:11,cols:10},null,{rows:11,cols:10},{rows:11,cols:10},null,{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},{rows:19,cols:12},null]}),o.set("entanglement-one",{id:"entanglement-one",title:"Entanglement - Chapter One",author:"Richard Locke",homepage:"www.richardlocke.co.uk",backgroundColor:"#9fd1ff",popularColors:["#9fd1ff","#6cb8ff","#c0e1ff"],levels:[null,null,null,{rows:56,cols:96},null,null,null]}),o.set("entanglement-two",{id:"entanglement-two",title:"Entanglement - Chapter Two",author:"Rich Locke",homepage:"www.richardlocke.co.uk",backgroundColor:"#4a6277",popularColors:["#bbdcf9","#4a6277","#8484ff"],levels:[null,null,null,{rows:14,cols:24},{rows:84,cols:77},{rows:28,cols:48},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},{rows:14,cols:24},null,null]}),o.set("esl-puzzle-game",{id:"esl-puzzle-game",title:"ESL Puzzle Game -- ",author:"A.R.Nakama",homepage:"www.puzzlescript.net",backgroundColor:null,popularColors:["#a46422","#493c2b","#44891a"],levels:[null,{rows:7,cols:9},null,{rows:7,cols:7},null,{rows:7,cols:9},null,{rows:10,cols:11},null,{rows:10,cols:11},null,{rows:8,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:13},null,{rows:7,cols:8},null,{rows:8,cols:10},null,{rows:10,cols:8},null,{rows:13,cols:11},null,{rows:7,cols:7},null,{rows:7,cols:13},null,{rows:8,cols:9},null]}),o.set("explod",{id:"explod",title:"Explod",author:"CHz",homepage:"quiteajolt.com",backgroundColor:null,popularColors:["#44891a","#a46422","#493c2b"],levels:[null,{rows:7,cols:7},{rows:4,cols:6},null,{rows:5,cols:10},{rows:10,cols:5},{rows:5,cols:5},{rows:5,cols:13},null,{rows:4,cols:7},{rows:5,cols:11},{rows:5,cols:5},{rows:9,cols:9},null]}),o.set("extra-lives",{id:"extra-lives",title:"Extra lives",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#4F5B46","#231F26","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("fatigued-square-maze",{id:"fatigued-square-maze",title:"Fatigued square maze",author:"Ove Ahlman",homepage:"http://oveahlman.itch.io",backgroundColor:"#be2633",popularColors:["#697175","#9d9d9d","#FFFFFF"],levels:[null,{rows:7,cols:7},null,{rows:7,cols:7},null,{rows:10,cols:10},null,{rows:10,cols:10},null,{rows:10,cols:10},null,{rows:13,cols:13},null,{rows:13,cols:13},null,{rows:13,cols:13},null]}),o.set("fire-in-winter",{id:"fire-in-winter",title:"fire in winter",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#C3D3D9",popularColors:["#4D2E37","#C3D3D9","#A17C8B"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("fish-friend",{id:"fish-friend",title:"Fish Friend",author:null,homepage:null,backgroundColor:null,popularColors:["#25c555","#99d9ea","#1876d6"],levels:[{rows:10,cols:13},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:10,cols:12},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:11,cols:12},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:16},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:14},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:12},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:12,cols:17},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:13,cols:13},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:16},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:14,cols:32},{rows:16,cols:19}]}),o.set("flying-kick",{id:"flying-kick",title:"Flying Kick",author:"Aaron Steed",homepage:"www.robotacid.com",backgroundColor:"#000000",popularColors:["#d32112","#820e00","#000000"],levels:[null,{rows:11,cols:8},{rows:12,cols:14},{rows:12,cols:13},{rows:12,cols:9},{rows:12,cols:9},{rows:10,cols:14},{rows:12,cols:11},{rows:12,cols:20},{rows:10,cols:9},{rows:10,cols:13},{rows:14,cols:13},{rows:11,cols:15},{rows:11,cols:17},{rows:12,cols:17},{rows:11,cols:17},{rows:11,cols:12},null,null]}),o.set("garten-der-medusen",{id:"garten-der-medusen",title:"Garten der Medusen",author:"Stephen Lavelle",homepage:"www.increpare.com",backgroundColor:"#000000",popularColors:["#9d9d9d","#697175","#000000"],levels:[null,{rows:12,cols:13},null,{rows:13,cols:13},null,{rows:13,cols:13},null,{rows:10,cols:12},null,{rows:11,cols:14},null,{rows:13,cols:13},null,{rows:19,cols:19},null,{rows:15,cols:15},null]}),o.set("gobble-rush",{id:"gobble-rush",title:"Gobble Rush!",author:"Mark Richardson",homepage:null,backgroundColor:null,popularColors:["#FF0000","#000000","#FFFFFF"],levels:[{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11},{rows:7,cols:11}]}),o.set("grouping",{id:"grouping",title:"Grouping",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#705C84","#3B3942","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("hack-the-net",{id:"hack-the-net",title:"Hack the Net",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#000000","#a3ce27","#1d57f7"],levels:[{rows:9,cols:10},{rows:8,cols:9},{rows:11,cols:11},{rows:9,cols:13},{rows:7,cols:11},{rows:7,cols:11},{rows:9,cols:11},{rows:7,cols:9},{rows:9,cols:13},{rows:7,cols:7},{rows:7,cols:19},{rows:12,cols:11},{rows:9,cols:14},{rows:7,cols:19},{rows:10,cols:9},{rows:7,cols:13},{rows:11,cols:10},{rows:9,cols:10},{rows:12,cols:11},{rows:9,cols:9},{rows:7,cols:11},{rows:10,cols:9},{rows:7,cols:11},{rows:9,cols:12},{rows:11,cols:13},{rows:8,cols:12},{rows:11,cols:10},{rows:8,cols:13},{rows:10,cols:11},{rows:9,cols:12},{rows:7,cols:9},{rows:9,cols:11},{rows:8,cols:13},{rows:7,cols:9},{rows:10,cols:11},{rows:9,cols:9},{rows:13,cols:13},{rows:11,cols:8},{rows:7,cols:13},{rows:9,cols:15},{rows:11,cols:16},{rows:12,cols:11},{rows:10,cols:9},{rows:13,cols:11},{rows:7,cols:13},null]}),o.set("hue-change",{id:"hue-change",title:"Hue change",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#AAE0F2","#3B3942","#E0AAF2"],levels:[null,null,{rows:9,cols:9}]}),o.set("i-herd-u-liek-water-templs",{id:"i-herd-u-liek-water-templs",title:"i herd u liek water templs",author:"Denis Prause",homepage:"https://twitter.com/zejety",backgroundColor:null,popularColors:["#a3ce27","#697175","#e06f8b"],levels:[null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null,{rows:9,cols:18},null]}),o.set("ice-cream-stick",{id:"ice-cream-stick",title:" -ooo- ",author:"Baku",homepage:"http://baku89.com",backgroundColor:null,popularColors:["#000000","#d7b7a2","#EEEEEE"],levels:[{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:16,cols:15},{rows:15,cols:15},{rows:16,cols:15}]}),o.set("ice-path",{id:"ice-path",title:"Ice path",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#5C6684","#231F26","#D9FFDC"],levels:[null,null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("icecrates",{id:"icecrates",title:"IceCrates",author:"Tyler Glaiel",homepage:"twitter.com/tylerglaiel",backgroundColor:null,popularColors:["#2f484e","#9d9d9d","#697175"],levels:[null,{rows:7,cols:7},null,{rows:9,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:11},null,{rows:12,cols:13},null,{rows:13,cols:15},null]}),o.set("interconnection",{id:"interconnection",title:"interconnection",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#66CC52",popularColors:["#FFD9FC","#66CC52","#5C8484"],levels:[null,null,{rows:13,cols:8},null,{rows:13,cols:8},null,{rows:13,cols:8},null]}),o.set("islands",{id:"islands",title:"Islands",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#AAE0F2",popularColors:["#AAE0F2","#FFD9E0","#E57ED5"],levels:[null,null,{rows:36,cols:30},{rows:12,cols:10}]}),o.set("kettle",{id:"kettle",title:"Kettle",author:"stephen lavelle",homepage:"www.increpare.com",backgroundColor:null,popularColors:["#000000","#3E3E44","#5D6FA7"],levels:[null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:13,cols:15},null,null,{rows:14,cols:15},null,null,{rows:14,cols:15},null,null,{rows:15,cols:15},null,null,null]}),o.set("life-is-hard",{id:"life-is-hard",title:"Life is Hard",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#9d9d9d","#be2633","#ffff00"],levels:[null,null,null,{rows:7,cols:7},{rows:6,cols:8},{rows:7,cols:7},{rows:8,cols:8},{rows:9,cols:9}]}),o.set("lime-rick",{id:"lime-rick",title:"Lime Rick",author:"Tommi Tuovinen",homepage:"http://www.kissmaj7.com/",backgroundColor:null,popularColors:["#a46422","#000000","#be2633"],levels:[null,{rows:15,cols:19},null,{rows:17,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:14,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null,{rows:15,cols:19},null]}),o.set("linked",{id:"linked",title:"Linked",author:null,homepage:null,backgroundColor:"#000000",popularColors:["#9d9d9d","#697175","#000000"],levels:[null,null,{rows:7,cols:5},null,{rows:7,cols:6},null,{rows:8,cols:6},null,{rows:9,cols:14},null,{rows:12,cols:16},null,{rows:8,cols:11},null,{rows:11,cols:13},null]}),o.set("maera-public-works",{id:"maera-public-works",title:"Maera Public Works",author:"CHz",homepage:"quiteajolt.com",backgroundColor:"#1B2632",popularColors:["#777700","#222222","#555500"],levels:[{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:8,cols:10},{rows:7,cols:11},{rows:12,cols:19},{rows:15,cols:17},{rows:9,cols:14},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:13,cols:13},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14},{rows:10,cols:14}]}),o.set("magik",{id:"magik",title:"Magik",author:null,homepage:null,backgroundColor:null,popularColors:["#493c2b","#44891a","#a3ce27"],levels:[null,null,null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:12,cols:9},null]}),o.set("magnetic",{id:"magnetic",title:"magnetic",author:"nick cavazos",homepage:null,backgroundColor:"#1B2632",popularColors:["#1B2632","#000000","#697175"],levels:[null,{rows:9,cols:15},null,{rows:9,cols:15},null,{rows:9,cols:15},null,{rows:9,cols:15}]}),o.set("magnetized",{id:"magnetized",title:"Magnetized",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#FFFFFF","#3B3942","#D9FFDC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("manic-ammo",{id:"manic-ammo",title:"Manic Ammo",author:"David Eastman",homepage:"@eastmad",backgroundColor:null,popularColors:["#493c2b","#a46422","#B2DCEF"],levels:[null,{rows:7,cols:8},null,{rows:7,cols:8},null,{rows:7,cols:8},null,null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null]}),o.set("mazezam",{id:"mazezam",title:"MazezaM",author:"Malcolm Tyrrell",homepage:"https://sites.google.com/site/malcolmsprojects/",backgroundColor:null,popularColors:["#eb8931","#697175","#9d9d9d"],levels:[null,{rows:4,cols:11},null,{rows:4,cols:13},null,{rows:5,cols:13},null,{rows:5,cols:14},null,{rows:6,cols:11},null,{rows:6,cols:13},null,{rows:7,cols:13},null,{rows:5,cols:14},null,{rows:6,cols:13},null,{rows:6,cols:20},null,{rows:6,cols:13},null,{rows:8,cols:19},null,{rows:7,cols:12},null,{rows:6,cols:14},null,{rows:8,cols:12},null,{rows:6,cols:16},null,{rows:6,cols:13},null,{rows:13,cols:11},null,{rows:6,cols:13},null,{rows:6,cols:21},null,{rows:7,cols:14},null,{rows:6,cols:17},null,{rows:7,cols:14},null,{rows:6,cols:15},null,{rows:9,cols:15},null,{rows:8,cols:13},null,{rows:12,cols:19},null,{rows:9,cols:15},null,{rows:12,cols:17},null,{rows:9,cols:16},null]}),o.set("mc-escher-s-equestrian-armageddon",{id:"mc-escher-s-equestrian-armageddon",title:"MC Escher's Equestrian Armageddon",author:"Anna Clarke",homepage:"www.puzzlescript.net",backgroundColor:null,popularColors:["#a46422","#493c2b","#1B2632"],levels:[{rows:6,cols:17},{rows:8,cols:7},{rows:7,cols:20},{rows:20,cols:43}]}),o.set("microban",{id:"microban",title:"Microban",author:"David Skinner",homepage:"www.sneezingtiger.com/sokoban/levels/microbanText.html",backgroundColor:null,popularColors:["#a46422","#493c2b","#44891a"],levels:[null,{rows:7,cols:6},null,{rows:7,cols:6},null,{rows:6,cols:9},null,{rows:6,cols:8},null,{rows:7,cols:8},null,{rows:6,cols:12},null,{rows:8,cols:7},null,{rows:12,cols:8},null,{rows:7,cols:6},null,{rows:8,cols:11},null]}),o.set("midas",{id:"midas",title:"Midas",author:"wanderlands",homepage:"www.wanderlands.org",backgroundColor:null,popularColors:["#9d9d9d","#FFFFFF","#eb8931"],levels:[{rows:6,cols:14},null,{rows:7,cols:15},null,{rows:8,cols:15},null,{rows:6,cols:14},null,{rows:9,cols:17},null,null,{rows:15,cols:21},null,{rows:11,cols:21},null,{rows:10,cols:21},null,{rows:12,cols:21},null,{rows:13,cols:21},null,{rows:17,cols:21},null,{rows:12,cols:21},null,{rows:13,cols:21},null,{rows:16,cols:21},null,{rows:14,cols:21},null]}),o.set("mirror-isles",{id:"mirror-isles",title:"Mirror Isles",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#4e5159","#1d57f7","#FFFFFF"],levels:[{rows:15,cols:13},{rows:15,cols:13},{rows:16,cols:17},{rows:12,cols:15},{rows:13,cols:16},{rows:15,cols:15},{rows:11,cols:11},{rows:14,cols:16},{rows:11,cols:12},{rows:13,cols:17},{rows:12,cols:14},{rows:14,cols:12},{rows:13,cols:15},{rows:12,cols:17},null,{rows:15,cols:17},{rows:12,cols:13},{rows:10,cols:17},{rows:15,cols:13},{rows:11,cols:13},{rows:13,cols:14},{rows:10,cols:17},{rows:11,cols:15},null]}),o.set("miss-direction",{id:"miss-direction",title:"Miss Direction",author:"Malcolm Tyrrell",homepage:"https://sites.google.com/site/malcolmsprojects/miss-direction",backgroundColor:null,popularColors:["#f7e26b","#000000","#1d57f7"],levels:[null,{rows:7,cols:21},{rows:19,cols:13},{rows:22,cols:19},{rows:22,cols:23},{rows:21,cols:26},{rows:14,cols:17},{rows:19,cols:15},{rows:17,cols:19},{rows:9,cols:21},{rows:17,cols:18},{rows:18,cols:27},{rows:20,cols:40},{rows:21,cols:19},{rows:18,cols:17},{rows:21,cols:16},{rows:17,cols:17},{rows:22,cols:25},{rows:24,cols:17},{rows:25,cols:28},{rows:22,cols:21},null,null,null,null]}),o.set("modality",{id:"modality",title:"Modality",author:"Sean Barrett",homepage:"www.silverspaceship.com",backgroundColor:"#603060",popularColors:["#202020","#FFFFFF","#000000"],levels:[{rows:3,cols:5},{rows:5,cols:5},{rows:6,cols:6},{rows:9,cols:11}]}),o.set("monster-mess",{id:"monster-mess",title:"monster mess",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#000000",popularColors:["#000000","#FFFFFF","#ff0000"],levels:[null,null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("moving-target",{id:"moving-target",title:"Moving target",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#736053","#423D39","#7EA1E5"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("mowing",{id:"mowing",title:"Mowing",author:null,homepage:null,backgroundColor:null,popularColors:["#00cc00","#1d57f7","#cccccc"],levels:[null,{rows:6,cols:5},{rows:6,cols:5},null,{rows:6,cols:5},null,{rows:6,cols:5}]}),o.set("multi-word-dictionary-game",{id:"multi-word-dictionary-game",title:"Multi-word Dictionary Game",author:"Sarah Northway",homepage:"www.sarahnorthway.com",backgroundColor:null,popularColors:["#9d9d9d","#de65e2","#000000"],levels:[{rows:7,cols:9}]}),o.set("net",{id:"net",title:"Net",author:null,homepage:null,backgroundColor:null,popularColors:["#000000","#f7e26b","#FFFFFF"],levels:[{rows:77,cols:13}]}),o.set("newton-s-crates",{id:"newton-s-crates",title:"Newton's Crates",author:"Andrey Shevchuk",homepage:"shevchuk.net",backgroundColor:"#493c2b",popularColors:["#493c2b","#cccccc","#9d9d9d"],levels:[{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:20},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:20},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:20},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},{rows:17,cols:21},null,{rows:17,cols:36},null,null,null,null,{rows:35,cols:49}]}),o.set("okosban",{id:"okosban",title:"Okosban",author:"Ove Ahlman",homepage:"oveahlman.itch.io",backgroundColor:null,popularColors:["#cccccc","#1B2632","#FFFFFF"],levels:[null,{rows:8,cols:6},null,{rows:9,cols:9},null,{rows:9,cols:8},null,{rows:8,cols:7},null,{rows:10,cols:10},null,{rows:11,cols:11},null,{rows:18,cols:20},null,{rows:16,cols:16},null,{rows:11,cols:16},null,{rows:16,cols:16},null,{rows:16,cols:16},null]}),o.set("out-of-bounds",{id:"out-of-bounds",title:"out of bounds [lite demo]",author:"cyathea tree studio",homepage:"www.cyatheatree.com",backgroundColor:null,popularColors:["#161616","#FFFFFF","#cccccc"],levels:[null,{rows:3,cols:6},null,{rows:2,cols:6},null,{rows:2,cols:6},null,{rows:3,cols:7},null,{rows:3,cols:7},null,{rows:3,cols:6},null,{rows:3,cols:7},null,{rows:5,cols:12},null,{rows:5,cols:12},null,{rows:7,cols:11},null,{rows:6,cols:11},null,{rows:9,cols:6},null,{rows:3,cols:10},null,{rows:8,cols:10},null,{rows:9,cols:15},null,{rows:7,cols:4},null,{rows:11,cols:11},null,{rows:7,cols:5},null,null,null,{rows:10,cols:11},null]}),o.set("out-there",{id:"out-there",title:"Out There",author:"CHz",homepage:"quiteajolt.com",backgroundColor:"#303030",popularColors:["#303030","#606060","#C0C0C0"],levels:[null,null,{rows:7,cols:9},{rows:15,cols:19},{rows:13,cols:13},{rows:12,cols:18},{rows:13,cols:14},{rows:9,cols:15},{rows:11,cols:15},{rows:10,cols:13},{rows:11,cols:13},{rows:13,cols:19},{rows:13,cols:18},{rows:12,cols:19},{rows:11,cols:13},{rows:17,cols:19},{rows:23,cols:25},{rows:21,cols:42},{rows:19,cols:42},{rows:21,cols:42},{rows:15,cols:19},null,null]}),o.set("outward-force",{id:"outward-force",title:"Outward force",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#A87EE5","#231F26","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("overstep",{id:"overstep",title:"Overstep",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#191919",popularColors:["#F2F2AA","#191919","#E0AAF2"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("pants-shirt-cap",{id:"pants-shirt-cap",title:"Pants, Shirt, Cap",author:"Jaewoong Hwang",homepage:"www.jaewoong.info",backgroundColor:"#BA381F",popularColors:["#BA4B32","#BA381F","#57381F"],levels:[null,null,{rows:5,cols:7},null,null,null,{rows:5,cols:9},null,null,null,{rows:6,cols:8},null,null,{rows:4,cols:9},null,null,{rows:7,cols:11},null,null,{rows:6,cols:6},null,null,{rows:7,cols:8},null,null,{rows:7,cols:8},null,null,{rows:8,cols:9},null,null,null]}),o.set("path-lines",{id:"path-lines",title:"Path lines",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#E5C17E","#423D39","#E0AAF2"],levels:[null,null,{rows:11,cols:8},null,{rows:11,cols:8},null,{rows:11,cols:8},null,{rows:11,cols:8},null]}),o.set("pathmaker",{id:"pathmaker",title:"Pathmaker",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#FFFFFF","#231F26","#E5C17E"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("positional",{id:"positional",title:"Positional",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2026",popularColors:["#999999","#1F2026","#D9FFF8"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("pot-wash-panic",{id:"pot-wash-panic",title:"Pot Wash Panic",author:"Dan Howard",homepage:"https://twitter.com/DanHowardGames",backgroundColor:"#4B575D",popularColors:["#8E634B","#A7120C","#7F7F7C"],levels:[null,{rows:5,cols:12},null,{rows:7,cols:12},null,{rows:6,cols:10},null,{rows:6,cols:9},null,{rows:9,cols:9},null,{rows:7,cols:14},null,{rows:5,cols:11},null,{rows:6,cols:9},null,{rows:6,cols:12},null,{rows:9,cols:10},null,{rows:7,cols:16},null,{rows:7,cols:14},null,{rows:10,cols:12},null,{rows:9,cols:13},null]}),o.set("pretender-to-the-crown",{id:"pretender-to-the-crown",title:"pretender to the crown",author:"colin thil",homepage:"http://pretendertothecrown.wordpress.com/",backgroundColor:"#d7dbef",popularColors:["#ead5a8","#0c6358","#225039"],levels:[null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,{rows:11,cols:11},null,null,{rows:11,cols:11},null,null,null]}),o.set("programaze",{id:"programaze",title:"PrograMaze",author:"Adam Gashlin",homepage:"gashlin.net",backgroundColor:null,popularColors:["#697175","#9d9d9d","#f7e26b"],levels:[null,{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},{rows:10,cols:13},{rows:10,cols:13},{rows:10,cols:13},null,{rows:10,cols:13},null,{rows:10,cols:13},null]}),o.set("purple",{id:"purple",title:"purple",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#536673",popularColors:["#FFEED9","#536673","#C1A2BC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("push",{id:"push",title:"PUSH",author:"lonebot - demake by rmmh",homepage:"http://lonebot.net/games/push/",backgroundColor:null,popularColors:["#f7e26b","#635854","#969283"],levels:[null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:11,cols:11},{rows:11,cols:11},null]}),o.set("pushcat-jr",{id:"pushcat-jr",title:"Pushcat Jr",author:"Zut!",homepage:"zutgames.com/pushcat",backgroundColor:null,popularColors:["#556a64","#70a169","#584a4e"],levels:[null,{rows:11,cols:12},null,{rows:14,cols:14},null,{rows:20,cols:18},null,{rows:15,cols:19},null,{rows:13,cols:14},null,{rows:16,cols:15},null,{rows:15,cols:14},null,{rows:19,cols:17},null]}),o.set("rock-paper-scissors",{id:"rock-paper-scissors",title:"Rock, Paper, Scissors",author:"chaotic_iak",homepage:"chaosatthesky.wordpress.com",backgroundColor:null,popularColors:["#eb8931","#2f484e","#a3ce27"],levels:[null,{rows:9,cols:12},null,null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,{rows:9,cols:12},null,null,{rows:9,cols:12},null,null,{rows:9,cols:13},{rows:9,cols:16},{rows:9,cols:12},{rows:10,cols:11},{rows:9,cols:14},{rows:13,cols:17},{rows:9,cols:13},{rows:17,cols:23},{rows:9,cols:10},null]}),o.set("roll-those-sixes",{id:"roll-those-sixes",title:"Roll those Sixes",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#697175","#444444","#9d9d9d"],levels:[null,{rows:5,cols:8},null,null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:7,cols:7},null,{rows:7,cols:7},null,{rows:8,cols:8},null,{rows:6,cols:7},null,{rows:8,cols:8},null,{rows:7,cols:8},null]}),o.set("rows-and-columns",{id:"rows-and-columns",title:"rows and columns",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#D9FFDC","#3B3942","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("scaling-walls",{id:"scaling-walls",title:"Scaling walls",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#7EA1E5","#423D39","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("season-finale",{id:"season-finale",title:"Season Finale",author:null,homepage:null,backgroundColor:"#222222",popularColors:["#043804","#78D448","#109010"],levels:[null,null,null,null,null,{rows:5,cols:6},null,null,null,null,null,null,{rows:5,cols:7},null,null,null,null,null,null,null,null,null,null,null,{rows:5,cols:7},null,null,null,null,null,null,null,{rows:9,cols:7},null,null,null,null,null,null,null,{rows:9,cols:7},null,null,null,null,null,null,null,{rows:6,cols:7},null,null,null,null,null,null,null,{rows:7,cols:8},null,null,null,null,null,null,null,null,null,null,null,null,null,{rows:8,cols:7},null,null,null,null,null,null,null,null,null,null,{rows:10,cols:8},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{rows:8,cols:9},null,null,null,null,null,null,null,null,null,null,null,{rows:10,cols:10},null,null,{rows:13,cols:6},null]}),o.set("separation",{id:"separation",title:"Separation",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#777777","#666666","#555555"],levels:[null,{rows:7,cols:7},null,{rows:6,cols:8},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:7,cols:7},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:8,cols:8},null,{rows:7,cols:7},null,{rows:6,cols:5},null,{rows:8,cols:8},null,{rows:7,cols:5}]}),o.set("skippa",{id:"skippa",title:"skippa",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2622",popularColors:["#B32D2D","#1F2622","#E5C17E"],levels:[null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("skipping-stones",{id:"skipping-stones",title:"Skipping Stones to Lonely Homes",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#ffffff","#1d57f7","#B2DCEF"],levels:[{rows:70,cols:76}]}),o.set("skyscraper",{id:"skyscraper",title:"Skyscraper",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#AAE0F2",popularColors:["#AAE0F2","#FFD9E0","#A87EE5"],levels:[null,{rows:113,cols:11},{rows:14,cols:11}]}),o.set("sleepy-players",{id:"sleepy-players",title:"Sleepy players",author:"Marcos Donnantuoni",homepage:"https://marcosd.itch.io",backgroundColor:null,popularColors:["#1d57f7","#777777","#555555"],levels:[null,null,{rows:7,cols:7},null,null,null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:6},null,{rows:6,cols:7},null,{rows:7,cols:7}]}),o.set("slidings",{id:"slidings",title:"Slidings",author:"Alain Brobecker",homepage:"abrobecker.free.fr",backgroundColor:null,popularColors:["#777777","#448888","#FFFFFF"],levels:[null,{rows:4,cols:6},null,{rows:5,cols:6},null,{rows:4,cols:7},null,{rows:5,cols:7},null,{rows:4,cols:10},null,{rows:9,cols:9},null,{rows:7,cols:8},null,{rows:6,cols:7},null,{rows:7,cols:8},null,{rows:8,cols:8},null,{rows:5,cols:8}]}),o.set("slime-swap",{id:"slime-swap",title:"Slime Swap",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:"#9d9d9d",popularColors:["#495e2b","#444444","#9d9d9d"],levels:[{rows:9,cols:10},{rows:7,cols:13},{rows:9,cols:9},{rows:10,cols:14},{rows:10,cols:12},{rows:9,cols:13},{rows:9,cols:9},{rows:14,cols:14},{rows:10,cols:10},{rows:10,cols:12},{rows:13,cols:13},{rows:10,cols:10},{rows:10,cols:12},{rows:13,cols:9},{rows:13,cols:10},null]}),o.set("sokobond",{id:"sokobond",title:"Sokobond: The Demake",author:"Jonah Ostroff",homepage:"www.sokobond.com",backgroundColor:"#FDFDFD",popularColors:["#f7e26b","#FFFFFF","#cccccc"],levels:[null,null,{rows:8,cols:9},null,{rows:5,cols:6},null,{rows:5,cols:8},null,{rows:7,cols:7},null,{rows:5,cols:7},null,{rows:7,cols:7},null,{rows:9,cols:9},null,{rows:5,cols:9},null,{rows:7,cols:8},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:8,cols:9},null,{rows:7,cols:7},null,{rows:8,cols:7},null,{rows:8,cols:8},null,null]}),o.set("sokoboros",{id:"sokoboros",title:"Sokoboros",author:"Trevor Newton",homepage:"https://twitter.com/trevnewt",backgroundColor:"#22170B",popularColors:["#a46422","#493c2b","#eb8931"],levels:[null,{rows:52,cols:52},null]}),o.set("some-lines-crossed",{id:"some-lines-crossed",title:"Some lines were meant to be crossed",author:"Frpzzd",homepage:null,backgroundColor:"#1B2632",popularColors:["#1B2632","#1d57f7","#732930"],levels:[null,{rows:7,cols:7},{rows:7,cols:15},{rows:7,cols:15},{rows:11,cols:11},{rows:11,cols:11},{rows:11,cols:11},{rows:15,cols:15}]}),o.set("some-pits",{id:"some-pits",title:"Some pits",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#261F1F",popularColors:["#B32D2D","#261F1F","#E0AAF2"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("spacekoban",{id:"spacekoban",title:"Spacekoban",author:"Connorses [Loneship Games]",homepage:null,backgroundColor:"#00001F",popularColors:["#000000","#cccccc","#9d9d9d"],levels:[{rows:9,cols:11},{rows:13,cols:9},{rows:8,cols:12},{rows:8,cols:9},{rows:8,cols:8},{rows:8,cols:9},{rows:13,cols:11},{rows:9,cols:10},{rows:9,cols:31},{rows:11,cols:11},{rows:7,cols:10},{rows:7,cols:10},{rows:9,cols:13},{rows:9,cols:11},{rows:10,cols:8},{rows:9,cols:13},{rows:10,cols:10},{rows:7,cols:11},{rows:11,cols:12},{rows:11,cols:11}]}),o.set("spider-s-hollow",{id:"spider-s-hollow",title:"Spider's Hollow",author:"John Thyer",homepage:null,backgroundColor:null,popularColors:["#bdbdbd","#000000","#3f2a14"],levels:[null,{rows:9,cols:11},null,null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},{rows:9,cols:11},{rows:9,cols:11},{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null]}),o.set("spikes-n-stuff",{id:"spikes-n-stuff",title:"Spikes 'n' Stuff",author:"Alan Hazelden",homepage:null,backgroundColor:null,popularColors:["#767d80","#697175","#373c3f"],levels:[{rows:11,cols:165},null]}),o.set("spooky-pumpkin-game",{id:"spooky-pumpkin-game",title:"Spooky Pumpkin Game",author:"Alan Hazelden",homepage:"www.draknek.org",backgroundColor:null,popularColors:["#1B2632","#9d9d9d","#000000"],levels:[{rows:7,cols:9},{rows:7,cols:7},{rows:7,cols:7},{rows:7,cols:6},{rows:8,cols:6},{rows:7,cols:9},{rows:6,cols:9},{rows:7,cols:7},{rows:10,cols:5},{rows:9,cols:7},{rows:8,cols:8},{rows:7,cols:7},{rows:7,cols:7},{rows:7,cols:10},{rows:8,cols:8},{rows:7,cols:7},null]}),o.set("square-colours",{id:"square-colours",title:"square colours",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#404239",popularColors:["#536673","#404239","#E5C17E"],levels:[null,{rows:11,cols:10},null,{rows:11,cols:10},null,{rows:11,cols:10},null,{rows:11,cols:10},null,{rows:11,cols:10},{rows:11,cols:14}]}),o.set("stairs",{id:"stairs",title:"Stairs",author:null,homepage:null,backgroundColor:null,popularColors:["#2f484e","#000000","#493c2b"],levels:[null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null,{rows:7,cols:11},null]}),o.set("stairways",{id:"stairways",title:"Stairways",author:"Franklin P. Dyer",homepage:null,backgroundColor:null,popularColors:["#697175","#9d9d9d","#cccccc"],levels:[null,null,{rows:6,cols:6},{rows:7,cols:7},{rows:7,cols:7},null]}),o.set("stand-off",{id:"stand-off",title:"Stand Off",author:"Mark Richardson",homepage:null,backgroundColor:null,popularColors:["#555555","#444444","#000000"],levels:[null,null,{rows:11,cols:10},{rows:13,cols:13},{rows:13,cols:15},{rows:13,cols:13},{rows:17,cols:17},{rows:13,cols:13},{rows:10,cols:11},{rows:13,cols:17},{rows:14,cols:15},{rows:17,cols:17},null]}),o.set("sticky",{id:"sticky",title:"sticky",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#D9FFF8",popularColors:["#E57ED5","#D9FFF8","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("swap",{id:"swap",title:"swap",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#465B4D",popularColors:["#F2F2AA","#465B4D","#CC7A52"],levels:[null,null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},null,{rows:10,cols:9},{rows:11,cols:14}]}),o.set("swapbot",{id:"swapbot",title:"SwapBot",author:"John Williams",homepage:"john.m.dubs@gmail.com",backgroundColor:null,popularColors:["#eb8931","#000000","#be2633"],levels:[null,{rows:6,cols:6},null,null,{rows:6,cols:6},null,{rows:12,cols:10},{rows:11,cols:10},null,{rows:9,cols:8},{rows:9,cols:11},null,{rows:12,cols:9},{rows:10,cols:10},null,{rows:10,cols:13},{rows:10,cols:17},{rows:10,cols:16},{rows:10,cols:16},null,null]}),o.set("symbols",{id:"symbols",title:"Symbols",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#423D39",popularColors:["#B32D2D","#423D39","#736053"],levels:[null,null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},null,{rows:3,cols:3},{rows:11,cols:14}]}),o.set("take-heart-lass",{id:"take-heart-lass",title:"Take Heart Lass",author:"Kevin Zuhn",homepage:"www.kevinzuhn.com",backgroundColor:null,popularColors:["#a3ce27","#be2633","#44891a"],levels:[null,{rows:6,cols:6},null,{rows:7,cols:9},null,{rows:7,cols:9},null,{rows:6,cols:8},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:11},null,{rows:9,cols:12},null,{rows:11,cols:18},null,null]}),o.set("telefrag",{id:"telefrag",title:"Telefrag",author:"CHz",homepage:"quiteajolt.com",backgroundColor:null,popularColors:["#003300","#7F552C","#555555"],levels:[null,null,null,null,{rows:5,cols:6},null,null,{rows:8,cols:5},{rows:7,cols:9},{rows:6,cols:9},null,{rows:5,cols:13},{rows:9,cols:12},{rows:5,cols:11},{rows:19,cols:19},null,null,null,null]}),o.set("teleporters",{id:"teleporters",title:"Teleporters",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#2E3E4D",popularColors:["#82A17C","#2E3E4D","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("the-art-of-cloning",{id:"the-art-of-cloning",title:"the art of cloning",author:"Rosden Shadow [Mark Signorelli]",homepage:"https://twitter.com/Rosden_Shadow",backgroundColor:null,popularColors:["#FFB37F","#1AB258","#0E664E"],levels:[null,null,{rows:9,cols:9},null]}),o.set("the-art-of-storage",{id:"the-art-of-storage",title:"The art of storage",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#E5C17E",popularColors:["#BF9269","#B32D2D","#D88D54"],levels:[null,null,{rows:8,cols:6},null,{rows:10,cols:7},null]}),o.set("the-big-dig",{id:"the-big-dig",title:"the big dig",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#52465B",popularColors:["#A17C8B","#52465B","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null]}),o.set("the-copying",{id:"the-copying",title:"the copying",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#5B4846",popularColors:["#82A17C","#5B4846","#AAAAF2"],levels:[null,null,{rows:11,cols:8},null,{rows:11,cols:8},null,{rows:11,cols:8},null]}),o.set("the-fire-calls",{id:"the-fire-calls",title:"The fire calls",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#D9FFDC","#231F26","#D9FFF8"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("the-laser",{id:"the-laser",title:"the laser",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#E0AAF2","#3B3942","#AAE0F2"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("the-packing-crate",{id:"the-packing-crate",title:"The packing crate",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#D9FFF8","#231F26","#E5C17E"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("the-switch",{id:"the-switch",title:"the switch",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#5C8466","#3B3942","#FFD9FC"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("then-another",{id:"then-another",title:"Then another",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#E5C17E",popularColors:["#FFD9FC","#E5C17E","#C1A2A5"],levels:[null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("tidy-the-cafe",{id:"tidy-the-cafe",title:"Tidy the Cafe!",author:"Sally Bridgwater",homepage:"http://sallyanne.itch.io",backgroundColor:null,popularColors:["#9d9d9d","#697175","#f7e26b"],levels:[{rows:4,cols:4},{rows:5,cols:5},{rows:6,cols:7},{rows:5,cols:7},{rows:5,cols:7},{rows:6,cols:5}]}),o.set("tiny-treasure-hunt",{id:"tiny-treasure-hunt",title:"tiny treasure hunt 1.0",author:"Weeble",homepage:"www.twitter.com/weeble",backgroundColor:null,popularColors:["#111411","#cccccc","#FFFFFF"],levels:[null,{rows:9,cols:12},null,{rows:11,cols:11},null,{rows:11,cols:11},null,{rows:9,cols:11},null,{rows:12,cols:12},null,{rows:7,cols:15},null,{rows:13,cols:13},null]}),o.set("to-nothing-and-back",{id:"to-nothing-and-back",title:"To nothing and back",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#333333",popularColors:["#B32D2D","#333333","#FFFFFF"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("train-braining",{id:"train-braining",title:"Train Braining",author:"Alan Hazelden",homepage:"http://www.draknek.org",backgroundColor:null,popularColors:["#293a7b","#97c04f","#ffa9cf"],levels:[null,{rows:10,cols:13},null,{rows:11,cols:13},{rows:11,cols:13},{rows:11,cols:10},{rows:10,cols:12},{rows:12,cols:12},{rows:12,cols:14},{rows:12,cols:20},{rows:12,cols:12},{rows:10,cols:14},{rows:12,cols:11},{rows:12,cols:16},null]}),o.set("train",{id:"train",title:"Train",author:null,homepage:null,backgroundColor:"#000000",popularColors:["#000000","#9d9d9d","#be2633"],levels:[null,{rows:3,cols:10},{rows:7,cols:7},{rows:7,cols:9},{rows:10,cols:7},{rows:12,cols:8},{rows:10,cols:8},{rows:8,cols:10},null]}),o.set("triple-match",{id:"triple-match",title:"triple match",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#B32D2D","#3B3942","#FFFFFF"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("tunnel-rat",{id:"tunnel-rat",title:"Tunnel Rat",author:"James Noeckel",homepage:null,backgroundColor:null,popularColors:["#8a8a8a","#f7e26b","#eb8931"],levels:[null,{rows:24,cols:19},null,{rows:27,cols:25}]}),o.set("unconventional-guns",{id:"unconventional-guns",title:"Unconventional Guns",author:"rectangular Tim",homepage:"http://ludumdare.com/compo/ludum-dare-32/?action=preview&uid=39396",backgroundColor:"#1B2632",popularColors:["#a46422","#1B2632","#cccccc"],levels:[null,{rows:8,cols:7},null,{rows:12,cols:12},null,{rows:8,cols:7},null,{rows:10,cols:9},null,{rows:8,cols:7},null,{rows:6,cols:7},null,{rows:9,cols:7},null,{rows:9,cols:13},null,{rows:8,cols:8},null,{rows:12,cols:12},null,{rows:8,cols:8},null,{rows:8,cols:9},null,{rows:9,cols:10},null,{rows:8,cols:10},null,null,null,{rows:12,cols:12},null,null,null]}),o.set("vacuum",{id:"vacuum",title:"Vacuum",author:"Mark Richardson",homepage:null,backgroundColor:null,popularColors:["#BBBBBB","#FFFFFF","#AAAAAA"],levels:[null,null,null,null,{rows:54,cols:63},null,null,null,null,null,null]}),o.set("vines",{id:"vines",title:"Vines",author:"Stefan Peeters",homepage:null,backgroundColor:null,popularColors:["#663300","#FFFFFF","#f7e26b"],levels:[{rows:38,cols:11},null]}),o.set("wall-bonding",{id:"wall-bonding",title:"Wall-bonding",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#3B3942",popularColors:["#666666","#3B3942","#845C5C"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:12,cols:9},{rows:11,cols:14}]}),o.set("wall-shuffle",{id:"wall-shuffle",title:"wall shuffle",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#231F26",popularColors:["#FFD9FC","#231F26","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]}),o.set("white-pillars",{id:"white-pillars",title:"White Pillars",author:"Rosden Shadow [Mark Signorelli]",homepage:"rosden.itch.io",backgroundColor:"#1F2026",popularColors:["#52465B","#1F2026","#F2F2AA"],levels:[null,null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},null,{rows:11,cols:9},{rows:11,cols:14}]});var l=r(358),i=r(354),s=r(16),a=r(0);function u(t,e,r,n,o,l){window.localStorage.getItem("disableAnalytics")||ga&&ga(t,e,r,n,o,l)}function c(t){var e=document.querySelector(t);if(!e)throw new Error('BUG: Could not find "'.concat(t,'" in the page'));return e}var f=function(){var t=window.location,e=t.hash,r=t.pathname,n=t.search;u("set","page","".concat(r).concat(n).concat(e)),u("send","pageview")};function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t,e,r,n,o,l,i){try{var s=t[l](i),a=s.value}catch(t){return void r(t)}s.done?e(a):Promise.resolve(a).then(n,o)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v="puzzlescriptGameProgress",w="puzzlescriptGameCheckpoint",y=4e4,g=c("title"),m=c("#theGame"),b=c("#loadingDialog"),_=c("#loadingDialogCancel"),S=c("#loadingIndicator"),k=c("#fullscreenTitle"),E=c("#fullscreenPercentage"),C=c("#authorInfo"),T=c("#gameButtonUndo"),O=c("#gameButtonRestart"),M=c("#gameInstructionsButton2"),x=c("#gameInstructionsDialog"),R=c("#gameInstructionsDialogClose"),A=c("#messageDialog"),I=c("#messageDialogText"),L=c("#messageDialogClose");l.registerDialog(b),l.registerDialog(A),l.registerDialog(x);var P=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameId="",this.levelNum=null,this.gameData=null}var e,r,n;return e=t,(r=[{key:"getGameId",value:function(){if(""===this.gameId)throw new Error("BUG: Did not set game id");return this.gameId}},{key:"hasGame",value:function(){return!!this.gameId}},{key:"getLevelNum",value:function(){if(null===this.levelNum)throw new Error("BUG: Did not set level num");return this.levelNum}},{key:"setGameAndLevel",value:function(t,e){this.gameId=t,this.levelNum=e}},{key:"loadStorage",value:function(){return this.loadJson(v,{_version:2})}},{key:"loadCurrentLevelNum",value:function(){var t=this.getGameId(),e=this.loadStorage()[t];return e?e.currentLevelNum:null}},{key:"loadCheckpoint",value:function(){var t=this.getGameId();return this.loadJson("".concat(w,".").concat(t),null)}},{key:"saveCurrentLevelNum",value:function(t){var e=this.getGameId(),r=this.loadStorage();r[e]=r[e]||{},r[e].currentLevelNum=t,r[e].completedLevelAt=Date.now(),r[e].lastPlayedAt=Date.now(),this.saveJson(v,r),u("send","event","game","level",e,t),P.levelNum=t;var n=r[e];if(n.levelMaps){var o=n.levelMaps.slice(0,n.currentLevelNum).filter(function(t){return t}).length,l=n.levelMaps.filter(function(t){return t}).length,i=Math.floor(100*o/l);i>0&&(E.textContent="(".concat(i,"%)"))}}},{key:"saveGameInfo",value:function(t){var e=t.levels,r=t.title,n=this.getGameId(),o=this.loadStorage();this.gameData=t,o[n]=o[n]||{},o[n].levelMaps=e.map(function(t){return"LEVEL_MAP"===t.type}),o[n].title=r,o[n].lastPlayedAt=Date.now(),this.saveJson(v,o)}},{key:"saveCheckpoint",value:function(t){var e=this.getGameId(),r={_version:2,levelNum:this.getLevelNum(),data:t};this.saveJson("".concat(w,".").concat(e),r)}},{key:"getNumberOfPlayedGames",value:function(){var t=this.loadStorage();return Object.keys(t).length-1}},{key:"forEachGame",value:function(t){var e=this.loadStorage();for(var r in e)"_version"!==r&&t(r,e[r])}},{key:"loadJson",value:function(t,e){var r=window.localStorage.getItem(t);return r?JSON.parse(r):e}},{key:"saveJson",value:function(t,e){window.localStorage.setItem(t,JSON.stringify(e))}}])&&p(e.prototype,r),n&&p(e,n),t}());L.addEventListener("click",function(){A.close(),m.focus()}),M.addEventListener("click",function(){x.showModal()}),R.addEventListener("click",function(){x.close(),m.focus()}),_.addEventListener("click",function(){D()});var F=null;function N(){b.open||(F&&clearTimeout(F),F=setTimeout(function(){b.showModal()},500))}function D(){F&&clearTimeout(F),b.open&&b.close()}var B={onMessage:function(){var t,e=(t=regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(a.j)(10,function(){return!j.inputWatcher.isSomethingPressed()});case 2:return I.textContent=e,A.showModal(),L.focus(),t.next=7,Object(a.j)(10,function(){return!A.open});case 7:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var l=t.apply(e,r);function i(t){d(l,n,o,i,s,"next",t)}function s(t){d(l,n,o,i,s,"throw",t)}i(void 0)})});return function(t){return e.apply(this,arguments)}}(),onLevelLoad:function(t,e){var r=e&&e.rows*e.cols>400;S.setAttribute("data-size",r?"large":"small"),N()},onLevelChange:function(t,e){var r,n;D(),m.focus(),e&&(r=P.getGameId(),n=t,history.replaceState(void 0,void 0,"#/".concat(r,"/").concat(n)),f(),P.saveCurrentLevelNum(t))},onGameChange:function(t){var e=t.metadata.backgroundColor;(e=e||new s.a({code:"",sourceOffset:0},"#000000")).toRgb().isDark()?window.document.body.classList.add("is-background-dark"):window.document.body.classList.remove("is-background-dark"),window.document.body.style.backgroundColor=e.toHex();var r,n=t.metadata,o=n.author,l=n.homepage;o&&(C.textContent=o,l?C.setAttribute("href",/^https?:\/\//.test(r=l)?r:/@/.test(r)?"mailto:".concat(r):"http://".concat(r)):C.removeAttribute("href")),P.saveGameInfo(t),k.textContent=t.title,g.textContent="Puzzle Games - ".concat(t.title)},onTick:function(t,e){e&&P.saveCheckpoint(e)},onPause:function(){document.body.setAttribute("data-ps-state","paused")},onResume:function(){document.body.setAttribute("data-ps-state","running")}},G=new Worker("./puzzlescript-webworker.js"),j=new i.a(G,m,B);T.addEventListener("click",function(){j.press(a.b.UNDO),m.focus()}),O.addEventListener("click",function(){j.press(a.b.RESTART),m.focus()});var U=c("#disableCss");function W(t){t||u("send","event","accessibility","toggle",U.checked?"show":"hide"),U.checked?m.classList.add("ps-ui-disabled"):m.classList.remove("ps-ui-disabled"),m.focus()}function H(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}U.addEventListener("change",function(){return W(!1)}),W(!0);var q=["push","pot-wash-panic","skipping-stones","entanglement-one","mirror-isles","cyber-lasso","swapbot","bubble-butler","flying-kick","beam-islands","pushcat-jr","icecrates","sokobond","spooky-pumpkin-game","spikes-n-stuff"],z=["esl-puzzle-game","explod","alien-disco","kettle","okosban","season-finale","easy-enigma","collapsable-sokoban"],V=500,K=10,J=6,Y=c("#browseGamesList");function X(t,e,r,n){var o=document.createElement(t);if(e&&e.forEach(function(t){return o.classList.add(t)}),r)for(var l=Object.keys(r),i=0;i<l.length;i++){var s=l[i];o.setAttribute(s,r[s])}return n&&n.forEach(function(t){"string"==typeof t?o.appendChild(document.createTextNode(t)):t&&o.appendChild(t)}),o}function $(t,e,r,n,o,l,i){try{var s=t[l](i),a=s.value}catch(t){return void r(t)}s.done?e(a):Promise.resolve(a).then(n,o)}function Z(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var l=t.apply(e,r);function i(t){$(l,n,o,i,s,"next",t)}function s(t){$(l,n,o,i,s,"throw",t)}i(void 0)})}}function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}window.addEventListener("load",function(){var t=c("title"),e=c("body"),r=c("#testShowNotificationButton"),l=c("#iosInstallInstructions");!function(){var t=P.loadStorage(),e=t;if(1===e._version){var r=new Map;r.set("gist-f0b9b8e95d0bc87c9fb9e411756daa23","icecrates"),r.set("gist-7f4470ab80d9f7ffe4b9e28c83b26adc","push"),r.set("pot-wash-panic_itch","pot-wash-panic"),r.set("gist-457c6d8be68ffb6d921211d40ca48c15","pants-shirt-cap"),r.set("gist-e13482e035a5f75e9b0e4d0b5f28f8b6","pushcat-jr"),r.set("separation_itch","separation"),r.set("roll-those-sixes-itch","roll-those-sixes"),r.set("gist-6daa8b63cf79202cd085c1b168048c09","rock-paper-scissors"),r.set("gist-c5ec035de4e0c145a85327942fb76098","some-lines-crossed"),r.set("sleepy-player_itch","sleepy-players"),r.set("skipping-stones_d6fd6fcf84de185e2584","skipping-stones"),r.set("gist-8074d60a0af768f970ef055d4460414d","bubble-butler"),r.set("gist-ee39bfe12012c774acfc5e3d32fb4f89","boxes-and-balloons"),r.set("mirror-isles_219a7db6511dad557b84","mirror-isles"),r.set("gist-e86e1d6cf24307499c1cd1aaaa733a91","swapbot"),r.set("spikes-n-stuff_dc5c4a669e362e389e994025075f7d0b","spikes-n-stuff"),r.set("aunt-floras-mansion","aunt-flora-s-mansion"),r.set("spacekoban_6a6c07f71d7039e4155e","spacekoban"),r.set("gist-181f370a15625905ca6e844a972a4abf","miss-direction"),r.set("gist-711d6220e4fe2a36254cc544c6ba4885","castlemouse"),r.set("rosden.itch.io_islands","islands"),r.set("rosden.itch.io_bomb-n-ice","bomb-n-ice"),r.set("cyber-lasso-e3e444f7c63fb21b6ec0","cyber-lasso"),r.set("boxes-love-bloxing_c2d717a77f9aa02ecb1b793111f3a921","boxes-love-bloxing-gloves"),r.set("hack-the-net_8b5eb39cb825277832d261b3142f084b","hack-the-net"),r.set("spooky-pumpkin_7242443","spooky-pumpkin-game"),r.set("gist-b6c8ba9363b4cca270d8ce5e88f79abf","vacuum"),r.set("gist-542b97948cb1d377dce6d276c0bcd9d5","sokoboros"),r.set("gist-2b9ece642cd7cdfb4a5f2c9fa8455e40","beam-islands"),r.set("entanglement","entanglement-one");var n=!0,o=!1,l=void 0;try{for(var i,s=r.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=h(i.value,2),u=a[0],c=a[1],f=t[u];f&&(delete t[u],t[c]=f);var d="".concat(w,".").concat(u),p=window.localStorage.getItem(d);p&&(window.localStorage.setItem("".concat(w,".").concat(c),p),window.localStorage.removeItem(d))}}catch(t){o=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw l}}e._version=2,P.saveJson(v,t)}}(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&l.classList.remove("hidden");var i=null,s=t.textContent;function a(){var r=window.location.hash;if(i!==r){if(!i&&r){var n=Q(window.location.hash.substring(1).replace(/^\//,"").split("/"),3),l=n[0],a=n[1],c=n[2];e.setAttribute("data-mode","playingGame");var h=!!c&&"true"===c.toLowerCase();!function(t,e,r){P.setGameAndLevel(t,e),S.setAttribute("data-size","small"),N(),fetch("./games/".concat(P.getGameId(),"/script.txt"),{redirect:"follow"}).then(function(t){if(t.ok)return t.text().then(function(t){t.length>y&&S.setAttribute("data-size","large"),e=null!==P.levelNum?P.levelNum:P.loadCurrentLevelNum();var n=P.loadCheckpoint();if(n){var o=n.levelNum,l=n.data;if(e!==o)throw new Error("BUG: Checkpoint level number (".concat(o,") does not match current level number (").concat(e,")"));j.setGame(t,e||0,l)}else j.setGame(t,e||0,null);U.checked=r});alert("Problem finding game file. Please choose another one"),D()},function(t){alert("Could not download the game. Are you connected to the internet?"),console.error(t),D()})}(l,a?Number.parseInt(a,10):null,h),(window.matchMedia("(display-mode: standalone)").matches||"standalone"in window.navigator)&&u("send","event","pwa","play")}else r||(t.textContent=s,e.setAttribute("data-mode","browseGames"),e.classList.remove("is-background-dark"),e.removeAttribute("style"),function(){Y.innerHTML="";var t=[],e=[],r=[],n=[],l=[],i=[],s=[],a=[],u=new Map,c=new Map;o.forEach(function(t,e){return u.set(e,t)}),P.forEachGame(function(t,e){c.set(t,e)});var f=!0,h=!1,d=void 0;try{for(var p,v=u.values()[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var w=p.value,y=w.id,g=w.title,m=w.author,b=w.backgroundColor,_=w.popularColors,S=w.levels,k=m?X("div",["game-author"],null,["by ".concat(m)]):null,E=X("a",null,{href:"#/".concat(y),title:g},[X("figure",null,{id:y,"aria-hidden":"true"},[X("div",["thumbnail-wrapper"],{style:"background-color: ".concat(b||_[0])},[X("img",["game-thumbnail"],{src:"./game-thumbnails/".concat(y,".png")})]),X("figcaption",null,null,[X("div",["game-title"],null,[g]),k])])]),C=Math.max.apply(Math,H(S.map(function(t){return t?t.rows*t.cols:0}))),T=S.filter(function(t){return!!t}).length,O=!S[0];c.has(y)?t.push(E):z.includes(y)?a.push(E):q.includes(y)?e.push(E):C>=V?r.push(E):T>=K?n.push(E):O?T<=J?i.push(E):s.push(E):l.push(E)}}catch(t){h=!0,d=t}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}function M(t,e){e.length>0&&(Y.appendChild(X("h2",["category-title"],null,[t])),Y.appendChild(X("div",["category-games"],null,e)))}M("Continue Playing",t),M("Popular Games",e),M("Progressively Challenging Games",n),M("Large Games",r),M("Short Games",i),M("Medium-length Games",s),M("Games without Instructions",l),M("Uncategorized Games",a)}());i=r,f()}}window.addEventListener("hashchange",a),a();var d=c("#gamepadIcon"),p=c("#gamepadDisabled"),g=c("#gamepadRecognized"),m=c("#gamepadNotRecognized"),b=c("#messageDialog"),_=c("#messageDialogClose");j.inputWatcher&&setInterval(function(){j.inputWatcher.gamepad.isRecognized()?(d.classList.contains("enabled")||u("send","event","gamepad","recognized"),d.classList.add("enabled"),p.classList.add("hidden"),g.classList.remove("hidden"),m.classList.add("hidden"),b.open&&j.inputWatcher.gamepad.isButtonPressed(n.a.CLUSTER_BOTTOM)&&_.click()):j.inputWatcher.gamepad.isSomethingConnected()?(m.classList.contains("hidden")&&u("send","event","gamepad","something-connected"),d.classList.remove("enabled"),p.classList.add("hidden"),g.classList.add("hidden"),m.classList.remove("hidden")):(d.classList.remove("enabled"),p.classList.remove("hidden"),g.classList.add("hidden"),m.classList.add("hidden"))},200);var k=c("#btnAdd"),E=null;window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),E=t,k.classList.remove("hidden")}),k.addEventListener("click",function(t){k.classList.add("hidden"),E&&E.prompt(),E&&E.userChoice.then(function(){E=null})}),r.addEventListener("click",Z(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={body:e="You are playing a game! (just a test notification)",icon:"./pwa-icon-144.png",badge:"./pwa-icon-144.png",vibrate:[200,100,200],actions:[{action:"action-1",title:"Option 1"},{action:"action-2",title:"Option 2"}]},t.next=4,new Promise(function(t){"undefined"!=typeof Notification?Notification.requestPermission(function(){var n=Z(regeneratorRuntime.mark(function n(o){var l,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l=function(){new Notification("Test Title",r),t()},"granted"!==o){n.next=18;break}if(!navigator.serviceWorker){n.next=15;break}return n.next=5,navigator.serviceWorker.ready;case 5:if(!(i=n.sent).showNotification){n.next=12;break}return n.next=9,i.showNotification("Test Title",r);case 9:t(),n.next=13;break;case 12:l();case 13:n.next=16;break;case 15:l();case 16:n.next=20;break;case 18:alert(e),t();case 20:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}()):(alert(e),t())});case 4:case"end":return t.stop()}},t,this)})))})}]);
//# sourceMappingURL=pwa-app.js.map