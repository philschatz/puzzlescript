!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=376)}([function(t,e,r){"use strict";function n(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(i,o){var a=t.apply(e,r);function u(t){n(a,i,o,u,s,"next",t)}function s(t){n(a,i,o,u,s,"throw",t)}u(void 0)})}}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u,s,l;function c(t){var e=[];return t.forEach(function(t){t.forEach(function(t){e.push(t)})}),e}function f(t){var e;return function(){e&&clearTimeout(e),e=setTimeout(function(){t()},10)}}function h(t){switch(t){case u.UP:return u.DOWN;case u.DOWN:return u.UP;case u.LEFT:return u.RIGHT;case u.RIGHT:return u.LEFT;default:throw new Error('BUG: Invalid direction: "'.concat(t,'"'))}}function d(t,e){if(t.size!==e.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;if(!t.has(u))return!1}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0}function v(t,e){var r=new Set(t),n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;r.add(s)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}function p(t,e){var r=new Set,n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;t.has(s)&&r.add(s)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}function y(t,e){var r=new Set(t),n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;r.delete(s)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}r.d(e,"d",function(){return u}),r.d(e,"b",function(){return s}),r.d(e,"e",function(){return l}),r.d(e,"g",function(){return c}),r.d(e,"f",function(){return f}),r.d(e,"i",function(){return h}),r.d(e,"n",function(){return d}),r.d(e,"l",function(){return v}),r.d(e,"o",function(){return p}),r.d(e,"m",function(){return y}),r.d(e,"h",function(){return w}),r.d(e,"k",function(){return S}),r.d(e,"q",function(){return E}),r.d(e,"j",function(){return k}),r.d(e,"c",function(){return m}),r.d(e,"p",function(){return T}),r.d(e,"a",function(){return O}),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.ACTION="ACTION",t.STATIONARY="STATIONARY",t.RANDOMDIR="RANDOMDIR"}(u||(u={})),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.ACTION="ACTION",t.UNDO="UNDO",t.RESTART="RESTART"}(s||(s={})),function(t){t.RELATIVE_LEFT="<",t.RELATIVE_RIGHT=">",t.RELATIVE_UP="^",t.RELATIVE_DOWN="V"}(l||(l={}));var g,m,b=1,_=null;function w(t){if(_){if(_.length<=b-1)throw new Error("BUG: the list of random values for testing was too short.\n            See calls to setRandomValuesForTesting([...]).\n            The list was [".concat(_,"]. Index being requested is ").concat(b-1));var e=_[b-1];return b++,e}var r=1e4*Math.sin(b++);return Math.round((r-Math.floor(r))*(t-1))}function S(){b=1}function E(t){var e=t.getPlayer().getSprites(),r=new Set(e),n=!0,i=!1,o=void 0;try{for(var u,s=r[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value.getCollisionLayer(),c=!0,f=!1,h=void 0;try{for(var d,v=t.objects[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var y=d.value;y.getCollisionLayer()===l&&r.add(y)}}catch(t){f=!0,h=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}}}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}var g=!0,m=!1,b=void 0;try{for(var _,w=t.winConditions[Symbol.iterator]();!(g=(_=w.next()).done);g=!0){var S=_.value,E=!0,k=!1,T=void 0;try{for(var O,x=S.a11yGetTiles()[Symbol.iterator]();!(E=(O=x.next()).done);E=!0){var M=O.value,C=!0,R=!1,A=void 0;try{for(var I,L=M.getSprites()[Symbol.iterator]();!(C=(I=L.next()).done);C=!0){var P=I.value;r.add(P)}}catch(t){R=!0,A=t}finally{try{C||null==L.return||L.return()}finally{if(R)throw A}}}}catch(t){k=!0,T=t}finally{try{E||null==x.return||x.return()}finally{if(k)throw T}}}}catch(t){m=!0,b=t}finally{try{g||null==w.return||w.return()}finally{if(m)throw b}}var N=!0,D=!1,j=void 0;try{for(var B,F=t.rules[Symbol.iterator]();!(N=(B=F.next()).done);N=!0){var G=B.value,U=!0,W=!1,H=void 0;try{for(var q,z=G.a11yGetConditionSprites()[Symbol.iterator]();!(U=(q=z.next()).done);U=!0){var V=q.value;if(p(V,r).size>0){var K=!0,Y=!1,X=void 0;try{for(var J,$=V[Symbol.iterator]();!(K=(J=$.next()).done);K=!0){var Z=J.value;r.add(Z)}}catch(t){Y=!0,X=t}finally{try{K||null==$.return||$.return()}finally{if(Y)throw X}}}}}catch(t){W=!0,H=t}finally{try{U||null==z.return||z.return()}finally{if(W)throw H}}}}catch(t){D=!0,j=t}finally{try{N||null==F.return||F.return()}finally{if(D)throw j}}var Q=t.getMagicBackgroundSprite();return Q&&r.delete(Q),new Set(a(r).filter(function(t){return!t.isTransparent()}))}function k(t,e){return new Promise(function(r){var n=setInterval(function(){var t=e();t&&(clearInterval(n),r(t))},t)})}!function(t){t.BREAKPOINT="DEBUGGER",t.BREAKPOINT_REMOVE="DEBUGGER_REMOVE"}(g||(g={})),function(t){t.PAUSE="PAUSE",t.RESUME="RESUME",t.TICK="TICK",t.PRESS="PRESS",t.CLOSE="CLOSE",t.ON_GAME_CHANGE="ON_GAME_CHANGE",t.ON_PRESS="ON_PRESS",t.ON_MESSAGE="ON_MESSAGE",t.ON_MESSAGE_DONE="ON_MESSAGE_DONE",t.ON_LEVEL_CHANGE="ON_LEVEL_CHANGE",t.ON_WIN="ON_WIN",t.ON_SOUND="ON_SOUND",t.ON_TICK="ON_TICK",t.ON_PAUSE="ON_PAUSE",t.ON_RESUME="ON_RESUME"}(m||(m={}));var T=function(t,e){var r=Date.now(),n=Math.min(t.realtimeInterval||1e3,t.keyRepeatInterval||1e3,t.againInterval||1e3);return(n>100||Number.isNaN(n))&&(n=.01),r-e>=1e3*n},O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subHandlers=e||[]}var e,r,n;return e=t,(r=[{key:"onGameChange",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.subHandlers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.onGameChange&&a.onGameChange(t)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"onPress",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.subHandlers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.onPress&&a.onPress(t)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"onMessage",value:function(){var t=i(regeneratorRuntime.mark(function t(e){var r,n,i,o,a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,n=!1,i=void 0,t.prev=3,o=this.subHandlers[Symbol.iterator]();case 5:if(r=(a=o.next()).done){t.next=14;break}if(u=a.value,t.t0=u.onMessage,!t.t0){t.next=11;break}return t.next=11,u.onMessage(e);case 11:r=!0,t.next=5;break;case 14:t.next=20;break;case 16:t.prev=16,t.t1=t.catch(3),n=!0,i=t.t1;case 20:t.prev=20,t.prev=21,r||null==o.return||o.return();case 23:if(t.prev=23,!n){t.next=26;break}throw i;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},t,this,[[3,16,20,28],[21,,23,27]])}));return function(e){return t.apply(this,arguments)}}()},{key:"onLevelChange",value:function(t,e,r){var n=!0,i=!1,o=void 0;try{for(var a,u=this.subHandlers[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;s.onLevelChange&&s.onLevelChange(t,e,r)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"onWin",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.subHandlers[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.onWin&&o.onWin()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}},{key:"onSound",value:function(){var t=i(regeneratorRuntime.mark(function t(e){var r,n,i,o,a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=!0,n=!1,i=void 0,t.prev=3,o=this.subHandlers[Symbol.iterator]();!(r=(a=o.next()).done);r=!0)(u=a.value).onSound&&u.onSound(e);t.next=11;break;case 7:t.prev=7,t.t0=t.catch(3),n=!0,i=t.t0;case 11:t.prev=11,t.prev=12,r||null==o.return||o.return();case 14:if(t.prev=14,!n){t.next=17;break}throw i;case 17:return t.finish(14);case 18:return t.finish(11);case 19:case"end":return t.stop()}},t,this,[[3,7,11,19],[12,,14,18]])}));return function(e){return t.apply(this,arguments)}}()},{key:"onTick",value:function(t,e,r){var n=!0,i=!1,o=void 0;try{for(var a,u=this.subHandlers[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;s.onTick&&s.onTick(t,e,r)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"onPause",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.subHandlers[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.onPause&&o.onPause()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}},{key:"onResume",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.subHandlers[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.onResume&&o.onResume()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}}])&&o(e.prototype,r),n&&o(e,n),t}()},function(t,e,r){var n=r(4),i=r(25),o=r(17),a=r(18),u=r(26),s=function t(e,r,s){var l,c,f,h,d=e&t.F,v=e&t.G,p=e&t.P,y=e&t.B,g=v?n:e&t.S?n[r]||(n[r]={}):(n[r]||{}).prototype,m=v?i:i[r]||(i[r]={}),b=m.prototype||(m.prototype={});for(l in v&&(s=r),s)f=((c=!d&&g&&void 0!==g[l])?g:s)[l],h=y&&c?u(f,n):p&&"function"==typeof f?u(Function.call,f):f,g&&a(g,l,f,e&t.U),m[l]!=f&&o(m,l,h),p&&b[l]!=f&&(b[l]=f)};n.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,r){"use strict";var n,i,o,a,u,s,l,c,f,h,d,v,p,y;r.d(e,"e",function(){return n}),r.d(e,"b",function(){return s}),r.d(e,"h",function(){return l}),r.d(e,"i",function(){return c}),r.d(e,"g",function(){return f}),r.d(e,"f",function(){return h}),r.d(e,"a",function(){return d}),r.d(e,"c",function(){return v}),r.d(e,"j",function(){return p}),r.d(e,"d",function(){return y}),function(t){t.RANDOM="RANDOM",t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.VERTICAL="VERTICAL",t.HORIZONTAL="HORIZONTAL",t.ORTHOGONAL="ORTHOGONAL",t.PERPENDICULAR="PERPENDICULAR",t.PARALLEL="PARALLEL",t.MOVING="MOVING",t.LATE="LATE",t.RIGID="RIGID"}(n||(n={})),function(t){t.NO="NO",t.LEFT="LEFT",t.RIGHT="RIGHT",t.UP="UP",t.DOWN="DOWN",t.RANDOMDIR="RANDOMDIR",t.RANDOM="RANDOM",t.STATIONARY="STATIONARY",t.MOVING="MOVING",t.ACTION="ACTION",t.VERTICAL="VERTICAL",t.HORIZONTAL="HORIZONTAL",t.PERPENDICULAR="PERPENDICULAR",t.PARALLEL="PARALLEL",t.ORTHOGONAL="ORTHOGONAL",t.ARROW_ANY="ARROW_ANY"}(i||(i={})),function(t){t.RESTART="RESTART",t.UNDO="UNDO",t.TITLESCREEN="TITLESCREEN",t.STARTGAME="STARTGAME",t.STARTLEVEL="STARTLEVEL",t.ENDLEVEL="ENDLEVEL",t.ENDGAME="ENDGAME",t.SHOWMESSAGE="SHOWMESSAGE",t.CLOSEMESSAGE="CLOSEMESSAGE"}(o||(o={})),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t.HORIZONTAL="HORIZONTAL",t.VERTICAL="VERTICAL"}(a||(a={})),function(t){t.CREATE="CREATE",t.DESTROY="DESTROY",t.CANTMOVE="CANTMOVE"}(u||(u={})),function(t){t.HEX3="HEX3",t.HEX6="HEX6",t.NAME="NAME"}(s||(s={})),function(t){t.NO_PIXELS="NO_PIXELS",t.WITH_PIXELS="WITH_PIXELS"}(l||(l={})),function(t){t.SIMPLE="LEGEND_ITEM_SIMPLE",t.OR="LEGEND_ITEM_OR",t.AND="LEGEND_ITEM_AND"}(c||(c={})),function(t){t.WHEN="SOUND_WHEN",t.SFX="SOUND_SFX",t.SPRITE_DIRECTION="SOUND_SPRITE_DIRECTION",t.SPRITE_MOVE="SOUND_SPRITE_MOVE",t.SPRITE_EVENT="SOUND_SPRITE_EVENT"}(f||(f={})),function(t){t.GROUP="RULE_GROUP",t.LOOP="RULE_LOOP",t.SIMPLE="RULE_SIMPLE"}(h||(h={})),function(t){t.SIMPLE="BRACKET_SIMPLE",t.ELLIPSIS="BRACKET_ELLIPSIS"}(d||(d={})),function(t){t.MESSAGE="COMMAND_MESSAGE",t.AGAIN="COMMAND_AGAIN",t.CANCEL="COMMAND_CANCEL",t.CHECKPOINT="COMMAND_CHECKPOINT",t.RESTART="COMMAND_RESTART",t.WIN="COMMAND_WIN",t.SFX="COMMAND_SFX"}(v||(v={})),function(t){t.SIMPLE="WINCONDITION_SIMPLE",t.ON="WINCONDITION_ON"}(p||(p={})),function(t){t.MESSAGE="LEVEL_MESSAGE",t.MAP="LEVEL_MAP"}(y||(y={}))},function(t,e,r){var n=r(6);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===r(t)?null!==t:"function"==typeof t}},function(t,e,r){"use strict";(function(t){r.d(e,"f",function(){return O}),r.d(e,"g",function(){return x}),r.d(e,"e",function(){return M}),r.d(e,"h",function(){return C}),r.d(e,"b",function(){return I}),r.d(e,"c",function(){return N}),r.d(e,"a",function(){return L}),r.d(e,"d",function(){return B});var n=r(20),i=r(147),o=r(2),a=r(40),u=r(0),s=r(13);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=r(106),_=50,w=(u.d.RIGHT,u.d.DOWN,u.d.LEFT,u.d.UP,function t(e,r){m(this,t),this.condition=e,this.action=r}),S=function(t){function e(t,r,n){var i;return m(this,e),(i=v(this,p(e).call(this,t,r))).extra=n,i}return y(e,w),e}(),E=function(){function t(e,r){m(this,t),this.cell=e,this.messages=r}return h(t,[{key:"hasCell",value:function(){return!0}},{key:"getCell",value:function(){return this.cell}},{key:"getCommand",value:function(){throw new Error("BUG: check hasCommand first")}}]),t}(),k=function(){function t(e){m(this,t),this.command=e,this.messages=[]}return h(t,[{key:"getCommand",value:function(){return this.command}},{key:"hasCell",value:function(){return!1}},{key:"getCell",value:function(){throw new Error("BUG: check hasCell first")}}]),t}();var T,O=function(t){function e(t,r,n){var i;return m(this,e),(i=v(this,p(e).call(this,t))).rules=n,i.isRandom=r,i}return y(e,s["a"]),h(e,[{key:"hasMatches",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.rules[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(i.value.hasMatches(t))return!0}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return!1}},{key:"evaluate",value:function(t,e){var r;n.b.isLevel(n.a.DEBUG)&&(r=Date.now());var i,o=[];for(i=0;i<350;i++){if(349===i)throw new Error("BUG: Iterated too many times in startloop or + (rule group)\n".concat(this.toString()));if(this.isRandom){var a=this.rules.filter(function(e){return e.hasMatches(t)});return 0===a.length?[]:1===a.length?a[0].evaluate(t,!0):a[Object(u.h)(a.length)].evaluate(t,!0)}var s=!1,l=!0,c=!1,f=void 0;try{for(var h,d=this.rules[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var v=h.value.evaluate(t,e);if(v.length>0){if(v.filter(function(t){return t.hasCell()}).length>0&&(s=!0),e)return v;o.push(v)}}}catch(t){c=!0,f=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw f}}if(!s)break}return n.b.isLevel(n.a.DEBUG)&&o.length>0&&(r&&Date.now()-r>30?n.b.debug("Rule ".concat(this.__getSourceLineAndColumn().lineNum," applied. ").concat(1===i?"":"(x".concat(i,")")," [[").concat(Date.now()-r,"ms]]")):n.b.debug("Rule ".concat(this.__getSourceLineAndColumn().lineNum," applied. ").concat(1===i?"":"(x".concat(i,")")))),Object(u.g)(o)}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.rules[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}},{key:"getChildRules",value:function(){return this.rules}},{key:"isLate",value:function(){return this.rules[0].isLate()}},{key:"hasRigid",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.rules[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){if(n.value.hasRigid())return!0}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}return!1}},{key:"addCellsToEmptyRules",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.rules[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addCellsToEmptyRules(t)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"toKey",value:function(){return this.rules.map(function(t){return t.toKey()}).join("\n")}},{key:"a11yGetConditionSprites",value:function(){var t=[],e=!0,r=!1,n=void 0;try{for(var i,o=this.rules[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t=[].concat(c(t),c(a.a11yGetConditionSprites()))}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return t}}]),e}(),x=function(t){function e(){return m(this,e),v(this,p(e).apply(this,arguments))}return y(e,O),e}(),M=function(t){function e(t,r,n,i,o,a,u){var s;if(m(this,e),(s=v(this,p(e).call(this,t))).conditionBrackets=r,s.actionBrackets=n,s.commands=i,s._isLate=o,s.isRigid=a,s.debugFlag=u,s.isSubscribedToCellChanges=!1,n.length>0)for(var l=0;l<r.length;l++)r[l].prepareAction(n[l]);return s}return y(e,s["a"]),h(e,[{key:"toKey",value:function(){var t=this.conditionBrackets.map(function(t){return t.toKey()}),e=this.actionBrackets.map(function(t){return t.toKey()}),r=this.commands.map(function(t){return function(t){switch(t.type){case o.c.AGAIN:case o.c.CANCEL:case o.c.CHECKPOINT:case o.c.RESTART:case o.c.WIN:return t.type;case o.c.MESSAGE:return"".concat(t.type,":").concat(t.message);case o.c.SFX:return"".concat(t.type,":").concat(t.sound.type,":").concat(t.sound.soundCode)}}(t)});return"{Late?".concat(this._isLate,"} {Rigid?").concat(this.isRigid,"} ").concat(t," -> ").concat(e," ").concat(r.join(" ")," {debugger?").concat(this.debugFlag,"}")}},{key:"getChildRules",value:function(){return[]}},{key:"subscribeToCellChanges",value:function(){if(!this.isSubscribedToCellChanges){var t=!0,e=!1,r=void 0;try{for(var n,i=this.conditionBrackets[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.subscribeToNeighborChanges()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}this.isSubscribedToCellChanges=!0}}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.conditionBrackets[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}},{key:"getMatches",value:function(t){for(var e=[],r=0;r<this.conditionBrackets.length;r++){var n=this.conditionBrackets[r],i=this.actionBrackets[r],o=n.getMatches(t,i);if(0===o.length)return[];e.push(o)}return e}},{key:"evaluate",value:function(t,e){var r=[];var n=this.getMatches(t);if(0===n.length)return[];if(this.actionBrackets.length>0){var i=function(t){var e=[[]],r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value,s=[],l=!0,c=!1,f=void 0;try{for(var h,d=u[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)for(var v=h.value,p=0;p<e.length;p++){var y=e[p].concat([v]);s.push(y)}}catch(t){c=!0,f=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw f}}e=s}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}(n),o=[],a=!0,s=!1,l=void 0;try{for(var c,f=i[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=c.value,d=!0,v=new Map,p=!0,y=!1,g=void 0;try{for(var m,b=h[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var _=m.value;if(!_.doesStillMatch()){d=!1;break}_.populateMagicOrTiles(v)}}catch(t){y=!0,g=t}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}if(d){var w=!0,S=!1,E=void 0;try{for(var T,O=h[Symbol.iterator]();!(w=(T=O.next()).done);w=!0){var x=T.value;x.doesStillMatch()&&o.push(x.evaluate(v))}}catch(t){S=!0,E=t}finally{try{w||null==O.return||O.return()}finally{if(S)throw E}}if(e)break}}}catch(t){s=!0,l=t}finally{try{a||null==f.return||f.return()}finally{if(s)throw l}}r=Object(u.g)(o)}var M=!0,C=!1,R=void 0;try{for(var A,I=this.commands[Symbol.iterator]();!(M=(A=I.next()).done);M=!0){var L=A.value;r.push(new k(L))}}catch(t){C=!0,R=t}finally{try{M||null==I.return||I.return()}finally{if(C)throw R}}return r}},{key:"hasMatches",value:function(t){for(var e=0;e<this.conditionBrackets.length;e++){var r=this.conditionBrackets[e],n=this.actionBrackets[e];if(!r.hasMatches(t,n))return!1}return!0}},{key:"isLate",value:function(){return this._isLate}},{key:"hasRigid",value:function(){return this.isRigid}},{key:"canCollapseBecauseBracketsMatch",value:function(t){for(var e=0;e<this.conditionBrackets.length;e++){if(this.conditionBrackets[e]!==t.conditionBrackets[e])return!1;if(this.conditionBrackets[e]._getAllNeighbors().length>1)return!1}for(var r=0;r<this.actionBrackets.length;r++)if(this.actionBrackets[r]!==t.actionBrackets[r])return!1;return!0}},{key:"addCellsToEmptyRules",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.conditionBrackets[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addCellsToEmptyRules(t)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"a11yGetConditionSprites",value:function(){var t=[],e=!0,r=!1,n=void 0;try{for(var i,o=this.conditionBrackets[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t=[].concat(c(t),c(a.a11yGetSprites()))}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return t}}]),e}(),C=function(t){function e(t,r,n,i,o,a){var u;return m(this,e),(u=v(this,p(e).call(this,t)))._isNegated=r,u._isRandom=n,u._direction=i,u._tile=o,u.neighbors=new Set,u._debugFlag=a,u.trickleCells=new Set,u}return y(e,s["a"]),h(e,[{key:"toKey",value:function(t){var e=this._tile.getSprites().map(function(t){return t.getName()}).sort();return t?"{-?".concat(this._isNegated,"} {#?").concat(this._isRandom,'} dir="').concat(this._direction,'" [').concat(e.join(" "),"]"):"{-?".concat(this._isNegated,"} {#?").concat(this._isRandom,'} dir="').concat(this._direction,'" [').concat(e.join(" "),"]{debugging?").concat(!!this._debugFlag,"}")}},{key:"equals",value:function(t){return this._isNegated===t._isNegated&&this._tile.equals(t._tile)&&this._direction===t._direction&&this._isRandom===t._isRandom}},{key:"clearCaches",value:function(){}},{key:"isNo",value:function(){return this._isNegated}},{key:"isRandom",value:function(){return this._isRandom}},{key:"getCollisionLayers",value:function(){var t=new Set,e=!0,r=!1,n=void 0;try{for(var i,o=this._tile.getSprites()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t.add(a.getCollisionLayer())}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return t}},{key:"subscribeToCellChanges",value:function(t){this.neighbors.add(t),this._tile.subscribeToCellChanges(this)}},{key:"addCells",value:function(t,e,r,n){if(this._direction&&n!==this._direction?this._tile.isOr()&&this.matchesFirstCell(r,n)?!this.isNo():this.isNo():!this.isNo()){var i=!0,o=!1,a=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;this.trickleCells.add(l)}}catch(t){o=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var c=!0,f=!1,h=void 0;try{for(var d,v=this.neighbors[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){d.value.addCells(this,e,r,n)}}catch(t){f=!0,h=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}}else{var p=!0,y=!1,g=void 0;try{for(var m,b=r[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var _=m.value;this.trickleCells.delete(_)}}catch(t){y=!0,g=t}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}var w=!0,S=!1,E=void 0;try{for(var k,T=this.neighbors[Symbol.iterator]();!(w=(k=T.next()).done);w=!0){k.value.removeCells(this,e,r)}}catch(t){S=!0,E=t}finally{try{w||null==T.return||T.return()}finally{if(S)throw E}}}}},{key:"updateCells",value:function(t,e,r){if(this.matchesFirstCell(e,r)){var n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;this.trickleCells.add(s)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}if(r){var l=!0,c=!1,f=void 0;try{for(var h,d=this.neighbors[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){h.value.updateCells(this,t,e,r)}}catch(t){c=!0,f=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw f}}}}else{var v=!0,p=!1,y=void 0;try{for(var g,m=e[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;this.trickleCells.delete(b)}}catch(t){p=!0,y=t}finally{try{v||null==m.return||m.return()}finally{if(p)throw y}}var _=!0,w=!1,S=void 0;try{for(var E,k=this.neighbors[Symbol.iterator]();!(_=(E=k.next()).done);_=!0){E.value.removeCells(this,t,e)}}catch(t){w=!0,S=t}finally{try{_||null==k.return||k.return()}finally{if(w)throw S}}}}},{key:"removeCells",value:function(t,e,r){if(this._tile.isOr()?this.matchesFirstCell(r,null):this.isNo()){var n=!0,i=!1,o=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;this.trickleCells.add(l)}}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}var c=!0,f=!1,h=void 0;try{for(var d,v=this.neighbors[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){d.value.addCells(this,e,r,u.d.STATIONARY)}}catch(t){f=!0,h=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}}else{var p=!0,y=!1,g=void 0;try{for(var m,b=r[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var _=m.value;this.trickleCells.delete(_)}}catch(t){y=!0,g=t}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}var w=!0,S=!1,E=void 0;try{for(var k,T=this.neighbors[Symbol.iterator]();!(w=(k=T.next()).done);w=!0){k.value.removeCells(this,e,r)}}catch(t){S=!0,E=t}finally{try{w||null==T.return||T.return()}finally{if(S)throw E}}}}},{key:"hasCell",value:function(t){return this.trickleCells.has(t)}},{key:"matchesCellWantsToMove",value:function(t,e){var r=this._tile.hasCell(t);if(this._isNegated!==(r&&(this._direction===e||!this._direction)))return!0;if(this._direction){var n=!0,i=!1,o=void 0;try{for(var a,u=this._tile.getSpritesThatMatch(t)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;if(this._direction===t.getWantsToMove(s))return!0}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return!1}return!1}},{key:"matchesFirstCell",value:function(t,e){return this.matchesCellWantsToMove(t[0],e)}}]),e}(),R=function(t){function e(t,r,n,i){var o;return m(this,e),(o=v(this,p(e).call(this,t))).direction=r,o.debugFlag=i,o.allNeighbors=n,o.firstCells=new Set,o}return y(e,s["a"]),h(e,[{key:"_getAllNeighbors",value:function(){return this.allNeighbors}},{key:"hasMatches",value:function(t,e){return this.getMatches(t,e).length>0}}]),e}(),A=function(){function t(e){m(this,t),this.cellsAndNeighbors=e,this.cellKeys=new Map;var r=!0,n=!1,i=void 0;try{for(var o,a=this.cellsAndNeighbors[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value.cell;this.cellKeys.set(u,u.toKey())}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}return h(t,[{key:"firstCell",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.cellsAndNeighbors[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){return n.value.cell}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}throw new Error("BUG: ? No cells were included in the match")}},{key:"lastCell",value:function(){var t,e=!0,r=!1,n=void 0;try{for(var i,o=this.cellsAndNeighbors[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){t=i.value.cell}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}if(t)return t;throw new Error("BUG: ? No cells were included in the match")}},{key:"doesStillMatch",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.cellsAndNeighbors[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,a=o.cell,u=o.condition;if(a.toKey()!==this.cellKeys.get(a)){if(!u.matchesCellSimple(a))return!1;this.cellKeys.set(a,a.toKey())}}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}return!0}},{key:"populateMagicOrTiles",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.cellsAndNeighbors[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=a.cell;a.condition.populateMagicOrTiles(u,t)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"evaluate",value:function(t){var e=[],r=!0,n=!1,i=void 0;try{for(var o,a=this.cellsAndNeighbors[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value,s=u.cell,l=u.condition,c=u.action;if(!c)throw new Error("BUG: Should not have tried to evaluate something when there is no action");var f=l.evaluate(c,s,t);f&&e.push(f)}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}}]),t}(),I=function(e){function r(t,e,n,i){var o;m(this,r),(o=v(this,p(r).call(this,t,e,n,i))).actionDebugFlag=null,o.neighbors=n,o.ellipsisBracketListeners=new Map,o.spritesPresentInRowOrColumn=o.neighbors[0].spritesPresent.union(o.neighbors.map(function(t){return t.spritesPresent}));var u=[],s=!0,l=!1,c=void 0;try{for(var f,h=o.neighbors[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,y=!0,g=!1,b=void 0;try{for(var _,w=d.anySpritesPresent[Symbol.iterator]();!(y=(_=w.next()).done);y=!0){var S=_.value;u.push(S)}}catch(t){g=!0,b=t}finally{try{y||null==w.return||w.return()}finally{if(g)throw b}}}}catch(t){l=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}return o.anySpritesPresentInRowOrColumn=(new a.a).union(u),o}return y(r,R),h(r,[{key:"toKey",value:function(){var t=this.dependsOnDirection()?this.direction:"";return"{".concat(t,"[").concat(this.neighbors.map(function(t){return t.toKey()}).join("|"),"]{debugging?").concat(!!this.debugFlag,"}}")}},{key:"dependsOnDirection",value:function(){return this.neighbors.length>1||!!this.neighbors.find(function(t){return t.dependsOnDirection()})}},{key:"subscribeToNeighborChanges",value:function(){var t=this;this.shouldUseOnDemandMethod()||this.neighbors.forEach(function(e,r){e.subscribeToTileChanges(t,r)})}},{key:"addEllipsisBracket",value:function(t,e){this.ellipsisBracketListeners.set(t,e)}},{key:"clearCaches",value:function(){this.firstCells.clear();var t=!0,e=!1,r=void 0;try{for(var n,i=this.neighbors[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}},{key:"getNeighbors",value:function(){return this.neighbors}},{key:"prepareAction",value:function(t){var e=t;this.actionDebugFlag=e.debugFlag;for(var r=0;r<this.neighbors.length;r++){var n=this.neighbors[r],i=e.neighbors[r];n.prepareAction(i)}}},{key:"addCellsToEmptyRules",value:function(t){if(1===this.neighbors.length&&0===this.neighbors[0]._tilesWithModifier.size){var e=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this._addFirstCell(a)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}}},{key:"_addFirstCell",value:function(t){this.firstCells.add(t);var e=!0,r=!1,n=void 0;try{for(var i,o=this.ellipsisBracketListeners[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=l(i.value,2),u=a[0],s=a[1];u.addFirstCell(this,t,s)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"addCell",value:function(t,e,r,n,i,o){if(this.matchesDownstream(i,t)){var a=this.matchesUpstream(i,t);if(a)this._addFirstCell(a);else{var u=this.getUpstream(i,t);u&&this._removeFirstCell(u)}}else{this.getUpstream(i,t)&&this._removeFirstCell(i)}}},{key:"removeCell",value:function(t,e,r,n,i){var o=this.getFirstCellToRemove(i,t);o&&this.firstCells.has(o)&&this._removeFirstCell(o)}},{key:"shouldUseOnDemandMethod",value:function(){return"ondemand"===t.env.PUZZLESCRIPT_METHOD}},{key:"getMatchesByTrickling",value:function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=this.firstCells[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;this.addToCellMatches(r,s,e)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}},{key:"getMatchesByLooping",value:function(t,e){var r=[],n=t.getCells(),i=n.length,o=n[0].length;switch(this.direction){case u.d.UP:case u.d.DOWN:for(var a=0;a<o;a++)if(t.colContainsSprites(a,this.spritesPresentInRowOrColumn,this.anySpritesPresentInRowOrColumn))for(var s=0;s<i;s++)this.addIfCellMatches(r,t.getCell(s,a),e);break;case u.d.LEFT:case u.d.RIGHT:for(var l=0;l<i;l++)if(t.rowContainsSprites(l,this.spritesPresentInRowOrColumn,this.anySpritesPresentInRowOrColumn))for(var c=0;c<o;c++)this.addIfCellMatches(r,t.getCell(l,c),e);break;default:throw new Error('BUG: Unsupported Direction "'.concat(this.direction,'"'))}return r}},{key:"getMatches",value:function(e,r){var n;if(this.shouldUseOnDemandMethod())n=this.getMatchesByLooping(e,r);else if(n=this.getMatchesByTrickling(e,r),t.env.VERIFY_MATCHES){var i=this.getMatchesByLooping(e,r);if(n.length!==i.length)throw this.getMatchesByTrickling(e,r),this.getMatchesByLooping(e,r),new Error("Match lengths differ. Expected ".concat(i.length," but found ").concat(n.length,". \n").concat(this.toString()))}return n}},{key:"a11yGetSprites",value:function(){var t=new Set,e=!0,r=!1,n=void 0;try{for(var i,o=this.neighbors[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=!0,s=!1,l=void 0;try{for(var c,f=a._tilesWithModifier[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value,d=!0,v=!1,p=void 0;try{for(var y,g=h._tile.getSprites()[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var m=y.value;t.add(m)}}catch(t){v=!0,p=t}finally{try{d||null==g.return||g.return()}finally{if(v)throw p}}}}catch(t){s=!0,l=t}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return[t]}},{key:"_removeFirstCell",value:function(t){if(this.firstCells.has(t)){0,this.firstCells.delete(t);var e=!0,r=!1,n=void 0;try{for(var i,o=this.ellipsisBracketListeners[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=l(i.value,2),u=a[0],s=a[1];u.removeFirstCell(this,t,s)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}}},{key:"matchesDownstream",value:function(t,e){for(var r=!0,n=t,i=e+1;i<this.neighbors.length;i++)if(!(n=n.getNeighbor(this.direction))||0!==this.neighbors[i]._tilesWithModifier.size&&!this.neighbors[i].matchesCellSimple(n)){r=!1;break}return r}},{key:"getUpstream",value:function(t,e){for(var r=t,n=e-1;n>=0;n--)if(!(r=r.getNeighbor(Object(u.i)(this.direction))))return null;return r}},{key:"matchesUpstream",value:function(t,e){for(var r=!0,n=t,i=e-1;i>=0;i--)if(!(n=n.getNeighbor(Object(u.i)(this.direction)))||0!==this.neighbors[i]._tilesWithModifier.size&&!this.neighbors[i].matchesCellSimple(n)){r=!1;break}return r?n:null}},{key:"getFirstCellToRemove",value:function(t,e){for(var r=!0,n=t,i=e-1;i>=0;i--)if(!(n=n.getNeighbor(Object(u.i)(this.direction)))){r=!1;break}return r?n:null}},{key:"addToCellMatches",value:function(t,e,r){for(var n=[],i=e,o=!0,a=0;a<this.neighbors.length;a++){if(!i){o=!1;break}var u=this.neighbors[a],s=null;r&&(s=r.neighbors[a]||null);var l={cell:i,condition:u,action:s};n.push(l),i=i.getNeighbor(this.direction)}o&&t.push(new A(n))}},{key:"addIfCellMatches",value:function(t,e,r){this.neighbors[0].matchesCellSimple(e)&&this.matchesDownstream(e,0)&&this.addToCellMatches(t,e,r)}}]),r}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(T||(T={}));var L,P=function(){function t(){m(this,t),this.map=new Map}return h(t,[{key:"clear",value:function(){this.map.clear()}},{key:"getB",value:function(t){return this.map.get(t)}},{key:"add",value:function(t,e){var r=this.map.get(t);return r||(r=new Set,this.map.set(t,r)),!r.has(e)&&(r.add(e),!0)}},{key:"deleteAllA",value:function(t){this.map.delete(t)}},{key:"deleteAllB",value:function(t){var e=new Set,r=!0,n=!1,i=void 0;try{for(var o,a=this.map[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=l(o.value,2),s=u[0],c=u[1];c.has(t)&&(c.delete(t),0===c.size&&(this.map.delete(s),e.add(s)))}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"sizeA",value:function(){return this.map.size}}]),t}(),N=function(t){function e(t,r,n,i,o){var a;return m(this,e),(a=v(this,p(e).call(this,t,r,[].concat(c(n),c(i)),o))).beforeEllipsisBracket=new I(t,r,n,o),a.afterEllipsisBracket=new I(t,r,i,o),a.linkages=new P,a}return y(e,R),h(e,[{key:"subscribeToNeighborChanges",value:function(){this.beforeEllipsisBracket.subscribeToNeighborChanges(),this.afterEllipsisBracket.subscribeToNeighborChanges(),this.beforeEllipsisBracket.addEllipsisBracket(this,T.BEFORE),this.afterEllipsisBracket.addEllipsisBracket(this,T.AFTER)}},{key:"toKey",value:function(){return"[".concat(this.direction," ").concat(this.beforeEllipsisBracket.toKey()," ... ").concat(this.afterEllipsisBracket.toKey(),"]}")}},{key:"clearCaches",value:function(){this.firstCells.clear(),this.linkages.clear(),this.beforeEllipsisBracket.clearCaches(),this.afterEllipsisBracket.clearCaches()}},{key:"prepareAction",value:function(t){var e=t;this.beforeEllipsisBracket.prepareAction(e.beforeEllipsisBracket),this.afterEllipsisBracket.prepareAction(e.afterEllipsisBracket)}},{key:"addCellsToEmptyRules",value:function(t){this.beforeEllipsisBracket.addCellsToEmptyRules(t),this.afterEllipsisBracket.addCellsToEmptyRules(t)}},{key:"addCell",value:function(t,e,r,n,i,o){throw new Error("BUG: We should not be subscribed to these events")}},{key:"removeCell",value:function(t,e,r,n,i){throw new Error("BUG: We should not be subscribed to these events")}},{key:"addFirstCell",value:function(t,e,r){}},{key:"removeFirstCell",value:function(t,e,r){if(this.checkInvariants(),t===this.beforeEllipsisBracket){if(this.linkages.deleteAllA(e),this.firstCells.has(e))throw new Error("BUG: Unreachable code")}else{if(t!==this.afterEllipsisBracket)throw new Error("BUG: Bracket should only ever be the before-ellipsis or after-ellipsis one");if(this.linkages.deleteAllB(e).size>0)throw new Error("BUG: Unreachable code")}this.checkInvariants()}},{key:"getMatches",value:function(t,e){var r,n,i=[];e?(r=this.beforeEllipsisBracket.getMatches(t,e.beforeEllipsisBracket),n=this.afterEllipsisBracket.getMatches(t,e.afterEllipsisBracket)):(r=this.beforeEllipsisBracket.getMatches(t,null),n=this.afterEllipsisBracket.getMatches(t,null));var o=new P;if(0===r.length||0===n.length)return[];switch(this.direction){case u.d.UP:case u.d.DOWN:var a=!0,s=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value;o.add(d.lastCell().colIndex,d)}}catch(t){s=!0,l=t}finally{try{a||null==h.return||h.return()}finally{if(s)throw l}}var v=!0,p=!1,y=void 0;try{for(var g,m=n[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value,_=b.firstCell(),w=_.colIndex,S=_.rowIndex,E=!0,k=!1,T=void 0;try{for(var O,x=(o.getB(w)||[])[Symbol.iterator]();!(E=(O=x.next()).done);E=!0){var M=O.value,C=M.lastCell().rowIndex;(this.direction===u.d.DOWN?C<S:S<C)&&i.push(new A(c(M.cellsAndNeighbors).concat(c(b.cellsAndNeighbors))))}}catch(t){k=!0,T=t}finally{try{E||null==x.return||x.return()}finally{if(k)throw T}}}}catch(t){p=!0,y=t}finally{try{v||null==m.return||m.return()}finally{if(p)throw y}}break;case u.d.LEFT:case u.d.RIGHT:var R=!0,I=!1,L=void 0;try{for(var N,D=r[Symbol.iterator]();!(R=(N=D.next()).done);R=!0){var j=N.value;o.add(j.lastCell().rowIndex,j)}}catch(t){I=!0,L=t}finally{try{R||null==D.return||D.return()}finally{if(I)throw L}}var B=!0,F=!1,G=void 0;try{for(var U,W=n[Symbol.iterator]();!(B=(U=W.next()).done);B=!0){var H=U.value,q=H.firstCell(),z=(S=q.rowIndex,w=q.colIndex,!0),V=!1,K=void 0;try{for(var Y,X=(o.getB(S)||[])[Symbol.iterator]();!(z=(Y=X.next()).done);z=!0){var J=Y.value,$=J.lastCell().colIndex;(this.direction===u.d.RIGHT?$<w:w<$)&&i.push(new A(c(J.cellsAndNeighbors).concat(c(H.cellsAndNeighbors))))}}catch(t){V=!0,K=t}finally{try{z||null==X.return||X.return()}finally{if(V)throw K}}}}catch(t){F=!0,G=t}finally{try{B||null==W.return||W.return()}finally{if(F)throw G}}break;default:throw new Error("BUG: Invalid direction ".concat(this.direction))}return i}},{key:"a11yGetSprites",value:function(){return[].concat(c(this.beforeEllipsisBracket.a11yGetSprites()),c(this.afterEllipsisBracket.a11yGetSprites()))}},{key:"checkInvariants",value:function(){if(this.firstCells.size!==this.linkages.sizeA())throw new Error("BUG: Invariant violation")}}]),e}();!function(t){t.ADD="ADD",t.REPLACE="REPLACE",t.REMOVE="REMOVE",t.MOVE="MOVE"}(L||(L={}));var D=function(){function t(e,r,n,i,o){if(m(this,t),!e)throw new Error("BUG: collisionLayer is not set");this.collisionLayer=e,this.actionTileWithModifier=r,this.mightNotFindConditionButThatIsOk=n,this.conditionSpritesToRemove=i,this.newDirection=o}return h(t,[{key:"replace",value:function(t,e,r){var n=!1,i=[];if(this.actionTileWithModifier){var o;if(this.actionTileWithModifier.isRandom()){var a=this.actionTileWithModifier._tile.getSprites();o=[a[Object(u.h)(a.length)]]}else if(this.actionTileWithModifier._tile.isOr()){var s=e.get(this.actionTileWithModifier._tile);if(!s)throw new Error("BUG: Magic OR tile not found\n".concat(this.actionTileWithModifier.toString()));o=s}else o=this.actionTileWithModifier._tile.getSprites();var l=[],c=[],f=!0,h=!1,d=void 0;try{for(var v,p=o[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value,g=y.getCollisionLayer(),m=this.newDirection||t.getCollisionLayerWantsToMove(g),b=void 0;if(t.hasSprite(y)){if(!m)throw new Error("BUG: Invariant violation. if the sprite exists then wantsToMove must also exist (at least it would be STATIONARY)");b=t.updateSprite(y,m)}else{var _=t.getSpriteByCollisionLayer(g);_?c.push({oldSprite:_,newSprite:y}):l.push(y),b=t.addSprite(y,m)}n=n||b}}catch(t){h=!0,d=t}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}i.push({type:L.ADD,cell:t,sprites:l}),i.push({type:L.REPLACE,cell:t,replacements:c})}else{var w=new Set,S=t.getSpriteByCollisionLayer(this.collisionLayer);if(!S&&this.mightNotFindConditionButThatIsOk)return{didActuallyChange:!1,messages:[]};if(!S)throw new Error("BUG: No tile found");if(!this.conditionSpritesToRemove)throw new Error("BUG: Not implemented (just commented out)");if(this.conditionSpritesToRemove._tile.isOr()){if(!r.has(this.conditionSpritesToRemove._tile)){var E=S.getSprites(),k=!0,T=!1,O=void 0;try{for(var x,M=this.conditionSpritesToRemove._tile.getSprites()[Symbol.iterator]();!(k=(x=M.next()).done);k=!0){var C=x.value;if(E.indexOf(C)>=0){var R=t.removeSprite(C);w.add(C),n=n||R,R&&r.add(this.conditionSpritesToRemove._tile);break}}}catch(t){T=!0,O=t}finally{try{k||null==M.return||M.return()}finally{if(T)throw O}}}}else{var A=new Set(this.conditionSpritesToRemove._tile.getSprites()),I=!0,P=!1,N=void 0;try{for(var D,j=S.getSprites()[Symbol.iterator]();!(I=(D=j.next()).done);I=!0){var B=D.value;if(A.has(B)){var F=t.removeSprite(B);w.add(B),n=n||F}}}catch(t){P=!0,N=t}finally{try{I||null==j.return||j.return()}finally{if(P)throw N}}}i.push({type:L.REMOVE,cell:t,sprites:w})}return{didActuallyChange:n,messages:i}}}]),t}(),j=function(){function t(e,r,n){if(m(this,t),!e)throw new Error("BUG: collisionLayer is not set");this.collisionLayer=e,this.direction=r,this.mightNotFindConditionButThatIsOk=n}return h(t,[{key:"replace",value:function(t){var e=this.direction;if(this.mightNotFindConditionButThatIsOk&&!t.getSpriteByCollisionLayer(this.collisionLayer))return{didActuallyChange:!1};if(this.direction===u.d.RANDOMDIR){if(t.getCollisionLayerWantsToMove(this.collisionLayer)!==u.d.STATIONARY)return{didActuallyChange:!1};switch(Object(u.h)(4)){case 0:e=u.d.UP;break;case 1:e=u.d.DOWN;break;case 2:e=u.d.LEFT;break;case 3:e=u.d.RIGHT;break;default:throw new Error("BUG: invalid random number chosen")}}return{didActuallyChange:t.setWantsToMoveCollisionLayer(this.collisionLayer,e)}}}]),t}(),B=function(t){function e(t,r,n){var o;m(this,e),(o=v(this,p(e).call(this,t)))._tilesWithModifier=r,o.brackets=new Map,o.debugFlag=n,o.staticCache=new Map,o.spritesPresent=new a.a,o.spritesMissing=new a.a,o.anySpritesPresent=new Set,o.spriteMovementsPresent=new Map,o.orTileMovementsPresent=new Map,o.trickleCells=new Set,o.lruCache=new i.a(_),o.cacheYesBitSets=new Map,o.cacheNoBitSets=new Map,o.cacheDirections=new Map,o.cacheMultiCollisionLayerTiles=new Set;var u=c(r),s=u.filter(function(t){return t.isNo()}),l=u.filter(function(t){return!t.isNo()}),f=!0,h=!1,d=void 0;try{for(var y,g=l[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var w=y.value;if(w._tile.hasSingleCollisionLayer()){var S=!0,E=!1,k=void 0;try{for(var T,O=w._tile.getSprites()[Symbol.iterator]();!(S=(T=O.next()).done);S=!0){var x=T.value,M=x.getCollisionLayer();w._direction&&o.cacheDirections.set(M,w._direction);var C=o.cacheYesBitSets.get(M);C||(C=new b,o.cacheYesBitSets.set(M,C)),C.set(M.getBitSetIndexOf(x))}}catch(t){E=!0,k=t}finally{try{S||null==O.return||O.return()}finally{if(E)throw k}}}else o.cacheMultiCollisionLayerTiles.add(w);if(w._tile.isOr())o.anySpritesPresent.add(new a.a(w._tile.getSprites())),w._direction&&o.orTileMovementsPresent.set(w._tile,w._direction);else{o.spritesPresent.addAll(w._tile.getSprites());var R=!0,A=!1,I=void 0;try{for(var L,P=w._tile.getSprites()[Symbol.iterator]();!(R=(L=P.next()).done);R=!0){var N=L.value;if(w._direction){var D=o.spriteMovementsPresent.get(N.getCollisionLayer());if(D&&D!==w._direction)throw new Error("BUG??? prev=".concat(D," ").concat(w._direction));o.spriteMovementsPresent.set(N.getCollisionLayer(),w._direction)}}}catch(t){A=!0,I=t}finally{try{R||null==P.return||P.return()}finally{if(A)throw I}}}}}catch(t){h=!0,d=t}finally{try{f||null==g.return||g.return()}finally{if(h)throw d}}var j=!0,B=!1,F=void 0;try{for(var G,U=s[Symbol.iterator]();!(j=(G=U.next()).done);j=!0){var W=G.value;if(W._tile.hasSingleCollisionLayer()){var H=!0,q=!1,z=void 0;try{for(var V,K=W._tile.getSprites()[Symbol.iterator]();!(H=(V=K.next()).done);H=!0){var Y=V.value,X=Y.getCollisionLayer();if(W._direction)throw new Error("BUG: Unreachable code");var J=o.cacheNoBitSets.get(X);J||(J=new b,o.cacheNoBitSets.set(X,J)),J.set(X.getBitSetIndexOf(Y))}}catch(t){q=!0,z=t}finally{try{H||null==K.return||K.return()}finally{if(q)throw z}}}else o.cacheMultiCollisionLayerTiles.add(W);W._tile.isOr(),o.spritesMissing.addAll(W._tile.getSprites())}}catch(t){B=!0,F=t}finally{try{j||null==U.return||U.return()}finally{if(B)throw F}}return o}return y(e,s["a"]),h(e,[{key:"toKey",value:function(){return"{".concat(c(this._tilesWithModifier).map(function(t){return t.toKey()}).sort().join(" ")," debugging?").concat(!!this.debugFlag,"}")}},{key:"dependsOnDirection",value:function(){return!!c(this._tilesWithModifier).find(function(t){return!!t._direction})}},{key:"prepareAction",value:function(t){if(!this.staticCache.has(t)){var e=new Map,r=new Map,n=!0,i=!1,o=void 0;try{for(var a,s=this._tilesWithModifier[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;if(c._tile.isOr()&&!c._tile.hasSingleCollisionLayer())c.isNo()||r.set(c._tile,c);else if(c._tile.hasSingleCollisionLayer()){var f=c._tile.getCollisionLayer();if(!f)throw new Error("BUG: Tile is not assigned to a collision layer\n".concat(c._tile.toString()));e.has(f)||e.set(f,new S(c,null,!1))}else{var h=!0,d=!1,v=void 0;try{for(var p,y=c._tile.getSprites()[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var g=p.value.getCollisionLayer();e.has(g)||e.set(g,new S(c,null,!1))}}catch(t){d=!0,v=t}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}}}}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}var m=new Map(r.entries()),b=!0,_=!1,w=void 0;try{for(var E,k=t._tilesWithModifier[Symbol.iterator]();!(b=(E=k.next()).done);b=!0){var T=E.value;if(T._tile.isOr()&&!T._tile.hasSingleCollisionLayer()){var O=r.get(T._tile);if(O){m.delete(T._tile);var x=O;if(x._direction!==T._direction){var M=!0,R=!1,A=void 0;try{for(var I,L=T._tile.getSprites()[Symbol.iterator]();!(M=(I=L.next()).done);M=!0){var P=I.value,N=P.getCollisionLayer();e.has(N)||e.set(N,new S(new C(x.__source,x._isNegated,x._isRandom,x._direction,P,x._debugFlag),new C(T.__source,T._isNegated,T._isRandom,T._direction,P,T._debugFlag),!0))}}catch(t){R=!0,A=t}finally{try{M||null==L.return||L.return()}finally{if(R)throw A}}}}else if(T.isNo()){var B=!0,F=!1,G=void 0;try{for(var U,W=T._tile.getSprites()[Symbol.iterator]();!(B=(U=W.next()).done);B=!0){var H=U.value.getCollisionLayer();if(!e.has(H)){var q=new C(T.__source,!1,T._isRandom,T._direction,T._tile,T._debugFlag);e.set(H,new S(q,null,!0))}}}catch(t){F=!0,G=t}finally{try{B||null==W.return||W.return()}finally{if(F)throw G}}}else{var z=!0,V=!1,K=void 0;try{for(var Y,X=T._tile.getSprites()[Symbol.iterator]();!(z=(Y=X.next()).done);z=!0){var J=Y.value.getCollisionLayer();if(!e.has(J)){var $=new C(T.__source,!1,T._isRandom,T._direction,T._tile,T._debugFlag);e.set(J,new S(null,$,!0))}}}catch(t){V=!0,K=t}finally{try{z||null==X.return||X.return()}finally{if(V)throw K}}}}else{var Z=!0,Q=!1,tt=void 0;try{for(var et,rt=T.getCollisionLayers()[Symbol.iterator]();!(Z=(et=rt.next()).done);Z=!0){var nt=et.value;if(!nt)throw new Error("BUG: Tile is not assigned to a collision layer.\n".concat(T._tile.toString()));var it=e.get(nt),ot=it&&it.condition||null;if(ot&&ot.equals(T))e.delete(nt);else if(T.isNo())if(it){if(it.condition===T)throw new Error("BUG: Unreachable code")}else{var at=new C(T.__source,!1,!1,T._direction,T._tile,T._debugFlag);e.set(nt,new S(at,null,!0))}else it?it.action=T:e.set(nt,new S(null,T,!1))}}catch(t){Q=!0,tt=t}finally{try{Z||null==rt.return||rt.return()}finally{if(Q)throw tt}}}}}catch(t){_=!0,w=t}finally{try{b||null==k.return||k.return()}finally{if(_)throw w}}if(m.size>0){var ut=!0,st=!1,lt=void 0;try{for(var ct,ft=m.values()[Symbol.iterator]();!(ut=(ct=ft.next()).done);ut=!0){var ht=ct.value,dt=!0,vt=!1,pt=void 0;try{for(var yt,gt=ht._tile.getSprites()[Symbol.iterator]();!(dt=(yt=gt.next()).done);dt=!0){var mt=yt.value.getCollisionLayer();if(!e.has(mt)){var bt=new C(ht.__source,!1,!1,ht._direction,ht._tile,ht._debugFlag);e.set(mt,new S(bt,null,!0))}}}catch(t){vt=!0,pt=t}finally{try{dt||null==gt.return||gt.return()}finally{if(vt)throw pt}}}}catch(t){st=!0,lt=t}finally{try{ut||null==ft.return||ft.return()}finally{if(st)throw lt}}}var _t=new Set,wt=new Set,St=!0,Et=!1,kt=void 0;try{for(var Tt,Ot=e.entries()[Symbol.iterator]();!(St=(Tt=Ot.next()).done);St=!0){var xt=l(Tt.value,2),Mt=xt[0],Ct=xt[1],Rt=Ct.condition,At=Ct.action,It=Ct.extra;if(Rt&&At){if(Rt!==At){var Lt=null;(Rt._direction!==At._direction||Rt.isNo())&&(Lt=At._direction||u.d.STATIONARY),!Rt._tile.equals(At._tile)||Rt.isNo()?_t.add(new D(Mt,At,It,null,Lt)):Lt&&wt.add(new j(Mt,Lt,It))}}else Rt?Rt.isNo()||_t.add(new D(Mt,null,It,Rt,null)):At&&(At.isNo()||_t.add(new D(Mt,At,It,null,At._direction||u.d.STATIONARY)))}}catch(t){Et=!0,kt=t}finally{try{St||null==Ot.return||Ot.return()}finally{if(Et)throw kt}}this.staticCache.set(t,{replaceTiles:_t,replaceDirections:wt})}}},{key:"evaluate",value:function(t,e,r){var n=this.staticCache.get(t);if(!n)throw new Error("BUG: Missing actionNeighbor. Should have been prepared before");var i=n.replaceTiles,o=n.replaceDirections,a=!1,u=!1,s=new Set,l=[],f=!0,h=!1,d=void 0;try{for(var v,p=i[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value.replace(e,r,s),g=y.didActuallyChange,m=y.messages;g&&(l=[].concat(c(l),c(m))),a=a||g||!1}}catch(t){h=!0,d=t}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}var b=!0,_=!1,w=void 0;try{for(var S,k=o[Symbol.iterator]();!(b=(S=k.next()).done);b=!0){g=S.value.replace(e).didActuallyChange;u=u||g}}catch(t){_=!0,w=t}finally{try{b||null==k.return||k.return()}finally{if(_)throw w}}return a||u?new E(e,l):null}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this._tilesWithModifier[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}},{key:"populateMagicOrTiles",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=this._tilesWithModifier[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;if(!s.isNo()&&s._tile.isOr()){var l=Object(u.o)(new Set(s._tile.getSprites()),t.getSpritesAsSet());e.set(s._tile,l)}}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"subscribeToTileChanges",value:function(t,e){var r=this,n=this.brackets.get(t);n||(n=new Set,this.brackets.set(t,n)),n.add(e),this._tilesWithModifier.forEach(function(t){t.subscribeToCellChanges(r)})}},{key:"matchesCellSimple",value:function(t){return this.matchesCell(t,null,null)}},{key:"addCells",value:function(t,e,r,n){var i=!0,o=!1,a=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;if(this.matchesTiles(c)){this.trickleCells.add(c);var f=!0,h=!1,d=void 0;try{for(var v,p=this.brackets.entries()[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=l(v.value,2),g=y[0],m=y[1],b=!0,_=!1,w=void 0;try{for(var S,E=m[Symbol.iterator]();!(b=(S=E.next()).done);b=!0){var k=S.value;g.addCell(k,this,t,e,c,n)}}catch(t){_=!0,w=t}finally{try{b||null==E.return||E.return()}finally{if(_)throw w}}}}catch(t){h=!0,d=t}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}}else if(this.trickleCells.has(c))throw new Error("BUG: Should be unreachable")}}catch(t){o=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}},{key:"updateCells",value:function(t,e,r,n){this.addCells(t,e,r,n)}},{key:"removeCells",value:function(t,e,r){var n=!0,i=!1,o=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;if(!this.matchesTiles(s)){this.trickleCells.delete(s);var c=!0,f=!1,h=void 0;try{for(var d,v=this.brackets.entries()[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=l(d.value,2),y=p[0],g=p[1],m=!0,b=!1,_=void 0;try{for(var w,S=g[Symbol.iterator]();!(m=(w=S.next()).done);m=!0){var E=w.value;y.removeCell(E,this,t,e,s)}}catch(t){b=!0,_=t}finally{try{m||null==S.return||S.return()}finally{if(b)throw _}}}}catch(t){f=!0,h=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}}}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"matchesCell",value:function(t,e,r){var n=this;return this.lruCache.get("[".concat(t.toKey(),"]"),function(){var e=t.spriteBitSet.containsAll(n.spritesPresent)&&t.spriteBitSet.containsNone(n.spritesMissing);if(e){var r=!0,i=!1,o=void 0;try{for(var a,u=n.anySpritesPresent[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;e=e&&t.spriteBitSet.containsAny(s)}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}if(e){var c=!0,f=!1,h=void 0;try{for(var d,v=n.spriteMovementsPresent[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=l(d.value,2),y=p[0];p[1]!==t.getCollisionLayerWantsToMove(y)&&(e=!1)}}catch(t){f=!0,h=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}}if(e){var g=!0,m=!1,b=void 0;try{for(var _,w=n.orTileMovementsPresent[Symbol.iterator]();!(g=(_=w.next()).done);g=!0){var S=l(_.value,2),E=S[0],k=S[1];if(E.hasSingleCollisionLayer())k!==t.getCollisionLayerWantsToMove(E.getCollisionLayer())&&(e=!1);else{var T=!1,O=!1,x=!0,M=!1,C=void 0;try{for(var R,A=E.getSprites()[Symbol.iterator]();!(x=(R=A.next()).done);x=!0){var I=R.value;t.spriteBitSet.has(I)&&(T=!0,k===t.getCollisionLayerWantsToMove(I.getCollisionLayer())&&(O=!0))}}catch(t){M=!0,C=t}finally{try{x||null==A.return||A.return()}finally{if(M)throw C}}if(e=e&&O,!T)throw new Error("BUG: Could not find sprite. One should have already been matched before")}}}catch(t){m=!0,b=t}finally{try{g||null==w.return||w.return()}finally{if(m)throw b}}}return e})}},{key:"matchesTiles",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this._tilesWithModifier[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(!i.value.hasCell(t))return!1}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return!0}}]),e}()}).call(this,r(107))},function(t,e,r){var n=r(63)("wks"),i=r(42),o=r(4).Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=n},function(t,e,r){var n=r(28),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){t.exports=!r(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(3),i=r(110),o=r(31),a=Object.defineProperty;e.f=r(10)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(32);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){for(var r=1,n=1,i=0,o=0,a=null,u=null,s=-1;i<e;){var l=t.charAt(i++);"\n"===l?(r++,n=1,s=o,o=i):"\r"!==l&&n++}var c=t.indexOf("\n",o);if(-1===c)c=t.length;else{var f=t.indexOf("\n",c+1);a=(a=-1===f?t.slice(c):t.slice(c,f)).replace(/^\r?\n/,"").replace(/\r$/,"")}return s>=0&&(u=t.slice(s,o).replace(/\r?\n$/,"")),{lineNum:r,colNum:n,line:t.slice(o,c).replace(/\r$/,""),prevLine:u,nextLine:a}}r.d(e,"a",function(){return o});var o=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("BUG: failed to provide the source when constructing this object");this.__source=e,this.__coverageCount=null}var e,r,o;return e=t,(r=[{key:"__getSourceLineAndColumn",value:function(){var t=this.__source;return i(t.code,t.sourceOffset)}},{key:"toString",value:function(){var t=this.__source,e=i(t.code,t.sourceOffset),r=e.lineNum,n=e.colNum,o=e.line;return"".concat(o,"\nSource: ").concat(r,":").concat(n)}},{key:"toSourceString",value:function(){var t=this.__source,e=i(t.code,t.sourceOffset).lineNum;return t.code.split("\n")[e-1]}},{key:"__getLineAndColumnRange",value:function(){var t=this.__source,e=i(t.code,t.sourceOffset),r=e.lineNum,n=e.colNum;return{start:{line:r,col:n},end:{line:r,col:n+1}}}},{key:"__incrementCoverage",value:function(){0}}])&&n(e.prototype,r),o&&n(e,o),t}()},function(t,e,r){"use strict";r.d(e,"d",function(){return p}),r.d(e,"f",function(){return y}),r.d(e,"e",function(){return g}),r.d(e,"c",function(){return b}),r.d(e,"a",function(){return _}),r.d(e,"b",function(){return w});var n=r(0),i=r(13);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=r(106),p=function(t){function e(t,r,n){var i;return u(this,e),(i=c(this,f(e).call(this,t))).name=r,i._optionalLegendChar=n,i.trickleCells=new Set,i.trickleTiles=new Set,i.trickleTilesWithModifier=new Set,i.allSpritesBitSetIndex=-1,i.collisionLayer=null,i.bitSet=null,i}return h(e,i["a"]),l(e,[{key:"isOr",value:function(){return!1}},{key:"equals",value:function(t){return this===t}},{key:"getName",value:function(){return this.name}},{key:"isBackground",value:function(){return"background"===this.name.toLowerCase()}},{key:"_getDescendantTiles",value:function(){return[]}},{key:"getSprites",value:function(){return[this]}},{key:"hasCollisionLayer",value:function(){return!!this.collisionLayer}},{key:"hasSingleCollisionLayer",value:function(){return this.hasCollisionLayer()}},{key:"setCollisionLayer",value:function(t){this.collisionLayer=t}},{key:"setCollisionLayerAndIndex",value:function(t,e){this.collisionLayer=t,this.bitSet=new v,this.bitSet.set(e)}},{key:"getCollisionLayer",value:function(){if(!this.collisionLayer)throw new Error("ERROR: This sprite was not in a Collision Layer\n".concat(this.toString()));return this.collisionLayer}},{key:"clearCaches",value:function(){this.trickleCells.clear()}},{key:"hasCell",value:function(t){return this.trickleCells.has(t)}},{key:"matchesCell",value:function(t){return t.getSpritesAsSet().has(this)}},{key:"getSpritesThatMatch",value:function(t){return t.getSpritesAsSet().has(this)?new Set([this]):new Set}},{key:"subscribeToCellChanges",value:function(t){this.trickleTilesWithModifier.add(t)}},{key:"subscribeToCellChangesTile",value:function(t){this.trickleTiles.add(t)}},{key:"addCell",value:function(t,e){this.addCells(this,[t],e)}},{key:"removeCell",value:function(t){this.removeCells(this,[t])}},{key:"updateCell",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=this.trickleTiles[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){o.value.updateCells(this,[t],e)}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}var u=!0,s=!1,l=void 0;try{for(var c,f=this.trickleTilesWithModifier[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){c.value.updateCells(this,[t],e)}}catch(t){s=!0,l=t}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}}},{key:"addCells",value:function(t,e,r){var n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;if(this.trickleCells.has(s))throw new Error("BUG: should not be trying to add a cell that has already been matched (right?)");this.trickleCells.add(s)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}var l=!0,c=!1,f=void 0;try{for(var h,d=this.trickleTiles[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){h.value.addCells(this,e,r)}}catch(t){c=!0,f=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw f}}var v=!0,p=!1,y=void 0;try{for(var g,m=this.trickleTilesWithModifier[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){g.value.addCells(this,this,e,r)}}catch(t){p=!0,y=t}finally{try{v||null==m.return||m.return()}finally{if(p)throw y}}}},{key:"updateCells",value:function(t,e,r){throw new Error("BUG: Unreachable code")}},{key:"removeCells",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;this.trickleCells.delete(u)}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}var s=!0,l=!1,c=void 0;try{for(var f,h=this.trickleTiles[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){f.value.removeCells(this,e)}}catch(t){l=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}var d=!0,v=!1,p=void 0;try{for(var y,g=this.trickleTilesWithModifier[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){y.value.removeCells(this,this,e)}}catch(t){v=!0,p=t}finally{try{d||null==g.return||g.return()}finally{if(v)throw p}}}},{key:"has",value:function(t){return this.trickleCells.has(t)}},{key:"hasNegationTileWithModifier",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.trickleTilesWithModifier[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){if(n.value.isNo())return!0}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}var o=!0,a=!1,u=void 0;try{for(var s,l=this.trickleTiles[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){if(s.value.hasNegationTileWithModifier())return!0}}catch(t){a=!0,u=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}return!1}},{key:"getCellsThatMatch",value:function(t){var e=this;return this.trickleCells.size>0?this.trickleCells:t?new Set(a(t).filter(function(t){return e.matchesCell(t)})):new Set}}]),e}(),y=function(t){function e(t,r,n,i){var o;return u(this,e),(o=c(this,f(e).call(this,t,r,n))).color=i[0],o}return h(e,p),l(e,[{key:"isTransparent",value:function(){return this.color.isTransparent()}},{key:"hasPixels",value:function(){return!1}},{key:"getPixels",value:function(t,e){for(var r=[],n=0;n<t;n++){r.push([]);for(var i=0;i<e;i++)r[n].push(this.color)}return r}}]),e}(),g=function(t){function e(t,r,n,i){var o;u(this,e),(o=c(this,f(e).call(this,t,r,n))).pixels=i,o._isTransparent=!0;var a=!0,s=!1,l=void 0;try{for(var h,d=i[Symbol.iterator]();!(a=(h=d.next()).done);a=!0){var v=h.value,p=!0,y=!1,g=void 0;try{for(var m,b=v[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){if(!m.value.isTransparent()){o._isTransparent=!1;break}}}catch(t){y=!0,g=t}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}}}catch(t){s=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(s)throw l}}return o}return h(e,p),l(e,[{key:"isTransparent",value:function(){return this._isTransparent}},{key:"getSprites",value:function(){return[this]}},{key:"hasPixels",value:function(){return!0}},{key:"getPixels",value:function(t,e){return this.pixels.map(function(t){return t.map(function(t){return t})})}}]),e}(),m=function(t){function e(t,r,n){var i;return u(this,e),(i=c(this,f(e).call(this,t))).spriteNameOrLevelChar=r,i.tiles=n,i.trickleCells=new Set,i.trickleTilesWithModifier=new Set,i.collisionLayer=null,i.spritesCache=null,i}return h(e,i["a"]),l(e,[{key:"equals",value:function(t){return this.isOr()===t.isOr()&&0===Object(n.m)(new Set(this.getSprites()),t.getSprites()).size}},{key:"isOr",value:function(){return!1}},{key:"getName",value:function(){return this.spriteNameOrLevelChar}},{key:"_getDescendantTiles",value:function(){return this.tiles.concat(Object(n.g)(this.tiles.map(function(t){return t._getDescendantTiles()})))}},{key:"getSprites",value:function(){return this.spritesCache||(this.spritesCache=Object(n.g)(this.tiles.map(function(t){return t.getSprites()})).sort(function(t,e){return t.getCollisionLayer().id-e.getCollisionLayer().id}).reverse()),this.spritesCache}},{key:"setCollisionLayer",value:function(t){this.collisionLayer=t}},{key:"getCollisionLayer",value:function(){if(this.collisionLayer)return this.collisionLayer;var t=this.getSprites()[0].getCollisionLayer(),e=!0,r=!1,n=void 0;try{for(var i,o=this.getSprites()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(i.value.getCollisionLayer()!==t)throw new Error("ooh, sprites in a tile have different collision layers... that's a problem\n".concat(this.toString()))}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return t}},{key:"getCollisionLayers",value:function(){var t=new Set,e=!0,r=!1,n=void 0;try{for(var i,o=this.getSprites()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=i.value;t.add(u.getCollisionLayer())}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return a(t)}},{key:"getCellsThatMatch",value:function(t){var e=new Set,r=!0,n=!1,i=void 0;try{for(var o,a=this.getSprites()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value,s=!0,l=!1,c=void 0;try{for(var f,h=u.getCellsThatMatch(t)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;e.add(d)}}catch(t){l=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"subscribeToCellChanges",value:function(t){this.trickleTilesWithModifier.add(t);var e=!0,r=!1,n=void 0;try{for(var i,o=this.getSprites()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.subscribeToCellChangesTile(this)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"hasNegationTileWithModifier",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.trickleTilesWithModifier[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){if(n.value.isNo())return!0}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}return!1}},{key:"addCells",value:function(t,e,r){var n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;if(!this.trickleCells.has(s)&&this.matchesCell(s)){this.trickleCells.add(s);var l=!0,c=!1,f=void 0;try{for(var h,d=this.trickleTilesWithModifier[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){h.value.addCells(this,t,[s],r)}}catch(t){c=!0,f=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw f}}}}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"updateCells",value:function(t,e,r){var n=!0,i=!1,o=void 0;try{for(var a,u=this.trickleTilesWithModifier[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){a.value.updateCells(t,e,r)}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"removeCells",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;if(this.matchesCell(u))this.trickleCells.has(u)?this.updateCells(t,[u],null):this.addCells(t,[u],null);else{this.trickleCells.delete(u);var s=!0,l=!1,c=void 0;try{for(var f,h=this.trickleTilesWithModifier[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){f.value.removeCells(this,t,[u])}}catch(t){l=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"hasCell",value:function(t){return this.trickleCells.has(t)}}]),e}(),b=function(t){function e(t,r,n){return u(this,e),c(this,f(e).call(this,t,r,[n]))}return h(e,m),l(e,[{key:"matchesCell",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.tiles[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(!i.value.matchesCell(t))return!1}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return!0}},{key:"getSpritesThatMatch",value:function(t){return Object(n.o)(new Set(this.getSprites()),t.getSpritesAsSet())}},{key:"hasSingleCollisionLayer",value:function(){return!!this.collisionLayer}}]),e}(),_=function(t){function e(){return u(this,e),c(this,f(e).apply(this,arguments))}return h(e,m),l(e,[{key:"matchesCell",value:function(t){throw new Error("BUG: Unreachable code")}},{key:"getSpritesThatMatch",value:function(t){throw new Error("BUG: This method should only be called for OR tiles")}},{key:"hasSingleCollisionLayer",value:function(){return!!this.collisionLayer}}]),e}(),w=function(t){function e(){return u(this,e),c(this,f(e).apply(this,arguments))}return h(e,m),l(e,[{key:"isOr",value:function(){return!0}},{key:"matchesCell",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=this.tiles[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(i.value.matchesCell(t))return!0}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return!1}},{key:"getSpritesThatMatch",value:function(t){return Object(n.o)(new Set(this.getSprites()),t.getSpritesAsSet())}},{key:"hasSingleCollisionLayer",value:function(){var t=this.getSprites(),e=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(i.value.getCollisionLayer()!==t[0].getCollisionLayer())return!1}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return!0}}]),e}()},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){"use strict";var n,i,o,a,u,s={id:"Wireless Controller (STANDARD GAMEPAD)",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,HOME:16,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:2,CLUSTER_RIGHT:1,CLUSTER_BOTTOM:0,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},l=[s,{id:"54c-9cc-Wireless Controller",buttons:{ARROW_UP:14,ARROW_DOWN:15,ARROW_LEFT:16,ARROW_RIGHT:17,HOME:12,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:0,CLUSTER_RIGHT:2,CLUSTER_BOTTOM:1,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11,TOUCHSCREEN:13},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:5}},analogs:{BUMPER_LEFT:3,BUMPER_RIGHT:4}},{id:"[temp xbox id]",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,HOME:16,START:9,SELECT:8,CLUSTER_TOP:3,CLUSTER_LEFT:2,CLUSTER_RIGHT:1,CLUSTER_BOTTOM:0,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:6,BUMPER_TOP_RIGHT:5,BUMPER_BOTTOM_RIGHT:7,STICK_PRESS_LEFT:10,STICK_PRESS_RIGHT:11},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},{id:"54c-268-PLAYSTATION(R)3 Controller",buttons:{ARROW_UP:4,ARROW_DOWN:6,ARROW_LEFT:7,ARROW_RIGHT:5,HOME:16,START:3,SELECT:0,CLUSTER_TOP:12,CLUSTER_LEFT:15,CLUSTER_RIGHT:13,CLUSTER_BOTTOM:14,BUMPER_TOP_LEFT:10,BUMPER_BOTTOM_LEFT:8,BUMPER_TOP_RIGHT:11,BUMPER_BOTTOM_RIGHT:9,STICK_PRESS_LEFT:1,STICK_PRESS_RIGHT:2},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:2,yAxis:3}},analogs:{}},{id:"45e-28e-Xbox 360 Wired Controller",buttons:{ARROW_UP:0,ARROW_DOWN:1,ARROW_LEFT:2,ARROW_RIGHT:3,HOME:10,START:4,SELECT:5,CLUSTER_TOP:14,CLUSTER_LEFT:13,CLUSTER_RIGHT:12,CLUSTER_BOTTOM:11,BUMPER_TOP_LEFT:8,BUMPER_TOP_RIGHT:9,STICK_PRESS_LEFT:6,STICK_PRESS_RIGHT:7},sticks:{LEFT:{xAxis:0,yAxis:1},RIGHT:{xAxis:3,yAxis:4}},analogs:{BUMPER_LEFT:2,BUMPER_RIGHT:5}},{id:"79-6-Generic   USB  Joystick  ",buttons:{ARROW_UP:12,ARROW_DOWN:13,ARROW_LEFT:14,ARROW_RIGHT:15,START:9,CLUSTER_TOP:3,CLUSTER_LEFT:8,CLUSTER_RIGHT:2,CLUSTER_BOTTOM:6,BUMPER_TOP_LEFT:4,BUMPER_BOTTOM_LEFT:7,BUMPER_TOP_RIGHT:5,STICK_PRESS_LEFT:0,STICK_PRESS_RIGHT:1},sticks:{LEFT:{xAxis:1,yAxis:2}},analogs:{}}];function c(t){return"standard"===t.mapping?s:l.find(function(e){return t.id===e.id})||null}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t}r.d(e,"a",function(){return n}),r.d(e,"c",function(){return i}),r.d(e,"b",function(){return g}),function(t){t.ARROW_UP="ARROW_UP",t.ARROW_DOWN="ARROW_DOWN",t.ARROW_LEFT="ARROW_LEFT",t.ARROW_RIGHT="ARROW_RIGHT",t.HOME="HOME",t.START="START",t.SELECT="SELECT",t.CLUSTER_TOP="CLUSTER_TOP",t.CLUSTER_LEFT="CLUSTER_LEFT",t.CLUSTER_RIGHT="CLUSTER_RIGHT",t.CLUSTER_BOTTOM="CLUSTER_BOTTOM",t.BUMPER_TOP_LEFT="BUMPER_TOP_LEFT",t.BUMPER_BOTTOM_LEFT="BUMPER_BOTTOM_LEFT",t.BUMPER_TOP_RIGHT="BUMPER_TOP_RIGHT",t.BUMPER_BOTTOM_RIGHT="BUMPER_BOTTOM_RIGHT",t.STICK_PRESS_LEFT="STICK_PRESS_LEFT",t.STICK_PRESS_RIGHT="STICK_PRESS_RIGHT",t.TOUCHSCREEN="TOUCHSCREEN"}(n||(n={})),function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"}(i||(i={})),function(t){t.BUMPER_LEFT="BUMPER_LEFT",t.BUMPER_RIGHT="BUMPER_RIGHT"}(o||(o={})),function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT"}(a||(a={})),function(t){t.ALT="ALT",t.CTRL="CTRL",t.META="META",t.SHIFT="SHIFT"}(u||(u={}));var p=function(){function t(e){if(h(this,t),!(e>=0))throw new Error("Must provide an index. Or, use the AnyGamepad class");this.index=e}return v(t,[{key:"isSomethingConnected",value:function(){return!!this.raw()}},{key:"isRecognized",value:function(){var t=this.raw();return!!t&&null!==c(t)}},{key:"isButtonPressed",value:function(t){var e=this.raw();if(e){var r=this.buttonIndex(t);return null!==r&&e.buttons[r].pressed}return!1}},{key:"hasButton",value:function(t){return null!==this.buttonIndex(t)}},{key:"button",value:function(t){var e=this;return{has:function(){return e.hasButton(t)},query:function(){return e.isButtonPressed(t)}}}},{key:"getStickValue",value:function(t){var e=this.raw();if(e){var r=this.stickIndex(t);if(r){var n=r.xAxis,i=r.yAxis;return{x:e.axes[n],y:e.axes[i]}}}return{x:0,y:0}}},{key:"getStickDirection",value:function(t){var e=this.getStickValue(t),r=e.x,n=e.y,i=Math.abs(r),o=Math.abs(n);return i<.5&&o<.5?null:i>o?r>0?a.LEFT:a.RIGHT:n>0?a.DOWN:a.UP}},{key:"hasStick",value:function(t){return null!==this.stickIndex(t)}},{key:"stick",value:function(t){var e=this;return{has:function(){return e.hasStick(t)},query:function(){return e.getStickValue(t)},direction:function(){return e.getStickDirection(t)}}}},{key:"raw",value:function(){return f(navigator.getGamepads())[this.index]||null}},{key:"buttonIndex",value:function(t){var e=this.raw();return e&&function(t,e){var r=c(t);if(r){var n=r.buttons[e];if(void 0!==n)return n}return null}(e,t)}},{key:"stickIndex",value:function(t){var e=this.raw();return e&&function(t,e){var r=c(t);return r&&r.sticks[e]||null}(e,t)}}]),t}(),y=function(){function t(){h(this,t)}return v(t,[{key:"isSomethingConnected",value:function(){return!!g.getGamepads().find(function(t){return!!t&&t.isSomethingConnected()})}},{key:"isRecognized",value:function(){return!!g.getGamepads().find(function(t){return!!t&&t.isRecognized()})}},{key:"hasButton",value:function(t){return!!g.getGamepads().find(function(e){return!!e&&e.hasButton(t)})}},{key:"isButtonPressed",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=g.getGamepads()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a&&a.isButtonPressed(t))return!0}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return!1}},{key:"button",value:function(t){var e=this;return{has:function(){return e.hasButton(t)},query:function(){return e.isButtonPressed(t)}}}},{key:"hasStick",value:function(t){return!!g.getGamepads().find(function(e){return!!e&&e.hasStick(t)})}},{key:"getStickValue",value:function(t){var e=0,r=0,n=!0,i=!1,o=void 0;try{for(var a,u=g.getGamepads()[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;if(s){var l=s.getStickValue(t),c=l.x,f=l.y;e+=c,r+=f}}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return{x:e,y:r}}},{key:"getStickDirection",value:function(t){var e=g.getGamepads().find(function(e){return!!e&&null!==e.getStickDirection(t)})||null;return e&&e.getStickDirection(t)}},{key:"stick",value:function(t){var e=this;return{has:function(){return e.hasStick(t)},query:function(){return e.getStickValue(t)},direction:function(){return e.getStickDirection(t)}}}}]),t}(),g=new(function(){function t(){h(this,t),this.cache=[],this.any=null}return v(t,[{key:"getGamepads",value:function(){var t=this;return f(navigator.getGamepads()).map(function(e,r){return e&&t.getGamepad(r)})}},{key:"getGamepad",value:function(t){return this.cache[t]=this.cache[t]||new p(t),this.cache[t]}},{key:"getAnyGamepad",value:function(){if(this.any)return this.any;var t=new y;return this.any=t,t}},{key:"key",value:function(t,e,r){var n=new Set(r||[]),i=!1,o=function(t,e){return t.has(u.ALT)===e.altKey&&t.has(u.CTRL)===e.ctrlKey&&t.has(u.META)===e.metaKey&&t.has(u.SHIFT)===e.shiftKey},a=function t(e,r){return e===r||!(null===r||!r.parentElement)&&t(e,r.parentElement)},s=function(r){r.key===t&&o(n,r)&&(e&&!a(e,window.document.activeElement)||(i=!0,r.preventDefault()))},l=function(r){r.key===t&&o(n,r)&&(e&&!a(e,window.document.activeElement)||(i=!1,r.preventDefault()))};return window.addEventListener("keydown",s),window.addEventListener("keyup",l),{has:function(){return!0},query:function(){return i},dispose:function(){window.removeEventListener("keydown",s),window.removeEventListener("keyup",l)}}}},{key:"or",value:function(t){return{has:function(){return!!t.find(function(t){return t.has()})},query:function(){return!!t.find(function(t){return t.query()})}}}},{key:"asStick",value:function(t,e,r,n){function i(){return{x:0+(t.query()?-1:0)+(e.query()?1:0),y:0+(r.query()?-1:0)+(n.query()?1:0)}}return{query:i,has:function(){return t.has()&&e.has()&&r.has()&&n.has()},direction:function(){var t=i(),e=t.x,r=t.y;return e<0&&0===r?a.UP:e>0&&0===r?a.DOWN:r<0&&0===e?a.LEFT:r>0&&0===e?a.RIGHT:null}}}},{key:"orSticks",value:function(t){function e(){var e=0,r=0,n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value.query(),l=s.x,c=s.y;e+=l,r+=c}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return{x:e,y:r}}return{query:e,has:function(){return!!t.find(function(t){return t.has()})},direction:function(){var t=e(),r=t.x,n=t.y;return r<0&&0===n?a.UP:r>0&&0===n?a.DOWN:n<0&&0===r?a.LEFT:n>0&&0===r?a.RIGHT:null}}}}]),t}())},function(t,e,r){var n=r(11),i=r(41);t.exports=r(10)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(4),i=r(17),o=r(21),a=r(42)("src"),u=Function.toString,s=(""+u).split("toString");r(25).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,r,u){var l="function"==typeof r;l&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(l&&(o(r,a)||i(r,a,t[e]?""+t[e]:s.join(String(e)))),t===n?t[e]=r:u?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||u.call(this)})},function(t,e,r){var n=r(1),i=r(5),o=r(32),a=/"/g,u=function(t,e,r,n){var i=String(o(t)),u="<"+e;return""!==r&&(u+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),u+">"+i+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(u),n(n.P+n.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)}},function(t,e,r){"use strict";(function(t){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i;r.d(e,"a",function(){return i}),r.d(e,"b",function(){return u}),function(t){t.SEVERE="SEVERE",t.WARN="WARN",t.INFO="INFO",t.DEBUG="DEBUG",t.TRACE="TRACE"}(i||(i={}));var o=[i.SEVERE,i.WARN,i.INFO,i.DEBUG,i.TRACE];function a(t){return o.indexOf(t)}var u=new(function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentLevelNum=a(function(t){if(!t)return i.SEVERE;switch(t.toUpperCase()){case i.SEVERE:return i.SEVERE;case i.DEBUG:return i.DEBUG;case i.TRACE:return i.TRACE;default:throw new Error("ERROR: Invalid log level. valid levels are ".concat(JSON.stringify(o)))}}(t.env.LOG_LEVEL))}var r,u,s;return r=e,(u=[{key:"isLevel",value:function(t){return a(t)<=this.currentLevelNum}},{key:"warn",value:function(t){this.log(i.WARN,t)}},{key:"info",value:function(t){this.log(i.INFO,t)}},{key:"debug",value:function(t){this.log(i.DEBUG,t)}},{key:"trace",value:function(t){this.log(i.TRACE,t)}},{key:"logFn",value:function(t,e){this.isLevel(t)&&console.warn(e())}},{key:"log",value:function(t,e){"string"==typeof e?this.logFn(t,function(){return e}):this.logFn(t,e)}}])&&n(r.prototype,u),s&&n(r,s),e}())}).call(this,r(107))},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(58),i=r(32);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(59),i=r(41),o=r(22),a=r(31),u=r(21),s=r(110),l=Object.getOwnPropertyDescriptor;e.f=r(10)?l:function(t,e){if(t=o(t),e=a(e,!0),s)try{return l(t,e)}catch(t){}if(u(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(21),i=r(12),o=r(81)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e){var r=t.exports={version:"2.6.0"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(15);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){"use strict";var n=r(5);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,r){"use strict";r.d(e,"a",function(){return d}),r.d(e,"b",function(){return v});var n=r(13);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function t(e,r,n){f(this,t),this.r=e,this.g=r,this.b=n},d=function(t){function e(t,r){var n;return f(this,e),(n=u(this,s(e).call(this,t))).hex=r,n}return l(e,n["a"]),a(e,[{key:"isTransparent",value:function(){return!1}},{key:"toRgb",value:function(){return function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,n){return e+e+r+r+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(e)return new h(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16));throw new Error("BUG: hex color was invalid")}(this.hex)}},{key:"toHex",value:function(){return this.hex}}]),e}(),v=function(t){function e(t){return f(this,e),u(this,s(e).call(this,t))}return l(e,n["a"]),a(e,[{key:"isTransparent",value:function(){return!0}},{key:"toRgb",value:function(){throw new Error("BUG: Transparent colors do not have RGB data")}},{key:"toHex",value:function(){throw new Error("BUG: Transparent colors do not have a hex color value")}}]),e}()},function(t,e,r){var n=r(6);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(1),i=r(25),o=r(5);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(t,e,r){var n=r(26),i=r(58),o=r(12),a=r(9),u=r(97);t.exports=function(t,e){var r=1==t,s=2==t,l=3==t,c=4==t,f=6==t,h=5==t||f,d=e||u;return function(e,u,v){for(var p,y,g=o(e),m=i(g),b=n(u,v,3),_=a(m.length),w=0,S=r?d(e,_):s?d(e,0):void 0;_>w;w++)if((h||w in m)&&(y=b(p=m[w],w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return p;case 6:return w;case 2:S.push(p)}else if(c)return!1;return f?-1:l||c?c:S}}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if(r(10)){var i=r(38),o=r(4),a=r(5),u=r(1),s=r(74),l=r(105),c=r(26),f=r(48),h=r(41),d=r(17),v=r(50),p=r(28),y=r(9),g=r(138),m=r(44),b=r(31),_=r(21),w=r(52),S=r(6),E=r(12),k=r(94),T=r(45),O=r(24),x=r(46).f,M=r(96),C=r(42),R=r(8),A=r(34),I=r(64),L=r(61),P=r(99),N=r(54),D=r(69),j=r(47),B=r(98),F=r(127),G=r(11),U=r(23),W=G.f,H=U.f,q=o.RangeError,z=o.TypeError,V=o.Uint8Array,K=Array.prototype,Y=l.ArrayBuffer,X=l.DataView,J=A(0),$=A(2),Z=A(3),Q=A(4),tt=A(5),et=A(6),rt=I(!0),nt=I(!1),it=P.values,ot=P.keys,at=P.entries,ut=K.lastIndexOf,st=K.reduce,lt=K.reduceRight,ct=K.join,ft=K.sort,ht=K.slice,dt=K.toString,vt=K.toLocaleString,pt=R("iterator"),yt=R("toStringTag"),gt=C("typed_constructor"),mt=C("def_constructor"),bt=s.CONSTR,_t=s.TYPED,wt=s.VIEW,St=A(1,function(t,e){return xt(L(t,t[mt]),e)}),Et=a(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),kt=!!V&&!!V.prototype.set&&a(function(){new V(1).set({})}),Tt=function(t,e){var r=p(t);if(r<0||r%e)throw q("Wrong offset!");return r},Ot=function(t){if(S(t)&&_t in t)return t;throw z(t+" is not a typed array!")},xt=function(t,e){if(!(S(t)&&gt in t))throw z("It is not a typed array constructor!");return new t(e)},Mt=function(t,e){return Ct(L(t,t[mt]),e)},Ct=function(t,e){for(var r=0,n=e.length,i=xt(t,n);n>r;)i[r]=e[r++];return i},Rt=function(t,e,r){W(t,e,{get:function(){return this._d[r]}})},At=function(t){var e,r,n,i,o,a,u=E(t),s=arguments.length,l=s>1?arguments[1]:void 0,f=void 0!==l,h=M(u);if(null!=h&&!k(h)){for(a=h.call(u),n=[],e=0;!(o=a.next()).done;e++)n.push(o.value);u=n}for(f&&s>2&&(l=c(l,arguments[2],2)),e=0,r=y(u.length),i=xt(this,r);r>e;e++)i[e]=f?l(u[e],e):u[e];return i},It=function(){for(var t=0,e=arguments.length,r=xt(this,e);e>t;)r[t]=arguments[t++];return r},Lt=!!V&&a(function(){vt.call(new V(1))}),Pt=function(){return vt.apply(Lt?ht.call(Ot(this)):Ot(this),arguments)},Nt={copyWithin:function(t,e){return F.call(Ot(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(Ot(this),arguments)},filter:function(t){return Mt(this,$(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return tt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return et(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){J(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Ot(this),arguments)},lastIndexOf:function(t){return ut.apply(Ot(this),arguments)},map:function(t){return St(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Ot(this),arguments)},reduceRight:function(t){return lt.apply(Ot(this),arguments)},reverse:function(){for(var t,e=Ot(this).length,r=Math.floor(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return Z(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ft.call(Ot(this),t)},subarray:function(t,e){var r=Ot(this),n=r.length,i=m(t,n);return new(L(r,r[mt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,y((void 0===e?n:m(e,n))-i))}},Dt=function(t,e){return Mt(this,ht.call(Ot(this),t,e))},jt=function(t){Ot(this);var e=Tt(arguments[1],1),r=this.length,n=E(t),i=y(n.length),o=0;if(i+e>r)throw q("Wrong length!");for(;o<i;)this[e+o]=n[o++]},Bt={entries:function(){return at.call(Ot(this))},keys:function(){return ot.call(Ot(this))},values:function(){return it.call(Ot(this))}},Ft=function(t,e){return S(t)&&t[_t]&&"symbol"!=n(e)&&e in t&&String(+e)==String(e)},Gt=function(t,e){return Ft(t,e=b(e,!0))?h(2,t[e]):H(t,e)},Ut=function(t,e,r){return!(Ft(t,e=b(e,!0))&&S(r)&&_(r,"value"))||_(r,"get")||_(r,"set")||r.configurable||_(r,"writable")&&!r.writable||_(r,"enumerable")&&!r.enumerable?W(t,e,r):(t[e]=r.value,t)};bt||(U.f=Gt,G.f=Ut),u(u.S+u.F*!bt,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:Ut}),a(function(){dt.call({})})&&(dt=vt=function(){return ct.call(this)});var Wt=v({},Nt);v(Wt,Bt),d(Wt,pt,Bt.values),v(Wt,{slice:Dt,set:jt,constructor:function(){},toString:dt,toLocaleString:Pt}),Rt(Wt,"buffer","b"),Rt(Wt,"byteOffset","o"),Rt(Wt,"byteLength","l"),Rt(Wt,"length","e"),W(Wt,yt,{get:function(){return this[_t]}}),t.exports=function(t,e,r,n){var l=t+((n=!!n)?"Clamped":"")+"Array",c="get"+t,h="set"+t,v=o[l],p=v||{},m=v&&O(v),b=!v||!s.ABV,_={},E=v&&v.prototype,k=function(t,r){W(t,r,{get:function(){return function(t,r){var n=t._d;return n.v[c](r*e+n.o,Et)}(this,r)},set:function(t){return function(t,r,i){var o=t._d;n&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[h](r*e+o.o,i,Et)}(this,r,t)},enumerable:!0})};b?(v=r(function(t,r,n,i){f(t,v,l,"_d");var o,a,u,s,c=0,h=0;if(S(r)){if(!(r instanceof Y||"ArrayBuffer"==(s=w(r))||"SharedArrayBuffer"==s))return _t in r?Ct(v,r):At.call(v,r);o=r,h=Tt(n,e);var p=r.byteLength;if(void 0===i){if(p%e)throw q("Wrong length!");if((a=p-h)<0)throw q("Wrong length!")}else if((a=y(i)*e)+h>p)throw q("Wrong length!");u=a/e}else u=g(r),o=new Y(a=u*e);for(d(t,"_d",{b:o,o:h,l:a,e:u,v:new X(o)});c<u;)k(t,c++)}),E=v.prototype=T(Wt),d(E,"constructor",v)):a(function(){v(1)})&&a(function(){new v(-1)})&&D(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=r(function(t,r,n,i){var o;return f(t,v,l),S(r)?r instanceof Y||"ArrayBuffer"==(o=w(r))||"SharedArrayBuffer"==o?void 0!==i?new p(r,Tt(n,e),i):void 0!==n?new p(r,Tt(n,e)):new p(r):_t in r?Ct(v,r):At.call(v,r):new p(g(r))}),J(m!==Function.prototype?x(p).concat(x(m)):x(p),function(t){t in v||d(v,t,p[t])}),v.prototype=E,i||(E.constructor=v));var M=E[pt],C=!!M&&("values"==M.name||null==M.name),R=Bt.values;d(v,gt,!0),d(E,_t,l),d(E,wt,!0),d(E,mt,v),(n?new v(1)[yt]==l:yt in E)||W(E,yt,{get:function(){return l}}),_[l]=v,u(u.G+u.W+u.F*(v!=p),_),u(u.S,l,{BYTES_PER_ELEMENT:e}),u(u.S+u.F*a(function(){p.of.call(v,1)}),l,{from:At,of:It}),"BYTES_PER_ELEMENT"in E||d(E,"BYTES_PER_ELEMENT",e),u(u.P,l,Nt),j(l),u(u.P+u.F*kt,l,{set:jt}),u(u.P+u.F*!C,l,Bt),i||E.toString==dt||(E.toString=dt),u(u.P+u.F*a(function(){new v(1).slice()}),l,{slice:Dt}),u(u.P+u.F*(a(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!a(function(){E.toLocaleString.call([1,2])})),l,{toLocaleString:Pt}),N[l]=C?M:R,i||C||d(E,pt,R)}}else t.exports=function(){}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(133),o=r(1),a=r(63)("metadata"),u=a.store||(a.store=new(r(136))),s=function(t,e,r){var n=u.get(t);if(!n){if(!r)return;u.set(t,n=new i)}var o=n.get(e);if(!o){if(!r)return;n.set(e,o=new i)}return o};t.exports={store:u,map:s,has:function(t,e,r){var n=s(e,r,!1);return void 0!==n&&n.has(t)},get:function(t,e,r){var n=s(e,r,!1);return void 0===n?void 0:n.get(t)},set:function(t,e,r,n){s(r,n,!0).set(t,e)},keys:function(t,e){var r=s(t,e,!1),n=[];return r&&r.forEach(function(t,e){n.push(e)}),n},key:function(t){return void 0===t||"symbol"==n(t)?t:String(t)},exp:function(t){o(o.S,"Reflect",t)}}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(42)("meta"),o=r(6),a=r(21),u=r(11).f,s=0,l=Object.isExtensible||function(){return!0},c=!r(5)(function(){return l(Object.preventExtensions({}))}),f=function(t){u(t,i,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==n(t)?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[i].i},getWeak:function(t,e){if(!a(t,i)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[i].w},onFreeze:function(t){return c&&h.NEED&&l(t)&&!a(t,i)&&f(t),t}}},function(t,e){t.exports=!1},function(t,e,r){var n=r(8)("unscopables"),i=Array.prototype;null==i[n]&&r(17)(i,n,{}),t.exports=function(t){i[n][t]=!0}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}r.d(e,"a",function(){return h});var c=r(106),f=function(){function t(e,r){u(this,t),this.bitSet=r||new c,e&&this.addAll(e)}return l(t,[{key:"isEmpty",value:function(){return this.bitSet.isEmpty()}},{key:"addAll",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.add(a)}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"add",value:function(t){this.bitSet.set(this._indexOf(t))}},{key:"remove",value:function(t){this.bitSet.clear(this._indexOf(t))}},{key:"has",value:function(t){return!!this.bitSet.get(this._indexOf(t))}},{key:"containsAll",value:function(t){return t.bitSet.cardinality()===this.bitSet.and(t.bitSet).cardinality()}},{key:"containsAny",value:function(t){return!this.bitSet.and(t.bitSet).isEmpty()}},{key:"containsNone",value:function(t){return t.bitSet.and(this.bitSet).isEmpty()}},{key:"_indexOf",value:function(t){var e=this.indexOf(t);if(e<0)throw new Error("BUG: Expected the item index to be >= 0 but it was ".concat(e));return e}}]),t}(),h=function(t){function e(){return u(this,e),i(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,f),l(e,[{key:"indexOf",value:function(t){return t.allSpritesBitSetIndex}},{key:"union",value:function(t){var e=this,r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;e=e.or(u)}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"toString",value:function(t){var e=[],r=!0,n=!1,i=void 0;try{for(var o,a=this.getSprites(t)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;e.push(u.getName())}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e.join(" ")}},{key:"getSprites",value:function(t){var e=new Set,r=!0,n=!1,i=void 0;try{for(var o,a=t.objects[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;this.has(u)&&e.add(u)}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"or",value:function(t){return new e(void 0,this.bitSet.or(t.bitSet))}}]),e}()},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(112),i=r(82);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var n=r(28),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(3),i=r(113),o=r(82),a=r(81)("IE_PROTO"),u=function(){},s=function(){var t,e=r(79)("iframe"),n=o.length;for(e.style.display="none",r(83).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;n--;)delete s.prototype[o[n]];return s()};t.exports=Object.create||function(t,e){var r;return null!==t?(u.prototype=n(t),r=new u,u.prototype=null,r[a]=t):r=s(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(112),i=r(82).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){"use strict";var n=r(4),i=r(11),o=r(10),a=r(8)("species");t.exports=function(t){var e=n[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(26),i=r(125),o=r(94),a=r(3),u=r(9),s=r(96),l={},c={};(e=t.exports=function(t,e,r,f,h){var d,v,p,y,g=h?function(){return t}:s(t),m=n(r,f,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=u(t.length);d>b;b++)if((y=e?m(a(v=t[b])[0],v[1]):m(t[b]))===l||y===c)return y}else for(p=g.call(t);!(v=p.next()).done;)if((y=i(p,m,v.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e,r){var n=r(18);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){var n=r(11).f,i=r(21),o=r(8)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(27),i=r(8)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?r:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,r){var n=r(1),i=r(32),o=r(5),a=r(85),u="["+a+"]",s=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),c=function(t,e,r){var i={},u=o(function(){return!!a[t]()||""!=""[t]()}),s=i[t]=u?e(f):a[t];r&&(i[r]=s),n(n.P+n.F*u,"String",i)},f=c.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(s,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},function(t,e){t.exports={}},function(t,e,r){var n=r(6);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,r){"use strict";r.d(e,"b",function(){return v}),r.d(e,"a",function(){return p});var n,i=r(13);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t){t.NO="NO",t.ALL="ALL",t.ANY="ANY",t.SOME="SOME"}(n||(n={}));var v=function(t){function e(t,r,n){var i;if(u(this,e),(i=c(this,f(e).call(this,t))).qualifier=r,i.tile=n,!n)throw new Error("BUG: Could not find win condition tile");return i}return h(e,i["a"]),l(e,[{key:"cellsThatMatchTile",value:function(t,e){return a(t).filter(function(t){return e.matchesCell(t)})}},{key:"isSatisfied",value:function(t){var e=this._isSatisfied(t);return e}},{key:"a11yGetTiles",value:function(){return[this.tile]}},{key:"_isSatisfied",value:function(t){var e=this.cellsThatMatchTile(t,this.tile);switch(this.qualifier){case n.NO:return 0===e.length;case n.ANY:case n.SOME:return e.length>0;default:throw new Error('BUG: Invalid qualifier: "'.concat(this.qualifier,'"'))}}}]),e}(),p=function(t){function e(t,r,n,i){var o;return u(this,e),(o=c(this,f(e).call(this,t,r,n))).onTile=i,o}return h(e,v),l(e,[{key:"a11yGetTiles",value:function(){return[this.tile,this.onTile]}},{key:"_isSatisfied",value:function(t){var e=this.cellsThatMatchTile(t,this.tile),r=this.cellsThatMatchTile(e,this.onTile);switch(this.qualifier){case n.NO:return 0===r.length;case n.ANY:case n.SOME:return r.length>0;case n.ALL:return r.length===e.length;default:throw new Error('BUG: Invalid qualifier: "'.concat(this.qualifier,'"'))}}}]),e}()},function(t,e,r){"use strict";r.d(e,"a",function(){return h});var n=r(0),i=r(13);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var f=0,h=function(t){function e(t,r){var i,u,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u=this,l=s(e).call(this,t),(i=!l||"object"!==o(l)&&"function"!=typeof l?c(u):l).id=f++,r.forEach(function(t){t.setCollisionLayer(c(c(i))),t._getDescendantTiles().forEach(function(t){t.setCollisionLayer(c(c(i)))})}),i.sprites=a(new Set(Object(n.g)(r.map(function(t){return t.getSprites()})))),i.sprites.forEach(function(t,e){return t.setCollisionLayerAndIndex(c(c(i)),e)}),i}var r,h,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,i["a"]),r=e,(h=[{key:"getBitSetIndexOf",value:function(t){var e=this.sprites.indexOf(t);if(e<0)throw new Error("BUG: Sprite is not in this CollisionLayer");return e}}])&&u(r.prototype,h),d&&u(r,d),e}()},function(t,e,r){var n=r(27);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){"use strict";var n=r(3);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){var n=r(3),i=r(15),o=r(8)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[o])?e:i(r)}},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",function(){return o}),r.d(e,"b",function(){return a});var o=function t(e,r){i(this,t),this.width=e,this.height=r},a=function(){function t(){i(this,t),this.noAction=!1,this.noUndo=!1,this.noRepeatAction=!1,this.throttleMovement=!1,this.noRestart=!1,this.requirePlayerMovement=!1,this.verboseLogging=!1,this.author=null,this.homepage=null,this.youtube=null,this.zoomscreen=null,this.flickscreen=null,this.colorPalette=null,this.backgroundColor=null,this.textColor=null,this.realtimeInterval=null,this.keyRepeatInterval=null,this.againInterval=null,this.runRulesOnLevelStart=null}var e,r,o;return e=t,(r=[{key:"_setValue",value:function(t,e){switch(t.toLowerCase()){case"author":this.author=e;break;case"homepage":this.homepage=e;break;case"youtube":this.youtube=e;break;case"zoomscreen":this.zoomscreen=e;break;case"flickscreen":this.flickscreen=e;break;case"colorpalette":case"color_palette":this.colorPalette=e;break;case"backgroundcolor":case"background_color":this.backgroundColor=e;break;case"textcolor":case"text_color":this.textColor=e;break;case"realtimeinterval":case"realtime_interval":this.realtimeInterval=e;break;case"keyrepeatinterval":case"key_repeat_interval":this.keyRepeatInterval=e;break;case"againinterval":case"again_interval":this.againInterval=e;break;case"noaction":this.noAction=e;break;case"noundo":this.noUndo=e;break;case"runrulesonlevelstart":case"run_rules_on_level_start":this.runRulesOnLevelStart=e;break;case"norepeataction":case"norepeat_action":this.noRepeatAction=e;break;case"throttlemovement":case"throttle_movement":this.throttleMovement=e;break;case"norestart":this.noRestart=e;break;case"requireplayermovement":case"require_player_movement":this.requirePlayerMovement=e;break;case"verboselogging":case"verbose_logging":this.verboseLogging=e;break;default:throw new Error('BUG: Unsupported config field "'.concat(t,'" with value "').concat(e,'"'))}}}])&&n(e.prototype,r),o&&n(e,o),t}()},function(t,e,r){var n=r(25),i=r(4),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(38)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(22),i=r(9),o=r(44);t.exports=function(t){return function(e,r,a){var u,s=n(e),l=i(s.length),c=o(a,l);if(t&&r!=r){for(;l>c;)if((u=s[c++])!=u)return!0}else for(;l>c;c++)if((t||c in s)&&s[c]===r)return t||c||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(27);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(28),i=r(32);t.exports=function(t){return function(e,r){var o,a,u=String(i(e)),s=n(r),l=u.length;return s<0||s>=l?t?"":void 0:(o=u.charCodeAt(s))<55296||o>56319||s+1===l||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):o:t?u.slice(s,s+2):a-56320+(o-55296<<10)+65536}}},function(t,e,r){var n=r(6),i=r(27),o=r(8)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){var n=r(8)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},t(o)}catch(t){}return r}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(52),o=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var a=r.call(t,e);if("object"!==n(a))throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,r){"use strict";r(129);var n=r(18),i=r(17),o=r(5),a=r(32),u=r(8),s=r(100),l=u("species"),c=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var h=u(t),d=!o(function(){var e={};return e[h]=function(){return 7},7!=""[t](e)}),v=d?!o(function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[l]=function(){return r}),r[h](""),!e}):void 0;if(!d||!v||"replace"===t&&!c||"split"===t&&!f){var p=/./[h],y=r(a,h,""[t],function(t,e,r,n,i){return e.exec===s?d&&!i?{done:!0,value:p.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),g=y[0],m=y[1];n(String.prototype,t,g),i(RegExp.prototype,h,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},function(t,e,r){var n=r(4).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){"use strict";var n=r(4),i=r(1),o=r(18),a=r(50),u=r(37),s=r(49),l=r(48),c=r(6),f=r(5),h=r(69),d=r(51),v=r(86);t.exports=function(t,e,r,p,y,g){var m=n[t],b=m,_=y?"set":"add",w=b&&b.prototype,S={},E=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof b&&(g||w.forEach&&!f(function(){(new b).entries().next()}))){var k=new b,T=k[_](g?{}:-0,1)!=k,O=f(function(){k.has(1)}),x=h(function(t){new b(t)}),M=!g&&f(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});x||((b=e(function(e,r){l(e,b,t);var n=v(new m,e,b);return null!=r&&s(r,y,n[_],n),n})).prototype=w,w.constructor=b),(O||M)&&(E("delete"),E("has"),y&&E("get")),(M||T)&&E(_),g&&w.clear&&delete w.clear}else b=p.getConstructor(e,t,y,_),a(b.prototype,r),u.NEED=!0;return d(b,t),S[t]=b,i(i.G+i.W+i.F*(b!=m),S),g||p.setStrong(b,t,y),b}},function(t,e,r){for(var n,i=r(4),o=r(17),a=r(42),u=a("typed_array"),s=a("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(n=i[h[f++]])?(o(n.prototype,u,!0),o(n.prototype,s,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:u,VIEW:s}},function(t,e,r){"use strict";t.exports=r(38)||!r(5)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(4)[t]})},function(t,e,r){"use strict";var n=r(1);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,r){"use strict";var n=r(1),i=r(15),o=r(26),a=r(49);t.exports=function(t){n(n.S,t,{from:function(t){var e,r,n,u,s=arguments[1];return i(this),(e=void 0!==s)&&i(s),null==t?new this:(r=[],e?(n=0,u=o(s,arguments[2],2),a(t,!1,function(t){r.push(u(t,n++))})):a(t,!1,r.push,r),new this(r))}})}},function(t,e,r){"use strict";var n=r(30),i=r(14);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=new Map;function u(t,e,r){var o=new n.a(t,"#ffffff"),a=new n.a(t,"#000000"),u=r.map(function(t){return t.map(function(t){return 0===t?a:o})});return new i.e(t,'letterchar="'.concat(e,'"'),"",u)}function s(t,e){a.set(t,e)}s("a",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,0]]),s("b",[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,0,0],[1,0,0,1,0],[0,1,1,0,0]]),s("c",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[0,1,1,1,0]]),s("d",[[0,0,0,1,0],[0,0,0,1,0],[0,1,1,1,0],[1,0,0,1,0],[0,1,1,0,0]]),s("e",[[0,1,1,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,0,0],[0,1,1,0,0]]),s("f",[[0,0,0,0,0],[0,0,1,1,0],[0,1,0,0,0],[1,1,1,0,0],[0,1,0,0,0]]),s("g",[[0,1,1,0,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0],[0,1,1,0,0]]),s("h",[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0]]),s("i",[[0,0,1,0,0],[0,0,0,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,1,1,1,0]]),s("j",[[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[1,0,1,0,0],[0,1,0,0,0]]),s("k",[[1,0,0,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0]]),s("l",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,1,0],[0,1,1,0,0]]),s("m",[[0,0,0,0,0],[0,1,0,1,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]]),s("n",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0]]),s("o",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,0,0,1,0],[0,1,1,0,0]]),s("p",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[1,1,1,0,0],[1,0,0,0,0]]),s("q",[[0,0,0,0,0],[0,1,1,0,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0]]),s("r",[[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0]]),s("s",[[0,1,1,1,0],[1,0,0,0,0],[0,1,1,0,0],[0,0,0,1,0],[1,1,1,0,0]]),s("t",[[0,1,0,0,0],[1,1,1,0,0],[0,1,0,0,0],[0,1,0,0,1],[0,0,1,1,0]]),s("u",[[0,0,0,0,0],[1,0,0,1,0],[1,0,0,1,0],[1,0,0,1,0],[1,1,1,0,0]]),s("v",[[0,0,0,0,0],[1,0,0,1,0],[1,0,1,0,0],[1,1,0,0,0],[1,0,0,0,0]]),s("w",[[0,0,0,0,0],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,0,1,0]]),s("x",[[0,0,0,0,0],[1,0,0,1,0],[0,1,1,0,0],[0,1,1,0,0],[1,0,0,1,0]]),s("y",[[1,0,0,1,0],[1,0,0,1,0],[0,1,1,1,0],[0,0,0,1,0],[1,1,1,0,0]]),s("z",[[0,0,0,0,0],[1,1,1,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,0]]),s("A",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]]),s("B",[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0]]),s("C",[[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]]),s("D",[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0]]),s("E",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]]),s("F",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]]),s("G",[[0,1,1,1,1],[1,0,0,0,0],[1,0,0,1,1],[1,0,0,0,1],[0,1,1,1,1]]),s("H",[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]]),s("I",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]]),s("J",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,0,0]]),s("K",[[1,0,0,0,1],[1,0,1,1,0],[1,1,0,0,0],[1,0,1,1,0],[1,0,0,0,1]]),s("L",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]]),s("M",[[1,1,1,1,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1]]),s("N",[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1]]),s("O",[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]]),s("P",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]]),s("Q",[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,0,0,1],[0,0,0,0,1]]),s("R",[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1]]),s("S",[[0,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),s("T",[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]]),s("U",[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]]),s("V",[[1,0,0,0,1],[0,1,0,1,0],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0]]),s("W",[[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,0,1,0]]),s("X",[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]]),s("Y",[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]]),s("Z",[[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]),s("0",[[1,1,1,1,1],[1,0,0,1,1],[1,0,1,0,1],[1,1,0,0,1],[1,1,1,1,1]]),s("1",[[1,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]]),s("2",[[1,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]]),s("3",[[1,1,1,1,0],[0,0,0,0,1],[0,0,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),s("4",[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,1,0],[1,1,1,1,1],[0,0,0,1,0]]),s("5",[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]]),s("6",[[0,1,1,1,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0]]),s("7",[[1,1,1,1,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]]),s("8",[[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,0]]),s("9",[[0,1,1,1,0],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,1,1,1,0]]),s(".",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0]]),s(",",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,1,0,0]]),s(";",[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,1,0,0]]),s(":",[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0]]),s("?",[[0,1,1,1,0],[1,0,0,0,1],[0,0,1,1,0],[0,0,1,0,0],[0,0,1,0,0]]),s("!",[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0]]),s("@",[[0,1,1,1,0],[1,0,0,0,1],[1,0,1,1,1],[1,0,0,0,0],[0,1,1,1,0]]),s("",[[0,1,1,1,0],[0,1,0,0,1],[1,1,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]),s("$",[[0,1,1,1,1],[1,0,1,0,0],[0,1,1,1,0],[0,0,1,0,1],[1,1,1,1,0]]),s("%",[[1,1,0,0,1],[1,1,0,1,0],[0,0,1,0,0],[0,1,0,1,1],[1,0,0,1,1]]),s("^",[[0,0,1,0,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),s("&",[[0,1,1,0,0],[1,0,0,0,0],[0,1,0,1,1],[1,0,0,1,0],[0,1,1,0,0]]),s("*",[[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0]]),s("(",[[0,0,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,1,0]]),s(")",[[0,1,0,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,0,0,0]]),s("+",[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]]),s("-",[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]]),s("_",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1]]),s("=",[[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0]]),s(" ",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),s("{",[[0,0,1,1,0],[0,0,1,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,1,1,0]]),s("}",[[0,1,1,0,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,1,0,0],[0,1,1,0,0]]),s("[",[[0,0,1,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,1,0]]),s("]",[[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,0,0]]),s("'",[[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),s('"',[[0,1,0,1,0],[0,1,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),s("/",[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]]),s("\\",[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]]),s("|",[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]]),s("<",[[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0]]),s(">",[[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]]),s("~",[[0,0,0,0,0],[0,1,0,0,0],[1,0,1,0,1],[0,0,0,1,0],[0,0,0,0,0]]),s("`",[[0,1,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]),s("#",[[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0]]);var l=r(57);function c(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.d(e,"a",function(){return h});var h=function(){function t(e,r,n,i,s,f,h,d,v,p){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=r,this.metadata=n,this.objects=i,this.legends=s,this.sounds=f,this.collisionLayers=h,this.winConditions=v,this.levels=p,this.rules=d,this.cachedBackgroundSprite=null;var y=this.objects.filter(function(t){return t.hasPixels()})[0];if(y){var g=y.getPixels(1,1);this.cacheSpriteSize={spriteHeight:g.length,spriteWidth:g[0].length}}else this.cacheSpriteSize={spriteHeight:1,spriteWidth:1};var m=this.objects.length;this.letterSprites=function(t){var e=new Map,r=!0,n=!1,i=void 0;try{for(var s,l=a.entries()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=o(s.value,2),f=c[0],h=u(t,f,c[1]);e.set(f,h)}}catch(t){n=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return e}(e);var b=!0,_=!1,w=void 0;try{for(var S,E=this.letterSprites.values()[Symbol.iterator]();!(b=(S=E.next()).done);b=!0){S.value.allSpritesBitSetIndex=m++}}catch(t){_=!0,w=t}finally{try{b||null==E.return||E.return()}finally{if(_)throw w}}var k=new l.a(e,c(this.letterSprites.values()));this.collisionLayers.push(k)}var e,r,n;return e=t,(r=[{key:"_getSpriteByName",value:function(t){return this.objects.find(function(e){return e.getName().toLowerCase()===t.toLowerCase()})||null}},{key:"_getTileByName",value:function(t){return this.legends.find(function(e){return e.getName().toLowerCase()===t.toLowerCase()})}},{key:"getSpriteByName",value:function(t){var e=this._getSpriteByName(t);if(!e)throw new Error('BUG: Could not find sprite "'.concat(t,'" but expected one to exist.'));return e}},{key:"getTileByName",value:function(t){var e=this._getTileByName(t);if(!e)throw new Error('BUG: Could not find tile "'.concat(t,'" but expected one to exist.'));return e}},{key:"getMagicBackgroundSprite",value:function(){if(this.cachedBackgroundSprite)return this.cachedBackgroundSprite;var t=this._getSpriteByName("background");if(!t){var e=this.legends.find(function(t){return"background"===t.getName().toLowerCase()});if(e)return e.isOr()?null:e.getSprites()[0]}if(!t)throw new Error("ERROR: Game does not have a Background Sprite or Tile");return this.cachedBackgroundSprite=t,t}},{key:"getPlayer",value:function(){var t=this._getSpriteByName("player")||this.legends.find(function(t){return"player"===t.getName().toLowerCase()});if(!t)throw new Error("BUG: Could not find the Player sprite or tile in the game");return t}},{key:"clearCaches",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.rules[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.clearCaches()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}var o=!0,a=!1,u=void 0;try{for(var s,l=this.objects[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){s.value.clearCaches()}}catch(t){a=!0,u=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}}},{key:"getSpriteSize",value:function(){return this.cacheSpriteSize}},{key:"getLetterSprite",value:function(t){var e=this.letterSprites.get(t);if(!e)throw new Error('BUG: Cannot find sprite for letter "'.concat(t,'"'));return e}}])&&f(e.prototype,r),n&&f(e,n),t}()},function(t,e,r){var n=r(6),i=r(4).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(4),i=r(25),o=r(38),a=r(111),u=r(11).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:a.f(t)})}},function(t,e,r){var n=r(63)("keys"),i=r(42);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(4).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(6),i=r(3),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=r(26)(Function.call,r(23).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,r){var n=r(6),i=r(84).set;t.exports=function(t,e,r){var o,a=e.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},function(t,e,r){"use strict";var n=r(28),i=r(32);t.exports=function(t){var e=String(i(this)),r="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,e,r){"use strict";var n=r(38),i=r(1),o=r(18),a=r(17),u=r(54),s=r(91),l=r(51),c=r(24),f=r(8)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,r,v,p,y,g){s(r,e,v);var m,b,_,w=function(t){if(!h&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=e+" Iterator",E="values"==p,k=!1,T=t.prototype,O=T[f]||T["@@iterator"]||p&&T[p],x=O||w(p),M=p?E?w("entries"):x:void 0,C="Array"==e&&T.entries||O;if(C&&(_=c(C.call(new t)))!==Object.prototype&&_.next&&(l(_,S,!0),n||"function"==typeof _[f]||a(_,f,d)),E&&O&&"values"!==O.name&&(k=!0,x=function(){return O.call(this)}),n&&!g||!h&&!k&&T[f]||a(T,f,x),u[e]=x,u[S]=d,p)if(m={values:E?x:w("values"),keys:y?x:w("keys"),entries:M},g)for(b in m)b in T||o(T,b,m[b]);else i(i.P+i.F*(h||k),e,m);return m}},function(t,e,r){"use strict";var n=r(45),i=r(41),o=r(51),a={};r(17)(a,r(8)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){var n=r(68),i=r(32);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,e,r){var n=r(8)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,r){var n=r(54),i=r(8)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e,r){"use strict";var n=r(11),i=r(41);t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},function(t,e,r){var n=r(52),i=r(8)("iterator"),o=r(54);t.exports=r(25).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(245);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){"use strict";var n=r(12),i=r(44),o=r(9);t.exports=function(t){for(var e=n(this),r=o(e.length),a=arguments.length,u=i(a>1?arguments[1]:void 0,r),s=a>2?arguments[2]:void 0,l=void 0===s?r:i(s,r);l>u;)e[u++]=t;return e}},function(t,e,r){"use strict";var n=r(39),i=r(128),o=r(54),a=r(22);t.exports=r(90)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,r){"use strict";var n,i,o=r(60),a=RegExp.prototype.exec,u=String.prototype.replace,s=a,l=(n=/a/,i=/b*/g,a.call(n,"a"),a.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(l||c)&&(s=function(t){var e,r,n,i,s=this;return c&&(r=new RegExp("^"+s.source+"$(?!\\s)",o.call(s))),l&&(e=s.lastIndex),n=a.call(s,t),l&&n&&(s.lastIndex=s.global?n.index+n[0].length:e),c&&n&&n.length>1&&u.call(n[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n}),t.exports=s},function(t,e,r){"use strict";var n=r(67)(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var n,i,o,a=r(26),u=r(118),s=r(83),l=r(79),c=r(4),f=c.process,h=c.setImmediate,d=c.clearImmediate,v=c.MessageChannel,p=c.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){m.call(t.data)};h&&d||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return g[++y]=function(){u("function"==typeof t?t:Function(t),e)},n(y),y},d=function(t){delete g[t]},"process"==r(27)(f)?n=function(t){f.nextTick(a(m,t,1))}:p&&p.now?n=function(t){p.now(a(m,t,1))}:v?(o=(i=new v).port2,i.port1.onmessage=b,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):n="onreadystatechange"in l("script")?function(t){s.appendChild(l("script")).onreadystatechange=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:h,clear:d}},function(t,e,r){var n=r(4),i=r(102).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,u=n.Promise,s="process"==r(27)(a);t.exports=function(){var t,e,r,l=function(){var n,i;for(s&&(n=a.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(s)r=function(){a.nextTick(l)};else if(!o||n.navigator&&n.navigator.standalone)if(u&&u.resolve){var c=u.resolve(void 0);r=function(){c.then(l)}}else r=function(){i.call(n,l)};else{var f=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e,r){"use strict";var n=r(15);function i(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new i(t)}},function(t,e,r){"use strict";var n=r(4),i=r(10),o=r(38),a=r(74),u=r(17),s=r(50),l=r(5),c=r(48),f=r(28),h=r(9),d=r(138),v=r(46).f,p=r(11).f,y=r(98),g=r(51),m="prototype",b="Wrong index!",_=n.ArrayBuffer,w=n.DataView,S=n.Math,E=n.RangeError,k=n.Infinity,T=_,O=S.abs,x=S.pow,M=S.floor,C=S.log,R=S.LN2,A=i?"_b":"buffer",I=i?"_l":"byteLength",L=i?"_o":"byteOffset";function P(t,e,r){var n,i,o,a=new Array(r),u=8*r-e-1,s=(1<<u)-1,l=s>>1,c=23===e?x(2,-24)-x(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=O(t))!=t||t===k?(i=t!=t?1:0,n=s):(n=M(C(t)/R),t*(o=x(2,-n))<1&&(n--,o*=2),(t+=n+l>=1?c/o:c*x(2,1-l))*o>=2&&(n++,o/=2),n+l>=s?(i=0,n=s):n+l>=1?(i=(t*o-1)*x(2,e),n+=l):(i=t*x(2,l-1)*x(2,e),n=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(n=n<<e|i,u+=e;u>0;a[f++]=255&n,n/=256,u-=8);return a[--f]|=128*h,a}function N(t,e,r){var n,i=8*r-e-1,o=(1<<i)-1,a=o>>1,u=i-7,s=r-1,l=t[s--],c=127&l;for(l>>=7;u>0;c=256*c+t[s],s--,u-=8);for(n=c&(1<<-u)-1,c>>=-u,u+=e;u>0;n=256*n+t[s],s--,u-=8);if(0===c)c=1-a;else{if(c===o)return n?NaN:l?-k:k;n+=x(2,e),c-=a}return(l?-1:1)*n*x(2,c-e)}function D(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function j(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function F(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function G(t){return P(t,52,8)}function U(t){return P(t,23,4)}function W(t,e,r){p(t[m],e,{get:function(){return this[r]}})}function H(t,e,r,n){var i=d(+r);if(i+e>t[I])throw E(b);var o=t[A]._b,a=i+t[L],u=o.slice(a,a+e);return n?u:u.reverse()}function q(t,e,r,n,i,o){var a=d(+r);if(a+e>t[I])throw E(b);for(var u=t[A]._b,s=a+t[L],l=n(+i),c=0;c<e;c++)u[s+c]=l[o?c:e-c-1]}if(a.ABV){if(!l(function(){_(1)})||!l(function(){new _(-1)})||l(function(){return new _,new _(1.5),new _(NaN),"ArrayBuffer"!=_.name})){for(var z,V=(_=function(t){return c(this,_),new T(d(t))})[m]=T[m],K=v(T),Y=0;K.length>Y;)(z=K[Y++])in _||u(_,z,T[z]);o||(V.constructor=_)}var X=new w(new _(2)),J=w[m].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||s(w[m],{setInt8:function(t,e){J.call(this,t,e<<24>>24)},setUint8:function(t,e){J.call(this,t,e<<24>>24)}},!0)}else _=function(t){c(this,_,"ArrayBuffer");var e=d(t);this._b=y.call(new Array(e),0),this[I]=e},w=function(t,e,r){c(this,w,"DataView"),c(t,_,"DataView");var n=t[I],i=f(e);if(i<0||i>n)throw E("Wrong offset!");if(i+(r=void 0===r?n-i:h(r))>n)throw E("Wrong length!");this[A]=t,this[L]=i,this[I]=r},i&&(W(_,"byteLength","_l"),W(w,"buffer","_b"),W(w,"byteLength","_l"),W(w,"byteOffset","_o")),s(w[m],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return D(H(this,4,t,arguments[1]))},getUint32:function(t){return D(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return N(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return N(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){q(this,1,t,j,e)},setUint8:function(t,e){q(this,1,t,j,e)},setInt16:function(t,e){q(this,2,t,B,e,arguments[2])},setUint16:function(t,e){q(this,2,t,B,e,arguments[2])},setInt32:function(t,e){q(this,4,t,F,e,arguments[2])},setUint32:function(t,e){q(this,4,t,F,e,arguments[2])},setFloat32:function(t,e){q(this,4,t,U,e,arguments[2])},setFloat64:function(t,e){q(this,8,t,G,e,arguments[2])}});g(_,"ArrayBuffer"),g(w,"DataView"),u(w[m],a.VIEW,!0),e.ArrayBuffer=_,e.DataView=w},function(t,e,r){var n;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/**
 * @license BitSet.js v5.0.4 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license BitSet.js v5.0.4 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
!function(r){"use strict";var o=32,a=5;function u(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}function s(t,e){for(var r=0,n=0;n<t.length;n++){r*=2;var i=(t[n]+r)/e|0;r=(t[n]+r)%e,t[n]=i}return r}function l(t,e){if(null==e)return t.data=[0,0,0,0,0,0,0,0,0,0],void(t._=0);if(e instanceof c)return t.data=e.data,void(t._=e._);switch(i(e)){case"number":t.data=[0|e],t._=0;break;case"string":var r=2,n=o;0===e.indexOf("0b")?e=e.substr(2):0===e.indexOf("0x")&&(e=e.substr(2),r=16,n=8),t.data=[],t._=0;for(var u=e.length-n,s=e.length;;){var l=parseInt(e.slice(u>0?u:0,s),r);if(isNaN(l))throw SyntaxError("Invalid param");if(t.data.push(0|l),u<=0)break;u-=n,s-=n}break;default:t.data=[0];var h=t.data;if(e instanceof Array){for(var d=e.length-1;d>=0;d--){var v=e[d];v===1/0?t._=-1:(f(t,v),h[v>>>a]|=1<<v)}break}if(Uint8Array&&e instanceof Uint8Array){f(t,8*e.length);for(d=0;d<e.length;d++)for(var p=e[d],y=0;y<8;y++){var g=8*d+y;h[g>>>a]|=(p>>y&1)<<g}break}throw SyntaxError("Invalid param")}}function c(t){if(!(this instanceof c))return new c(t);l(this,t),this.data=this.data.slice()}function f(t,e){for(var r=e>>>a,n=t.data,i=t._,o=n.length;r>=o;r--)n.push(i)}var h={data:[],_:0};c.prototype={data:[],_:0,set:function(t,e){return f(this,t|=0),void 0===e||e?this.data[t>>>a]|=1<<t:this.data[t>>>a]&=~(1<<t),this},get:function(t){t|=0;var e=this.data,r=t>>>a;return r>e.length?1&this._:e[r]>>>t&1},not:function(){for(var t=this.clone(),e=t.data,r=0;r<e.length;r++)e[r]=~e[r];return t._=~t._,t},and:function(t){l(h,t);var e=this.clone(),r=e.data,n=h.data,i=n.length,a=h._;0!==e._&&f(e,i*o-1);for(var u=r.length,s=Math.min(i,u),c=0;c<s;c++)r[c]&=n[c];for(;c<u;c++)r[c]&=a;return e._&=a,e},or:function(t){l(h,t);for(var e=this.clone(),r=e.data,n=h.data,i=n.length-1,o=r.length-1,a=Math.min(o,i),u=i;u>a;u--)r[u]=n[u];for(;u>=0;u--)r[u]|=n[u];return e._|=h._,e},xor:function(t){l(h,t);var e=this.clone(),r=e.data,n=h.data,i=e._,o=h._,a=0,u=r.length-1,s=n.length-1;for(a=u;a>s;a--)r[a]^=o;for(a=s;a>u;a--)r[a]=i^n[a];for(;a>=0;a--)r[a]^=n[a];return e._^=o,e},andNot:function(t){return this.and(new c(t).flip())},flip:function(t,e){if(void 0===t){for(var r=this.data,n=0;n<r.length;n++)r[n]=~r[n];this._=~this._}else if(void 0===e)f(this,t),this.data[t>>>a]^=1<<t;else if(0<=t&&t<=e){f(this,e);for(n=t;n<=e;n++)this.data[n>>>a]^=1<<n}return this},clear:function(t,e){var r=this.data;if(void 0===t){for(var n=r.length-1;n>=0;n--)r[n]=0;this._=0}else if(void 0===e)f(this,t|=0),r[t>>>a]&=~(1<<t);else if(t<=e){f(this,e);for(n=t;n<=e;n++)r[n>>>a]&=~(1<<n)}return this},slice:function(t,e){if(void 0===t)return this.clone();if(void 0===e){e=this.data.length*o,(n=Object.create(c.prototype))._=this._,n.data=[0];for(var r=t;r<=e;r++)n.set(r-t,this.get(r));return n}if(t<=e&&0<=t){var n;(n=Object.create(c.prototype)).data=[0];for(r=t;r<=e;r++)n.set(r-t,this.get(r));return n}return null},setRange:function(t,e,r){for(var n=t;n<=e;n++)this.set(n,r);return this},clone:function(){var t=Object.create(c.prototype);return t.data=this.data.slice(),t._=this._,t},toArray:Math.clz32?function(){for(var t=[],e=this.data,r=e.length-1;r>=0;r--)for(var n=e[r];0!==n;){var i=31-Math.clz32(n);n^=1<<i,t.unshift(r*o+i)}return 0!==this._&&t.push(1/0),t}:function(){for(var t=[],e=this.data,r=0;r<e.length;r++)for(var n=e[r];0!==n;){var i=n&-n;n^=i,t.push(r*o+u(i-1))}return 0!==this._&&t.push(1/0),t},toString:function(t){var e=this.data;if(t||(t=2),0==(t&t-1)&&t<36){for(var r="",n=2+Math.log(4294967295)/Math.log(t)|0,i=e.length-1;i>=0;i--){var a=e[i];a<0&&(a+=4294967296);var u=a.toString(t);""!==r&&(r+="0".repeat(n-u.length-1)),r+=u}return 0===this._?(""===(r=r.replace(/^0+/,""))&&(r="0"),r):(r="1111"+r).replace(/^1+/,"...1111")}if(2>t||t>36)throw SyntaxError("Invalid base");r=[];var l=[];for(i=e.length;i--;)for(var c=o;c--;)l.push(e[i]>>>c&1);do{r.unshift(s(l,t).toString(t))}while(!l.every(function(t){return 0===t}));return r.join("")},isEmpty:function(){if(0!==this._)return!1;for(var t=this.data,e=t.length-1;e>=0;e--)if(0!==t[e])return!1;return!0},cardinality:function(){if(0!==this._)return 1/0;for(var t=0,e=this.data,r=0;r<e.length;r++){var n=e[r];0!==n&&(t+=u(n))}return t},msb:Math.clz32?function(){if(0!==this._)return 1/0;for(var t=this.data,e=t.length;e-- >0;){var r=Math.clz32(t[e]);if(r!==o)return e*o+o-1-r}return 1/0}:function(){if(0!==this._)return 1/0;for(var t=this.data,e=t.length;e-- >0;){var r=t[e],n=0;if(r){for(;(r>>>=1)>0;n++);return e*o+n}}return 1/0},ntz:function(){for(var t=this.data,e=0;e<t.length;e++){var r=t[e];if(0!==r)return e*o+u(r=(r^r-1)>>>1)}return 1/0},lsb:function(){for(var t=this.data,e=0;e<t.length;e++){var r=t[e],n=0;if(r){for(var i=r&-r;i>>>=1;n++);return o*e+n}}return 1&this._},equals:function(t){l(h,t);var e=this.data,r=h.data,n=this._,i=h._,o=e.length-1,a=r.length-1;if(i!==n)return!1;for(var u=o<a?o:a,s=0;s<=u;s++)if(e[s]!==r[s])return!1;for(s=o;s>a;s--)if(e[s]!==i)return!1;for(s=a;s>o;s--)if(r[s]!==n)return!1;return!0}},c.fromBinaryString=function(t){return new c("0b"+t)},c.fromHexString=function(t){return new c("0x"+t)},c.Random=function(t){(void 0===t||t<0)&&(t=o);for(var e=t%o,r=[],n=Math.ceil(t/o),i=Object.create(c.prototype),a=0;a<n;a++)r.push(4294967296*Math.random()|0);return e>0&&(r[n-1]&=(1<<e)-1),i.data=r,i._=0,i},void 0===(n=function(){return c}.apply(e,[]))||(t.exports=n)}()},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var s,l=[],c=!1,f=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&d())}function d(){if(!c){var t=u(h);c=!0;for(var e=l.length;e;){for(s=l,l=[];++f<e;)s&&s[f].run();f=-1,e=l.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new v(t,e)),1!==l.length||c||u(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";r.d(e,"a",function(){return S});var n,i=r(57),o=r(30),a=r(78),u=r(62),s=r(7),l=r(14),c=r(56),f=r(2);function h(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){v(t,e,r[e])})}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,r){return e&&g(t.prototype,e),r&&g(t,r),t}function b(t){return t}!function(t){t.OR="OR",t.AND="AND",t.SIMPLE="SIMPLE",t.SPRITE="SPRITE"}(n||(n={}));var _=function(){function t(e){y(this,t),this.counter=0,this.prefix=e,this.idMap=new Map,this.jsonMap=new Map}return m(t,[{key:"set",value:function(t,e,r){return this.idMap.has(t)||this.idMap.set(t,r||this.freshId()),this.jsonMap.set(t,e),this.getId(t)}},{key:"get",value:function(t){var e=this.jsonMap.get(t);if(!e)throw new Error("BUG: Element has not been added to the set");return e}},{key:"getId",value:function(t){var e=this.idMap.get(t);if(!e)throw new Error("BUG: Element has not been added to the set");return e}},{key:"toJson",value:function(){var t={},e=!0,r=!1,n=void 0;try{for(var i,o=this.idMap[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=p(i.value,2),u=a[0],s=a[1],l=this.jsonMap.get(u);if(!l)throw new Error('BUG: Could not find matching json representation for "'.concat(s,'"'));t[s]=l}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return t}},{key:"freshId",value:function(){return"".concat(this.prefix,"-").concat(this.counter++)}}]),t}(),w=function(){function t(){y(this,t),this.map=new Map}return m(t,[{key:"get",value:function(t){var e=this.map.get(t);if(!e)throw new Error('ERROR: JSON is missing key "'.concat(t,'". Should have already been added'));return e}},{key:"set",value:function(t,e){this.map.set(t,e)}},{key:"values",value:function(){return this.map.values()}}]),t}(),S=function(){function t(e){var r=this;if(y(this,t),this.game=e,this.colorsMap=new Map,this.spritesMap=new _("sprite"),this.soundMap=new _("sound"),this.collisionLayerMap=new _("collision"),this.conditionsMap=new _("bracket"),this.neighborsMap=new _("neighbor"),this.tileWithModifierMap=new _("twm"),this.tileMap=new _("tile"),this.ruleMap=new _("rule"),this.commandMap=new _("command"),this.game.metadata.backgroundColor){var n=this.game.metadata.backgroundColor.toHex();this.colorsMap.set(n,n)}if(this.game.metadata.textColor){var i=this.game.metadata.textColor.toHex();this.colorsMap.set(i,i)}this.game.collisionLayers.forEach(function(t){return r.buildCollisionLayer(t)}),this.game.sounds.forEach(function(t){r.soundMap.set(t,t)}),this.game.objects.forEach(function(t){r.buildSprite(t)}),this.orderedRules=this.game.rules.map(function(t){return r.recBuildRule(t)}),this.game.legends.forEach(function(t){r.buildTile(t)}),this.levels=this.game.levels.map(function(t){return r.buildLevel(t)}),this.winConditions=this.game.winConditions.map(function(t){return t instanceof c.a?{_sourceOffset:t.__source.sourceOffset,type:f.j.ON,qualifier:t.qualifier,tile:r.buildTile(t.tile),onTile:r.buildTile(t.onTile)}:{_sourceOffset:t.__source.sourceOffset,type:f.j.SIMPLE,qualifier:t.qualifier,tile:r.buildTile(t.tile)}})}return m(t,null,[{key:"fromJson",value:function(t,e){for(var r=new w,n=new w,v=new w,y=new w,g=new w,m=new w,b=new w,_=new w,S=new w,E=new w,k=Object.entries(t.colors),T=0;T<k.length;T++){var O=p(k[T],2),x=O[0],M=O[1];r.set(x,new o.a({code:e,sourceOffset:0},M))}for(var C=Object.entries(t.sounds),R=0;R<C.length;R++){var A=p(C[R],2),I=A[0];M=A[1];v.set(I,M)}for(var L=Object.entries(t.commands),P=0;P<L.length;P++){var N=p(L[P],2),D=N[0];switch((M=N[1]).type){case f.c.MESSAGE:E.set(D,M);break;case f.c.SFX:E.set(D,d({},M,{sound:v.get(M.sound)}));break;case f.c.RESTART:case f.c.AGAIN:case f.c.CANCEL:case f.c.CHECKPOINT:case f.c.WIN:E.set(D,M);break;default:throw new Error("ERROR: Unsupported command type")}}for(var j=new w,B=Object.entries(t.collisionLayers),F=0;F<B.length;F++){var G=p(B[F],1)[0];j.set(G,[])}for(var U=new o.b({code:e,sourceOffset:0}),W=0,H=Object.entries(t.sprites),q=0;q<H.length;q++){var z=p(H[q],2),V=z[0],K=(M=z[1])._sourceOffset,Y=M.name,X=M.pixels,J=new l.e({code:e,sourceOffset:K},Y,null,X.map(function(t){return t.map(function(t){return t&&r.get(t)||U})}));J.allSpritesBitSetIndex=W,W++,n.set(V,J),j.get(M.collisionLayer).push(J)}for(var $=Object.entries(t.tiles),Z=0;Z<$.length;Z++){var Q=p($[Z],2),tt=Q[0],et=(K=(M=Q[1])._sourceOffset,void 0);switch(M.type){case"OR":et=new l.b({code:e,sourceOffset:K},M.name,M.sprites.map(function(t){return n.get(t)}));break;case"AND":et=new l.a({code:e,sourceOffset:K},M.name,M.sprites.map(function(t){return n.get(t)}));break;case"SIMPLE":case"SPRITE":et=new l.c({code:e,sourceOffset:K},M.name,n.get(M.sprite));break;default:throw new Error("ERROR: Unsupported tile type")}_.set(tt,et)}for(var rt=Object.entries(t.collisionLayers),nt=0;nt<rt.length;nt++){var it=p(rt[nt],2),ot=it[0];K=(M=it[1])._sourceOffset;y.set(ot,new i.a({code:e,sourceOffset:K},j.get(ot)))}for(var at=Object.entries(t.tilesWithModifiers),ut=0;ut<at.length;ut++){var st=p(at[ut],2),lt=st[0];K=(M=st[1])._sourceOffset;b.set(lt,new s.h({code:e,sourceOffset:K},M.isNegated,M.isRandom,M.direction,_.get(M.tile),M.debugFlag))}for(var ct=Object.entries(t.neighbors),ft=0;ft<ct.length;ft++){var ht=p(ct[ft],2),dt=ht[0];K=(M=ht[1])._sourceOffset;m.set(dt,new s.d({code:e,sourceOffset:K},new Set(M.tileWithModifiers.map(function(t){return b.get(t)})),M.debugFlag))}for(var vt=Object.entries(t.brackets),pt=0;pt<vt.length;pt++){var yt=p(vt[pt],2),gt=yt[0];K=(M=yt[1])._sourceOffset;switch(M.type){case f.a.SIMPLE:g.set(gt,new s.b({code:e,sourceOffset:K},M.direction,M.neighbors.map(function(t){return m.get(t)}),M.debugFlag));break;case f.a.ELLIPSIS:g.set(gt,new s.c({code:e,sourceOffset:K},M.direction,M.beforeNeighbors.map(function(t){return m.get(t)}),M.afterNeighbors.map(function(t){return m.get(t)}),M.debugFlag));break;default:throw new Error("ERROR: Unsupported bracket type")}}for(var mt=Object.entries(t.ruleDefinitions),bt=0;bt<mt.length;bt++){var _t=p(mt[bt],2),wt=_t[0];K=(M=_t[1])._sourceOffset;switch(M.type){case f.f.SIMPLE:S.set(wt,new s.e({code:e,sourceOffset:K},M.conditions.map(function(t){return g.get(t)}),M.actions.map(function(t){return g.get(t)}),M.commands.map(function(t){return E.get(t)}),M.isLate,M.isRigid,M.debugFlag));break;case f.f.GROUP:S.set(wt,new s.f({code:e,sourceOffset:K},M.isRandom,M.rules.map(function(t){return S.get(t)})));break;case f.f.LOOP:S.set(wt,new s.g({code:e,sourceOffset:K},!1,M.rules.map(function(t){return S.get(t)})));break;default:throw new Error("ERROR: Unsupported rule type")}}for(var St=t.levels.map(function(t){switch(t.type){case f.d.MAP:return d({},t,{cells:t.cells.map(function(t){return t.map(function(t){return _.get(t)})})});case f.d.MESSAGE:return t;default:throw new Error("ERROR: Invalid level type")}}),Et=t.winConditions.map(function(t){var r=t._sourceOffset;switch(t.type){case f.j.SIMPLE:return new c.b({code:e,sourceOffset:r},t.qualifier,_.get(t.tile));case f.j.ON:return new c.a({code:e,sourceOffset:r},t.qualifier,_.get(t.tile),_.get(t.onTile));default:throw new Error("ERROR: Unsupported Win Condition type")}}),kt=new u.b,Tt=Object.entries(t.metadata),Ot=0;Ot<Tt.length;Ot++){var xt=p(Tt[Ot],2),Mt=xt[0];if(M=xt[1])switch(Mt){case"backgroundColor":case"textColor":kt._setValue(Mt,r.get(M));break;case"zoomScreen":case"flickScreen":var Ct=M.width,Rt=M.height;kt._setValue(Mt,new u.a(Ct,Rt));break;default:kt._setValue(Mt,M)}}return new a.a({code:e,sourceOffset:0},t.title,kt,h(n.values()),h(_.values()),h(v.values()),h(y.values()),t.rules.map(function(t){return S.get(t)}),Et,St)}}]),m(t,[{key:"buildCollisionLayer",value:function(t){return this.collisionLayerMap.set(t,{_sourceOffset:t.__source.sourceOffset})}},{key:"metadataToJson",value:function(){return{author:this.game.metadata.author,homepage:this.game.metadata.homepage,youtube:this.game.metadata.youtube,zoomscreen:this.game.metadata.zoomscreen,flickscreen:this.game.metadata.flickscreen,colorPalette:this.game.metadata.colorPalette,backgroundColor:this.game.metadata.backgroundColor?this.buildColor(this.game.metadata.backgroundColor):null,textColor:this.game.metadata.textColor?this.buildColor(this.game.metadata.textColor):null,realtimeInterval:this.game.metadata.realtimeInterval,keyRepeatInterval:this.game.metadata.keyRepeatInterval,againInterval:this.game.metadata.againInterval,noAction:this.game.metadata.noAction,noUndo:this.game.metadata.noUndo,runRulesOnLevelStart:this.game.metadata.runRulesOnLevelStart,noRepeatAction:this.game.metadata.noRepeatAction,throttleMovement:this.game.metadata.throttleMovement,noRestart:this.game.metadata.noRestart,requirePlayerMovement:this.game.metadata.requirePlayerMovement,verboseLogging:this.game.metadata.verboseLogging}}},{key:"toJson",value:function(){var t={},e=!0,r=!1,n=void 0;try{for(var i,o=this.colorsMap[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=p(i.value,2),u=a[0],s=a[1];t[u]=s}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return{version:1,title:this.game.title,metadata:this.metadataToJson(),colors:t,sounds:this.soundMap.toJson(),collisionLayers:this.collisionLayerMap.toJson(),commands:this.commandMap.toJson(),sprites:this.spritesMap.toJson(),tiles:this.tileMap.toJson(),tilesWithModifiers:this.tileWithModifierMap.toJson(),neighbors:this.neighborsMap.toJson(),brackets:this.conditionsMap.toJson(),ruleDefinitions:this.ruleMap.toJson(),winConditions:this.winConditions,rules:this.orderedRules,levels:this.levels}}},{key:"buildLevel",value:function(t){var e=this;switch(t.type){case f.d.MAP:return d({},t,{cells:t.cells.map(function(t){return t.map(function(t){return e.buildTile(t)})})});case f.d.MESSAGE:return t;default:throw new Error("BUG: Unsupported level subtype")}}},{key:"recBuildRule",value:function(t){var e=this;if(t instanceof s.e)return this.ruleMap.set(t,{type:f.f.SIMPLE,directions:[],conditions:t.conditionBrackets.map(function(t){return e.buildConditionBracket(t)}),actions:t.actionBrackets.map(function(t){return e.buildConditionBracket(t)}),commands:t.commands.map(function(t){return e.buildCommand(t)}),isRandom:null,isLate:t.isLate(),isRigid:t.hasRigid(),_sourceOffset:t.__source.sourceOffset,debugFlag:t.debugFlag});if(t instanceof s.f)return this.ruleMap.set(t,{type:f.f.GROUP,isRandom:t.isRandom,rules:t.getChildRules().map(function(t){return e.recBuildRule(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:null});if(t instanceof s.g){var r={type:f.f.LOOP,rules:t.getChildRules().map(function(t){return e.recBuildRule(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:null};return this.ruleMap.set(t,r)}throw new Error("BUG: Unsupported rule type")}},{key:"buildCommand",value:function(t){switch(t.type){case f.c.SFX:return this.commandMap.set(t,d({},t,{sound:this.soundMap.getId(t.sound)}));case f.c.AGAIN:case f.c.CANCEL:case f.c.CHECKPOINT:case f.c.MESSAGE:case f.c.RESTART:case f.c.WIN:return this.commandMap.set(t,t);default:throw new Error("BUG: Unsupoprted command type")}}},{key:"buildConditionBracket",value:function(t){var e=this;if(t instanceof s.c){var r=t,n=r.beforeEllipsisBracket.getNeighbors().map(function(t){return e.buildNeighbor(t)}),i=r.afterEllipsisBracket.getNeighbors().map(function(t){return e.buildNeighbor(t)});return this.conditionsMap.set(t,{type:f.a.ELLIPSIS,direction:b(r.direction),beforeNeighbors:n,afterNeighbors:i,_sourceOffset:t.__source.sourceOffset,debugFlag:r.debugFlag})}if(t instanceof s.b)return this.conditionsMap.set(t,{type:f.a.SIMPLE,direction:b(t.direction),neighbors:t.getNeighbors().map(function(t){return e.buildNeighbor(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:t.debugFlag});throw new Error("BUG: Unsupported bracket type")}},{key:"buildNeighbor",value:function(t){var e=this;return this.neighborsMap.set(t,{tileWithModifiers:h(t._tilesWithModifier).map(function(t){return e.buildTileWithModifier(t)}),_sourceOffset:t.__source.sourceOffset,debugFlag:null})}},{key:"buildTileWithModifier",value:function(t){return this.tileWithModifierMap.set(t,{direction:t._direction?b(t._direction):null,isNegated:t._isNegated,isRandom:t._isRandom,tile:this.buildTile(t._tile),_sourceOffset:t.__source.sourceOffset,debugFlag:t._debugFlag})}},{key:"buildTile",value:function(t){var e=this;if(t instanceof l.b)return this.tileMap.set(t,{type:n.OR,name:t.getName(),sprites:t.getSprites().map(function(t){return e.buildSprite(t)}),collisionLayers:t.getCollisionLayers().map(function(t){return e.buildCollisionLayer(t)}),_sourceOffset:t.__source.sourceOffset});if(t instanceof l.a)return this.tileMap.set(t,{type:n.AND,name:t.getName(),sprites:t.getSprites().map(function(t){return e.buildSprite(t)}),collisionLayers:t.getCollisionLayers().map(function(t){return e.buildCollisionLayer(t)}),_sourceOffset:t.__source.sourceOffset});if(t instanceof l.c)return this.tileMap.set(t,{type:n.SIMPLE,name:t.getName(),sprite:this.buildSprite(t.getSprites()[0]),collisionLayers:t.getCollisionLayers().map(function(t){return e.buildCollisionLayer(t)}),_sourceOffset:t.__source.sourceOffset});if(t instanceof l.d)return this.tileMap.set(t,{type:n.SPRITE,name:t.getName(),sprite:this.buildSprite(t),collisionLayer:this.buildCollisionLayer(t.getCollisionLayer()),_sourceOffset:t.__source.sourceOffset});throw new Error("BUG: Invalid tile type")}},{key:"buildSprite",value:function(t){var e=this,r=this.game.getSpriteSize(),n=r.spriteHeight,i=r.spriteWidth;return this.spritesMap.set(t,{name:t.getName(),collisionLayer:this.collisionLayerMap.getId(t.getCollisionLayer()),pixels:t.getPixels(n,i).map(function(t){return t.map(function(t){return t.isTransparent()?null:e.buildColor(t)})}),_sourceOffset:t.__source.sourceOffset})}},{key:"buildColor",value:function(t){var e=t.toHex();return this.colorsMap.set(e,e),e}}]),t}()},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,r){t.exports=!r(10)&&!r(5)(function(){return 7!=Object.defineProperty(r(79)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){e.f=r(8)},function(t,e,r){var n=r(21),i=r(22),o=r(64)(!1),a=r(81)("IE_PROTO");t.exports=function(t,e){var r,u=i(t),s=0,l=[];for(r in u)r!=a&&n(u,r)&&l.push(r);for(;e.length>s;)n(u,r=e[s++])&&(~o(l,r)||l.push(r));return l}},function(t,e,r){var n=r(11),i=r(3),o=r(43);t.exports=r(10)?Object.defineProperties:function(t,e){i(t);for(var r,a=o(e),u=a.length,s=0;u>s;)n.f(t,r=a[s++],e[r]);return t}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(22),o=r(46).f,a={}.toString,u="object"==("undefined"==typeof window?"undefined":n(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==a.call(t)?function(t){try{return o(t)}catch(t){return u.slice()}}(t):o(i(t))}},function(t,e,r){"use strict";var n=r(43),i=r(65),o=r(59),a=r(12),u=r(58),s=Object.assign;t.exports=!s||r(5)(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=s({},t)[r]||Object.keys(s({},e)).join("")!=n})?function(t,e){for(var r=a(t),s=arguments.length,l=1,c=i.f,f=o.f;s>l;)for(var h,d=u(arguments[l++]),v=c?n(d).concat(c(d)):n(d),p=v.length,y=0;p>y;)f.call(d,h=v[y++])&&(r[h]=d[h]);return r}:s},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,r){"use strict";var n=r(15),i=r(6),o=r(118),a=[].slice,u={};t.exports=Function.bind||function(t){var e=n(this),r=a.call(arguments,1),s=function n(){var i=r.concat(a.call(arguments));return this instanceof n?function(t,e,r){if(!(e in u)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";u[e]=Function("F,a","return new F("+n.join(",")+")")}return u[e](t,r)}(e,i.length,i):o(e,i,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(4).parseInt,i=r(53).trim,o=r(85),a=/^[-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(t,e){var r=i(String(t),3);return n(r,e>>>0||(a.test(r)?16:10))}:n},function(t,e,r){var n=r(4).parseFloat,i=r(53).trim;t.exports=1/n(r(85)+"-0")!=-1/0?function(t){var e=i(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},function(t,e,r){var n=r(27);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,r){var n=r(6),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,r){var n=r(88),i=Math.pow,o=i(2,-52),a=i(2,-23),u=i(2,127)*(2-a),s=i(2,-126);t.exports=Math.fround||function(t){var e,r,i=Math.abs(t),l=n(t);return i<s?l*(i/s/a+1/o-1/o)*s*a:(r=(e=(1+a/o)*i)-(e-i))>u||r!=r?l*(1/0):l*r}},function(t,e,r){var n=r(3);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,r){var n=r(15),i=r(12),o=r(58),a=r(9);t.exports=function(t,e,r,u,s){n(e);var l=i(t),c=o(l),f=a(l.length),h=s?f-1:0,d=s?-1:1;if(r<2)for(;;){if(h in c){u=c[h],h+=d;break}if(h+=d,s?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;s?h>=0:f>h;h+=d)h in c&&(u=e(u,c[h],h,l));return u}},function(t,e,r){"use strict";var n=r(12),i=r(44),o=r(9);t.exports=[].copyWithin||function(t,e){var r=n(this),a=o(r.length),u=i(t,a),s=i(e,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:i(l,a))-s,a-u),f=1;for(s<u&&u<s+c&&(f=-1,s+=c-1,u+=c-1);c-- >0;)s in r?r[u]=r[s]:delete r[u],u+=f,s+=f;return r}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){"use strict";var n=r(100);r(1)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(60)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var n=r(3),i=r(6),o=r(104);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";var n=r(134),i=r(55);t.exports=r(73)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(i(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,r){"use strict";var n=r(11).f,i=r(45),o=r(50),a=r(26),u=r(48),s=r(49),l=r(90),c=r(128),f=r(47),h=r(10),d=r(37).fastKey,v=r(55),p=h?"_s":"size",y=function(t,e){var r,n=d(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,l){var c=t(function(t,n){u(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[p]=0,null!=n&&s(n,r,t[l],t)});return o(c.prototype,{clear:function(){for(var t=v(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var r=v(this,e),n=y(r,t);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[p]--}return!!n},forEach:function(t){v(this,e);for(var r,n=a(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!y(v(this,e),t)}}),h&&n(c.prototype,"size",{get:function(){return v(this,e)[p]}}),c},def:function(t,e,r){var n,i,o=y(t,e);return o?o.v=r:(t._l=o={i:i=d(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[p]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,r){l(t,e,function(t,r){this._t=v(t,e),this._k=r,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},r?"entries":"values",!r,!0),f(e)}}},function(t,e,r){"use strict";var n=r(134),i=r(55);t.exports=r(73)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(i(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,r){"use strict";var n,i=r(34)(0),o=r(18),a=r(37),u=r(115),s=r(137),l=r(6),c=r(5),f=r(55),h=a.getWeak,d=Object.isExtensible,v=s.ufstore,p={},y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(l(t)){var e=h(t);return!0===e?v(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return s.def(f(this,"WeakMap"),t,e)}},m=t.exports=r(73)("WeakMap",y,g,s,!0,!0);c(function(){return 7!=(new m).set((Object.freeze||Object)(p),7).get(p)})&&(u((n=s.getConstructor(y,"WeakMap")).prototype,g),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=m.prototype,r=e[t];o(e,t,function(e,i){if(l(e)&&!d(e)){this._f||(this._f=new n);var o=this._f[t](e,i);return"set"==t?this:o}return r.call(this,e,i)})}))},function(t,e,r){"use strict";var n=r(50),i=r(37).getWeak,o=r(3),a=r(6),u=r(48),s=r(49),l=r(34),c=r(21),f=r(55),h=l(5),d=l(6),v=0,p=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var r=g(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,o){var l=t(function(t,n){u(t,l,e,"_i"),t._t=e,t._i=v++,t._l=void 0,null!=n&&s(n,r,t[o],t)});return n(l.prototype,{delete:function(t){if(!a(t))return!1;var r=i(t);return!0===r?p(f(this,e)).delete(t):r&&c(r,this._i)&&delete r[this._i]},has:function(t){if(!a(t))return!1;var r=i(t);return!0===r?p(f(this,e)).has(t):r&&c(r,this._i)}}),l},def:function(t,e,r){var n=i(o(e),!0);return!0===n?p(t).set(e,r):n[t._i]=r,t},ufstore:p}},function(t,e,r){var n=r(28),i=r(9);t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw RangeError("Wrong length!");return r}},function(t,e,r){var n=r(46),i=r(65),o=r(3),a=r(4).Reflect;t.exports=a&&a.ownKeys||function(t){var e=n.f(o(t)),r=i.f;return r?e.concat(r(t)):e}},function(t,e,r){"use strict";var n=r(66),i=r(6),o=r(9),a=r(26),u=r(8)("isConcatSpreadable");t.exports=function t(e,r,s,l,c,f,h,d){for(var v,p,y=c,g=0,m=!!h&&a(h,d,3);g<l;){if(g in s){if(v=m?m(s[g],g,r):s[g],p=!1,i(v)&&(p=void 0!==(p=v[u])?!!p:n(v)),p&&f>0)y=t(e,r,v,o(v.length),y,f-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=v}y++}g++}return y}},function(t,e,r){var n=r(9),i=r(87),o=r(32);t.exports=function(t,e,r,a){var u=String(o(t)),s=u.length,l=void 0===r?" ":String(r),c=n(e);if(c<=s||""==l)return u;var f=c-s,h=i.call(l,Math.ceil(f/l.length));return h.length>f&&(h=h.slice(0,f)),a?h+u:u+h}},function(t,e,r){var n=r(43),i=r(22),o=r(59).f;t.exports=function(t){return function(e){for(var r,a=i(e),u=n(a),s=u.length,l=0,c=[];s>l;)o.call(a,r=u[l++])&&c.push(t?[r,a[r]]:a[r]);return c}}},function(t,e,r){var n=r(52),i=r(144);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,r){var n=r(49);t.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},function(t,e){t.exports=Math.scale||function(t,e,r,n,i){return 0===arguments.length||t!=t||e!=e||r!=r||n!=n||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-n)/(r-e)+n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";r.d(e,"a",function(){return a});var n=r(148),i=r.n(n);function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lru=new i.a({maxSize:e})}var e,r,n;return e=t,(r=[{key:"get",value:function(t,e){var r=this.lru.get(t);if(void 0!==r)return r;var n=e();return this.lru.set(t,n),n}}])&&o(e.prototype,r),n&&o(e,n),t}()},function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}var e,r,o;return e=t,(r=[{key:"_set",value:function(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){var e=this.oldCache.get(t);return this._set(t,e),e}}},{key:"set",value:function(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}},{key:"has",value:function(t){return this.cache.has(t)||this.oldCache.has(t)}},{key:"peek",value:function(t){return this.cache.has(t)?this.cache.get(t):this.oldCache.has(t)?this.oldCache.get(t):void 0}},{key:"delete",value:function(t){var e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:regeneratorRuntime.mark(function t(){var e,r,i,o,a,u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=!1,i=void 0,t.prev=3,o=this[Symbol.iterator]();case 5:if(e=(a=o.next()).done){t.next=12;break}return u=n(a.value,1),s=u[0],t.next=9,s;case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),r=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==o.return||o.return();case 21:if(t.prev=21,!r){t.next=24;break}throw i;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})},{key:"values",value:regeneratorRuntime.mark(function t(){var e,r,i,o,a,u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=!1,i=void 0,t.prev=3,o=this[Symbol.iterator]();case 5:if(e=(a=o.next()).done){t.next=12;break}return u=n(a.value,2),s=u[1],t.next=9,s;case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),r=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==o.return||o.return();case 21:if(t.prev=21,!r){t.next=24;break}throw i;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})},{key:Symbol.iterator,value:regeneratorRuntime.mark(function t(){var e,r,i,o,a,u,s,l,c,f,h,d,v,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=!1,i=void 0,t.prev=3,o=this.cache[Symbol.iterator]();case 5:if(e=(a=o.next()).done){t.next=12;break}return u=a.value,t.next=9,u;case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),r=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==o.return||o.return();case 21:if(t.prev=21,!r){t.next=24;break}throw i;case 24:return t.finish(21);case 25:return t.finish(18);case 26:s=!0,l=!1,c=void 0,t.prev=29,f=this.oldCache[Symbol.iterator]();case 31:if(s=(h=f.next()).done){t.next=40;break}if(d=h.value,v=n(d,1),p=v[0],this.cache.has(p)){t.next=37;break}return t.next=37,d;case 37:s=!0,t.next=31;break;case 40:t.next=46;break;case 42:t.prev=42,t.t1=t.catch(29),l=!0,c=t.t1;case 46:t.prev=46,t.prev=47,s||null==f.return||f.return();case 49:if(t.prev=49,!l){t.next=52;break}throw c;case 52:return t.finish(49);case 53:return t.finish(46);case 54:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25],[29,42,46,54],[47,,49,53]])})},{key:"size",get:function(){var t=0,e=!0,r=!1,n=void 0;try{for(var i,o=this.oldCache.keys()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.cache.has(a)||t++}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return this._size+t}}])&&i(e.prototype,r),o&&i(e,o),t}();t.exports=o},function(t,e,r){var n,i=r(360).RNG,o=r(361).MakeRiff,a=.25,u=5512,s=8,l=0,c=["square","sawtooth","sine","noise","triangle","breaker"];function f(){try{null==n&&("undefined"!=typeof AudioContext?n=new AudioContext:"undefined"!=typeof webkitAudioContext&&(n=new webkitAudioContext))}catch(t){window.console.log(t)}}f();var h;function d(){var t={};return t.wave_type=l,t.p_env_attack=0,t.p_env_sustain=.3,t.p_env_punch=0,t.p_env_decay=.4,t.p_base_freq=.3,t.p_freq_limit=0,t.p_freq_ramp=0,t.p_freq_dramp=0,t.p_vib_strength=0,t.p_vib_speed=0,t.p_arp_mod=0,t.p_arp_speed=0,t.p_duty=0,t.p_duty_ramp=0,t.p_repeat_speed=0,t.p_pha_offset=0,t.p_pha_ramp=0,t.p_lpf_freq=1,t.p_lpf_ramp=0,t.p_lpf_resonance=0,t.p_hpf_freq=0,t.p_hpf_ramp=0,t.sound_vol=.5,t.sample_rate=44100,t.bit_depth=8,t}var v=!1;function p(t){return v?h.uniform()*t:Math.random()*t}function y(t){return v?Math.floor(h.uniform()*(t+1)):Math.floor(Math.random()*(t+1))}pickupCoin=function(){var t=d();if(t.wave_type=Math.floor(p(c.length)),3===t.wave_type&&(t.wave_type=0),t.p_base_freq=.4+p(.5),t.p_env_attack=0,t.p_env_sustain=p(.1),t.p_env_decay=.1+p(.4),t.p_env_punch=.3+p(.3),y(1)){t.p_arp_speed=.5+p(.2);var e=1+(1|p(7)),r=e+(1|p(7))+2;t.p_arp_mod=+e/+r}return t},laserShoot=function(){var t=d();return t.wave_type=y(2),2===t.wave_type&&y(1)&&(t.wave_type=y(1)),t.wave_type=Math.floor(p(c.length)),3===t.wave_type&&(t.wave_type=l),t.p_base_freq=.5+p(.5),t.p_freq_limit=t.p_base_freq-.2-p(.6),t.p_freq_limit<.2&&(t.p_freq_limit=.2),t.p_freq_ramp=-.15-p(.2),0===y(2)&&(t.p_base_freq=.3+p(.6),t.p_freq_limit=p(.1),t.p_freq_ramp=-.35-p(.3)),y(1)?(t.p_duty=p(.5),t.p_duty_ramp=p(.2)):(t.p_duty=.4+p(.5),t.p_duty_ramp=-p(.7)),t.p_env_attack=0,t.p_env_sustain=.1+p(.2),t.p_env_decay=p(.4),y(1)&&(t.p_env_punch=p(.3)),0===y(2)&&(t.p_pha_offset=p(.2),t.p_pha_ramp=-p(.2)),y(1)&&(t.p_hpf_freq=p(.3)),t},explosion=function(){var t=d();return y(1)?(t.p_base_freq=.1+p(.4),t.p_freq_ramp=-.1+p(.4)):(t.p_base_freq=.2+p(.7),t.p_freq_ramp=-.2-p(.2)),t.p_base_freq*=t.p_base_freq,0===y(4)&&(t.p_freq_ramp=0),0===y(2)&&(t.p_repeat_speed=.3+p(.5)),t.p_env_attack=0,t.p_env_sustain=.1+p(.3),t.p_env_decay=p(.5),0===y(1)&&(t.p_pha_offset=-.3+p(.9),t.p_pha_ramp=-p(.3)),t.p_env_punch=.2+p(.6),y(1)&&(t.p_vib_strength=p(.7),t.p_vib_speed=p(.6)),0===y(2)&&(t.p_arp_speed=.6+p(.3),t.p_arp_mod=.8-p(1.6)),t},birdSound=function(){var t=d();return p(10)<1?(t.wave_type=Math.floor(p(c.length)),3===t.wave_type&&(t.wave_type=l),t.p_env_attack=.4304400932967592+p(.2)-.1,t.p_env_sustain=.15739346034252394+p(.2)-.1,t.p_env_punch=.004488201744871758+p(.2)-.1,t.p_env_decay=.07478075528212291+p(.2)-.1,t.p_base_freq=.9865265720147687+p(.2)-.1,t.p_freq_limit=0+p(.2)-.1,t.p_freq_ramp=-.2995018224359539+p(.2)-.1,p(1)<.5&&(t.p_freq_ramp=.1+p(.15)),t.p_freq_dramp=.004598608156964473+p(.1)-.05,t.p_vib_strength=-.2202799497929496+p(.2)-.1,t.p_vib_speed=.8084998703158364+p(.2)-.1,t.p_arp_mod=0,t.p_arp_speed=0,t.p_duty=-.9031808754347107+p(.2)-.1,t.p_duty_ramp=-.8128699999808343+p(.2)-.1,t.p_repeat_speed=.601486018931999+p(.2)-.1,t.p_pha_offset=-.9424902314367765+p(.2)-.1,t.p_pha_ramp=-.1055482222272056+p(.2)-.1,t.p_lpf_freq=.9989765717851521+p(.2)-.1,t.p_lpf_ramp=-.25051720626043017+p(.2)-.1,t.p_lpf_resonance=.32777871505494693+p(.2)-.1,t.p_hpf_freq=.0023548750981756753+p(.2)-.1,t.p_hpf_ramp=-.002375673204842568+p(.2)-.1,t):p(10)<1?(t.wave_type=Math.floor(p(c.length)),3===t.wave_type&&(t.wave_type=l),t.p_env_attack=.5277795946672003+p(.2)-.1,t.p_env_sustain=.18243733568468432+p(.2)-.1,t.p_env_punch=-.020159754546840117+p(.2)-.1,t.p_env_decay=.1561353422051903+p(.2)-.1,t.p_base_freq=.9028855606533718+p(.2)-.1,t.p_freq_limit=-.008842787837148716,t.p_freq_ramp=-.1,t.p_freq_dramp=-.012891241489551925,t.p_vib_strength=-.17923136138403065+p(.2)-.1,t.p_vib_speed=.908263385610142+p(.2)-.1,t.p_arp_mod=.41690153355414894+p(.2)-.1,t.p_arp_speed=.0010766233195860704+p(.2)-.1,t.p_duty=-.8735363011184684+p(.2)-.1,t.p_duty_ramp=-.7397985366747507+p(.2)-.1,t.p_repeat_speed=.0591789344172107+p(.2)-.1,t.p_pha_offset=-.9961184222777699+p(.2)-.1,t.p_pha_ramp=-.08234769395850523+p(.2)-.1,t.p_lpf_freq=.9412475115697335+p(.2)-.1,t.p_lpf_ramp=-.18261358925834958+p(.2)-.1,t.p_lpf_resonance=.24541438107389477+p(.2)-.1,t.p_hpf_freq=-.01831940280978611+p(.2)-.1,t.p_hpf_ramp=-.03857383633171346+p(.2)-.1,t):p(10)<1?(t.wave_type=Math.floor(p(c.length)),3===t.wave_type&&(t.wave_type=l),t.p_env_attack=.4304400932967592+p(.2)-.1,t.p_env_sustain=.15739346034252394+p(.2)-.1,t.p_env_punch=.004488201744871758+p(.2)-.1,t.p_env_decay=.07478075528212291+p(.2)-.1,t.p_base_freq=.9865265720147687+p(.2)-.1,t.p_freq_limit=0+p(.2)-.1,t.p_freq_ramp=-.2995018224359539+p(.2)-.1,t.p_freq_dramp=.004598608156964473+p(.2)-.1,t.p_vib_strength=-.2202799497929496+p(.2)-.1,t.p_vib_speed=.8084998703158364+p(.2)-.1,t.p_arp_mod=-.46410459213693644+p(.2)-.1,t.p_arp_speed=-.10955361249587248+p(.2)-.1,t.p_duty=-.9031808754347107+p(.2)-.1,t.p_duty_ramp=-.8128699999808343+p(.2)-.1,t.p_repeat_speed=.7014860189319991+p(.2)-.1,t.p_pha_offset=-.9424902314367765+p(.2)-.1,t.p_pha_ramp=-.1055482222272056+p(.2)-.1,t.p_lpf_freq=.9989765717851521+p(.2)-.1,t.p_lpf_ramp=-.25051720626043017+p(.2)-.1,t.p_lpf_resonance=.32777871505494693+p(.2)-.1,t.p_hpf_freq=.0023548750981756753+p(.2)-.1,t.p_hpf_ramp=-.002375673204842568+p(.2)-.1,t):p(5)>1?(t.wave_type=Math.floor(p(c.length)),3===t.wave_type&&(t.wave_type=l),y(1)?(t.p_arp_mod=.2697849293151393+p(.2)-.1,t.p_arp_speed=-.3131172257760948+p(.2)-.1,t.p_base_freq=.8090588299313949+p(.2)-.1,t.p_duty=-.6210022920964955+p(.2)-.1,t.p_duty_ramp=-.00043441813553182567+p(.2)-.1,t.p_env_attack=.004321877246874195+p(.2)-.1,t.p_env_decay=.1+p(.2)-.1,t.p_env_punch=.061737781504416146+p(.2)-.1,t.p_env_sustain=.4987252564798832+p(.2)-.1,t.p_freq_dramp=.31700340314222614+p(.2)-.1,t.p_freq_limit=0+p(.2)-.1,t.p_freq_ramp=-.163380391341416+p(.2)-.1,t.p_hpf_freq=.4709005021145149+p(.2)-.1,t.p_hpf_ramp=.6924667290539194+p(.2)-.1,t.p_lpf_freq=.8351398631384511+p(.2)-.1,t.p_lpf_ramp=.36616557192873134+p(.2)-.1,t.p_lpf_resonance=-.08685777111664439+p(.2)-.1,t.p_pha_offset=-.036084571580025544+p(.2)-.1,t.p_pha_ramp=-.014806445085568108+p(.2)-.1,t.p_repeat_speed=-.8094368475518489+p(.2)-.1,t.p_vib_speed=.4496665457171294+p(.2)-.1,t.p_vib_strength=.23413762515532424+p(.2)-.1):(t.p_arp_mod=-.35697118026766184+p(.2)-.1,t.p_arp_speed=.3581140690559588+p(.2)-.1,t.p_base_freq=1.3260897696157528+p(.2)-.1,t.p_duty=-.30984900436710694+p(.2)-.1,t.p_duty_ramp=-.0014374759133411626+p(.2)-.1,t.p_env_attack=.3160357835682254+p(.2)-.1,t.p_env_decay=.1+p(.2)-.1,t.p_env_punch=.24323114016870148+p(.2)-.1,t.p_env_sustain=.4+p(.2)-.1,t.p_freq_dramp=.2866475886237244+p(.2)-.1,t.p_freq_limit=0+p(.2)-.1,t.p_freq_ramp=-.10956352368742976+p(.2)-.1,t.p_hpf_freq=.20772718017889846+p(.2)-.1,t.p_hpf_ramp=.1564090637378835+p(.2)-.1,t.p_lpf_freq=.6021372770637031+p(.2)-.1,t.p_lpf_ramp=.24016227139979027+p(.2)-.1,t.p_lpf_resonance=-.08787383821160144+p(.2)-.1,t.p_pha_offset=-.381597686151701+p(.2)-.1,t.p_pha_ramp=-.0002481687661373495+p(.2)-.1,t.p_repeat_speed=.07812112809425686+p(.2)-.1,t.p_vib_speed=-.13648848579133943+p(.2)-.1,t.p_vib_strength=.0018874158972302657+p(.2)-.1),t):(t.wave_type=Math.floor(p(c.length)),1!==t.wave_type&&3!==t.wave_type||(t.wave_type=2),t.p_base_freq=.85+p(.15),t.p_freq_ramp=.3+p(.15),t.p_env_attack=0+p(.09),t.p_env_sustain=.2+p(.3),t.p_env_decay=0+p(.1),t.p_duty=p(2)-1,t.p_duty_ramp=Math.pow(p(2)-1,3),t.p_repeat_speed=.5+p(.1),t.p_pha_offset=-.3+p(.9),t.p_pha_ramp=-p(.3),t.p_arp_speed=.4+p(.6),t.p_arp_mod=.8+p(.1),t.p_lpf_resonance=p(2)-1,t.p_lpf_freq=1-Math.pow(p(1),3),t.p_lpf_ramp=Math.pow(p(2)-1,3),t.p_lpf_freq<.1&&t.p_lpf_ramp<-.05&&(t.p_lpf_ramp=-t.p_lpf_ramp),t.p_hpf_freq=Math.pow(p(1),5),t.p_hpf_ramp=Math.pow(p(2)-1,5),t)},pushSound=function(){var t=d();return t.wave_type=Math.floor(p(c.length)),2===t.wave_type&&t.wave_type++,0===t.wave_type&&(t.wave_type=3),t.p_base_freq=.1+p(.4),t.p_freq_ramp=.05+p(.2),t.p_env_attack=.01+p(.09),t.p_env_sustain=.01+p(.09),t.p_env_decay=.01+p(.09),t.p_repeat_speed=.3+p(.5),t.p_pha_offset=-.3+p(.9),t.p_pha_ramp=-p(.3),t.p_arp_speed=.6+p(.3),t.p_arp_mod=.8-p(1.6),t},powerUp=function(){var t=d();return y(1)?t.wave_type=1:t.p_duty=p(.6),t.wave_type=Math.floor(p(c.length)),3===t.wave_type&&(t.wave_type=l),y(1)?(t.p_base_freq=.2+p(.3),t.p_freq_ramp=.1+p(.4),t.p_repeat_speed=.4+p(.4)):(t.p_base_freq=.2+p(.3),t.p_freq_ramp=.05+p(.2),y(1)&&(t.p_vib_strength=p(.7),t.p_vib_speed=p(.6))),t.p_env_attack=0,t.p_env_sustain=p(.4),t.p_env_decay=.1+p(.4),t},hitHurt=function(){return result=d(),result.wave_type=y(2),2===result.wave_type&&(result.wave_type=3),result.wave_type===l&&(result.p_duty=p(.6)),result.wave_type=Math.floor(p(c.length)),result.p_base_freq=.2+p(.6),result.p_freq_ramp=-.3-p(.4),result.p_env_attack=0,result.p_env_sustain=p(.1),result.p_env_decay=.1+p(.2),y(1)&&(result.p_hpf_freq=p(.3)),result},jump=function(){return result=d(),result.wave_type=l,result.wave_type=Math.floor(p(c.length)),3===result.wave_type&&(result.wave_type=l),result.p_duty=p(.6),result.p_base_freq=.3+p(.3),result.p_freq_ramp=.1+p(.2),result.p_env_attack=0,result.p_env_sustain=.1+p(.3),result.p_env_decay=.1+p(.2),y(1)&&(result.p_hpf_freq=p(.3)),y(1)&&(result.p_lpf_freq=1-p(.6)),result},blipSelect=function(){return result=d(),result.wave_type=y(1),result.wave_type=Math.floor(p(c.length)),3===result.wave_type&&(result.wave_type=y(1)),result.wave_type===l&&(result.p_duty=p(.6)),result.p_base_freq=.2+p(.4),result.p_env_attack=0,result.p_env_sustain=.1+p(.1),result.p_env_decay=p(.2),result.p_hpf_freq=.1,result},random=function(){return result=d(),result.wave_type=Math.floor(p(c.length)),result.p_base_freq=Math.pow(p(2)-1,2),y(1)&&(result.p_base_freq=Math.pow(p(2)-1,3)+.5),result.p_freq_limit=0,result.p_freq_ramp=Math.pow(p(2)-1,5),result.p_base_freq>.7&&result.p_freq_ramp>.2&&(result.p_freq_ramp=-result.p_freq_ramp),result.p_base_freq<.2&&result.p_freq_ramp<-.05&&(result.p_freq_ramp=-result.p_freq_ramp),result.p_freq_dramp=Math.pow(p(2)-1,3),result.p_duty=p(2)-1,result.p_duty_ramp=Math.pow(p(2)-1,3),result.p_vib_strength=Math.pow(p(2)-1,3),result.p_vib_speed=p(2)-1,result.p_env_attack=Math.pow(p(2)-1,3),result.p_env_sustain=Math.pow(p(2)-1,2),result.p_env_decay=p(2)-1,result.p_env_punch=Math.pow(p(.8),2),result.p_env_attack+result.p_env_sustain+result.p_env_decay<.2&&(result.p_env_sustain+=.2+p(.3),result.p_env_decay+=.2+p(.3)),result.p_lpf_resonance=p(2)-1,result.p_lpf_freq=1-Math.pow(p(1),3),result.p_lpf_ramp=Math.pow(p(2)-1,3),result.p_lpf_freq<.1&&result.p_lpf_ramp<-.05&&(result.p_lpf_ramp=-result.p_lpf_ramp),result.p_hpf_freq=Math.pow(p(1),5),result.p_hpf_ramp=Math.pow(p(2)-1,5),result.p_pha_offset=Math.pow(p(2)-1,3),result.p_pha_ramp=Math.pow(p(2)-1,3),result.p_repeat_speed=p(2)-1,result.p_arp_speed=p(2)-1,result.p_arp_mod=p(2)-1,result};var g=[pickupCoin,laserShoot,explosion,powerUp,hitHurt,jump,blipSelect,pushSound,random,birdSound];function m(t,e){this._buffer=n.createBuffer(1,t,e)}generateFromSeed=function(t){h=new i(t/100|0),v=!0;var e=(0,g[t%100%g.length])();return e.seed=t,v=!1,e},m.prototype.getBuffer=function(){return this._buffer.getChannelData(0)},m.prototype.play=function(){var t=n.createBufferSource(),e=n.createBiquadFilter(),r=n.createBiquadFilter(),i=n.createBiquadFilter();t.buffer=this._buffer,t.connect(e),e.frequency.value=1600,r.frequency.value=1600,i.frequency.value=1600,e.connect(r),r.connect(i),i.connect(n.destination);var o=n.currentTime;return void 0!==t.start?t.start(o):t.noteOn(o)},m.MIN_SAMPLE_RATE=22050,void 0===n&&((m=function(t,e){this._sample_rate=e,this._buffer=new Array(t),this._audioElement=null}).prototype.getBuffer=function(){return this._audioElement=null,this._buffer},m.prototype.play=function(){if(!this._audioElement){for(var t=0;t<this._buffer.length;t++)this._buffer[t]=255&Math.floor(128*Math.max(0,Math.min(this._buffer[t]+1,2)));var e=o(this._sample_rate,s,this._buffer);return this._audioElement=new Audio,this._audioElement.src=e.dataURI,this._audioElement.play()}this._audioElement.cloneNode(!1).play()},m.MIN_SAMPLE_RATE=1),m.generate=function(t){function e(){r=0,n=100/(t.p_base_freq*t.p_base_freq+.001),i=Math.floor(n),o=100/(t.p_freq_limit*t.p_freq_limit+.001),a=1-.01*Math.pow(t.p_freq_ramp,3),u=1e-6*-Math.pow(t.p_freq_dramp,3),s=.5-.5*t.p_duty,c=5e-5*-t.p_duty_ramp,f=t.p_arp_mod>=0?1-.9*Math.pow(t.p_arp_mod,2):1+10*Math.pow(t.p_arp_mod,2),0,h=Math.floor(2e4*Math.pow(1-t.p_arp_speed,2)+32),1==t.p_arp_speed&&(h=0)}var r,n,i,o,a,u,s,c,f,h;e();var d=0,v=0,p=.1*Math.pow(t.p_lpf_freq,3),y=1+1e-4*t.p_lpf_ramp,g=5/(1+20*Math.pow(t.p_lpf_resonance,2))*(.01+p);g>.8&&(g=.8);var b=0,_=.1*Math.pow(t.p_hpf_freq,2),w=1+3e-4*t.p_hpf_ramp,S=0,E=.01*Math.pow(t.p_vib_speed,2),k=.5*t.p_vib_strength,T=0,O=0,x=0,M=[Math.floor(t.p_env_attack*t.p_env_attack*1e5),Math.floor(t.p_env_sustain*t.p_env_sustain*1e5),Math.floor(t.p_env_decay*t.p_env_decay*1e5)],C=M[0]+M[1]+M[2],R=0,A=1020*Math.pow(t.p_pha_offset,2);t.p_pha_offset<0&&(A=-A);var I=1*Math.pow(t.p_pha_ramp,2);t.p_pha_ramp<0&&(I=-I);for(var L=Math.abs(Math.floor(A)),P=0,N=[],D=0;D<1024;++D)N[D]=0;var j=[];for(D=0;D<32;++D)j[D]=2*Math.random()-1;var B=Math.floor(2e4*Math.pow(1-t.p_repeat_speed,2)+32);0==t.p_repeat_speed&&(B=0);for(var F,G=t.sound_vol,U=(G=Math.exp(t.sound_vol)-1,0),W=0,H=Math.floor(44100/t.sample_rate),q=0,z=Math.ceil(C/H),V=(F=t.sample_rate<m.MIN_SAMPLE_RATE?new m(4*z,m.MIN_SAMPLE_RATE):new m(z,t.sample_rate)).getBuffer(),K=0;;++K){0!=B&&++r>=B&&e(),0!=h&&K>=h&&(h=0,n*=f),(n*=a+=u)>o&&(n=o,t.p_freq_limit>0&&!0);var Y=n;if(k>0&&(S+=E,Y=n*(1+Math.sin(S)*k)),(i=Math.floor(Y))<8&&(i=8),(s+=c)<0&&(s=0),s>.5&&(s=.5),++x>M[O]){for(x=1,O++;O<3&&0===M[O];)O++;if(3===O)break}T=0===O?x/M[0]:1===O?1+2*Math.pow(1-x/M[1],1)*t.p_env_punch:1-x/M[2],A+=I,(L=Math.abs(Math.floor(A)))>1023&&(L=1023),0!=w&&((_*=w)<1e-5&&(_=1e-5),_>.1&&(_=.1));for(var X=0,J=0;J<8;++J){var $=0;if(++R>=i&&(R%=i,3===t.wave_type))for(D=0;D<32;++D)j[D]=2*Math.random()-1;var Z=R/i;if(t.wave_type===l)$=Z<s?.5:-.5;else if(1===t.wave_type)$=1-2*Z;else if(2===t.wave_type)$=Math.sin(2*Z*Math.PI);else if(3===t.wave_type)$=j[Math.floor(32*R/i)];else if(4===t.wave_type)$=Math.abs(1-2*Z)-1;else{if(5!==t.wave_type)throw new Exception("bad wave type! "+t.wave_type);$=Math.abs(1-Z*Z*2)-1}var Q=d;(p*=y)<0&&(p=0),p>.1&&(p=.1),1!=t.p_lpf_freq?(v+=($-d)*p,v-=v*g):(d=$,v=0),b+=(d+=v)-Q,$=b-=b*_,N[1023&P]=$,$+=N[P-L+1024&1023],P=P+1&1023,X+=$*T}U+=X,++W>=H&&(W=0,X=U/H,U=0,X=X/8*1,X*=G,V[q++]=X,t.sample_rate<m.MIN_SAMPLE_RATE&&(V[q++]=X,V[q++]=X,V[q++]=X))}return H>0&&(X=(X=U/H)/8*1,X*=G,V[q++]=X,t.sample_rate<m.MIN_SAMPLE_RATE&&(V[q++]=X,V[q++]=X,V[q++]=X)),F};var b={},_=[],w=50;t.exports={playSound:function(t){return f(),function(t){if(t in b)return b[t];var e=generateFromSeed(t);e.sound_vol=a,e.sample_rate=u,e.bit_depth=s;var r=m.generate(e);for(b[t]=r,_.push(t);_.length>w;){var n=_[0];_=_.slice(1),delete b[n]}return r}(t).play()}}},function(t,e,r){"use strict";r.d(e,"a",function(){return a});var n=r(0),i=r(16);function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gamepad=i.b.getAnyGamepad(),this.table=e,this.polledInput=null,this.repeatIntervalInSeconds=null,this.boundKeys=[],this.touchStart=null,this.touchStartedAt=0,this.touchHoldInterval=null;var o=function(t){var n=i.b.key(t,e);return r.boundKeys.push(n),n};this.controls={up:{lastPressed:null,button:i.b.or([this.gamepad.button(i.a.ARROW_UP),o("w"),o("ArrowUp")])},down:{lastPressed:null,button:i.b.or([this.gamepad.button(i.a.ARROW_DOWN),o("s"),o("ArrowDown")])},left:{lastPressed:null,button:i.b.or([this.gamepad.button(i.a.ARROW_LEFT),o("a"),o("ArrowLeft")])},right:{lastPressed:null,button:i.b.or([this.gamepad.button(i.a.ARROW_RIGHT),o("d"),o("ArrowRight")])},action:{lastPressed:null,button:i.b.or([this.gamepad.button(i.a.CLUSTER_BOTTOM),o("x"),o(" "),o("Enter")])},undo:{lastPressed:null,button:i.b.or([this.gamepad.button(i.a.CLUSTER_LEFT),this.gamepad.button(i.a.BUMPER_TOP_LEFT),o("z"),o("u")])},restart:{lastPressed:null,button:i.b.or([this.gamepad.button(i.a.CLUSTER_TOP),o("r")])}},this.stickControls={left:{lastPressed:null,stick:this.gamepad.stick(i.c.LEFT)},right:{lastPressed:null,stick:this.gamepad.stick(i.c.RIGHT)}};var a=function(t,e){return function(){var n=Date.now(),i=1e3*(r.repeatIntervalInSeconds||.25),o=r.controls[t],a=o.button,u=o.lastPressed;a.query()?(!u||u+i<n)&&(e(),r.controls[t].lastPressed=n):r.controls[t].lastPressed=null}},u=function(t){return function(){var e=Date.now(),i=1e3*(r.repeatIntervalInSeconds||.25),o=r.stickControls[t],a=o.stick,u=o.lastPressed,s=a.query(),l=s.x,c=s.y,f=Math.abs(c),h=Math.abs(l);if(f>h){if(f>.5)return void((!u||u+i<e)&&(o.lastPressed=e,r.polledInput=c<0?n.b.UP:n.b.DOWN))}else if(h>.5)return void((!u||u+i<e)&&(o.lastPressed=e,r.polledInput=l<0?n.b.LEFT:n.b.RIGHT));o.lastPressed=null}};this.controlCheckers=[u("left"),u("right"),a("up",function(){return r.polledInput=n.b.UP}),a("down",function(){return r.polledInput=n.b.DOWN}),a("left",function(){return r.polledInput=n.b.LEFT}),a("right",function(){return r.polledInput=n.b.RIGHT}),a("action",function(){return r.polledInput=n.b.ACTION}),a("undo",function(){return r.polledInput=n.b.UNDO}),a("restart",function(){return r.polledInput=n.b.RESTART})],this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.table.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.table.addEventListener("touchmove",this.onTouchMove),this.table.addEventListener("touchend",this.onTouchEnd)}var e,r,a;return e=t,(r=[{key:"pollControls",value:function(){if(window.document.activeElement!==this.table)return null;this.controlCheckers.forEach(function(t){return t()});var t=this.polledInput;return this.polledInput=null,t}},{key:"isSomethingPressed",value:function(){for(var t=Object.values(this.controls),e=0;e<t.length;e++){if(t[e].button.query())return!0}return!1}},{key:"setKeyRepeatInterval",value:function(t){this.repeatIntervalInSeconds=t}},{key:"dispose",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.boundKeys[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.dispose()}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}this.table.removeEventListener("touchstart",this.onTouchStart),this.table.removeEventListener("touchmove",this.onTouchMove),this.table.removeEventListener("touchend",this.onTouchEnd)}},{key:"startTouchHoldInterval",value:function(){var t=this;this.touchHoldInterval||(this.touchHoldInterval=setInterval(function(){return t.polledInput=n.b.UNDO},500))}},{key:"endTouchHoldInterval",value:function(){this.touchHoldInterval&&clearInterval(this.touchHoldInterval),this.touchHoldInterval=null}},{key:"onTouchStart",value:function(t){1===t.changedTouches.length&&(this.table.focus(),this.touchStart=t.changedTouches[0],this.touchStartedAt=Date.now(),this.startTouchHoldInterval())}},{key:"onTouchMove",value:function(t){this.touchStart&&1===t.touches.length&&t.preventDefault()}},{key:"onTouchEnd",value:function(t){var e=this,r=function(){var t=Date.now()-e.touchStartedAt;if(t>=2e3){var r=confirm("You were holding for a while. Do you want to restart the level?");e.polledInput=r?n.b.RESTART:null}else t<200&&(e.polledInput=n.b.ACTION)};if(this.endTouchHoldInterval(),this.touchStart&&1===t.changedTouches.length){var i=t.changedTouches[0],o=i.pageX-this.touchStart.pageX,a=i.pageY-this.touchStart.pageY,u=Math.abs(o),s=Math.abs(a);u>s?u>this.table.clientWidth/15?this.polledInput=o>0?n.b.RIGHT:n.b.LEFT:r():s>this.table.clientWidth/15?this.polledInput=a>0?n.b.DOWN:n.b.UP:r(),this.touchStart=null,t.preventDefault()}}}])&&o(e.prototype,r),a&&o(e,a),t}()},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var n=r(0);function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.handler=r,this.columns=1,this.rows=1,this.boundResizeHandler=Object(n.f)(this.trigger.bind(this)),window.addEventListener("resize",this.boundResizeHandler)}var e,r,o;return e=t,(r=[{key:"setLevel",value:function(t,e){this.rows=t,this.columns=e}},{key:"trigger",value:function(){var t=this.columns/this.rows,e=window.innerWidth-this.table.offsetLeft,r=window.innerHeight-this.table.offsetTop,n=0;n=e/r<t?e/t:r*t,this.handler(Math.floor(n))}},{key:"dispose",value:function(){window.removeEventListener("resize",this.boundResizeHandler)}}])&&i(e.prototype,r),o&&i(e,o),t}()},function(t,e,r){"use strict";var n=r(7),i=r(149),o=r(0);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}var c=function(){function t(){u(this,t),this.cache=new Map}return l(t,[{key:"get",value:function(t,e,r,n){var i=t.map(function(t){return t.getName()}).join(" "),o=this.cache.get(i);return o||(o=function(t,e,r,n){if(0===t.length){for(var i=[],o=0;o<r;o++){i[o]=i[o]||[];for(var a=0;a<n;a++)e&&(i[o][a]=e)}return i}0;if(1===t.length)return t[0].getPixels(r,n);var u=t[0].getPixels(r,n);return t.slice(1).forEach(function(t,e){for(var i=t.getPixels(r,n),o=0;o<r;o++){u[o]=u[o]||[];for(var a=0;a<n;a++){var s=i[o][a];u[o][a]&&!u[o][a].isTransparent()||!s||s.isTransparent()||(u[o][a]=s)}}}),u}(t,e,r,n),this.cache.set(i,o)),o}},{key:"clear",value:function(){this.cache.clear()}}]),t}();var f=function(){function t(){u(this,t),this.cellColorCache=new c,this.renderedPixels=[],this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.isDumpingScreen=!1,this.PIXEL_HEIGHT=1,this.PIXEL_WIDTH=2,this.SPRITE_HEIGHT=5,this.SPRITE_WIDTH=5,this.hasVisualUi=!0,this.gameData=null,this.currentLevelMessage=null,this.currentLevelCells=null,this.windowOffsetWidth=null,this.windowOffsetHeight=null}return l(t,[{key:"destroy",value:function(){this.gameData=null,this.currentLevelMessage=null,this.currentLevelCells=null,this.renderedPixels=[],this.cellColorCache.clear()}},{key:"onGameChange",value:function(t){if(this.gameData=t,this.renderedPixels=[],this.cellColorCache.clear(),this.clearScreen(),this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.windowOffsetWidth=null,this.windowOffsetHeight=null,this.gameData.metadata.flickscreen){var e=this.gameData.metadata.flickscreen,r=e.width,n=e.height;this.windowOffsetWidth=r,this.windowOffsetHeight=n}else if(this.gameData.metadata.zoomscreen){var i=this.gameData.metadata.zoomscreen,o=i.width,a=i.height;this.windowOffsetWidth=o,this.windowOffsetHeight=a}var u=this.gameData.getSpriteSize(),s=u.spriteHeight,l=u.spriteWidth;this.SPRITE_HEIGHT=s,this.SPRITE_WIDTH=l}},{key:"getGameData",value:function(){if(!this.gameData)throw new Error("BUG: Game has not been specified yet");return this.gameData}},{key:"onLevelChange",value:function(t,e,r){if(!e&&!r||e&&r)throw new Error("BUG: Must provide either cells or a message (but not both)");this.currentLevelCells=e,this.currentLevelMessage=r}},{key:"getCurrentLevelCells",value:function(){if(!this.currentLevelCells)throw new Error("BUG: There are no cells to render. Maybe it is a message level? Or no level has been set yet");return this.currentLevelCells}},{key:"debugRenderScreen",value:function(){this.renderScreen(!0)}},{key:"renderMessageScreen",value:function(t){var e=this.windowOffsetColStart,r=this.windowOffsetRowStart,n=this.windowOffsetHeight,i=this.windowOffsetWidth;this.windowOffsetColStart=0,this.windowOffsetRowStart=0,this.windowOffsetHeight=13,this.windowOffsetWidth=34,this.clearScreen(),this.windowOffsetColStart=e,this.windowOffsetRowStart=r,this.windowOffsetHeight=n,this.windowOffsetWidth=i}},{key:"renderScreen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.gameData)throw new Error("BUG: gameData was not set yet");this.currentLevelMessage?this.renderMessageScreen(this.currentLevelMessage):this.currentLevelCells&&(t&&(this.cellColorCache.clear(),this.renderedPixels=[]),this.renderLevelScreen(this.currentLevelCells,e))}},{key:"drawCells",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.gameData)throw new Error("BUG: gameData was not set yet");var n=Object(o.g)(this.getCurrentLevelCells()),i=this.gameData.getPlayer().getCellsThatMatch(n);if(1===i.size&&r<=1){var u=a(i)[0],s=this.cellPosToXY(u).isOnScreen;this.recenterPlayerIfNeeded(u,s)&&(t=Object(o.g)(this.getCurrentLevelCells()))}this.hasVisualUi&&this.drawCellsAfterRecentering(t,r)}},{key:"getPixelsForCell",value:function(t){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var e=t.getSprites().filter(function(t){return!t.isTransparent()}),r=this.gameData.getMagicBackgroundSprite();return r&&e.push(r),this.cellColorCache.get(e,this.gameData.metadata.backgroundColor,this.SPRITE_HEIGHT,this.SPRITE_WIDTH)}},{key:"createMessageTextScreen",value:function(t){var e=["                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","                                  ","          X to continue           ","                                  ","                                  "];var r=e[9],n=e[10];e[10]=r;var i=e[0].length,o=function(t,e){if(!t)return t;var r=".{1,"+(e=e||75)+"}(\\s|$)|.{"+e+"}|.+$",n=t.match(RegExp(r,"g"));if(n)return n;throw new Error("BUG: Match did not work")}(t,e[0].length),a=5-(o.length/2|0);a<0&&(a=0);for(var u=Math.min(o.length,12),s=0;s<u;s++){var l=o[s],c=a+s,f=(i-l.length)/2|0,h=e[c];e[c]=h.slice(0,f)+l+h.slice(f+l.length)}var d=10;return u>=10&&(d=u<12?u+1:12),e[d]=n,e}},{key:"createMessageSprites",value:function(t){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var e=this.createMessageTextScreen(t),r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value,l=[];r.push(l);var c=!0,f=!1,h=void 0;try{for(var d,v=s[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=d.value,y=this.gameData.getLetterSprite(p);l.push(new Set([y]))}}catch(t){f=!0,h=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}}}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}},{key:"cellPosToXY",value:function(t){var e,r,n=t.colIndex,i=t.rowIndex,o=!0;return this.windowOffsetHeight&&this.windowOffsetWidth&&(this.windowOffsetColStart>n||this.windowOffsetRowStart>i||this.windowOffsetColStart+this.windowOffsetWidth<=n||this.windowOffsetRowStart+this.windowOffsetHeight<=i)&&(o=!1),e=(n-this.windowOffsetColStart)*this.SPRITE_WIDTH,r=(i-this.windowOffsetRowStart)*this.SPRITE_HEIGHT,o&&(o=this.checkIfCellCanBeDrawnOnScreen(e,r)),(e<0||r<0)&&(o=!1),{isOnScreen:o,cellStartX:e,cellStartY:r}}},{key:"clearScreen",value:function(){this.renderedPixels=[]}},{key:"recenterPlayerIfNeeded",value:function(t,e){if(!this.gameData)throw new Error("BUG: gameData was not set yet");var r,n,i,o,a,u,s=this.windowOffsetColStart,l=this.windowOffsetRowStart,c=this.gameData.metadata.flickscreen,f=this.gameData.metadata.zoomscreen,h=this.getMaxSize(),d=h.columns,v=h.rows,p=Math.floor(d/this.SPRITE_WIDTH/this.PIXEL_WIDTH),y=Math.floor(v/this.SPRITE_HEIGHT/this.PIXEL_HEIGHT);if(c?(n=t.rowIndex-t.rowIndex%c.height,r=t.colIndex-t.colIndex%c.width,o=c.height,i=c.width):(r=0,n=0,o=this.getCurrentLevelCells().length,i=this.getCurrentLevelCells()[0].length),f?(u=Math.min(f.height,y),a=Math.min(f.width,p)):(u=y,a=p),!(o<=u&&i<=a)){var g=!1;if(i>a&&(s+Math.round(a/4)>t.colIndex||s+Math.round(3*a/4)<=t.colIndex)){var m=t.colIndex-Math.floor(a/2);(m=Math.max(m,r))+a>r+i&&(m=r+i-a),m!==this.windowOffsetColStart&&(this.windowOffsetColStart=m,g=!0)}if(o>u&&(l+Math.round(u/4)>t.rowIndex||l+Math.round(3*u/4)<=t.rowIndex)){var b=t.rowIndex-Math.floor(u/2);(b=Math.max(b,n))+u>n+o&&(b=n+o-u),b!==this.windowOffsetRowStart&&(this.windowOffsetRowStart=b,g=!0)}return g||e?g:(this.windowOffsetColStart=r,this.windowOffsetRowStart=n,!0)}return!e&&(this.windowOffsetColStart=r,this.windowOffsetRowStart=n,!0)}}]),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function y(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){p(o,n,i,a,u,"next",t)}function u(t){p(o,n,i,a,u,"throw",t)}a(void 0)})}}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var S=function(t){function e(t,r){var n,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(a=b(e).call(this))||"object"!==h(a)&&"function"!=typeof a?w(i):a).table=t,n.tableCells=[],n.inputsProcessed=0,n.interactsWithPlayer=new Set,n.usedInMessages=new Set,t.classList.add("ps-table"),n.markAcceptingInput(!1),n.onPress=n.onPress.bind(w(w(n))),n.onLevelChange=n.onLevelChange.bind(w(w(n))),n.handler=new o.a(r?[r]:[]);var u=t.querySelector("[aria-live]")||document.querySelector("[aria-live]");if(!u)throw new Error("Error: For screenreaders to work, an element inside the table (for now) with an aria-live attribute needs to exist in the initial page. See https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions");return n.liveLog=u,n.didPressCauseTick=!1,n.silencedOutput=!1,n.messagesSincePress=0,n.isCollecting=!1,n.collectedSprites=new Map,n.collectingTickCount=0,n}var r,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,f),r=e,(a=[{key:"onPause",value:function(){this.table.setAttribute("data-ps-state","paused"),this.handler.onPause()}},{key:"onResume",value:function(){this.table.setAttribute("data-ps-state","running"),this.handler.onResume()}},{key:"onGameChange",value:function(t){m(b(e.prototype),"onGameChange",this).call(this,t),this.silencedOutput=!1,this.didPressCauseTick=!1,this.interactsWithPlayer=Object(o.q)(this.getGameData()),this.usedInMessages=new Set(this.interactsWithPlayer),this.collectedSprites.clear(),this.handler.onGameChange(t)}},{key:"onPress",value:function(t){switch(this.didPressCauseTick=!0,this.liveLog.innerHTML="",this.markAcceptingInput(!1),t){case o.b.UNDO:case o.b.RESTART:this.renderScreen(!1)}this.handler.onPress(t)}},{key:"onLevelChange",value:function(t,r,n){if(this.clearScreen(),this.table.setAttribute("data-ps-current-level","".concat(t)),r){m(b(e.prototype),"onLevelChange",this).call(this,t,r,n),this.tableCells=[];var i=this.getGameData(),o=i.metadata.flickscreen||i.metadata.zoomscreen||{width:r[0].length,height:r.length},a=o.width,u=o.height;this.table.setAttribute("tabindex","0");for(var s=document.createElement("tbody"),l=0;l<u;l++){for(var c=document.createElement("tr"),f=[],h=0;h<a;h++){var d=document.createElement("td"),v=[];d.classList.add("ps-cell");var p=document.createElement("span");p.classList.add("ps-cell-label"),d.appendChild(p);var y=document.createElement("div");y.classList.add("ps-sprite-whole"),y.setAttribute("aria-hidden","true");for(var g=0;g<this.SPRITE_HEIGHT;g++){var _=document.createElement("div");_.classList.add("ps-sprite-row");for(var w=[],S=0;S<this.SPRITE_WIDTH;S++){var E=document.createElement("span");E.classList.add("ps-sprite-pixel"),_.appendChild(E),w.push(E)}y.appendChild(_),v.push(w)}d.appendChild(y),c.appendChild(d),f.push({td:d,label:p,pixels:v})}s.appendChild(c),this.tableCells.push(f)}this.table.prepend(s);var k=!0,T=!1,O=void 0;try{for(var x,M=r[Symbol.iterator]();!(k=(x=M.next()).done);k=!0){var C=x.value;this.drawCells(C,!1)}}catch(t){T=!0,O=t}finally{try{k||null==M.return||M.return()}finally{if(T)throw O}}}this.markAcceptingInput(!0),this.handler.onLevelChange(t,r,n)}},{key:"onMessage",value:function(){var t=y(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handler.onMessage(e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onWin",value:function(){this.handler.onWin()}},{key:"onSound",value:function(){var t=y(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(i.playSound)(e.soundCode),t.next=3,this.handler.onSound(e);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onTick",value:function(t,e,r){this.collectingTickCount++,this.printMessageLog(r,e),this.drawCells(t,!1),this.markAcceptingInput(!e),this.didPressCauseTick=!1,this.handler.onTick(t,e,r)}},{key:"willAllLevelsFitOnScreen",value:function(t){return!0}},{key:"_drawPixel",value:function(t,e,r,n,i){var o=Math.floor(e/this.SPRITE_HEIGHT),a=Math.floor(t/this.SPRITE_WIDTH),u=e%this.SPRITE_HEIGHT,s=t%this.SPRITE_WIDTH,l=this.tableCells[o][a].pixels[u][s];if(!l)throw new Error("BUG: Could not set pixel because table is too small");var c="color: ".concat(r,";");n&&(c+=" background-color: ".concat(n,";")),l.setAttribute("style",c)}},{key:"clearScreen",value:function(){m(b(e.prototype),"clearScreen",this).call(this);var t=this.table.querySelector("tbody");t&&t.remove(),this.liveLog.innerHTML="",this.tableCells=[]}},{key:"renderLevelScreen",value:function(t,e){this.drawCells(Object(o.g)(t),!1,e)}},{key:"setPixel",value:function(t,e,r,n,i){var o=Math.floor(e/this.SPRITE_HEIGHT),a=Math.floor(t/this.SPRITE_WIDTH),u=e%this.SPRITE_HEIGHT,s=t%this.SPRITE_WIDTH,l=this.tableCells[o][a].pixels[u][s];if(!l)throw new Error("BUG: Could not set pixel because table is too small");i&&0!==i.trim().length||(i=""),this.renderedPixels[e]||(this.renderedPixels[e]=[]);var c=this.renderedPixels[e][t];c&&c.hex===r&&c.chars===i||(this.renderedPixels[e][t]={hex:r,chars:i},l.setAttribute("style","background-color: ".concat(r)))}},{key:"drawCellsAfterRecentering",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;this._drawCell(u,e)}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"checkIfCellCanBeDrawnOnScreen",value:function(t,e){return!0}},{key:"getMaxSize",value:function(){return{columns:1e3,rows:1e3}}},{key:"printMessageLog",value:function(t,e){var r=this;if(!this.silencedOutput||this.didPressCauseTick){var i=[],a=function(t,e){if(i.push(t),r.isCollecting){var n=!0,o=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value;c=r.collectedSprites,f=l,h=void 0,h=c.get(f),c.set(f,h?h+1:1)}}catch(t){o=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}}var c,f,h};e&&a("game tick",[]);var u=!0,s=!1,l=void 0;try{for(var c,f=t[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;switch(h.type){case n.a.ADD:var p=!0,y=!1,g=void 0;try{for(var m,b=Object(o.o)(this.usedInMessages,h.sprites)[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var _=m.value;a("Added ".concat(_.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[_])}}catch(t){y=!0,g=t}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}break;case n.a.REPLACE:var w=!0,S=!1,E=void 0;try{for(var k,T=h.replacements[Symbol.iterator]();!(w=(k=T.next()).done);w=!0){var O=k.value,x=O.oldSprite,M=O.newSprite;this.usedInMessages.has(x)?this.usedInMessages.has(M)?a("Replaced ".concat(x.getName()," with ").concat(M.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[x,M]):a("Removed* ".concat(x.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[x]):this.usedInMessages.has(M)&&a("Added* ".concat(M.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[M])}}catch(t){S=!0,E=t}finally{try{w||null==T.return||T.return()}finally{if(S)throw E}}break;case n.a.REMOVE:var C=!0,R=!1,A=void 0;try{for(var I,L=Object(o.o)(this.usedInMessages,h.sprites)[Symbol.iterator]();!(C=(I=L.next()).done);C=!0){var P=I.value;a("Removed ".concat(P.getName()," @ ").concat(h.cell.rowIndex,",").concat(h.cell.colIndex),[P])}}catch(t){R=!0,A=t}finally{try{C||null==L.return||L.return()}finally{if(R)throw A}}break;case n.a.MOVE:a("Moved ".concat(h.sprite.getName()," ").concat(h.direction," to ").concat(h.newCell.rowIndex,",").concat(h.newCell.colIndex),[h.sprite]);break;default:throw new Error("BUG: unsupported a11y message type ".concat(h))}}}catch(t){s=!0,l=t}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}if(this.didPressCauseTick)i.length>10&&(i=[].concat(v(i.slice(0,4)),["(truncated messages)"],v(i.slice(i.length-4,i.length))));else if(this.silencedOutput)i=[];else if(!this.isCollecting&&(this.messagesSincePress>10||i.length>10))this.collectedSprites.size>0?(this.silencedOutput=!0,i=["Things keep changing so switching to a quieter mode"]):(this.isCollecting=!0,this.collectingTickCount=0,i=["Many things changed (probably animations). Collecting data for a few ticks to see what to ignore"]);else if(this.isCollecting&&this.collectingTickCount<20)i=[];else if(this.isCollecting){this.isCollecting=!1,i=["Done collecting. Found ".concat(this.collectedSprites.size," sprites to ignore: ").concat(v(this.collectedSprites.keys()).map(function(t){return t.getName()}).join(", "))],this.messagesSincePress=0;var N=!0,D=!1,j=void 0;try{for(var B,F=this.collectedSprites[Symbol.iterator]();!(N=(B=F.next()).done);N=!0){var G=d(B.value,2);_=G[0];G[1]>4&&this.usedInMessages.delete(_)}}catch(t){D=!0,j=t}finally{try{N||null==F.return||F.return()}finally{if(D)throw j}}}!function(){for(var t=0;t<i.length;t++){var e=i[t],n=document.createElement("p");n.textContent=e,r.liveLog.append(n),r.didPressCauseTick||r.messagesSincePress++}}(),this.didPressCauseTick&&(this.messagesSincePress=0)}}},{key:"markAcceptingInput",value:function(t){t?this.table.setAttribute("data-ps-accepting-input","true"):(this.inputsProcessed++,this.table.setAttribute("data-ps-accepting-input","false")),this.table.setAttribute("data-ps-last-input-processed","".concat(this.inputsProcessed))}},{key:"_drawCell",value:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.gameData)throw new Error("BUG: gameData was not set yet");if(!this.hasVisualUi)throw new Error("BUG: Should not get to this point");var r=t.getSprites().filter(function(t){return e.interactsWithPlayer.has(t)}),n=this.cellPosToXY(t),i=n.isOnScreen,o=n.cellStartX,a=n.cellStartY;if(i){var u=this.tableCells[t.rowIndex-this.windowOffsetRowStart];if(!u)throw new Error("BUG: Should not be trying to draw when there are no table cells");var s=u[t.colIndex-this.windowOffsetColStart];if(!s)throw new Error("BUG: Should not be trying to draw when there is not a matching table cell");var l=s.label;if(!l)throw new Error("BUG: Could not find cell in the table: [".concat(t.rowIndex," - ").concat(this.windowOffsetRowStart,"][").concat(t.colIndex," - ").concat(this.windowOffsetColStart,"]"));if(r.length>0)l.classList.remove("ps-cell-empty"),this.gameData.getPlayer().getSpritesThatMatch(t).size>0?l.classList.add("ps-player"):l.classList.remove("ps-player"),l.textContent=r.map(function(t){return t.getName()}).join(", ");else l.classList.remove("ps-player"),l.classList.add("ps-cell-empty"),l.textContent="(empty)";this.getPixelsForCell(t).forEach(function(t,r){t.forEach(function(t,n){if(!e.gameData)throw new Error("BUG: gameData was not set yet");var i=o+n,u=a+r,s=null;if(t&&(s=t.isTransparent()?e.gameData.metadata.backgroundColor?e.gameData.metadata.backgroundColor:null:t),s){var l=s.toRgb(),c=(l.r,l.g,l.b,s.toHex());e.setPixel(i,u,c,null," ")}})})}}}])&&g(r.prototype,a),u&&g(r,u),e}();e.a=S},,function(t,e,r){"use strict";(function(t){if(r(155),r(351),r(352),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";function n(t,r,n){t[r]||Object[e](t,r,{writable:!0,configurable:!0,value:n})}n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,r(109))},function(t,e,r){r(156),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(231),r(232),r(233),r(235),r(236),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(99),r(259),r(129),r(260),r(130),r(261),r(262),r(263),r(264),r(265),r(133),r(135),r(136),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(344),r(345),r(346),r(347),r(348),r(349),r(350),t.exports=r(25)},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(4),o=r(21),a=r(10),u=r(1),s=r(18),l=r(37).KEY,c=r(5),f=r(63),h=r(51),d=r(42),v=r(8),p=r(111),y=r(80),g=r(157),m=r(66),b=r(3),_=r(6),w=r(22),S=r(31),E=r(41),k=r(45),T=r(114),O=r(23),x=r(11),M=r(43),C=O.f,R=x.f,A=T.f,I=i.Symbol,L=i.JSON,P=L&&L.stringify,N=v("_hidden"),D=v("toPrimitive"),j={}.propertyIsEnumerable,B=f("symbol-registry"),F=f("symbols"),G=f("op-symbols"),U=Object.prototype,W="function"==typeof I,H=i.QObject,q=!H||!H.prototype||!H.prototype.findChild,z=a&&c(function(){return 7!=k(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=C(U,e);n&&delete U[e],R(t,e,r),n&&t!==U&&R(U,e,n)}:R,V=function(t){var e=F[t]=k(I.prototype);return e._k=t,e},K=W&&"symbol"==n(I.iterator)?function(t){return"symbol"==n(t)}:function(t){return t instanceof I},Y=function(t,e,r){return t===U&&Y(G,e,r),b(t),e=S(e,!0),b(r),o(F,e)?(r.enumerable?(o(t,N)&&t[N][e]&&(t[N][e]=!1),r=k(r,{enumerable:E(0,!1)})):(o(t,N)||R(t,N,E(1,{})),t[N][e]=!0),z(t,e,r)):R(t,e,r)},X=function(t,e){b(t);for(var r,n=g(e=w(e)),i=0,o=n.length;o>i;)Y(t,r=n[i++],e[r]);return t},J=function(t){var e=j.call(this,t=S(t,!0));return!(this===U&&o(F,t)&&!o(G,t))&&(!(e||!o(this,t)||!o(F,t)||o(this,N)&&this[N][t])||e)},$=function(t,e){if(t=w(t),e=S(e,!0),t!==U||!o(F,e)||o(G,e)){var r=C(t,e);return!r||!o(F,e)||o(t,N)&&t[N][e]||(r.enumerable=!0),r}},Z=function(t){for(var e,r=A(w(t)),n=[],i=0;r.length>i;)o(F,e=r[i++])||e==N||e==l||n.push(e);return n},Q=function(t){for(var e,r=t===U,n=A(r?G:w(t)),i=[],a=0;n.length>a;)!o(F,e=n[a++])||r&&!o(U,e)||i.push(F[e]);return i};W||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0);return a&&q&&z(U,t,{configurable:!0,set:function e(r){this===U&&e.call(G,r),o(this,N)&&o(this[N],t)&&(this[N][t]=!1),z(this,t,E(1,r))}}),V(t)}).prototype,"toString",function(){return this._k}),O.f=$,x.f=Y,r(46).f=T.f=Z,r(59).f=J,r(65).f=Q,a&&!r(38)&&s(U,"propertyIsEnumerable",J,!0),p.f=function(t){return V(v(t))}),u(u.G+u.W+u.F*!W,{Symbol:I});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)v(tt[et++]);for(var rt=M(v.store),nt=0;rt.length>nt;)y(rt[nt++]);u(u.S+u.F*!W,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=I(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),u(u.S+u.F*!W,"Object",{create:function(t,e){return void 0===e?k(t):X(k(t),e)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:Q}),L&&u(u.S+u.F*(!W||c(function(){var t=I();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(_(e)||void 0!==t)&&!K(t))return m(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!K(e))return e}),n[1]=e,P.apply(L,n)}}),I.prototype[D]||r(17)(I.prototype,D,I.prototype.valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,r){var n=r(43),i=r(65),o=r(59);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var a,u=r(t),s=o.f,l=0;u.length>l;)s.call(t,a=u[l++])&&e.push(a);return e}},function(t,e,r){var n=r(1);n(n.S,"Object",{create:r(45)})},function(t,e,r){var n=r(1);n(n.S+n.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,e,r){var n=r(1);n(n.S+n.F*!r(10),"Object",{defineProperties:r(113)})},function(t,e,r){var n=r(22),i=r(23).f;r(33)("getOwnPropertyDescriptor",function(){return function(t,e){return i(n(t),e)}})},function(t,e,r){var n=r(12),i=r(24);r(33)("getPrototypeOf",function(){return function(t){return i(n(t))}})},function(t,e,r){var n=r(12),i=r(43);r(33)("keys",function(){return function(t){return i(n(t))}})},function(t,e,r){r(33)("getOwnPropertyNames",function(){return r(114).f})},function(t,e,r){var n=r(6),i=r(37).onFreeze;r(33)("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(6),i=r(37).onFreeze;r(33)("seal",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(6),i=r(37).onFreeze;r(33)("preventExtensions",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(6);r(33)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(6);r(33)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(6);r(33)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,r){var n=r(1);n(n.S+n.F,"Object",{assign:r(115)})},function(t,e,r){var n=r(1);n(n.S,"Object",{is:r(116)})},function(t,e,r){var n=r(1);n(n.S,"Object",{setPrototypeOf:r(84).set})},function(t,e,r){"use strict";var n=r(52),i={};i[r(8)("toStringTag")]="z",i+""!="[object z]"&&r(18)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,r){var n=r(1);n(n.P,"Function",{bind:r(117)})},function(t,e,r){var n=r(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(10)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,r){"use strict";var n=r(6),i=r(24),o=r(8)("hasInstance"),a=Function.prototype;o in a||r(11).f(a,o,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,r){var n=r(1),i=r(119);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(t,e,r){var n=r(1),i=r(120);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(t,e,r){"use strict";var n=r(4),i=r(21),o=r(27),a=r(86),u=r(31),s=r(5),l=r(46).f,c=r(23).f,f=r(11).f,h=r(53).trim,d=n.Number,v=d,p=d.prototype,y="Number"==o(r(45)(p)),g="trim"in String.prototype,m=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){var r,n,i,o=(e=g?e.trim():h(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,s=e.slice(2),l=0,c=s.length;l<c;l++)if((a=s.charCodeAt(l))<48||a>i)return NaN;return parseInt(s,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof d&&(y?s(function(){p.valueOf.call(r)}):"Number"!=o(r))?a(new v(m(e)),r,d):m(e)};for(var b,_=r(10)?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)i(v,b=_[w])&&!i(d,b)&&f(d,b,c(v,b));d.prototype=p,p.constructor=d,r(18)(n,"Number",d)}},function(t,e,r){"use strict";var n=r(1),i=r(28),o=r(121),a=r(87),u=1..toFixed,s=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*l[r],l[r]=n%1e7,n=s(n/1e7)},h=function(t){for(var e=6,r=0;--e>=0;)r+=l[e],l[e]=s(r/t),r=r%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var r=String(l[t]);e=""===e?r:e+a.call("0",7-r.length)+r}return e},v=function t(e,r,n){return 0===r?n:r%2==1?t(e,r-1,n*e):t(e*e,r/2,n)};n(n.P+n.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(5)(function(){u.call({})})),"Number",{toFixed:function(t){var e,r,n,u,s=o(this,c),l=i(t),p="",y="0";if(l<0||l>20)throw RangeError(c);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(s*v(2,69,1))-69)<0?s*v(2,-e,1):s/v(2,e,1),r*=4503599627370496,(e=52-e)>0){for(f(0,r),n=l;n>=7;)f(1e7,0),n-=7;for(f(v(10,n,1),0),n=e-1;n>=23;)h(1<<23),n-=23;h(1<<n),f(1,1),h(2),y=d()}else f(0,r),f(1<<-e,0),y=d()+a.call("0",l);return y=l>0?p+((u=y.length)<=l?"0."+a.call("0",l-u)+y:y.slice(0,u-l)+"."+y.slice(u-l)):p+y}})},function(t,e,r){"use strict";var n=r(1),i=r(5),o=r(121),a=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,r){var n=r(1);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,r){var n=r(1),i=r(4).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,r){var n=r(1);n(n.S,"Number",{isInteger:r(122)})},function(t,e,r){var n=r(1);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(1),i=r(122),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,r){var n=r(1);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(1);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(1),i=r(120);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,r){var n=r(1),i=r(119);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,r){var n=r(1),i=r(123),o=Math.sqrt,a=Math.acosh;n(n.S+n.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,r){var n=r(1),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,r){var n=r(1),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,r){var n=r(1),i=r(88);n(n.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,r){var n=r(1),i=Math.exp;n(n.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,r){var n=r(1),i=r(89);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,r){var n=r(1);n(n.S,"Math",{fround:r(124)})},function(t,e,r){var n=r(1),i=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,o=0,a=0,u=arguments.length,s=0;a<u;)s<(r=i(arguments[a++]))?(o=o*(n=s/r)*n+1,s=r):o+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(o)}})},function(t,e,r){var n=r(1),i=Math.imul;n(n.S+n.F*r(5)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,r){var n=r(1);n(n.S,"Math",{log1p:r(123)})},function(t,e,r){var n=r(1);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){var n=r(1);n(n.S,"Math",{sign:r(88)})},function(t,e,r){var n=r(1),i=r(89),o=Math.exp;n(n.S+n.F*r(5)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,r){var n=r(1),i=r(89),o=Math.exp;n(n.S,"Math",{tanh:function(t){var e=i(t=+t),r=i(-t);return e==1/0?1:r==1/0?-1:(e-r)/(o(t)+o(-t))}})},function(t,e,r){var n=r(1);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(1),i=r(44),o=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,a=0;n>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){var n=r(1),i=r(22),o=r(9);n(n.S,"String",{raw:function(t){for(var e=i(t.raw),r=o(e.length),n=arguments.length,a=[],u=0;r>u;)a.push(String(e[u++])),u<n&&a.push(String(arguments[u]));return a.join("")}})},function(t,e,r){"use strict";r(53)("trim",function(t){return function(){return t(this,3)}})},function(t,e,r){"use strict";var n=r(67)(!0);r(90)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){"use strict";var n=r(1),i=r(67)(!1);n(n.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(1),i=r(9),o=r(92),a="".endsWith;n(n.P+n.F*r(93)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(e.length),u=void 0===r?n:Math.min(i(r),n),s=String(t);return a?a.call(e,s,u):e.slice(u-s.length,u)===s}})},function(t,e,r){"use strict";var n=r(1),i=r(92);n(n.P+n.F*r(93)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(1);n(n.P,"String",{repeat:r(87)})},function(t,e,r){"use strict";var n=r(1),i=r(9),o=r(92),a="".startsWith;n(n.P+n.F*r(93)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return a?a.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";r(19)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,r){"use strict";r(19)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,r){"use strict";r(19)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,r){"use strict";r(19)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,r){"use strict";r(19)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,r){"use strict";r(19)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,r){"use strict";r(19)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,r){"use strict";r(19)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,r){"use strict";r(19)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,r){"use strict";r(19)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,r){"use strict";r(19)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,r){"use strict";r(19)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,r){"use strict";r(19)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,r){var n=r(1);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,r){"use strict";var n=r(1),i=r(12),o=r(31);n(n.P+n.F*r(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),r=o(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},function(t,e,r){var n=r(1),i=r(234);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,r){"use strict";var n=r(5),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!n(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(r>99?r:"0"+a(r))+"Z"}:o},function(t,e,r){var n=Date.prototype,i=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(18)(n,"toString",function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"})},function(t,e,r){var n=r(8)("toPrimitive"),i=Date.prototype;n in i||r(17)(i,n,r(237))},function(t,e,r){"use strict";var n=r(3),i=r(31);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(n(this),"number"!=t)}},function(t,e,r){var n=r(1);n(n.S,"Array",{isArray:r(66)})},function(t,e,r){"use strict";var n=r(26),i=r(1),o=r(12),a=r(125),u=r(94),s=r(9),l=r(95),c=r(96);i(i.S+i.F*!r(69)(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,f,h=o(t),d="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,y=void 0!==p,g=0,m=c(h);if(y&&(p=n(p,v>2?arguments[2]:void 0,2)),null==m||d==Array&&u(m))for(r=new d(e=s(h.length));e>g;g++)l(r,g,y?p(h[g],g):h[g]);else for(f=m.call(h),r=new d;!(i=f.next()).done;g++)l(r,g,y?a(f,p,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,e,r){"use strict";var n=r(1),i=r(95);n(n.S+n.F*r(5)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)i(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){"use strict";var n=r(1),i=r(22),o=[].join;n(n.P+n.F*(r(58)!=Object||!r(29)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,r){"use strict";var n=r(1),i=r(83),o=r(27),a=r(44),u=r(9),s=[].slice;n(n.P+n.F*r(5)(function(){i&&s.call(i)}),"Array",{slice:function(t,e){var r=u(this.length),n=o(this);if(e=void 0===e?r:e,"Array"==n)return s.call(this,t,e);for(var i=a(t,r),l=a(e,r),c=u(l-i),f=new Array(c),h=0;h<c;h++)f[h]="String"==n?this.charAt(i+h):this[i+h];return f}})},function(t,e,r){"use strict";var n=r(1),i=r(15),o=r(12),a=r(5),u=[].sort,s=[1,2,3];n(n.P+n.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!r(29)(u)),"Array",{sort:function(t){return void 0===t?u.call(o(this)):u.call(o(this),i(t))}})},function(t,e,r){"use strict";var n=r(1),i=r(34)(0),o=r(29)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,r){var n=r(6),i=r(66),o=r(8)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){"use strict";var n=r(1),i=r(34)(1);n(n.P+n.F*!r(29)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),i=r(34)(2);n(n.P+n.F*!r(29)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),i=r(34)(3);n(n.P+n.F*!r(29)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),i=r(34)(4);n(n.P+n.F*!r(29)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),i=r(126);n(n.P+n.F*!r(29)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,r){"use strict";var n=r(1),i=r(126);n(n.P+n.F*!r(29)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,r){"use strict";var n=r(1),i=r(64)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(a||!r(29)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(1),i=r(22),o=r(28),a=r(9),u=[].lastIndexOf,s=!!u&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(s||!r(29)(u)),"Array",{lastIndexOf:function(t){if(s)return u.apply(this,arguments)||0;var e=i(this),r=a(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,r){var n=r(1);n(n.P,"Array",{copyWithin:r(127)}),r(39)("copyWithin")},function(t,e,r){var n=r(1);n(n.P,"Array",{fill:r(98)}),r(39)("fill")},function(t,e,r){"use strict";var n=r(1),i=r(34)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(39)("find")},function(t,e,r){"use strict";var n=r(1),i=r(34)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),n(n.P+n.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(39)(o)},function(t,e,r){r(47)("Array")},function(t,e,r){var n=r(4),i=r(86),o=r(11).f,a=r(46).f,u=r(68),s=r(60),l=n.RegExp,c=l,f=l.prototype,h=/a/g,d=/a/g,v=new l(h)!==h;if(r(10)&&(!v||r(5)(function(){return d[r(8)("match")]=!1,l(h)!=h||l(d)==d||"/a/i"!=l(h,"i")}))){l=function(t,e){var r=this instanceof l,n=u(t),o=void 0===e;return!r&&n&&t.constructor===l&&o?t:i(v?new c(n&&!o?t.source:t,e):c((n=t instanceof l)?t.source:t,n&&o?s.call(t):e),r?this:f,l)};for(var p=function(t){t in l||o(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},y=a(c),g=0;y.length>g;)p(y[g++]);f.constructor=l,l.prototype=f,r(18)(n,"RegExp",l)}r(47)("RegExp")},function(t,e,r){"use strict";r(130);var n=r(3),i=r(60),o=r(10),a=/./.toString,u=function(t){r(18)(RegExp.prototype,"toString",t,!0)};r(5)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?u(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=a.name&&u(function(){return a.call(this)})},function(t,e,r){"use strict";var n=r(3),i=r(9),o=r(101),a=r(70);r(71)("match",1,function(t,e,r,u){return[function(r){var n=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=u(r,t,this);if(e.done)return e.value;var s=n(t),l=String(this);if(!s.global)return a(s,l);var c=s.unicode;s.lastIndex=0;for(var f,h=[],d=0;null!==(f=a(s,l));){var v=String(f[0]);h[d]=v,""===v&&(s.lastIndex=o(l,i(s.lastIndex),c)),d++}return 0===d?null:h}]})},function(t,e,r){"use strict";var n=r(3),i=r(12),o=r(9),a=r(28),u=r(101),s=r(70),l=Math.max,c=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;r(71)("replace",2,function(t,e,r,v){return[function(n,i){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},function(t,e){var i=v(r,t,this,e);if(i.done)return i.value;var f=n(t),h=String(this),d="function"==typeof e;d||(e=String(e));var y=f.global;if(y){var g=f.unicode;f.lastIndex=0}for(var m=[];;){var b=s(f,h);if(null===b)break;if(m.push(b),!y)break;""===String(b[0])&&(f.lastIndex=u(h,o(f.lastIndex),g))}for(var _,w="",S=0,E=0;E<m.length;E++){b=m[E];for(var k=String(b[0]),T=l(c(a(b.index),h.length),0),O=[],x=1;x<b.length;x++)O.push(void 0===(_=b[x])?_:String(_));var M=b.groups;if(d){var C=[k].concat(O,T,h);void 0!==M&&C.push(M);var R=String(e.apply(void 0,C))}else R=p(k,h,T,O,M,e);T>=S&&(w+=h.slice(S,T)+R,S=T+k.length)}return w+h.slice(S)}];function p(t,e,n,o,a,u){var s=n+t.length,l=o.length,c=d;return void 0!==a&&(a=i(a),c=h),r.call(u,c,function(r,i){var u;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(s);case"<":u=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return i;if(c>l){var h=f(c/10);return 0===h?i:h<=l?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):i}u=o[c-1]}return void 0===u?"":u})}})},function(t,e,r){"use strict";var n=r(3),i=r(116),o=r(70);r(71)("search",1,function(t,e,r,a){return[function(r){var n=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=a(r,t,this);if(e.done)return e.value;var u=n(t),s=String(this),l=u.lastIndex;i(l,0)||(u.lastIndex=0);var c=o(u,s);return i(u.lastIndex,l)||(u.lastIndex=l),null===c?-1:c.index}]})},function(t,e,r){"use strict";var n=r(68),i=r(3),o=r(61),a=r(101),u=r(9),s=r(70),l=r(100),c=Math.min,f=[].push,h=!!function(){try{return new RegExp("x","y")}catch(t){}}();r(71)("split",2,function(t,e,r,d){var v=r;return"c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?v=function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!n(t))return r.call(i,t,e);for(var o,a,u,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,c+"g");(o=l.call(v,i))&&!((a=v.lastIndex)>h&&(s.push(i.slice(h,o.index)),o.length>1&&o.index<i.length&&f.apply(s,o.slice(1)),u=o[0].length,h=a,s.length>=d));)v.lastIndex===o.index&&v.lastIndex++;return h===i.length?!u&&v.test("")||s.push(""):s.push(i.slice(h)),s.length>d?s.slice(0,d):s}:"0".split(void 0,0).length&&(v=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}),[function(r,n){var i=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,i,n):v.call(String(i),r,n)},function(t,e){var n=d(v,t,this,e,v!==r);if(n.done)return n.value;var l=i(t),f=String(this),p=o(l,RegExp),y=l.unicode,g=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(h?"y":"g"),m=new p(h?l:"^(?:"+l.source+")",g),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===f.length)return null===s(m,f)?[f]:[];for(var _=0,w=0,S=[];w<f.length;){m.lastIndex=h?w:0;var E,k=s(m,h?f:f.slice(w));if(null===k||(E=c(u(m.lastIndex+(h?0:w)),f.length))===_)w=a(f,w,y);else{if(S.push(f.slice(_,w)),S.length===b)return S;for(var T=1;T<=k.length-1;T++)if(S.push(k[T]),S.length===b)return S;w=_=E}}return S.push(f.slice(_)),S}]})},function(t,e,r){"use strict";var n,i,o,a,u=r(38),s=r(4),l=r(26),c=r(52),f=r(1),h=r(6),d=r(15),v=r(48),p=r(49),y=r(61),g=r(102).set,m=r(103)(),b=r(104),_=r(131),w=r(72),S=r(132),E=s.TypeError,k=s.process,T=k&&k.versions,O=T&&T.v8||"",x=s.Promise,M="process"==c(k),C=function(){},R=i=b.f,A=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[r(8)("species")]=function(t){t(C,C)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e&&0!==O.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),I=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},L=function(t,e){if(!t._n){t._n=!0;var r=t._c;m(function(){for(var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a,u=i?e.ok:e.fail,s=e.resolve,l=e.reject,c=e.domain;try{u?(i||(2==t._h&&D(t),t._h=1),!0===u?r=n:(c&&c.enter(),r=u(n),c&&(c.exit(),a=!0)),r===e.promise?l(E("Promise-chain cycle")):(o=I(r))?o.call(r,s,l):s(r)):l(n)}catch(t){c&&!a&&c.exit(),l(t)}};r.length>o;)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&P(t)})}},P=function(t){g.call(s,function(){var e,r,n,i=t._v,o=N(t);if(o&&(e=_(function(){M?k.emit("unhandledRejection",i,t):(r=s.onunhandledrejection)?r({promise:t,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=M||N(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){g.call(s,function(){var e;M?k.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},B=function t(e){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw E("Promise can't be resolved itself");(r=I(e))?m(function(){var i={_w:n,_d:!1};try{r.call(e,l(t,i,1),l(j,i,1))}catch(t){j.call(i,t)}}):(n._v=e,n._s=1,L(n,!1))}catch(t){j.call({_w:n,_d:!1},t)}}};A||(x=function(t){v(this,x,"Promise","_h"),d(t),n.call(this);try{t(l(B,this,1),l(j,this,1))}catch(t){j.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(50)(x.prototype,{then:function(t,e){var r=R(y(this,x));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=M?k.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=l(B,t,1),this.reject=l(j,t,1)},b.f=R=function(t){return t===x||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!A,{Promise:x}),r(51)(x,"Promise"),r(47)("Promise"),a=r(25).Promise,f(f.S+f.F*!A,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(u||!A),"Promise",{resolve:function(t){return S(u&&this===a?x:this,t)}}),f(f.S+f.F*!(A&&r(69)(function(t){x.all(t).catch(C)})),"Promise",{all:function(t){var e=this,r=R(e),n=r.resolve,i=r.reject,o=_(function(){var r=[],o=0,a=1;p(t,!1,function(t){var u=o++,s=!1;r.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,r[u]=t,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=R(e),n=r.reject,i=_(function(){p(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(t,e,r){"use strict";var n=r(137),i=r(55);r(73)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(i(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,r){"use strict";var n=r(1),i=r(74),o=r(105),a=r(3),u=r(44),s=r(9),l=r(6),c=r(4).ArrayBuffer,f=r(61),h=o.ArrayBuffer,d=o.DataView,v=i.ABV&&c.isView,p=h.prototype.slice,y=i.VIEW;n(n.G+n.W+n.F*(c!==h),{ArrayBuffer:h}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return v&&v(t)||l(t)&&y in t}}),n(n.P+n.U+n.F*r(5)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==p&&void 0===e)return p.call(a(this),t);for(var r=a(this).byteLength,n=u(t,r),i=u(void 0===e?r:e,r),o=new(f(this,h))(s(i-n)),l=new d(this),c=new d(o),v=0;n<i;)c.setUint8(v++,l.getUint8(n++));return o}}),r(47)("ArrayBuffer")},function(t,e,r){var n=r(1);n(n.G+n.W+n.F*!r(74).ABV,{DataView:r(105).DataView})},function(t,e,r){r(35)("Int8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}},!0)},function(t,e,r){r(35)("Int16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Int32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Uint32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Float32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(35)("Float64",8,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){var n=r(1),i=r(15),o=r(3),a=(r(4).Reflect||{}).apply,u=Function.apply;n(n.S+n.F*!r(5)(function(){a(function(){})}),"Reflect",{apply:function(t,e,r){var n=i(t),s=o(r);return a?a(n,e,s):u.call(n,e,s)}})},function(t,e,r){var n=r(1),i=r(45),o=r(15),a=r(3),u=r(6),s=r(5),l=r(117),c=(r(4).Reflect||{}).construct,f=s(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),h=!s(function(){c(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(t,e){o(t),a(e);var r=arguments.length<3?t:o(arguments[2]);if(h&&!f)return c(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(l.apply(t,n))}var s=r.prototype,d=i(u(s)?s:Object.prototype),v=Function.apply.call(t,d,e);return u(v)?v:d}})},function(t,e,r){var n=r(11),i=r(1),o=r(3),a=r(31);i(i.S+i.F*r(5)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,r){o(t),e=a(e,!0),o(r);try{return n.f(t,e,r),!0}catch(t){return!1}}})},function(t,e,r){var n=r(1),i=r(23).f,o=r(3);n(n.S,"Reflect",{deleteProperty:function(t,e){var r=i(o(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){"use strict";var n=r(1),i=r(3),o=function(t){this._t=i(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};r(91)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,r){var n=r(23),i=r(24),o=r(21),a=r(1),u=r(6),s=r(3);a(a.S,"Reflect",{get:function t(e,r){var a,l,c=arguments.length<3?e:arguments[2];return s(e)===c?e[r]:(a=n.f(e,r))?o(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:u(l=i(e))?t(l,r,c):void 0}})},function(t,e,r){var n=r(23),i=r(1),o=r(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(o(t),e)}})},function(t,e,r){var n=r(1),i=r(24),o=r(3);n(n.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,r){var n=r(1);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,r){var n=r(1),i=r(3),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,r){var n=r(1);n(n.S,"Reflect",{ownKeys:r(139)})},function(t,e,r){var n=r(1),i=r(3),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,r){var n=r(11),i=r(23),o=r(24),a=r(21),u=r(1),s=r(41),l=r(3),c=r(6);u(u.S,"Reflect",{set:function t(e,r,u){var f,h,d=arguments.length<4?e:arguments[3],v=i.f(l(e),r);if(!v){if(c(h=o(e)))return t(h,r,u,d);v=s(0)}if(a(v,"value")){if(!1===v.writable||!c(d))return!1;if(f=i.f(d,r)){if(f.get||f.set||!1===f.writable)return!1;f.value=u,n.f(d,r,f)}else n.f(d,r,s(0,u));return!0}return void 0!==v.set&&(v.set.call(d,u),!0)}})},function(t,e,r){var n=r(1),i=r(84);i&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,r){"use strict";var n=r(1),i=r(64)(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(39)("includes")},function(t,e,r){"use strict";var n=r(1),i=r(140),o=r(12),a=r(9),u=r(15),s=r(97);n(n.P,"Array",{flatMap:function(t){var e,r,n=o(this);return u(t),e=a(n.length),r=s(n,0),i(r,n,n,e,0,1,t,arguments[1]),r}}),r(39)("flatMap")},function(t,e,r){"use strict";var n=r(1),i=r(140),o=r(12),a=r(9),u=r(28),s=r(97);n(n.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),r=a(e.length),n=s(e,0);return i(n,e,e,r,0,void 0===t?1:u(t)),n}}),r(39)("flatten")},function(t,e,r){"use strict";var n=r(1),i=r(67)(!0);n(n.P,"String",{at:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(1),i=r(141),o=r(72);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){"use strict";var n=r(1),i=r(141),o=r(72);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){"use strict";r(53)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,r){"use strict";r(53)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,r){"use strict";var n=r(1),i=r(32),o=r(9),a=r(68),u=r(60),s=RegExp.prototype,l=function(t,e){this._r=t,this._s=e};r(91)(l,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),r="flags"in s?String(t.flags):u.call(t),n=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=o(t.lastIndex),new l(n,e)}})},function(t,e,r){r(80)("asyncIterator")},function(t,e,r){r(80)("observable")},function(t,e,r){var n=r(1),i=r(139),o=r(22),a=r(23),u=r(95);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=o(t),s=a.f,l=i(n),c={},f=0;l.length>f;)void 0!==(r=s(n,e=l[f++]))&&u(c,e,r);return c}})},function(t,e,r){var n=r(1),i=r(142)(!1);n(n.S,"Object",{values:function(t){return i(t)}})},function(t,e,r){var n=r(1),i=r(142)(!0);n(n.S,"Object",{entries:function(t){return i(t)}})},function(t,e,r){"use strict";var n=r(1),i=r(12),o=r(15),a=r(11);r(10)&&n(n.P+r(75),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(1),i=r(12),o=r(15),a=r(11);r(10)&&n(n.P+r(75),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(1),i=r(12),o=r(31),a=r(24),u=r(23).f;r(10)&&n(n.P+r(75),"Object",{__lookupGetter__:function(t){var e,r=i(this),n=o(t,!0);do{if(e=u(r,n))return e.get}while(r=a(r))}})},function(t,e,r){"use strict";var n=r(1),i=r(12),o=r(31),a=r(24),u=r(23).f;r(10)&&n(n.P+r(75),"Object",{__lookupSetter__:function(t){var e,r=i(this),n=o(t,!0);do{if(e=u(r,n))return e.set}while(r=a(r))}})},function(t,e,r){var n=r(1);n(n.P+n.R,"Map",{toJSON:r(143)("Map")})},function(t,e,r){var n=r(1);n(n.P+n.R,"Set",{toJSON:r(143)("Set")})},function(t,e,r){r(76)("Map")},function(t,e,r){r(76)("Set")},function(t,e,r){r(76)("WeakMap")},function(t,e,r){r(76)("WeakSet")},function(t,e,r){r(77)("Map")},function(t,e,r){r(77)("Set")},function(t,e,r){r(77)("WeakMap")},function(t,e,r){r(77)("WeakSet")},function(t,e,r){var n=r(1);n(n.G,{global:r(4)})},function(t,e,r){var n=r(1);n(n.S,"System",{global:r(4)})},function(t,e,r){var n=r(1),i=r(27);n(n.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{clamp:function(t,e,r){return Math.min(r,Math.max(e,t))}})},function(t,e,r){var n=r(1);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,r){var n=r(1),i=180/Math.PI;n(n.S,"Math",{degrees:function(t){return t*i}})},function(t,e,r){var n=r(1),i=r(145),o=r(124);n(n.S,"Math",{fscale:function(t,e,r,n,a){return o(i(t,e,r,n,a))}})},function(t,e,r){var n=r(1);n(n.S,"Math",{iaddh:function(t,e,r,n){var i=t>>>0,o=r>>>0;return(e>>>0)+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,e,r){var n=r(1);n(n.S,"Math",{isubh:function(t,e,r,n){var i=t>>>0,o=r>>>0;return(e>>>0)-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,e,r){var n=r(1);n(n.S,"Math",{imulh:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n,a=r>>16,u=n>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>16)+((i*u>>>0)+(65535&s)>>16)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,r){var n=r(1),i=Math.PI/180;n(n.S,"Math",{radians:function(t){return t*i}})},function(t,e,r){var n=r(1);n(n.S,"Math",{scale:r(145)})},function(t,e,r){var n=r(1);n(n.S,"Math",{umulh:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n,a=r>>>16,u=n>>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>>16)+((i*u>>>0)+(65535&s)>>>16)}})},function(t,e,r){var n=r(1);n(n.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,r){"use strict";var n=r(1),i=r(25),o=r(4),a=r(61),u=r(132);n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return u(e,t()).then(function(){return r})}:t,r?function(r){return u(e,t()).then(function(){throw r})}:t)}})},function(t,e,r){"use strict";var n=r(1),i=r(104),o=r(131);n(n.S,"Promise",{try:function(t){var e=i.f(this),r=o(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},function(t,e,r){var n=r(36),i=r(3),o=n.key,a=n.set;n.exp({defineMetadata:function(t,e,r,n){a(t,e,i(r),o(n))}})},function(t,e,r){var n=r(36),i=r(3),o=n.key,a=n.map,u=n.store;n.exp({deleteMetadata:function(t,e){var r=arguments.length<3?void 0:o(arguments[2]),n=a(i(e),r,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var s=u.get(e);return s.delete(r),!!s.size||u.delete(e)}})},function(t,e,r){var n=r(36),i=r(3),o=r(24),a=n.has,u=n.get,s=n.key;n.exp({getMetadata:function(t,e){return function t(e,r,n){if(a(e,r,n))return u(e,r,n);var i=o(r);return null!==i?t(e,i,n):void 0}(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,r){var n=r(135),i=r(144),o=r(36),a=r(3),u=r(24),s=o.keys,l=o.key;o.exp({getMetadataKeys:function(t){return function t(e,r){var o=s(e,r),a=u(e);if(null===a)return o;var l=t(a,r);return l.length?o.length?i(new n(o.concat(l))):l:o}(a(t),arguments.length<2?void 0:l(arguments[1]))}})},function(t,e,r){var n=r(36),i=r(3),o=n.get,a=n.key;n.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,r){var n=r(36),i=r(3),o=n.keys,a=n.key;n.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,r){var n=r(36),i=r(3),o=r(24),a=n.has,u=n.key;n.exp({hasMetadata:function(t,e){return function t(e,r,n){if(a(e,r,n))return!0;var i=o(r);return null!==i&&t(e,i,n)}(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,r){var n=r(36),i=r(3),o=n.has,a=n.key;n.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,r){var n=r(36),i=r(3),o=r(15),a=n.key,u=n.set;n.exp({metadata:function(t,e){return function(r,n){u(t,e,(void 0!==n?i:o)(r),a(n))}}})},function(t,e,r){var n=r(1),i=r(103)(),o=r(4).process,a="process"==r(27)(o);n(n.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,r){"use strict";var n=r(1),i=r(4),o=r(25),a=r(103)(),u=r(8)("observable"),s=r(15),l=r(3),c=r(48),f=r(50),h=r(17),d=r(49),v=d.RETURN,p=function(t){return null==t?void 0:s(t)},y=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},m=function(t){g(t)||(t._o=void 0,y(t))},b=function(t,e){l(t),this._c=void 0,this._o=t,t=new _(this);try{var r=e(t),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:s(r),this._c=r)}catch(e){return void t.error(e)}g(this)&&y(this)};b.prototype=f({},{unsubscribe:function(){m(this)}});var _=function(t){this._s=t};_.prototype=f({},{next:function(t){var e=this._s;if(!g(e)){var r=e._o;try{var n=p(r.next);if(n)return n.call(r,t)}catch(t){try{m(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var r=e._o;e._o=void 0;try{var n=p(r.error);if(!n)throw t;t=n.call(r,t)}catch(t){try{y(e)}finally{throw t}}return y(e),t},complete:function(t){var e=this._s;if(!g(e)){var r=e._o;e._o=void 0;try{var n=p(r.complete);t=n?n.call(r,t):void 0}catch(t){try{y(e)}finally{throw t}}return y(e),t}}});var w=function(t){c(this,w,"Observable","_f")._f=s(t)};f(w.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(r,n){s(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),i.unsubscribe()}},error:n,complete:r})})}}),f(w,{from:function(t){var e="function"==typeof this?this:w,r=p(l(t)[u]);if(r){var n=l(r.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var r=!1;return a(function(){if(!r){try{if(d(t,!1,function(t){if(e.next(t),r)return v})===v)return}catch(t){if(r)throw t;return void e.error(t)}e.complete()}}),function(){r=!0}})},of:function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var e=!1;return a(function(){if(!e){for(var n=0;n<r.length;++n)if(t.next(r[n]),e)return;t.complete()}}),function(){e=!0}})}}),h(w.prototype,u,function(){return this}),n(n.G,{Observable:w}),r(47)("Observable")},function(t,e,r){var n=r(4),i=r(1),o=r(72),a=[].slice,u=/MSIE .\./.test(o),s=function(t){return function(e,r){var n=arguments.length>2,i=!!n&&a.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,r)}};i(i.G+i.B+i.F*u,{setTimeout:s(n.setTimeout),setInterval:s(n.setInterval)})},function(t,e,r){var n=r(1),i=r(102);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,r){for(var n=r(99),i=r(43),o=r(18),a=r(4),u=r(17),s=r(54),l=r(8),c=l("iterator"),f=l("toStringTag"),h=s.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=i(d),p=0;p<v.length;p++){var y,g=v[p],m=d[g],b=a[g],_=b&&b.prototype;if(_&&(_[c]||u(_,c,h),_[f]||u(_,f,g),s[g]=h,m))for(y in n)_[y]||o(_,y,n[y],!0)}},function(t,e,r){(function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";var n,i=Object.prototype,o=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",c="object"===r(e),f=t.regeneratorRuntime;if(f)c&&(e.exports=f);else{(f=t.regeneratorRuntime=c?e.exports:{}).wrap=w;var h="suspendedStart",d="suspendedYield",v="executing",p="completed",y={},g={};g[u]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(I([])));b&&b!==i&&o.call(b,u)&&(g=b);var _=T.prototype=E.prototype=Object.create(g);k.prototype=_.constructor=T,T.constructor=k,T[l]=k.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(_),t},f.awrap=function(t){return{__await:t}},O(x.prototype),x.prototype[s]=function(){return this},f.AsyncIterator=x,f.async=function(t,e,r,n){var i=new x(w(t,e,r,n));return f.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},O(_),_[l]="Generator",_[u]=function(){return this},_.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return u.type="throw",u.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;R(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}}}function w(t,e,r,n){var i=e&&e.prototype instanceof E?e:E,o=Object.create(i.prototype),a=new A(n||[]);return o._invoke=function(t,e,r){var n=h;return function(i,o){if(n===v)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=M(a,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var s=S(t,e,r);if("normal"===s.type){if(n=r.done?p:d,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=p,r.method="throw",r.arg=s.arg)}}}(t,r,a),o}function S(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function E(){}function k(){}function T(){}function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(e){function n(t,i,a,u){var s=S(e[t],e,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"===r(c)&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,a,u)},function(t){n("throw",t,a,u)}):Promise.resolve(c).then(function(t){l.value=t,a(l)},u)}u(s.arg)}var i;"object"===r(t.process)&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return i=i?i.then(r,r):r()}}function M(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,M(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=S(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,y;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function I(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:n,done:!0}}}("object"===(void 0===t?"undefined":r(t))?t:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:this)}).call(this,r(109),r(146)(t))},function(t,e,r){r(353),t.exports=r(25).RegExp.escape},function(t,e,r){var n=r(1),i=r(354)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var r=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,r)}}},function(t,e,r){"use strict";r.d(e,"a",function(){return m});var n=r(7),i=r(2),o=r(108),a=r(152),u=r(0),s=r(150),l=r(151);function c(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){d(t,e,r[e])})}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),t}var g=function(){function t(e,r,n){v(this,t),this.rowIndex=e,this.colIndex=r,this.sprites=n}return y(t,[{key:"getSprites",value:function(){return this.sprites}},{key:"getSpritesAsSet",value:function(){return new Set(this.sprites)}},{key:"getWantsToMove",value:function(){return u.d.STATIONARY}}]),t}(),m=function(){function t(e,r,n){var i=this;v(this,t),this.worker=e,this.table=r;n&&n.onMessage||(n=h({},n,{onMessage:function(t){return Object(u.j)(10,function(){return!i.inputWatcher.isSomethingPressed()&&(alert(t),!0)})}})),this.cellCache=[],this.levelNum=-123456,this.gameData=null,this.ui=new a.a(r,n),this.resizeWatcher=new l.a(r,this.handleResize.bind(this)),this.inputWatcher=new s.a(r),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.messageListener=this.messageListener.bind(this),this.pollInputWatcher=this.pollInputWatcher.bind(this),r.addEventListener("blur",this.pause),r.addEventListener("focus",this.resume),e.addEventListener("message",this.messageListener),this.inputInterval=window.setInterval(this.pollInputWatcher,10)}return y(t,[{key:"setGame",value:function(t,e){this.worker.postMessage({type:u.c.ON_GAME_CHANGE,code:t,level:e})}},{key:"dispose",value:function(){this.inputWatcher.dispose(),this.resizeWatcher.dispose(),clearInterval(this.inputInterval)}},{key:"press",value:function(t){this.worker.postMessage({type:u.c.PRESS,button:t})}},{key:"pause",value:function(){this.worker.postMessage({type:u.c.PAUSE}),this.inputInterval&&clearInterval(this.inputInterval),this.inputInterval=0}},{key:"resume",value:function(){this.worker.postMessage({type:u.c.RESUME}),this.inputInterval||(this.inputInterval=window.setInterval(this.pollInputWatcher,10))}},{key:"pollInputWatcher",value:function(){var t=this.inputWatcher.pollControls();t&&this.press(t)}},{key:"messageListener",value:function(){var t,e=(t=regeneratorRuntime.mark(function t(e){var r,n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.data,t.t0=r.type,t.next=t.t0===u.c.ON_GAME_CHANGE?4:t.t0===u.c.ON_LEVEL_CHANGE?8:t.t0===u.c.ON_MESSAGE?14:t.t0===u.c.ON_PRESS?19:t.t0===u.c.ON_TICK?21:t.t0===u.c.ON_SOUND?23:t.t0===u.c.ON_PAUSE?26:t.t0===u.c.ON_RESUME?28:t.t0===u.c.TICK?30:t.t0===u.c.PRESS?30:t.t0===u.c.PAUSE?30:t.t0===u.c.RESUME?30:31;break;case 4:return n=o.a.fromJson(r.payload,"**source not included because of laziness**"),this.gameData=n,this.ui.onGameChange(n),t.abrupt("break",32);case 8:return this.cellCache=[],this.levelNum=r.level,r.cells?this.ui.onLevelChange(r.level,r.cells.map(function(t){return t.map(function(t){return i.convertToCellish(t)})}),null):this.ui.onLevelChange(r.level,null,r.message),this.resizeWatcher.trigger(),this.table.focus(),t.abrupt("break",32);case 14:return t.next=16,this.ui.onMessage(r.message);case 16:return this.worker.postMessage({type:u.c.ON_MESSAGE_DONE}),this.table.focus(),t.abrupt("break",32);case 19:return this.ui.onPress(r.direction),t.abrupt("break",32);case 21:return this.ui.onTick(new Set(r.changedCells.map(function(t){return i.convertToCellish(t)})),r.hasAgain,this.convertToA11yMessages(r.a11yMessages)),t.abrupt("break",32);case 23:return t.next=25,this.ui.onSound({soundCode:r.soundCode});case 25:return t.abrupt("break",32);case 26:return this.ui.onPause(),t.abrupt("break",32);case 28:return this.ui.onResume(),t.abrupt("break",32);case 30:return t.abrupt("break",32);case 31:console.log('BUG: Unhandled Event occurred. Ignoring "'.concat(r.type,'"'),r);case 32:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){f(o,n,i,a,u,"next",t)}function u(t){f(o,n,i,a,u,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"convertToA11yMessages",value:function(t){var e=this;return t.map(function(t){switch(t.type){case n.a.ADD:return h({},t,{cell:e.convertToCellish(t.cell),sprites:c(t.sprites).map(function(t){return e.lookupSprite(t)})});case n.a.MOVE:return h({},t,{oldCell:e.convertToCellish(t.oldCell),newCell:e.convertToCellish(t.newCell),sprite:e.lookupSprite(t.sprite)});case n.a.REMOVE:return h({},t,{cell:e.convertToCellish(t.cell),sprites:c(t.sprites).map(function(t){return e.lookupSprite(t)})});case n.a.REPLACE:return h({},t,{cell:e.convertToCellish(t.cell),replacements:c(t.replacements).map(function(t){var r=t.oldSprite,n=t.newSprite;return{oldSprite:e.lookupSprite(r),newSprite:e.lookupSprite(n)}})})}})}},{key:"lookupSprite",value:function(t){var e=this.getGameData()._getSpriteByName(t);if(!e)throw new Error('Could not find sprite "'.concat(t,'"'));return e}},{key:"convertToCellish",value:function(t){var e=this,r=t.rowIndex,n=t.colIndex,i=t.spriteNames;this.cellCache[r]||(this.cellCache[r]=[]),this.cellCache[r][n]||(this.cellCache[r][n]=new g(r,n,[]));var o=this.cellCache[r][n];return o.sprites=i.map(function(t){return e.lookupSprite(t)}),o}},{key:"getGameData",value:function(){if(!this.gameData)throw new Error("BUG: Game Data has not been retreived from the worker yet");return this.gameData}},{key:"isCurrentLevelAMessage",value:function(){return this.getGameData().levels[this.levelNum].type===i.d.MESSAGE}},{key:"handleResize",value:function(t){this.isCurrentLevelAMessage()||this.table.setAttribute("style","width: ".concat(t,"px;"))}}]),t}()},,,,,function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}
/**
 * Seedable random number generator functions.
 * @version 1.0.0
 * @license Public Domain
 *
 * @example
 * var rng = new RNG('Example');
 * rng.random(40, 50);  // =>  42
 * rng.uniform();       // =>  0.7972798995050903
 * rng.normal();        // => -0.6698504543216376
 * rng.exponential();   // =>  1.0547367609131555
 * rng.poisson(4);      // =>  2
 * rng.gamma(4);        // =>  2.781724687386858
 */r.r(e),r.d(e,"RNG",function(){return u});var a=function(){function t(e){n(this,t),this.s=new Array(256),this.i=0,this.j=0;for(var r=0;r<256;r++)this.s[r]=r;e&&this.mix(e)}return o(t,[{key:"_swap",value:function(t,e){var r=this.s[t];this.s[t]=this.s[e],this.s[e]=r}},{key:"mix",value:function(t){for(var e=function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r),i=[];do{i.push(255&n),n>>=8}while(n>0);e=e.concat(i.reverse())}return e}(t),r=0,n=0;n<this.s.length;n++)r+=this.s[n]+e[n%e.length],r%=256,this._swap(n,r)}},{key:"next",value:function(){return this.i=(this.i+1)%256,this.j=(this.j+this.s[this.i])%256,this._swap(this.i,this.j),this.s[(this.s[this.i]+this.s[this.j])%256]}}]),t}(),u=function(){function t(e){n(this,t),this._normal=null,this._state=new a(JSON.stringify(e))}return o(t,[{key:"nextByte",value:function(){return this._state.next()}},{key:"uniform",value:function(){for(var t=0,e=0;e<7;e++)t*=256,t+=this.nextByte();return t/(Math.pow(2,56)-1)}},{key:"random",value:function(t,e){return null===t?this.uniform():(null===e&&(e=t,t=0),t+Math.floor(this.uniform()*(e-t)))}},{key:"normal",value:function(){if(null!==this._normal){var t=this._normal;return this._normal=null,t}var e=this.uniform()||Math.pow(2,-53),r=this.uniform();return this._normal=Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*r),Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*r)}},{key:"exponential",value:function(){return-Math.log(this.uniform()||Math.pow(2,-53))}},{key:"poisson",value:function(t){var e=Math.exp(-(t||1)),r=0,n=1;do{r++,n*=this.uniform()}while(n>e);return r-1}}]),t}()},function(t,e,r){"use strict";r.r(e),r.d(e,"MakeRiff",function(){return s}),r.d(e,"FastBase64_Encode",function(){return o});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=[];function o(t){for(var e,r=t.length,o="",a=0;r>2;)e=t[a]<<16|t[a+1]<<8|t[a+2],o+=i[e>>12]+i[4095&e],r-=3,a+=3;if(r>0){var u=(252&t[a])>>2,s=(3&t[a])<<4;if(r>1&&(s|=(240&t[++a])>>4),o+=n[u],o+=n[s],2===r){var l=(15&t[a++])<<2;l|=(192&t[a])>>6,o+=n[l]}1===r&&(o+="="),o+="="}return o}function a(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function u(t){return[255&t,t>>8&255]}function s(t,e,r){var n,i={audioFormat:1,bitsPerSample:e,blockAlign:0,byteRate:0,chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],numChannels:1,sampleRate:t,subChunk1Id:[102,109,116,32],subChunk1Size:16,subChunk2Id:[100,97,116,97],subChunk2Size:0};return i.byteRate=i.sampleRate*i.numChannels*i.bitsPerSample>>3,i.blockAlign=i.numChannels*i.bitsPerSample>>3,i.subChunk2Size=r.length,i.chunkSize=36+i.subChunk2Size,{dat:[],dataURI:"data:audio/wav;base64,"+o(n=i.chunkId.concat(a(i.chunkSize),i.format,i.subChunk1Id,a(i.subChunk1Size),u(i.audioFormat),u(i.numChannels),a(i.sampleRate),a(i.byteRate),u(i.blockAlign),u(i.bitsPerSample),i.subChunk2Id,a(i.subChunk2Size),r)),header:i,wav:n}}!function(){for(var t=0;t<4096;t++)i[t]=n[t>>6]+n[63&t]}()},function(t,e,r){(function(t){var n;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var o=window.CustomEvent;function a(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement}return null}function u(t){t&&t.blur&&t!==document.body&&t.blur()}function s(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1}function l(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function c(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]})}else{var e,r=!1,n=function(){r?this.downgradeModal():this.maybeHideModal(),r=!1}.bind(this),i=function(i){if(i.target===t){var o="DOMNodeRemoved";r|=i.type.substr(0,o.length)===o,window.clearTimeout(e),e=window.setTimeout(n,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(e){t.addEventListener(e,i)})}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}o&&"object"!==i(o)||((o=function(t,e){e=e||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),r}).prototype=window.Event.prototype),c.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),f.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var r=document.createEvent("MouseEvents");r.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(r),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),!t){var e=["button","input","keygen","select","textarea"].map(function(t){return t+":not([disabled])"});e.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))}u(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!f.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),r=function(t,r){return!(void 0===e[t]||e[t]===r)};if(e.opacity<1||r("zIndex","auto")||r("transform","none")||r("mixBlendMode","normal")||r("filter","none")||r("perspective","none")||"isolate"===e.isolation||"fixed"===e.position||"touch"===e.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,f.needsCentering(this.dialog_)?(f.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var e=new o("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(e)}};var f={reposition:function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,r=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,r)+"px"},isInlinePositionSetByStylesheet:function(t){for(var e=0;e<document.styleSheets.length;++e){var r=document.styleSheets[e],n=null;try{n=r.cssRules}catch(t){}if(n)for(var i=0;i<n.length;++i){var o=n[i],a=null;try{a=document.querySelectorAll(o.selectorText)}catch(t){}if(a&&s(a,t)){var u=o.style.getPropertyValue("top"),l=o.style.getPropertyValue("bottom");if(u&&"auto"!==u||l&&"auto"!==l)return!0}}}return!1},needsCentering:function(t){return"absolute"===window.getComputedStyle(t).position&&(!("auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom)&&!f.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new c(t)},registerDialog:function(t){t.showModal||f.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(e){var r=[];e.forEach(function(t){for(var e,n=0;e=t.removedNodes[n];++n)e instanceof Element&&("dialog"===e.localName&&r.push(e),r=r.concat(e.querySelectorAll("dialog")))}),r.length&&t(r)}))}};if(f.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},f.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},f.DialogManager.prototype.updateStacking=function(){for(var t,e=this.zIndexHigh_,r=0;t=this.pendingDialogStack[r];++r)t.updateZIndex(--e,--e),0===r&&(this.overlay.style.zIndex=--e);var n=this.pendingDialogStack[0];n?(n.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},f.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=a(t);){for(var e,r=0;e=this.pendingDialogStack[r];++r)if(e.dialog===t)return 0===r;t=t.parentElement}return!1},f.DialogManager.prototype.handleFocus_=function(t){if(!this.containedByTopDialog_(t.target)&&(t.preventDefault(),t.stopPropagation(),u(t.target),void 0!==this.forwardTab_)){var e=this.pendingDialogStack[0];return e.dialog.compareDocumentPosition(t.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():document.documentElement.focus()),!1}},f.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var e=new o("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(e)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},f.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach(function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()})},f.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(1===this.pendingDialogStack.unshift(t)&&this.blockDocument(),this.updateStacking(),!0)},f.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},f.dm=new f.DialogManager,f.formSubmitter=null,f.useValue=null,void 0===window.HTMLDialogElement){var h=document.createElement("form");if(h.setAttribute("method","dialog"),"dialog"!==h.method){var d=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(d){var v=d.get;d.get=function(){return l(this)?"dialog":v.call(this)};var p=d.set;d.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):p.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",d)}}document.addEventListener("click",function(t){if(f.formSubmitter=null,f.useValue=null,!t.defaultPrevented){var e=t.target;if(e&&l(e.form)){if(!("submit"===e.type&&["button","input"].indexOf(e.localName)>-1)){if("input"!==e.localName||"image"!==e.type)return;f.useValue=t.offsetX+","+t.offsetY}a(e)&&(f.formSubmitter=e)}}},!1);var y=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!l(this))return y.call(this);var t=a(this);t&&t.close()},document.addEventListener("submit",function(t){var e=t.target;if(l(e)){t.preventDefault();var r=a(e);if(r){var n=f.formSubmitter;n&&n.form===e?r.close(f.useValue||n.value):r.close(),f.formSubmitter=null}}},!0)}f.forceRegisterDialog=f.forceRegisterDialog,f.registerDialog=f.registerDialog,"amd"in r(364)?void 0===(n=function(){return f}.call(e,r,e,t))||(t.exports=n):"object"===i(t)&&"object"===i(t.exports)?t.exports=f:window.dialogPolyfill=f}()}).call(this,r(146)(t))},function(t,e,r){var n=r(365);t.exports={locale:n.locale,long:n.long,short:n.short,narrow:n.narrow,"short-time":r(370),"short-convenient":r(371),"long-time":r(372),"long-convenient":r(373),tiny:r(374),quantify:n.quantify}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,r){t.exports={locale:"en",long:r(366),short:r(367),narrow:r(368),quantify:r(369)}},function(t){t.exports={year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}}},function(t){t.exports={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}}},function(t){t.exports={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}}},function(t,e){t.exports=function(t){var e=!String(t).split(".")[1];return 1==t&&e?"one":"other"}},function(t){t.exports={year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec.",now:"now"}},function(t){t.exports={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."},now:{future:"in a moment",past:"just now"}}},function(t){t.exports={year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"},now:{future:"in a moment",past:"just now"}}},function(t){t.exports={year:{previous:"last year",current:"this year",next:"next year",past:{one:"a year ago",other:"{0} years ago"},future:{one:"in a year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"a quarter ago",other:"{0} quarters ago"},future:{one:"in a quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"a month ago",other:"{0} months ago"},future:{one:"in a month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"a week ago",other:"{0} weeks ago"},future:{one:"in a week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"a day ago",other:"{0} days ago"},future:{one:"in a day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"an hour ago",other:"{0} hours ago"},future:{one:"in an hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"a minute ago",other:"{0} minutes ago"},future:{one:"in a minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"a second ago",other:"{0} seconds ago"},future:{one:"in a second",other:"in {0} seconds"}},now:{future:"in a moment",past:"just now"}}},function(t){t.exports={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"}},,function(t,e,r){"use strict";r.r(e);r(154);var n=r(362),i="en",o={};function a(){return i}function u(t){return o[t]}function s(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).localeMatcher||"lookup";switch(e){case"lookup":case"best fit":return l(t);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(e))}}function l(t){if(u(t))return t;for(var e=t.split("-");t.length>1;)if(e.pop(),u(t=e.join("-")))return t}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=["second","minute","hour","day","week","month","quarter","year"],d=["auto","always"],v=["long","short","narrow"],p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"numeric","always"),f(this,"style","long"),f(this,"localeMatcher","lookup");var n=r.numeric,i=r.style,o=r.localeMatcher;if(n){if(d.indexOf(n)<0)throw new RangeError('Invalid "numeric" option: '.concat(n));this.numeric=n}if(i){if(v.indexOf(i)<0)throw new RangeError('Invalid "style" option: '.concat(i));this.style=i}if(o&&(this.localeMatcher=o),"string"==typeof e&&(e=[e]),e.push(a()),this.locale=t.supportedLocalesOf(e,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new TypeError("No supported locale was found");this.locale=s(this.locale,{localeMatcher:this.localeMatcher}),"undefined"!=typeof Intl&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale))}var e,r,n;return e=t,(r=[{key:"format",value:function(t,e){return this.getRule(t,e).replace("{0}",this.formatNumber(Math.abs(t)))}},{key:"formatToParts",value:function(t,e){var r=this.getRule(t,e),n=r.indexOf("{0}");if(n<0)return[{type:"literal",value:r}];var i=[];return n>0&&i.push({type:"literal",value:r.slice(0,n)}),i.push({unit:e,type:"integer",value:this.formatNumber(Math.abs(t))}),n+"{0}".length<r.length-1&&i.push({type:"literal",value:r.slice(n+"{0}".length)}),i}},{key:"getRule",value:function(t,e){if(h.indexOf(e)<0)throw new RangeError("Unknown time unit: ".concat(e,"."));var r=u(this.locale)[this.style][e];if("auto"===this.numeric)if(-2===t||-1===t){var n=r["previous".concat(-1===t?"":"-"+Math.abs(t))];if(n)return n}else if(1===t||2===t){var i=r["next".concat(1===t?"":"-"+Math.abs(t))];if(i)return i}else if(0===t&&r.current)return r.current;var o=r[t<=0?"past":"future"];if("string"==typeof o)return o;var a=u(this.locale).quantify,s=a&&a(Math.abs(t));return o[s=s||"other"]||o.other}},{key:"formatNumber",value:function(t){return this.numberFormat?this.numberFormat.format(t):String(t)}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric}}}])&&c(e.prototype,r),n&&c(e,n),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){return(g="function"==typeof Symbol&&"symbol"===y(Symbol.iterator)?function(t){return y(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":y(t)})(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}p.supportedLocalesOf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.filter(function(t){return s(t,e)})},p.addLocale=function(t){if(!t)throw new Error("No locale data passed");o[t.locale]=t},p.setDefaultLocale=function(t){i=t},p.getDefaultLocale=a;var b=function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n={},(r="cache")in(e=this)?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,r,n;return e=t,(r=[{key:"get",value:function(){for(var t=this.cache,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var i=0;i<r.length;i++){var o=r[i];if("object"!==g(t))return;t=t[o]}return t}},{key:"put",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.pop(),i=e.pop(),o=this.cache,a=0;a<e.length;a++){var u=e[a];"object"!==g(o[u])&&(o[u]={}),o=o[u]}return o[i]=n}}])&&m(e.prototype,r),n&&m(e,n),t}(),_=86400;function w(t,e){var r=t,n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}var a=o;if(a.unit===e)return a}}function S(t){return t instanceof Date?t:new Date(t)}var E=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45,factor:1,unit:"second"},{threshold:45,factor:60,unit:"minute"},{threshold:150,factor:60,granularity:5,unit:"minute"},{threshold:1350,factor:1800,unit:"half-hour"},{threshold:2550,threshold_for_minute:3150,factor:3600,unit:"hour"},{threshold:73800,factor:_,unit:"day"},{threshold:475200,factor:7*_,unit:"week"},{threshold:2116800,factor:2630016,unit:"month"},{threshold:27615168,factor:31556952,unit:"year"}];function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t){return(T="function"==typeof Symbol&&"symbol"===k(Symbol.iterator)?function(t){return k(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":k(t)})(t)}function O(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E;if(0!==(n=function(t,e){return t.filter(function(t){var r=t.unit;return!r||e.indexOf(r)>=0})}(n,r)).length){var i=function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e<function(t,e,r){var n;t&&(t.id||t.unit)&&(n=e["threshold_for_".concat(t.id||t.unit)]);void 0===n&&(n=e.threshold);"function"==typeof n&&(n=n(r));if(t&&"number"!=typeof n){var i=T(n);throw new Error('Each step of a gradation must have a threshold defined except for the first one. Got "'.concat(n,'", ').concat(i,". Step: ").concat(JSON.stringify(e)))}return n}(n[i-1],n[i],r))return i-1;if(i===n.length-1)return i;return t(e,r,n,i+1)}(t,e,n),o=n[i];if(-1!==i){if(o.granularity)if(0===Math.round(t/o.factor/o.granularity)*o.granularity&&i>0)return n[i-1];return o}}}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){return(M="function"==typeof Symbol&&"symbol"===x(Symbol.iterator)?function(t){return x(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":x(t)})(t)}function C(){return"object"===("undefined"==typeof Intl?"undefined":M(Intl))&&"function"==typeof Intl.DateTimeFormat}var R={gradation:E,flavour:["long-convenient","long"],units:["now","minute","hour","day","week","month","year"]},A=[{factor:1,unit:"now"},{threshold:.5,factor:1,unit:"second"},{threshold:59.5,factor:60,unit:"minute"},{threshold:3570,factor:3600,unit:"hour"},{threshold:84600,factor:_,unit:"day"},{threshold:561600,factor:7*_,unit:"week"},{threshold:2116800,factor:2630016,unit:"month"},{threshold:30245184,factor:31556952,unit:"year"}];function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var L={},P={gradation:[function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){I(t,e,r[e])})}return t}({},w(A,"minute"),{threshold:45}),w(A,"hour"),{threshold:84600,format:function(t,e){if(C())return L[e]||(L[e]={}),L[e].this_year||(L[e].this_year=new Intl.DateTimeFormat(e,{month:"short",day:"numeric"})),L[e].this_year.format(S(t))}},{threshold:function(t){return(new Date(new Date(t).getFullYear()+1,0).getTime()-t)/1e3},format:function(t,e){if(C())return L[e]||(L[e]={}),L[e].other||(L[e].other=new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"})),L[e].other.format(S(t))}}],flavour:["tiny","short-time","narrow","short"]},N={gradation:E,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]},D={};function j(t){return D[t]}function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t){return(F="function"==typeof Symbol&&"symbol"===B(Symbol.iterator)?function(t){return B(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":B(t)})(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var U=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e&&(e=[e]),this.locale=function(t,e){var r=t,n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}var a=o;if(e(a))return a;for(var u=a.split("-");u.length>1;)if(u.pop(),e(a=u.join("-")))return a}throw new Error("No locale data has been registered for any of the locales: ".concat(t.join(", ")))}(e.concat(p.getDefaultLocale()),j),"undefined"!=typeof Intl&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),this.relativeTimeFormatCache=new b}var e,r,n;return e=t,(r=[{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;if("string"==typeof e)switch(e){case"twitter":e=P;break;case"time":e=N;break;default:e=R}var r=function(t){if(t.constructor===Date)return{date:t,time:t.getTime()};if("number"==typeof t)return{time:t};throw new Error("Unsupported relative time formatter input: ".concat(F(t),", ").concat(t))}(t),n=r.date,i=r.time,o=this.getLocaleData(e.flavour),a=o.flavour,u=o.localeData,s=e.now||Date.now(),l=(s-i)/1e3;if(e.custom){var c=e.custom({now:s,date:n,time:i,elapsed:l,locale:this.locale});if(void 0!==c)return c}var f=function(t,e){var r=Object.keys(t);e&&(r=e.filter(function(t){return r.indexOf(t)>=0}));(!e||e.indexOf("now")>=0)&&r.indexOf("now")<0&&t.second.current&&r.unshift("now");return r}(u,e.units);if(0===f.length)return console.error('Units "'.concat(f.join(", "),'" were not found in locale data for "').concat(this.locale,'".')),"";var h=O(Math.abs(l),s,f,e.gradation);if(!h)return"";if(h.format)return h.format(n||i,this.locale);var d=h.unit,v=h.factor,p=h.granularity,y=Math.abs(l)/v;if(p&&(y=Math.round(y/p)*p),"now"===d)return function(t,e){if(t.now)return"string"==typeof t.now?t.now:e<=0?t.now.past:t.now.future;return t.second.current}(u,-1*Math.sign(l));switch(a){case"long":case"short":case"narrow":return this.getFormatter(a).format(-1*Math.sign(l)*Math.round(y),d);default:return this.formatValue(-1*Math.sign(l)*Math.round(y),d,u)}}},{key:"formatValue",value:function(t,e,r){return this.getRule(t,e,r).replace("{0}",this.formatNumber(Math.abs(t)))}},{key:"getRule",value:function(t,e,r){var n=r[e];if("string"==typeof n)return n;var i=n[t<=0?"past":"future"]||n;if("string"==typeof i)return i;var o=j(this.locale).quantify,a=o&&o(Math.abs(t));return i[a=a||"other"]||i.other}},{key:"formatNumber",value:function(t){return this.numberFormat?this.numberFormat.format(t):String(t)}},{key:"getFormatter",value:function(t){return this.relativeTimeFormatCache.get(this.locale,t)||this.relativeTimeFormatCache.put(this.locale,t,new p(this.locale,{style:t}))}},{key:"getLocaleData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=j(this.locale);"string"==typeof t&&(t=[t]);var r=t=t.concat("long"),n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}var a=o;if(e[a])return{flavour:a,localeData:e[a]}}}}])&&G(e.prototype,r),n&&G(e,n),t}();U.getDefaultLocale=p.getDefaultLocale,U.setDefaultLocale=p.setDefaultLocale,U.addLocale=function(t){!function(t){if(!t)throw new Error("[javascript-time-ago] No locale data passed.");D[t.locale]=t}(t),p.addLocale(t)},U.locale=U.addLocale;var W=r(363),H=r.n(W),q=r(16),z=r(355),V=r(0);function K(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Y(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function X(t){var e=document.querySelector(t);if(!e)throw new Error('BUG: Could not find "'.concat(t,'" in the page'));return e}window.addEventListener("load",function(){var t="puzzlescriptGameProgress",e=X("#theGame"),r=X("#gameSelection"),i=X("#loadingIndicator"),o=X("#messageDialog"),a=X("#messageDialogText"),u=X("#messageDialogClose");n.registerDialog(o),U.addLocale(H.a);var s=new U("en-US"),l="";if(!r)throw new Error("BUG: Could not find game selection dropdown");if(!i)throw new Error("BUG: Could not find loading indicator");u.addEventListener("click",function(){o.close()});var c={onMessage:function(){var t,e=(t=regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(V.j)(10,function(){return!h.inputWatcher.isSomethingPressed()});case 2:return a.textContent=e,o.showModal(),u.focus(),t.next=7,Object(V.j)(10,function(){return!o.open});case 7:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){Y(o,n,i,a,u,"next",t)}function u(t){Y(o,n,i,a,u,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}(),onLevelChange:function(e){var n,o,a;i.classList.add("hidden"),r.removeAttribute("disabled"),n=l,o=e,(a=m())[n]=a[n]||{},a[n].currentLevelNum=o,a[n].completedLevelAt=Date.now(),a[n].lastPlayedAt=Date.now(),window.localStorage.setItem(t,JSON.stringify(a)),ga&&ga("send","event","game","level",n,o),b(!1)},onGameChange:function(e){var r,n,i,o;r=l,n=e.levels,i=e.title,(o=m())[r]=o[r]||{},o[r].levelMaps=n.map(function(t){return"LEVEL_MAP"===t.type}),o[r].title=i,o[r].lastPlayedAt=Date.now(),window.localStorage.setItem(t,JSON.stringify(o))}};if(b(!0),!e)throw new Error("BUG: Could not find table on the page");var f=new Worker("./puzzlescript-webworker.js"),h=new z.a(f,e,c);function d(){i.classList.remove("hidden"),r.setAttribute("disabled","disabled"),(l=r.value)&&fetch("./games/".concat(l,"/script.txt"),{redirect:"follow"}).then(function(t){if(t.ok)return t.text().then(function(t){var e,r;h.setGame(t,(e=l,((r=m()[e])?r.currentLevelNum:null)||0))});alert("Problem finding game file. Please choose another one"),i.classList.add("hidden"),r.removeAttribute("disabled")},function(t){alert("Could not download the game. Are you connected to the internet?"),console.error(t),i.classList.add("hidden"),r.removeAttribute("disabled")})}h.inputWatcher&&setInterval(function(){h.inputWatcher.gamepad.isRecognized()?(v.classList.contains("enabled")||ga&&ga("send","event","gamepad","recognized"),v.classList.add("enabled"),p.classList.add("hidden"),y.classList.remove("hidden"),g.classList.add("hidden"),o.open&&h.inputWatcher.gamepad.isButtonPressed(q.a.CLUSTER_BOTTOM)&&u.click()):h.inputWatcher.gamepad.isSomethingConnected()?(g.classList.contains("hidden")&&ga&&ga("send","event","gamepad","something-connected"),v.classList.remove("enabled"),p.classList.add("hidden"),y.classList.add("hidden"),g.classList.remove("hidden")):(v.classList.remove("enabled"),p.classList.remove("hidden"),y.classList.add("hidden"),g.classList.add("hidden"))},200),d(),r.addEventListener("change",function(){return d()});var v=X("#gamepadIcon"),p=X("#gamepadDisabled"),y=X("#gamepadRecognized"),g=X("#gamepadNotRecognized");function m(){var e=window.localStorage.getItem(t);return e?JSON.parse(e):{_version:1}}function b(t){var e,n,i=m(),o=(e="option",n=[],r.querySelectorAll(e).forEach(function(t){return n.push(t)}),n),a=!0,u=!1,l=void 0;try{for(var c,f=o[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=c.value,d=h.getAttribute("value");if(d){var v=i[d];if(v){var p=v.levelMaps.slice(0,v.currentLevelNum).filter(function(t){return t}).length,y=v.levelMaps.filter(function(t){return t}).length,g=Math.floor(100*p/y);h.setAttribute("data-percent-complete","".concat(g)),h.setAttribute("data-last-played-at","".concat(v.lastPlayedAt)),h.textContent="".concat(v.title," (").concat(g,"% ").concat(s.format(v.lastPlayedAt),")")}else d&&(h.setAttribute("data-percent-complete","0"),h.setAttribute("data-last-played-at","0"))}}}catch(t){u=!0,l=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw l}}var b=r.value,w=[],S=[],E=[],k=[],T=Date.now()-2592e6,O=!0,x=!1,M=void 0;try{for(var C,R=o[Symbol.iterator]();!(O=(C=R.next()).done);O=!0){var A=C.value,I=Number.parseInt(A.getAttribute("data-percent-complete")||"0",10),L=Number.parseInt(A.getAttribute("data-last-played-at")||"0",10);A.getAttribute("value")&&(100===I?k.push(A):L?L<T?E.push(A):w.push(A):S.push(A))}}catch(t){x=!0,M=t}finally{try{O||null==R.return||R.return()}finally{if(x)throw M}}var P=function(t,e){var r=Number.parseInt(t.getAttribute("data-last-played-at")||"0",10);return Number.parseInt(e.getAttribute("data-last-played-at")||"0",10)-r};w.sort(P),E.sort(P),k.sort(P),S.sort(function(t,e){return Number.parseInt(t.getAttribute("data-original-index")||"0",10)-Number.parseInt(e.getAttribute("data-original-index")||"0",10)}),r.value="";var N=!0,D=!1,j=void 0;try{for(var B,F=o[Symbol.iterator]();!(N=(B=F.next()).done);N=!0){var G=B.value;r.removeChild(G)}}catch(t){D=!0,j=t}finally{try{N||null==F.return||F.return()}finally{if(D)throw j}}w.length>0&&w.unshift(_("Continue playing")),S.length>0&&S.unshift(_("New")),E.length>0&&E.unshift(_("Uncompleted")),k.length>0&&k.unshift(_("Completed"));var U=[].concat(w,S,E,k);if(r.append.apply(r,K(U)),r.value=b,t){var W=U.find(function(t){return t.hasAttribute("value")});if(W){r.selectedIndex=U.indexOf(W);var H=W.getAttribute("value");H&&(r.value=H)}}}function _(t){var e=document.createElement("option");return e.setAttribute("disabled","disabled"),e.textContent="--- ".concat(t),e}r.querySelectorAll("option").forEach(function(t,e){t.setAttribute("data-original-index","".concat(e))});var w=X("#disableCss");function S(t){t||ga&&ga("send","event","accessibility","toggle",w.checked?"show":"hide"),w.checked?e.classList.add("ps-ui-disabled"):e.classList.remove("ps-ui-disabled"),e.focus()}w.addEventListener("change",function(){return S(!1)}),S(!0);var E=X("#btnAdd"),k=null;window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),k=t,E.classList.remove("hidden")}),E.addEventListener("click",function(t){E.classList.add("hidden"),k&&k.prompt(),k&&k.userChoice.then(function(){k=null})})})}]);
//# sourceMappingURL=pwa-app.js.map